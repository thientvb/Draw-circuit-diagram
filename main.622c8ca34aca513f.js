"use strict";(self.webpackChunkcircuit_diagram=self.webpackChunkcircuit_diagram||[]).push([[179],{292:(Gh,X0,$m)=>{function Sd(s){return"function"==typeof s}let Ct=!1;const Cs={Promise:void 0,set useDeprecatedSynchronousErrorHandling(s){if(s){const r=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+r.stack)}else Ct&&console.log("RxJS: Back to a better error behavior. Thank you. <3");Ct=s},get useDeprecatedSynchronousErrorHandling(){return Ct}};function Ed(s){setTimeout(()=>{throw s},0)}const Wm={closed:!0,next(s){},error(s){if(Cs.useDeprecatedSynchronousErrorHandling)throw s;Ed(s)},complete(){}},$0=Array.isArray||(s=>s&&"number"==typeof s.length);function Km(s){return null!==s&&"object"==typeof s}const _p=(()=>{function s(r){return Error.call(this),this.message=r?`${r.length} errors occurred during unsubscription:\n${r.map((o,l)=>`${l+1}) ${o.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=r,this}return s.prototype=Object.create(Error.prototype),s})();class Wn{constructor(r){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,r&&(this._ctorUnsubscribe=!0,this._unsubscribe=r)}unsubscribe(){let r;if(this.closed)return;let{_parentOrParents:o,_ctorUnsubscribe:l,_unsubscribe:c,_subscriptions:p}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,o instanceof Wn)o.remove(this);else if(null!==o)for(let v=0;v<o.length;++v)o[v].remove(this);if(Sd(c)){l&&(this._unsubscribe=void 0);try{c.call(this)}catch(v){r=v instanceof _p?dM(v.errors):[v]}}if($0(p)){let v=-1,w=p.length;for(;++v<w;){const C=p[v];if(Km(C))try{C.unsubscribe()}catch(E){r=r||[],E instanceof _p?r=r.concat(dM(E.errors)):r.push(E)}}}if(r)throw new _p(r)}add(r){let o=r;if(!r)return Wn.EMPTY;switch(typeof r){case"function":o=new Wn(r);case"object":if(o===this||o.closed||"function"!=typeof o.unsubscribe)return o;if(this.closed)return o.unsubscribe(),o;if(!(o instanceof Wn)){const p=o;o=new Wn,o._subscriptions=[p]}break;default:throw new Error("unrecognized teardown "+r+" added to Subscription.")}let{_parentOrParents:l}=o;if(null===l)o._parentOrParents=this;else if(l instanceof Wn){if(l===this)return o;o._parentOrParents=[l,this]}else{if(-1!==l.indexOf(this))return o;l.push(this)}const c=this._subscriptions;return null===c?this._subscriptions=[o]:c.push(o),o}remove(r){const o=this._subscriptions;if(o){const l=o.indexOf(r);-1!==l&&o.splice(l,1)}}}var s;function dM(s){return s.reduce((r,o)=>r.concat(o instanceof _p?o.errors:o),[])}Wn.EMPTY=((s=new Wn).closed=!0,s);const Cp="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class Yi extends Wn{constructor(r,o,l){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=Wm;break;case 1:if(!r){this.destination=Wm;break}if("object"==typeof r){r instanceof Yi?(this.syncErrorThrowable=r.syncErrorThrowable,this.destination=r,r.add(this)):(this.syncErrorThrowable=!0,this.destination=new fM(this,r));break}default:this.syncErrorThrowable=!0,this.destination=new fM(this,r,o,l)}}[Cp](){return this}static create(r,o,l){const c=new Yi(r,o,l);return c.syncErrorThrowable=!1,c}next(r){this.isStopped||this._next(r)}error(r){this.isStopped||(this.isStopped=!0,this._error(r))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(r){this.destination.next(r)}_error(r){this.destination.error(r),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:r}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=r,this}}class fM extends Yi{constructor(r,o,l,c){super(),this._parentSubscriber=r;let p,v=this;Sd(o)?p=o:o&&(p=o.next,l=o.error,c=o.complete,o!==Wm&&(v=Object.create(o),Sd(v.unsubscribe)&&this.add(v.unsubscribe.bind(v)),v.unsubscribe=this.unsubscribe.bind(this))),this._context=v,this._next=p,this._error=l,this._complete=c}next(r){if(!this.isStopped&&this._next){const{_parentSubscriber:o}=this;Cs.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable?this.__tryOrSetError(o,this._next,r)&&this.unsubscribe():this.__tryOrUnsub(this._next,r)}}error(r){if(!this.isStopped){const{_parentSubscriber:o}=this,{useDeprecatedSynchronousErrorHandling:l}=Cs;if(this._error)l&&o.syncErrorThrowable?(this.__tryOrSetError(o,this._error,r),this.unsubscribe()):(this.__tryOrUnsub(this._error,r),this.unsubscribe());else if(o.syncErrorThrowable)l?(o.syncErrorValue=r,o.syncErrorThrown=!0):Ed(r),this.unsubscribe();else{if(this.unsubscribe(),l)throw r;Ed(r)}}}complete(){if(!this.isStopped){const{_parentSubscriber:r}=this;if(this._complete){const o=()=>this._complete.call(this._context);Cs.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable?(this.__tryOrSetError(r,o),this.unsubscribe()):(this.__tryOrUnsub(o),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(r,o){try{r.call(this._context,o)}catch(l){if(this.unsubscribe(),Cs.useDeprecatedSynchronousErrorHandling)throw l;Ed(l)}}__tryOrSetError(r,o,l){if(!Cs.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{o.call(this._context,l)}catch(c){return Cs.useDeprecatedSynchronousErrorHandling?(r.syncErrorValue=c,r.syncErrorThrown=!0,!0):(Ed(c),!0)}return!1}_unsubscribe(){const{_parentSubscriber:r}=this;this._context=null,this._parentSubscriber=null,r.unsubscribe()}}const Dp="function"==typeof Symbol&&Symbol.observable||"@@observable";function pM(s){return s}let bi=(()=>{class s{constructor(o){this._isScalar=!1,o&&(this._subscribe=o)}lift(o){const l=new s;return l.source=this,l.operator=o,l}subscribe(o,l,c){const{operator:p}=this,v=function DD(s,r,o){if(s){if(s instanceof Yi)return s;if(s[Cp])return s[Cp]()}return s||r||o?new Yi(s,r,o):new Yi(Wm)}(o,l,c);if(v.add(p?p.call(v,this.source):this.source||Cs.useDeprecatedSynchronousErrorHandling&&!v.syncErrorThrowable?this._subscribe(v):this._trySubscribe(v)),Cs.useDeprecatedSynchronousErrorHandling&&v.syncErrorThrowable&&(v.syncErrorThrowable=!1,v.syncErrorThrown))throw v.syncErrorValue;return v}_trySubscribe(o){try{return this._subscribe(o)}catch(l){Cs.useDeprecatedSynchronousErrorHandling&&(o.syncErrorThrown=!0,o.syncErrorValue=l),function CD(s){for(;s;){const{closed:r,destination:o,isStopped:l}=s;if(r||l)return!1;s=o&&o instanceof Yi?o:null}return!0}(o)?o.error(l):console.warn(l)}}forEach(o,l){return new(l=mM(l))((c,p)=>{let v;v=this.subscribe(w=>{try{o(w)}catch(C){p(C),v&&v.unsubscribe()}},p,c)})}_subscribe(o){const{source:l}=this;return l&&l.subscribe(o)}[Dp](){return this}pipe(...o){return 0===o.length?this:function gM(s){return 0===s.length?pM:1===s.length?s[0]:function(o){return s.reduce((l,c)=>c(l),o)}}(o)(this)}toPromise(o){return new(o=mM(o))((l,c)=>{let p;this.subscribe(v=>p=v,v=>c(v),()=>l(p))})}}return s.create=r=>new s(r),s})();function mM(s){if(s||(s=Cs.Promise||Promise),!s)throw new Error("no Promise impl found");return s}const zh=(()=>{function s(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return s.prototype=Object.create(Error.prototype),s})();class ED extends Wn{constructor(r,o){super(),this.subject=r,this.subscriber=o,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const r=this.subject,o=r.observers;if(this.subject=null,!o||0===o.length||r.isStopped||r.closed)return;const l=o.indexOf(this.subscriber);-1!==l&&o.splice(l,1)}}class W0 extends Yi{constructor(r){super(r),this.destination=r}}let Yh=(()=>{class s extends bi{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Cp](){return new W0(this)}lift(o){const l=new yM(this,this);return l.operator=o,l}next(o){if(this.closed)throw new zh;if(!this.isStopped){const{observers:l}=this,c=l.length,p=l.slice();for(let v=0;v<c;v++)p[v].next(o)}}error(o){if(this.closed)throw new zh;this.hasError=!0,this.thrownError=o,this.isStopped=!0;const{observers:l}=this,c=l.length,p=l.slice();for(let v=0;v<c;v++)p[v].error(o);this.observers.length=0}complete(){if(this.closed)throw new zh;this.isStopped=!0;const{observers:o}=this,l=o.length,c=o.slice();for(let p=0;p<l;p++)c[p].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(o){if(this.closed)throw new zh;return super._trySubscribe(o)}_subscribe(o){if(this.closed)throw new zh;return this.hasError?(o.error(this.thrownError),Wn.EMPTY):this.isStopped?(o.complete(),Wn.EMPTY):(this.observers.push(o),new ED(this,o))}asObservable(){const o=new bi;return o.source=this,o}}return s.create=(r,o)=>new yM(r,o),s})();class yM extends Yh{constructor(r,o){super(),this.destination=r,this.source=o}next(r){const{destination:o}=this;o&&o.next&&o.next(r)}error(r){const{destination:o}=this;o&&o.error&&this.destination.error(r)}complete(){const{destination:r}=this;r&&r.complete&&this.destination.complete()}_subscribe(r){const{source:o}=this;return o?this.source.subscribe(r):Wn.EMPTY}}function vM(s){return s&&"function"==typeof s.schedule}function Ds(s,r){return function(l){if("function"!=typeof s)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return l.lift(new TD(s,r))}}class TD{constructor(r,o){this.project=r,this.thisArg=o}call(r,o){return o.subscribe(new xM(r,this.project,this.thisArg))}}class xM extends Yi{constructor(r,o,l){super(r),this.project=o,this.count=0,this.thisArg=l||this}_next(r){let o;try{o=this.project.call(this.thisArg,r,this.count++)}catch(l){return void this.destination.error(l)}this.destination.next(o)}}const K0=s=>r=>{for(let o=0,l=s.length;o<l&&!r.closed;o++)r.next(s[o]);r.complete()},Zm=function ND(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),wM=s=>s&&"number"==typeof s.length&&"function"!=typeof s;function MM(s){return!!s&&"function"!=typeof s.subscribe&&"function"==typeof s.then}const _M=s=>{if(s&&"function"==typeof s[Dp])return(s=>r=>{const o=s[Dp]();if("function"!=typeof o.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return o.subscribe(r)})(s);if(wM(s))return K0(s);if(MM(s))return(s=>r=>(s.then(o=>{r.closed||(r.next(o),r.complete())},o=>r.error(o)).then(null,Ed),r))(s);if(s&&"function"==typeof s[Zm])return(s=>r=>{const o=s[Zm]();for(;;){let l;try{l=o.next()}catch(c){return r.error(c),r}if(l.done){r.complete();break}if(r.next(l.value),r.closed)break}return"function"==typeof o.return&&r.add(()=>{o.return&&o.return()}),r})(s);{const o=`You provided ${Km(s)?"an invalid object":`'${s}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(o)}};function Z0(s,r){return new bi(o=>{const l=new Wn;let c=0;return l.add(r.schedule(function(){c!==s.length?(o.next(s[c++]),o.closed||l.add(this.schedule())):o.complete()})),l})}function J0(s,r){return r?function SM(s,r){if(null!=s){if(function CM(s){return s&&"function"==typeof s[Dp]}(s))return function ID(s,r){return new bi(o=>{const l=new Wn;return l.add(r.schedule(()=>{const c=s[Dp]();l.add(c.subscribe({next(p){l.add(r.schedule(()=>o.next(p)))},error(p){l.add(r.schedule(()=>o.error(p)))},complete(){l.add(r.schedule(()=>o.complete()))}}))})),l})}(s,r);if(MM(s))return function bD(s,r){return new bi(o=>{const l=new Wn;return l.add(r.schedule(()=>s.then(c=>{l.add(r.schedule(()=>{o.next(c),l.add(r.schedule(()=>o.complete()))}))},c=>{l.add(r.schedule(()=>o.error(c)))}))),l})}(s,r);if(wM(s))return Z0(s,r);if(function DM(s){return s&&"function"==typeof s[Zm]}(s)||"string"==typeof s)return function OD(s,r){if(!s)throw new Error("Iterable cannot be null");return new bi(o=>{const l=new Wn;let c;return l.add(()=>{c&&"function"==typeof c.return&&c.return()}),l.add(r.schedule(()=>{c=s[Zm](),l.add(r.schedule(function(){if(o.closed)return;let p,v;try{const w=c.next();p=w.value,v=w.done}catch(w){return void o.error(w)}v?o.complete():(o.next(p),this.schedule())}))})),l})}(s,r)}throw new TypeError((null!==s&&typeof s||s)+" is not observable")}(s,r):s instanceof bi?s:new bi(_M(s))}class Jm extends Yi{constructor(r){super(),this.parent=r}_next(r){this.parent.notifyNext(r)}_error(r){this.parent.notifyError(r),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Q0 extends Yi{notifyNext(r){this.destination.next(r)}notifyError(r){this.destination.error(r)}notifyComplete(){this.destination.complete()}}function Qm(s,r){if(r.closed)return;if(s instanceof bi)return s.subscribe(r);let o;try{o=_M(s)(r)}catch(l){r.error(l)}return o}function q0(s,r,o=Number.POSITIVE_INFINITY){return"function"==typeof r?l=>l.pipe(q0((c,p)=>J0(s(c,p)).pipe(Ds((v,w)=>r(c,v,p,w))),o)):("number"==typeof r&&(o=r),l=>l.lift(new RD(s,o)))}class RD{constructor(r,o=Number.POSITIVE_INFINITY){this.project=r,this.concurrent=o}call(r,o){return o.subscribe(new EM(r,this.project,this.concurrent))}}class EM extends Q0{constructor(r,o,l=Number.POSITIVE_INFINITY){super(r),this.project=o,this.concurrent=l,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(r){this.active<this.concurrent?this._tryNext(r):this.buffer.push(r)}_tryNext(r){let o;const l=this.index++;try{o=this.project(r,l)}catch(c){return void this.destination.error(c)}this.active++,this._innerSub(o)}_innerSub(r){const o=new Jm(this),l=this.destination;l.add(o);const c=Qm(r,o);c!==o&&l.add(c)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(r){this.destination.next(r)}notifyComplete(){const r=this.buffer;this.active--,r.length>0?this._next(r.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function tx(s,r){return r?Z0(s,r):new bi(K0(s))}function NM(){return function(r){return r.lift(new VD(r))}}class VD{constructor(r){this.connectable=r}call(r,o){const{connectable:l}=this;l._refCount++;const c=new BD(r,l),p=o.subscribe(c);return c.closed||(c.connection=l.connect()),p}}class BD extends Yi{constructor(r,o){super(r),this.connectable=o}_unsubscribe(){const{connectable:r}=this;if(!r)return void(this.connection=null);this.connectable=null;const o=r._refCount;if(o<=0)return void(this.connection=null);if(r._refCount=o-1,o>1)return void(this.connection=null);const{connection:l}=this,c=r._connection;this.connection=null,c&&(!l||c===l)&&c.unsubscribe()}}class UD extends bi{constructor(r,o){super(),this.source=r,this.subjectFactory=o,this._refCount=0,this._isComplete=!1}_subscribe(r){return this.getSubject().subscribe(r)}getSubject(){const r=this._subject;return(!r||r.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let r=this._connection;return r||(this._isComplete=!1,r=this._connection=new Wn,r.add(this.source.subscribe(new HD(this.getSubject(),this))),r.closed&&(this._connection=null,r=Wn.EMPTY)),r}refCount(){return NM()(this)}}const PM=(()=>{const s=UD.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:s._subscribe},_isComplete:{value:s._isComplete,writable:!0},getSubject:{value:s.getSubject},connect:{value:s.connect},refCount:{value:s.refCount}}})();class HD extends W0{constructor(r,o){super(r),this.connectable=o}_error(r){this._unsubscribe(),super._error(r)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const r=this.connectable;if(r){this.connectable=null;const o=r._connection;r._refCount=0,r._subject=null,r._connection=null,o&&o.unsubscribe()}}}class YD{constructor(r,o){this.subjectFactory=r,this.selector=o}call(r,o){const{selector:l}=this,c=this.subjectFactory(),p=l(c).subscribe(r);return p.add(o.subscribe(c)),p}}function XD(){return new Yh}function AM(){return s=>NM()(function zD(s,r){return function(l){let c;if(c="function"==typeof s?s:function(){return s},"function"==typeof r)return l.lift(new YD(c,r));const p=Object.create(l,PM);return p.source=l,p.subjectFactory=c,p}}(XD)(s))}function kn(s){for(let r in s)if(s[r]===kn)return r;throw Error("Could not find renamed property on target object.")}function ex(s,r){for(const o in r)r.hasOwnProperty(o)&&!s.hasOwnProperty(o)&&(s[o]=r[o])}function yn(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(yn).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const r=s.toString();if(null==r)return""+r;const o=r.indexOf("\n");return-1===o?r:r.substring(0,o)}function nx(s,r){return null==s||""===s?null===r?"":r:null==r||""===r?s:s+" "+r}const $D=kn({__forward_ref__:kn});function Mn(s){return s.__forward_ref__=Mn,s.toString=function(){return yn(this())},s}function Ne(s){return function IM(s){return"function"==typeof s&&s.hasOwnProperty($D)&&s.__forward_ref__===Mn}(s)?s():s}class Vt extends Error{constructor(r,o){super(function ix(s,r){return`NG0${Math.abs(s)}${r?": "+r:""}`}(r,o)),this.code=r}}function D(s){return"string"==typeof s?s:null==s?"":String(s)}function wr(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():D(s)}function Xh(s,r){const o=r?` in ${r}`:"";throw new Vt(-201,`No provider for ${wr(s)} found${o}`)}function Bn(s,r){null==s&&function z(s,r,o,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${o} ${l} ${r} <=Actual]`))}(r,s,null,"!=")}function Et(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Xi(s){return{providers:s.providers||[],imports:s.imports||[]}}function Tl(s){return kl(s,sr)||kl(s,co)}function kl(s,r){return s.hasOwnProperty(r)?s[r]:null}function aa(s){return s&&(s.hasOwnProperty(Sp)||s.hasOwnProperty($t))?s[Sp]:null}const sr=kn({\u0275prov:kn}),Sp=kn({\u0275inj:kn}),co=kn({ngInjectableDef:kn}),$t=kn({ngInjectorDef:kn});var _e=(()=>((_e=_e||{})[_e.Default=0]="Default",_e[_e.Host=1]="Host",_e[_e.Self=2]="Self",_e[_e.SkipSelf=4]="SkipSelf",_e[_e.Optional=8]="Optional",_e))();let ty;function la(s){const r=ty;return ty=s,r}function J(s,r,o){const l=Tl(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:o&_e.Optional?null:void 0!==r?r:void Xh(yn(s),"Injector")}function Es(s){return{toString:s}.toString()}var Nn=(()=>((Nn=Nn||{})[Nn.OnPush=0]="OnPush",Nn[Nn.Default=1]="Default",Nn))(),Un=(()=>(function(s){s[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom"}(Un||(Un={})),Un))();const Cn="undefined"!=typeof globalThis&&globalThis,vn="undefined"!=typeof window&&window,fi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,ae=Cn||"undefined"!=typeof global&&global||vn||fi,Zo={},Jt=[],Jo=kn({\u0275cmp:kn}),Hn=kn({\u0275dir:kn}),ke=kn({\u0275pipe:kn}),qn=kn({\u0275mod:kn}),Po=kn({\u0275fac:kn}),Pn=kn({__NG_ELEMENT_ID__:kn});let xt=0;function N(s){return Es(()=>{const o={},l={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Nn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||Jt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Un.Emulated,id:"c",styles:s.styles||Jt,_:null,setInput:null,schemas:s.schemas||null,tView:null},c=s.directives,p=s.features,v=s.pipes;return l.id+=xt++,l.inputs=oy(s.inputs,o),l.outputs=oy(s.outputs),p&&p.forEach(w=>w(l)),l.directiveDefs=c?()=>("function"==typeof c?c():c).map(ny):null,l.pipeDefs=v?()=>("function"==typeof v?v():v).map(iy):null,l})}function ny(s){return Re(s)||function ar(s){return s[Hn]||null}(s)}function iy(s){return function Xa(s){return s[ke]||null}(s)}const ry={};function Lr(s){return Es(()=>{const r={type:s.type,bootstrap:s.bootstrap||Jt,declarations:s.declarations||Jt,imports:s.imports||Jt,exports:s.exports||Jt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(ry[s.id]=s.type),r})}function oy(s,r){if(null==s)return Zo;const o={};for(const l in s)if(s.hasOwnProperty(l)){let c=s[l],p=c;Array.isArray(c)&&(p=c[1],c=c[0]),o[c]=l,r&&(r[c]=p)}return o}const he=N;function Re(s){return s[Jo]||null}function fo(s,r){const o=s[qn]||null;if(!o&&!0===r)throw new Error(`Type ${yn(s)} does not have '\u0275mod' property.`);return o}function Ts(s){return Array.isArray(s)&&"object"==typeof s[1]}function ct(s){return Array.isArray(s)&&!0===s[1]}function An(s){return 0!=(8&s.flags)}function zn(s){return 2==(2&s.flags)}function go(s){return 1==(1&s.flags)}function Rr(s){return null!==s.template}function Td(s){return 0!=(512&s[2])}function bl(s,r){return s.hasOwnProperty(Po)?s[Po]:null}class sy{constructor(r,o,l){this.previousValue=r,this.currentValue=o,this.firstChange=l}isFirstChange(){return this.firstChange}}function Cr(s){return s.type.prototype.ngOnChanges&&(s.setInput=Ki),jr}function jr(){const s=kp(this),r=null==s?void 0:s.current;if(r){const o=s.previous;if(o===Zo)s.previous=r;else for(let l in r)o[l]=r[l];s.current=null,this.ngOnChanges(r)}}function Ki(s,r,o,l){const c=kp(s)||function ay(s,r){return s[Dr]=r}(s,{previous:Zo,current:null}),p=c.current||(c.current={}),v=c.previous,w=this.declaredInputs[o],C=v[w];p[w]=new sy(C&&C.currentValue,r,v===Zo),s[l]=r}const Dr="__ngSimpleChanges__";function kp(s){return s[Dr]||null}let Ap;function ei(s){return!!s.listen}const hy={createRenderer:(s,r)=>function Od(){return void 0!==Ap?Ap:"undefined"!=typeof document?document:void 0}()};function De(s){for(;Array.isArray(s);)s=s[0];return s}function Ns(s,r){return De(r[s])}function In(s,r){return De(r[s.index])}function Ji(s,r){return s.data[r]}function we(s,r){const o=r[s];return Ts(o)?o:o[0]}function Qr(s){return 4==(4&s[2])}function Qi(s){return 128==(128&s[2])}function le(s,r){return null==r?null:s[r]}function qr(s){s[18]=0}function ve(s,r){s[5]+=r;let o=s,l=s[3];for(;null!==l&&(1===r&&1===o[5]||-1===r&&0===o[5]);)l[5]+=r,o=l,l=l[3]}const Pt={lFrame:Qh(null),bindingsEnabled:!0};function wx(){return Pt.bindingsEnabled}function pt(){return Pt.lFrame.lView}function Oe(){return Pt.lFrame.tView}function Li(){let s=Fd();for(;null!==s&&64===s.type;)s=s.parent;return s}function Fd(){return Pt.lFrame.currentTNode}function ne(s,r){const o=Pt.lFrame;o.currentTNode=s,o.isParent=r}function Wa(){return Pt.lFrame.isParent}function Ld(){Pt.lFrame.isParent=!1}function Ol(){return Pt.lFrame.bindingIndex++}function Ex(s,r){const o=Pt.lFrame;o.bindingIndex=o.bindingRootIndex=s,fy(r)}function fy(s){Pt.lFrame.currentDirectiveIndex=s}function kx(){return Pt.lFrame.currentQueryIndex}function bp(s){Pt.lFrame.currentQueryIndex=s}function On(s){const r=s[1];return 2===r.type?r.declTNode:1===r.type?s[6]:null}function Ka(s,r,o){if(o&_e.SkipSelf){let c=r,p=s;for(;!(c=c.parent,null!==c||o&_e.Host||(c=On(p),null===c||(p=p[15],10&c.type))););if(null===c)return!1;r=c,s=p}const l=Pt.lFrame=Op();return l.currentTNode=r,l.lView=s,!0}function Sn(s){const r=Op(),o=s[1];Pt.lFrame=r,r.currentTNode=o.firstChild,r.lView=s,r.tView=o,r.contextLView=s,r.bindingIndex=o.bindingStartIndex,r.inI18n=!1}function Op(){const s=Pt.lFrame,r=null===s?null:s.child;return null===r?Qh(s):r}function Qh(s){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=r),r}function gy(){const s=Pt.lFrame;return Pt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const my=gy;function ni(){const s=gy();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Br(){return Pt.lFrame.selectedIndex}function ii(s){Pt.lFrame.selectedIndex=s}function ri(){const s=Pt.lFrame;return Ji(s.tView,s.selectedIndex)}function Kn(s,r){for(let o=r.directiveStart,l=r.directiveEnd;o<l;o++){const p=s.data[o].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:C,ngAfterViewChecked:E,ngOnDestroy:P}=p;v&&(s.contentHooks||(s.contentHooks=[])).push(-o,v),w&&((s.contentHooks||(s.contentHooks=[])).push(o,w),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(o,w)),C&&(s.viewHooks||(s.viewHooks=[])).push(-o,C),E&&((s.viewHooks||(s.viewHooks=[])).push(o,E),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(o,E)),null!=P&&(s.destroyHooks||(s.destroyHooks=[])).push(o,P)}}function Ri(s,r,o){Ja(s,r,3,o)}function Za(s,r,o,l){(3&s[2])===o&&Ja(s,r,o,l)}function ts(s,r){let o=s[2];(3&o)===r&&(o&=2047,o+=1,s[2]=o)}function Ja(s,r,o,l){const p=null!=l?l:-1,v=r.length-1;let w=0;for(let C=void 0!==l?65535&s[18]:0;C<v;C++)if("number"==typeof r[C+1]){if(w=r[C],null!=l&&w>=l)break}else r[C]<0&&(s[18]+=65536),(w<p||-1==p)&&(es(s,o,r,C),s[18]=(4294901760&s[18])+C+2),C++}function es(s,r,o,l){const c=o[l]<0,p=o[l+1],w=s[c?-o[l]:o[l]];if(c){if(s[2]>>11<s[18]>>16&&(3&s[2])===r){s[2]+=2048;try{p.call(w)}finally{}}}else try{p.call(w)}finally{}}class mo{constructor(r,o,l){this.factory=r,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=l}}function nc(s,r,o){const l=ei(s);let c=0;for(;c<o.length;){const p=o[c];if("number"==typeof p){if(0!==p)break;c++;const v=o[c++],w=o[c++],C=o[c++];l?s.setAttribute(r,w,C,v):r.setAttributeNS(v,w,C)}else{const v=p,w=o[++c];Fu(v)?l&&s.setProperty(r,v,w):l?s.setAttribute(r,v,w):r.setAttribute(v,w),c++}}return c}function ic(s){return 3===s||4===s||6===s}function Fu(s){return 64===s.charCodeAt(0)}function se(s,r){if(null!==r&&0!==r.length)if(null===s||0===s.length)s=r.slice();else{let o=-1;for(let l=0;l<r.length;l++){const c=r[l];"number"==typeof c?o=c:0===o||Ix(s,o,c,null,-1===o||2===o?r[++l]:null)}}return s}function Ix(s,r,o,l,c){let p=0,v=s.length;if(-1===r)v=-1;else for(;p<s.length;){const w=s[p++];if("number"==typeof w){if(w===r){v=-1;break}if(w>r){v=p-1;break}}}for(;p<s.length;){const w=s[p];if("number"==typeof w)break;if(w===o){if(null===l)return void(null!==c&&(s[p+1]=c));if(l===s[p+1])return void(s[p+2]=c)}p++,null!==l&&p++,null!==c&&p++}-1!==v&&(s.splice(v,0,r),p=v+1),s.splice(p++,0,o),null!==l&&s.splice(p++,0,l),null!==c&&s.splice(p++,0,c)}function vy(s){return-1!==s}function Lu(s){return 32767&s}function Fl(s,r){let o=function Rp(s){return s>>16}(s),l=r;for(;o>0;)l=l[15],o--;return l}let rc=!0;function jp(s){const r=rc;return rc=s,r}let Bd=0;function Ru(s,r){const o=Ud(s,r);if(-1!==o)return o;const l=r[1];l.firstCreatePass&&(s.injectorIndex=r.length,ju(l.data,s),ju(r,null),ju(l.blueprint,null));const c=pa(s,r),p=s.injectorIndex;if(vy(c)){const v=Lu(c),w=Fl(c,r),C=w[1].data;for(let E=0;E<8;E++)r[p+E]=w[v+E]|C[v+E]}return r[p+8]=c,p}function ju(s,r){s.push(0,0,0,0,0,0,0,0,r)}function Ud(s,r){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===r[s.injectorIndex+8]?-1:s.injectorIndex}function pa(s,r){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let o=0,l=null,c=r;for(;null!==c;){const p=c[1],v=p.type;if(l=2===v?p.declTNode:1===v?c[6]:null,null===l)return-1;if(o++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|o<<16}return-1}function ji(s,r,o){!function Vp(s,r,o){let l;"string"==typeof o?l=o.charCodeAt(0)||0:o.hasOwnProperty(Pn)&&(l=o[Pn]),null==l&&(l=o[Pn]=Bd++);const c=255&l;r.data[s+(c>>5)]|=1<<c}(s,r,o)}function Bp(s,r,o){if(o&_e.Optional)return s;Xh(r,"NodeInjector")}function Hd(s,r,o,l){if(o&_e.Optional&&void 0===l&&(l=null),0==(o&(_e.Self|_e.Host))){const c=s[9],p=la(void 0);try{return c?c.get(r,l,o&_e.Optional):J(r,l,o&_e.Optional)}finally{la(p)}}return Bp(l,r,o)}function wy(s,r,o,l=_e.Default,c){if(null!==s){const p=function Fx(s){if("string"==typeof s)return s.charCodeAt(0)||0;const r=s.hasOwnProperty(Pn)?s[Pn]:void 0;return"number"==typeof r?r>=0?255&r:jM:r}(o);if("function"==typeof p){if(!Ka(r,s,l))return l&_e.Host?Bp(c,o,l):Hd(r,o,l,c);try{const v=p(l);if(null!=v||l&_e.Optional)return v;Xh(o)}finally{my()}}else if("number"==typeof p){let v=null,w=Ud(s,r),C=-1,E=l&_e.Host?r[16][6]:null;for((-1===w||l&_e.SkipSelf)&&(C=-1===w?pa(s,r):r[w+8],-1!==C&&My(l,!1)?(v=r[1],w=Lu(C),r=Fl(C,r)):w=-1);-1!==w;){const P=r[1];if(Gd(p,w,P.data)){const L=sc(w,r,o,v,l,E);if(L!==Ox)return L}C=r[w+8],-1!==C&&My(l,r[1].data[w+8]===E)&&Gd(p,w,r)?(v=P,w=Lu(C),r=Fl(C,r)):w=-1}}}return Hd(r,o,l,c)}const Ox={};function jM(){return new qa(Li(),pt())}function sc(s,r,o,l,c,p){const v=r[1],w=v.data[s+8],P=Qa(w,v,o,null==l?zn(w)&&rc:l!=v&&0!=(3&w.type),c&_e.Host&&p===w);return null!==P?ac(r,v,P,w):Ox}function Qa(s,r,o,l,c){const p=s.providerIndexes,v=r.data,w=1048575&p,C=s.directiveStart,P=p>>20,V=c?w+P:s.directiveEnd;for(let U=l?w:w+P;U<V;U++){const $=v[U];if(U<C&&o===$||U>=C&&$.type===o)return U}if(c){const U=v[C];if(U&&Rr(U)&&U.type===o)return C}return null}function ac(s,r,o,l){let c=s[o];const p=r.data;if(function yo(s){return s instanceof mo}(c)){const v=c;v.resolving&&function rx(s,r){const o=r?`. Dependency path: ${r.join(" > ")} > ${s}`:"";throw new Vt(-200,`Circular dependency in DI detected for ${s}${o}`)}(wr(p[o]));const w=jp(v.canSeeViewProviders);v.resolving=!0;const C=v.injectImpl?la(v.injectImpl):null;Ka(s,l,_e.Default);try{c=s[o]=v.factory(void 0,p,s,l),r.firstCreatePass&&o>=l.directiveStart&&function yy(s,r,o){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:p}=r.type.prototype;if(l){const v=Cr(r);(o.preOrderHooks||(o.preOrderHooks=[])).push(s,v),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(s,v)}c&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-s,c),p&&((o.preOrderHooks||(o.preOrderHooks=[])).push(s,p),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(s,p))}(o,p[o],r)}finally{null!==C&&la(C),jp(w),v.resolving=!1,my()}}return c}function Gd(s,r,o){return!!(o[r+(s>>5)]&1<<s)}function My(s,r){return!(s&_e.Self||s&_e.Host&&r)}class qa{constructor(r,o){this._tNode=r,this._lView=o}get(r,o,l){return wy(this._tNode,this._lView,r,l,o)}}function uc(s){return function ga(s,r){if("class"===r)return s.classes;if("style"===r)return s.styles;const o=s.attrs;if(o){const l=o.length;let c=0;for(;c<l;){const p=o[c];if(ic(p))break;if(0===p)c+=2;else if("number"==typeof p)for(c++;c<l&&"string"==typeof o[c];)c++;else{if(p===r)return o[c+1];c+=2}}}return null}(Li(),s)}const wn="__parameters__";function Bu(s,r,o){return Es(()=>{const l=function Ll(s){return function(...o){if(s){const l=s(...o);for(const c in l)this[c]=l[c]}}}(r);function c(...p){if(this instanceof c)return l.apply(this,p),this;const v=new c(...p);return w.annotation=v,w;function w(C,E,P){const L=C.hasOwnProperty(wn)?C[wn]:Object.defineProperty(C,wn,{value:[]})[wn];for(;L.length<=P;)L.push(null);return(L[P]=L[P]||[]).push(v),C}}return o&&(c.prototype=Object.create(o.prototype)),c.prototype.ngMetadataName=s,c.annotationCls=c,c})}class qt{constructor(r,o){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Et({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}function bo(s,r){void 0===r&&(r=s);for(let o=0;o<s.length;o++){let l=s[o];Array.isArray(l)?(r===s&&(r=s.slice(0,o)),bo(l,r)):r!==s&&r.push(l)}return r}function As(s,r){s.forEach(o=>Array.isArray(o)?As(o,r):r(o))}function Vx(s,r,o){r>=s.length?s.push(o):s.splice(r,0,o)}function Rl(s,r){return r>=s.length-1?s.pop():s.splice(r,1)[0]}function jl(s,r){const o=[];for(let l=0;l<s;l++)o.push(r);return o}function Fn(s,r,o){let l=Bl(s,r);return l>=0?s[1|l]=o:(l=~l,function Ux(s,r,o,l){let c=s.length;if(c==r)s.push(o,l);else if(1===c)s.push(l,s[0]),s[0]=o;else{for(c--,s.push(s[c-1],s[c]);c>r;)s[c]=s[c-2],c--;s[r]=o,s[r+1]=l}}(s,l,r,o)),l}function Vl(s,r){const o=Bl(s,r);if(o>=0)return s[1|o]}function Bl(s,r){return function Gx(s,r,o){let l=0,c=s.length>>o;for(;c!==l;){const p=l+(c-l>>1),v=s[p<<o];if(r===v)return p<<o;v>r?c=p:l=p+1}return~(c<<o)}(s,r,1)}const ya={},Is="__NG_DI_FLAG__",Gp="ngTempTokenPath",Ey=/\n/gm,Yp="__source",Xd=kn({provide:String,useValue:kn});let Oo;function nl(s){const r=Oo;return Oo=s,r}function $d(s,r=_e.Default){if(void 0===Oo)throw new Vt(203,"");return null===Oo?J(s,void 0,r):Oo.get(s,r&_e.Optional?null:void 0,r)}function Xt(s,r=_e.Default){return(function Ss(){return ty}()||$d)(Ne(s),r)}const cc=Xt;function ns(s){const r=[];for(let o=0;o<s.length;o++){const l=Ne(s[o]);if(Array.isArray(l)){if(0===l.length)throw new Vt(900,"");let c,p=_e.Default;for(let v=0;v<l.length;v++){const w=l[v],C=Ty(w);"number"==typeof C?-1===C?c=w.token:p|=C:c=w}r.push(Xt(c,p))}else r.push(Xt(l))}return r}function Gu(s,r){return s[Is]=r,s.prototype[Is]=r,s}function Ty(s){return s[Is]}const Ul=Gu(Bu("Optional"),8),dc=Gu(Bu("SkipSelf"),4);let Kd;function zl(s){var r;return(null===(r=function Zd(){if(void 0===Kd&&(Kd=null,ae.trustedTypes))try{Kd=ae.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return Kd}())||void 0===r?void 0:r.createHTML(s))||s}class oi{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class pc extends oi{getTypeName(){return"HTML"}}class Jp extends oi{getTypeName(){return"Style"}}class Fy extends oi{getTypeName(){return"Script"}}class Kx extends oi{getTypeName(){return"URL"}}class Zx extends oi{getTypeName(){return"ResourceURL"}}function vo(s){return s instanceof oi?s.changingThisBreaksApplicationSecurity:s}function bs(s,r){const o=Ly(s);if(null!=o&&o!==r){if("ResourceURL"===o&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===r}function Ly(s){return s instanceof oi&&s.getTypeName()||null}class WM{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const o=(new window.DOMParser).parseFromString(zl(r),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(r):(o.removeChild(o.firstChild),o)}catch(o){return null}}}class gc{constructor(r){if(this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const l=this.inertDocument.createElement("body");o.appendChild(l)}}getInertBodyElement(r){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=zl(r),o;const l=this.inertDocument.createElement("body");return l.innerHTML=zl(r),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(r){const o=r.attributes;for(let c=o.length-1;0<c;c--){const v=o.item(c).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&r.removeAttribute(v)}let l=r.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const Qx=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,qx=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function il(s){return(s=String(s)).match(Qx)||s.match(qx)?s:"unsafe:"+s}function qp(s){return(s=String(s)).split(",").map(r=>il(r.trim())).join(", ")}function hr(s){const r={};for(const o of s.split(","))r[o]=!0;return r}function mc(...s){const r={};for(const o of s)for(const l in o)o.hasOwnProperty(l)&&(r[l]=!0);return r}const By=hr("area,br,col,hr,img,wbr"),Wu=hr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Jd=hr("rp,rt"),Ku=mc(By,mc(Wu,hr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),mc(Jd,hr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),mc(Jd,Wu)),rl=hr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Kt=hr("srcset"),ut=mc(rl,Kt,hr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),hr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Ve=hr("script,style,template");class ze{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let o=r.firstChild,l=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?l=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,l&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let c=this.checkClobberedElement(o,o.nextSibling);if(c){o=c;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(r){const o=r.nodeName.toLowerCase();if(!Ku.hasOwnProperty(o))return this.sanitizedSomething=!0,!Ve.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const l=r.attributes;for(let c=0;c<l.length;c++){const p=l.item(c),v=p.name,w=v.toLowerCase();if(!ut.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let C=p.value;rl[w]&&(C=il(C)),Kt[w]&&(C=qp(C)),this.buf.push(" ",v,'="',Ln(C),'"')}return this.buf.push(">"),!0}endElement(r){const o=r.nodeName.toLowerCase();Ku.hasOwnProperty(o)&&!By.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(r){this.buf.push(Ln(r))}checkClobberedElement(r,o){if(o&&(r.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return o}}const Fo=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Lo=/([^\#-~ |!])/g;function Ln(s){return s.replace(/&/g,"&amp;").replace(Fo,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(Lo,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let En;function vc(s,r){let o=null;try{En=En||function Qp(s){const r=new gc(s);return function Jx(){try{return!!(new window.DOMParser).parseFromString(zl(""),"text/html")}catch(s){return!1}}()?new WM(r):r}(s);let l=r?String(r):"";o=En.getInertBodyElement(l);let c=5,p=l;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,l=p,p=o.innerHTML,o=En.getInertBodyElement(l)}while(l!==p);return zl((new ze).sanitizeChildren(Zu(o)||o))}finally{if(o){const l=Zu(o)||o;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function Zu(s){return"content"in s&&function Qd(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Ye=(()=>((Ye=Ye||{})[Ye.NONE=0]="NONE",Ye[Ye.HTML=1]="HTML",Ye[Ye.STYLE=2]="STYLE",Ye[Ye.SCRIPT=3]="SCRIPT",Ye[Ye.URL=4]="URL",Ye[Ye.RESOURCE_URL=5]="RESOURCE_URL",Ye))();const _a="__ngContext__";function Rn(s,r){s[_a]=r}function fr(s){const r=function Di(s){return s[_a]||null}(s);return r?Array.isArray(r)?r:r.lView:null}function sl(s){return s.ngOriginalError}function nw(s,...r){s.error(...r)}class Er{constructor(){this._console=console}handleError(r){const o=this._findOriginalError(r),l=function ef(s){return s&&s.ngErrorLogger||nw}(r);l(this._console,"ERROR",r),o&&l(this._console,"ORIGINAL ERROR",o)}_findOriginalError(r){let o=r&&sl(r);for(;o&&sl(o);)o=sl(o);return o||null}}const Cc=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(ae))();function is(s){return s instanceof Function?s():s}var eo=(()=>((eo=eo||{})[eo.Important=1]="Important",eo[eo.DashCase=2]="DashCase",eo))();function ql(s,r){return undefined(s,r)}function mi(s){const r=s[3];return ct(r)?r[3]:r}function tu(s){return os(s[13])}function rs(s){return os(s[4])}function os(s){for(;null!==s&&!ct(s);)s=s[4];return s}function Rs(s,r,o,l,c){if(null!=l){let p,v=!1;ct(l)?p=l:Ts(l)&&(v=!0,l=l[0]);const w=De(l);0===s&&null!==o?null==c?Ky(r,o,w):Y(r,o,w,c||null,!0):1===s&&null!==o?Y(r,o,w,c||null,!0):2===s?function pg(s,r,o){const l=of(s,r);l&&function dg(s,r,o,l){ei(s)?s.removeChild(r,o,l):r.removeChild(o)}(s,l,r,o)}(r,w,v):3===s&&r.destroyNode(w),null!=p&&function Gr(s,r,o,l,c){const p=o[7];p!==De(o)&&Rs(r,s,l,p,c);for(let w=10;w<o.length;w++){const C=o[w];Nc(C[1],C,s,r,l,p)}}(r,s,p,o,c)}}function Ec(s,r,o){if(ei(s))return s.createElement(r,o);{const l=null!==o?function q(s){const r=s.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(o):null;return null===l?s.createElement(r):s.createElementNS(l,r)}}function nf(s,r){const o=s[9],l=o.indexOf(r),c=r[3];1024&r[2]&&(r[2]&=-1025,ve(c,-1)),o.splice(l,1)}function Tc(s,r){if(s.length<=10)return;const o=10+r,l=s[o];if(l){const c=l[17];null!==c&&c!==s&&nf(c,l),r>0&&(s[o-1][4]=l[4]);const p=Rl(s,10+r);!function og(s,r){Nc(s,r,r[11],2,null,null),r[0]=null,r[6]=null}(l[1],l);const v=p[19];null!==v&&v.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function rf(s,r){if(!(256&r[2])){const o=r[11];ei(o)&&o.destroyNode&&Nc(s,r,o,3,null,null),function $y(s){let r=s[13];if(!r)return Qu(s[1],s);for(;r;){let o=null;if(Ts(r))o=r[13];else{const l=r[10];l&&(o=l)}if(!o){for(;r&&!r[4]&&r!==s;)Ts(r)&&Qu(r[1],r),r=r[3];null===r&&(r=s),Ts(r)&&Qu(r[1],r),o=r&&r[4]}r=o}}(r)}}function Qu(s,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function cg(s,r){let o;if(null!=s&&null!=(o=s.destroyHooks))for(let l=0;l<o.length;l+=2){const c=r[o[l]];if(!(c instanceof mo)){const p=o[l+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const w=c[p[v]],C=p[v+1];try{C.call(w)}finally{}}else try{p.call(c)}finally{}}}}(s,r),function hg(s,r){const o=s.cleanup,l=r[7];let c=-1;if(null!==o)for(let p=0;p<o.length-1;p+=2)if("string"==typeof o[p]){const v=o[p+1],w="function"==typeof v?v(r):De(r[v]),C=l[c=o[p+2]],E=o[p+3];"boolean"==typeof E?w.removeEventListener(o[p],C,E):E>=0?l[c=E]():l[c=-E].unsubscribe(),p+=2}else{const v=l[c=o[p+1]];o[p].call(v)}if(null!==l){for(let p=c+1;p<l.length;p++)l[p]();r[7]=null}}(s,r),1===r[1].type&&ei(r[11])&&r[11].destroy();const o=r[17];if(null!==o&&ct(r[3])){o!==r[3]&&nf(o,r);const l=r[19];null!==l&&l.detachView(s)}}}function Wy(s,r,o){return function kc(s,r,o){let l=r;for(;null!==l&&40&l.type;)l=(r=l).parent;if(null===l)return o[0];if(2&l.flags){const c=s.data[l.directiveStart].encapsulation;if(c===Un.None||c===Un.Emulated)return null}return In(l,o)}(s,r.parent,o)}function Y(s,r,o,l,c){ei(s)?s.insertBefore(r,o,l,c):r.insertBefore(o,l,c)}function Ky(s,r,o){ei(s)?s.appendChild(r,o):r.appendChild(o)}function Zy(s,r,o,l,c){null!==l?Y(s,r,o,l,c):Ky(s,r,o)}function of(s,r){return ei(s)?s.parentNode(r):r.parentNode}function ss(s,r,o){return Qy(s,r,o)}let Qy=function al(s,r,o){return 40&s.type?In(s,o):null};function sf(s,r,o,l){const c=Wy(s,l,r),p=r[11],w=ss(l.parent||r[6],l,r);if(null!=c)if(Array.isArray(o))for(let C=0;C<o.length;C++)Zy(p,c,o[C],w,!1);else Zy(p,c,o,w,!1)}function af(s,r){if(null!==r){const o=r.type;if(3&o)return In(r,s);if(4&o)return lf(-1,s[r.index]);if(8&o){const l=r.child;if(null!==l)return af(s,l);{const c=s[r.index];return ct(c)?lf(-1,c):De(c)}}if(32&o)return ql(r,s)()||De(s[r.index]);{const l=fg(s,r);return null!==l?Array.isArray(l)?l[0]:af(mi(s[16]),l):af(s,r.next)}}return null}function fg(s,r){return null!==r?s[16][6].projection[r.projection]:null}function lf(s,r){const o=10+s+1;if(o<r.length){const l=r[o],c=l[1].firstChild;if(null!==c)return af(l,c)}return r[7]}function uf(s,r,o,l,c,p,v){for(;null!=o;){const w=l[o.index],C=o.type;if(v&&0===r&&(w&&Rn(De(w),l),o.flags|=4),64!=(64&o.flags))if(8&C)uf(s,r,o.child,l,c,p,!1),Rs(r,s,c,w,p);else if(32&C){const E=ql(o,l);let P;for(;P=E();)Rs(r,s,c,P,p);Rs(r,s,c,w,p)}else 16&C?ev(s,r,l,o,c,p):Rs(r,s,c,w,p);o=v?o.projectionNext:o.next}}function Nc(s,r,o,l,c,p){uf(o,l,s.firstChild,r,c,p,!1)}function ev(s,r,o,l,c,p){const v=o[16],C=v[6].projection[l.projection];if(Array.isArray(C))for(let E=0;E<C.length;E++)Rs(r,s,c,C[E],p);else uf(s,r,C,v[3],c,p,!0)}function Pc(s,r,o){ei(s)?s.setAttribute(r,"style",o):r.style.cssText=o}function gg(s,r,o){ei(s)?""===o?s.removeAttribute(r,"class"):s.setAttribute(r,"class",o):r.className=o}function hf(s,r,o){let l=s.length;for(;;){const c=s.indexOf(r,o);if(-1===c)return c;if(0===c||s.charCodeAt(c-1)<=32){const p=r.length;if(c+p===l||s.charCodeAt(c+p)<=32)return c}o=c+1}}const mg="ng-template";function nv(s,r,o){let l=0;for(;l<s.length;){let c=s[l++];if(o&&"class"===c){if(c=s[l],-1!==hf(c.toLowerCase(),r,0))return!0}else if(1===c){for(;l<s.length&&"string"==typeof(c=s[l++]);)if(c.toLowerCase()===r)return!0;return!1}}return!1}function cf(s){return 4===s.type&&s.value!==mg}function jo(s,r,o){return r===(4!==s.type||o?s.value:mg)}function uw(s,r,o){let l=4;const c=s.attrs||[],p=function iv(s){for(let r=0;r<s.length;r++)if(ic(s[r]))return r;return s.length}(c);let v=!1;for(let w=0;w<r.length;w++){const C=r[w];if("number"!=typeof C){if(!v)if(4&l){if(l=2|1&l,""!==C&&!jo(s,C,o)||""===C&&1===r.length){if(as(l))return!1;v=!0}}else{const E=8&l?C:r[++w];if(8&l&&null!==s.attrs){if(!nv(s.attrs,E,o)){if(as(l))return!1;v=!0}continue}const L=no(8&l?"class":C,c,cf(s),o);if(-1===L){if(as(l))return!1;v=!0;continue}if(""!==E){let V;V=L>p?"":c[L+1].toLowerCase();const U=8&l?V:null;if(U&&-1!==hf(U,E,0)||2&l&&E!==V){if(as(l))return!1;v=!0}}}}else{if(!v&&!as(l)&&!as(C))return!1;if(v&&as(C))continue;v=!1,l=C|1&l}}return as(l)||v}function as(s){return 0==(1&s)}function no(s,r,o,l){if(null===r)return-1;let c=0;if(l||!o){let p=!1;for(;c<r.length;){const v=r[c];if(v===s)return c;if(3===v||6===v)p=!0;else{if(1===v||2===v){let w=r[++c];for(;"string"==typeof w;)w=r[++c];continue}if(4===v)break;if(0===v){c+=4;continue}}c+=p?1:2}return-1}return function df(s,r){let o=s.indexOf(4);if(o>-1)for(o++;o<s.length;){const l=s[o];if("number"==typeof l)return-1;if(l===r)return o;o++}return-1}(r,s)}function en(s,r,o=!1){for(let l=0;l<r.length;l++)if(uw(s,r[l],o))return!0;return!1}function ff(s,r){t:for(let o=0;o<r.length;o++){const l=r[o];if(s.length===l.length){for(let c=0;c<s.length;c++)if(s[c]!==l[c])continue t;return!0}}return!1}function wt(s,r){return s?":not("+r.trim()+")":r}function Ac(s){let r=s[0],o=1,l=2,c="",p=!1;for(;o<s.length;){let v=s[o];if("string"==typeof v)if(2&l){const w=s[++o];c+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?c+="."+v:4&l&&(c+=" "+v);else""!==c&&!as(v)&&(r+=wt(p,c),c=""),l=v,p=p||!as(l);o++}return""!==c&&(r+=wt(p,c)),r}const fe={};function cn(s){ov(Oe(),pt(),Br()+s,!1)}function ov(s,r,o,l){if(!l)if(3==(3&r[2])){const p=s.preOrderCheckHooks;null!==p&&Ri(r,p,o)}else{const p=s.preOrderHooks;null!==p&&Za(r,p,0,o)}ii(o)}function io(s,r){return s<<17|r<<2}function Vo(s){return s>>17&32767}function qu(s){return 2|s}function js(s){return(131068&s)>>2}function nu(s,r){return-131069&s|r<<2}function th(s){return 1|s}function fv(s,r){const o=s.contentQueries;if(null!==o)for(let l=0;l<o.length;l+=2){const c=o[l],p=o[l+1];if(-1!==p){const v=s.data[p];bp(c),v.contentQueries(2,r[p],p)}}}function Lc(s,r,o,l,c,p,v,w,C,E){const P=r.blueprint.slice();return P[0]=c,P[2]=140|l,qr(P),P[3]=P[15]=s,P[8]=o,P[10]=v||s&&s[10],P[11]=w||s&&s[11],P[12]=C||s&&s[12]||null,P[9]=E||s&&s[9]||null,P[6]=p,P[16]=2==r.type?s[16]:P,P}function ih(s,r,o,l,c){let p=s.data[r];if(null===p)p=function Ng(s,r,o,l,c){const p=Fd(),v=Wa(),C=s.data[r]=function Q(s,r,o,l,c,p){return{type:o,index:l,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,o,r,l,c);return null===s.firstChild&&(s.firstChild=C),null!==p&&(v?null==p.child&&null!==C.parent&&(p.child=C):null===p.next&&(p.next=C)),C}(s,r,o,l,c),function Sx(){return Pt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=o,p.value=l,p.attrs=c;const v=function Ou(){const s=Pt.lFrame,r=s.currentTNode;return s.isParent?r:r.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return ne(p,!0),p}function rh(s,r,o,l){if(0===o)return-1;const c=r.length;for(let p=0;p<o;p++)r.push(l),s.blueprint.push(l),s.data.push(null);return c}function Rc(s,r,o){Sn(r);try{const l=s.viewQuery;null!==l&&sh(1,l,o);const c=s.template;null!==c&&Pg(s,r,c,1,o),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&fv(s,r),s.staticViewQueries&&sh(2,s.viewQuery,o);const p=s.components;null!==p&&function nh(s,r){for(let o=0;o<r.length;o++)kv(s,r[o])}(r,p)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{r[2]&=-5,ni()}}function ru(s,r,o,l){const c=r[2];if(256!=(256&c)){Sn(r);try{qr(r),function Ip(s){return Pt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==o&&Pg(s,r,o,2,l);const v=3==(3&c);if(v){const E=s.preOrderCheckHooks;null!==E&&Ri(r,E,null)}else{const E=s.preOrderHooks;null!==E&&Za(r,E,0,null),ts(r,0)}if(function Vc(s){for(let r=tu(s);null!==r;r=rs(r)){if(!r[2])continue;const o=r[9];for(let l=0;l<o.length;l++){const c=o[l],p=c[3];0==(1024&c[2])&&ve(p,1),c[2]|=1024}}}(r),function jg(s){for(let r=tu(s);null!==r;r=rs(r))for(let o=10;o<r.length;o++){const l=r[o],c=l[1];Qi(l)&&ru(c,l,c.template,l[8])}}(r),null!==s.contentQueries&&fv(s,r),v){const E=s.contentCheckHooks;null!==E&&Ri(r,E)}else{const E=s.contentHooks;null!==E&&Za(r,E,1),ts(r,1)}!function kg(s,r){const o=s.hostBindingOpCodes;if(null!==o)try{for(let l=0;l<o.length;l++){const c=o[l];if(c<0)ii(~c);else{const p=c,v=o[++l],w=o[++l];Ex(v,p),w(2,r[p])}}}finally{ii(-1)}}(s,r);const w=s.components;null!==w&&function Sa(s,r){for(let o=0;o<r.length;o++)Vg(s,r[o])}(r,w);const C=s.viewQuery;if(null!==C&&sh(2,C,l),v){const E=s.viewCheckHooks;null!==E&&Ri(r,E)}else{const E=s.viewHooks;null!==E&&Za(r,E,2),ts(r,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),r[2]&=-73,1024&r[2]&&(r[2]&=-1025,ve(r[3],-1))}finally{ni()}}}function Ea(s,r,o,l){const c=r[10],v=Qr(r);try{!v&&c.begin&&c.begin(),v&&Rc(s,r,l),ru(s,r,o,l)}finally{!v&&c.end&&c.end()}}function Pg(s,r,o,l,c){const p=Br(),v=2&l;try{ii(-1),v&&r.length>20&&ov(s,r,20,!1),o(l,c)}finally{ii(p)}}function Ig(s){const r=s.tView;return null===r||r.incompleteFirstPass?s.tView=mf(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):r}function mf(s,r,o,l,c,p,v,w,C,E){const P=20+l,L=P+c,V=function pv(s,r){const o=[];for(let l=0;l<r;l++)o.push(l<s?null:fe);return o}(P,L),U="function"==typeof E?E():E;return V[1]={type:s,blueprint:V,template:o,queries:null,viewQuery:w,declTNode:r,data:V.slice().fill(null,P),bindingStartIndex:P,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:U,incompleteFirstPass:!1}}function At(s,r,o,l){const c=au(r);null===o?c.push(l):(c.push(o),s.firstCreatePass&&Hg(s).push(l,c.length-1))}function yv(s,r,o){for(let l in s)if(s.hasOwnProperty(l)){const c=s[l];(o=null===o?{}:o).hasOwnProperty(l)?o[l].push(r,c):o[l]=[r,c]}return o}function an(s,r,o,l,c,p,v,w){const C=In(r,o);let P,E=r.inputs;!w&&null!=E&&(P=E[l])?(Av(s,o,P,l,c),zn(r)&&function mw(s,r){const o=we(r,s);16&o[2]||(o[2]|=64)}(o,r.index)):3&r.type&&(l=function gw(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),c=null!=v?v(c,r.value||"",l):c,ei(p)?p.setProperty(C,l,c):Fu(l)||(C.setProperty?C.setProperty(l,c):C[l]=c))}function Mv(s,r,o,l,c,p){const v=p.hostBindings;if(v){let w=s.hostBindingOpCodes;null===w&&(w=s.hostBindingOpCodes=[]);const C=~r.index;(function yw(s){let r=s.length;for(;r>0;){const o=s[--r];if("number"==typeof o&&o<0)return o}return 0})(w)!=C&&w.push(C),w.push(l,c,v)}}function Lg(s,r){null!==s.hostBindings&&s.hostBindings(1,r)}function vt(s,r){r.flags|=2,(s.components||(s.components=[])).push(r.index)}function Dv(s,r,o){if(o){if(r.exportAs)for(let l=0;l<r.exportAs.length;l++)o[r.exportAs[l]]=s;Rr(r)&&(o[""]=s)}}function Sv(s,r,o){s.flags|=1,s.directiveStart=r,s.directiveEnd=r+o,s.providerIndexes=r}function Ev(s,r,o,l,c){s.data[l]=c;const p=c.factory||(c.factory=bl(c.type)),v=new mo(p,Rr(c),null);s.blueprint[l]=v,o[l]=v,Mv(s,r,0,l,rh(s,o,c.hostVars,fe),c)}function yi(s,r,o){const l=In(r,s),c=Ig(o),p=s[10],v=ka(s,Lc(s,c,null,o.onPush?64:16,l,r,p,p.createRenderer(l,o),null,null));s[r.index]=v}function X(s,r,o,l,c,p){const v=In(s,r);!function su(s,r,o,l,c,p,v){if(null==p)ei(s)?s.removeAttribute(r,c,o):r.removeAttribute(c);else{const w=null==v?D(p):v(p,l||"",c);ei(s)?s.setAttribute(r,c,w,o):o?r.setAttributeNS(o,c,w):r.setAttribute(c,w)}}(r[11],v,p,s.value,o,l,c)}function xw(s,r,o,l,c,p){const v=p[r];if(null!==v){const w=l.setInput;for(let C=0;C<v.length;){const E=v[C++],P=v[C++],L=v[C++];null!==w?l.setInput(o,L,E,P):o[P]=L}}}function Ta(s,r){let o=null,l=0;for(;l<r.length;){const c=r[l];if(0!==c)if(5!==c){if("number"==typeof c)break;s.hasOwnProperty(c)&&(null===o&&(o=[]),o.push(c,s[c],r[l+1])),l+=2}else l+=2;else l+=4}return o}function Vg(s,r){const o=we(r,s);if(Qi(o)){const l=o[1];80&o[2]?ru(l,o,l.template,o[8]):o[5]>0&&yf(o)}}function yf(s){for(let l=tu(s);null!==l;l=rs(l))for(let c=10;c<l.length;c++){const p=l[c];if(1024&p[2]){const v=p[1];ru(v,p,v.template,p[8])}else p[5]>0&&yf(p)}const o=s[1].components;if(null!==o)for(let l=0;l<o.length;l++){const c=we(o[l],s);Qi(c)&&c[5]>0&&yf(c)}}function kv(s,r){const o=we(r,s),l=o[1];(function Bg(s,r){for(let o=r.length;o<s.blueprint.length;o++)r.push(s.blueprint[o])})(l,o),Rc(l,o,o[8])}function ka(s,r){return s[13]?s[14][4]=r:s[13]=r,s[14]=r,r}function vf(s){for(;s;){s[2]|=64;const r=mi(s);if(Td(s)&&!r)return s;s=r}return null}function ll(s){!function Nv(s){for(let r=0;r<s.components.length;r++){const o=s.components[r],l=fr(o),c=l[1];Ea(c,l,c.template,o)}}(s[8])}function sh(s,r,o){bp(0),r(s,o)}const ah=(()=>Promise.resolve(null))();function au(s){return s[7]||(s[7]=[])}function Hg(s){return s.cleanup||(s.cleanup=[])}function _w(s,r){const o=s[9],l=o?o.get(Er,null):null;l&&l.handleError(r)}function Av(s,r,o,l,c){for(let p=0;p<o.length;){const v=o[p++],w=o[p++],C=r[v],E=s.data[v];null!==E.setInput?E.setInput(C,c,l,w):C[w]=c}}function pn(s,r,o){const l=Ns(r,s);!function Xy(s,r,o){ei(s)?s.setValue(r,o):r.textContent=o}(s[11],l,o)}function Ei(s,r,o){let l=o?s.styles:null,c=o?s.classes:null,p=0;if(null!==r)for(let v=0;v<r.length;v++){const w=r[v];"number"==typeof w?p=w:1==p?c=nx(c,w):2==p&&(l=nx(l,w+": "+r[++v]+";"))}o?s.styles=l:s.stylesWithoutHost=l,o?s.classes=c:s.classesWithoutHost=c}const Uc=new qt("INJECTOR",-1);class xf{get(r,o=ya){if(o===ya){const l=new Error(`NullInjectorError: No provider for ${yn(r)}!`);throw l.name="NullInjectorError",l}return o}}const lh=new qt("Set Injector scope."),ul={},wf={};let Mf;function _f(){return void 0===Mf&&(Mf=new xf),Mf}function Hc(s,r=null,o=null,l){const c=Gc(s,r,o,l);return c._resolveInjectorDefTypes(),c}function Gc(s,r=null,o=null,l){return new zg(s,o,r||_f(),l)}class zg{constructor(r,o,l,c=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];o&&As(o,w=>this.processProvider(w,r,o)),As([r],w=>this.processInjectorType(w,[],p)),this.records.set(Uc,Pa(void 0,this));const v=this.records.get(lh);this.scope=null!=v?v.value:null,this.source=c||("object"==typeof r?null:yn(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,o=ya,l=_e.Default){this.assertNotDestroyed();const c=nl(this),p=la(void 0);try{if(!(l&_e.SkipSelf)){let w=this.records.get(r);if(void 0===w){const C=function Ew(s){return"function"==typeof s||"object"==typeof s&&s instanceof qt}(r)&&Tl(r);w=C&&this.injectableDefInScope(C)?Pa(Yg(r),ul):null,this.records.set(r,w)}if(null!=w)return this.hydrate(r,w)}return(l&_e.Self?_f():this.parent).get(r,o=l&_e.Optional&&o===ya?null:o)}catch(v){if("NullInjectorError"===v.name){if((v[Gp]=v[Gp]||[]).unshift(yn(r)),c)throw v;return function ky(s,r,o,l){const c=s[Gp];throw r[Yp]&&c.unshift(r[Yp]),s.message=function $p(s,r,o,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let c=yn(r);if(Array.isArray(r))c=r.map(yn).join(" -> ");else if("object"==typeof r){let p=[];for(let v in r)if(r.hasOwnProperty(v)){let w=r[v];p.push(v+":"+("string"==typeof w?JSON.stringify(w):yn(w)))}c=`{${p.join(", ")}}`}return`${o}${l?"("+l+")":""}[${c}]: ${s.replace(Ey,"\n  ")}`}("\n"+s.message,c,o,l),s.ngTokenPath=c,s[Gp]=null,s}(v,r,"R3InjectorError",this.source)}throw v}finally{la(p),nl(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((l,c)=>r.push(yn(c))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Vt(205,!1)}processInjectorType(r,o,l){if(!(r=Ne(r)))return!1;let c=aa(r);const p=null==c&&r.ngModule||void 0,v=void 0===p?r:p,w=-1!==l.indexOf(v);if(void 0!==p&&(c=aa(p)),null==c)return!1;if(null!=c.imports&&!w){let P;l.push(v);try{As(c.imports,L=>{this.processInjectorType(L,o,l)&&(void 0===P&&(P=[]),P.push(L))})}finally{}if(void 0!==P)for(let L=0;L<P.length;L++){const{ngModule:V,providers:U}=P[L];As(U,$=>this.processProvider($,V,U||Jt))}}this.injectorDefTypes.add(v);const C=bl(v)||(()=>new v);this.records.set(v,Pa(C,ul));const E=c.providers;if(null!=E&&!w){const P=r;As(E,L=>this.processProvider(L,P,E))}return void 0!==p&&void 0!==r.providers}processProvider(r,o,l){let c=kr(r=Ne(r))?r:Ne(r&&r.provide);const p=function Cf(s,r,o){return uh(s)?Pa(void 0,s.useValue):Pa(Df(s),ul)}(r);if(kr(r)||!0!==r.multi)this.records.get(c);else{let v=this.records.get(c);v||(v=Pa(void 0,ul,!0),v.factory=()=>ns(v.multi),this.records.set(c,v)),c=r,v.multi.push(r)}this.records.set(c,p)}hydrate(r,o){return o.value===ul&&(o.value=wf,o.value=o.factory()),"object"==typeof o.value&&o.value&&function Sw(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(o.value)&&this.onDestroy.add(o.value),o.value}injectableDefInScope(r){if(!r.providedIn)return!1;const o=Ne(r.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function Yg(s){const r=Tl(s),o=null!==r?r.factory:bl(s);if(null!==o)return o;if(s instanceof qt)throw new Vt(204,!1);if(s instanceof Function)return function Cw(s){const r=s.length;if(r>0)throw jl(r,"?"),new Vt(204,!1);const o=function ye(s){const r=s&&(s[sr]||s[co]);if(r){const o=function oe(s){if(s.hasOwnProperty("name"))return s.name;const r=(""+s).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),r}return null}(s);return null!==o?()=>o.factory(s):()=>new s}(s);throw new Vt(204,!1)}function Df(s,r,o){let l;if(kr(s)){const c=Ne(s);return bl(c)||Yg(c)}if(uh(s))l=()=>Ne(s.useValue);else if(function Dw(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...ns(s.deps||[]));else if(function ls(s){return!(!s||!s.useExisting)}(s))l=()=>Xt(Ne(s.useExisting));else{const c=Ne(s&&(s.useClass||s.provide));if(!function $g(s){return!!s.deps}(s))return bl(c)||Yg(c);l=()=>new c(...ns(s.deps))}return l}function Pa(s,r,o=!1){return{factory:s,value:r,multi:o?[]:void 0}}function uh(s){return null!==s&&"object"==typeof s&&Xd in s}function kr(s){return"function"==typeof s}let Ti=(()=>{class s{static create(o,l){var c;if(Array.isArray(o))return Hc({name:""},l,o,"");{const p=null!==(c=o.name)&&void 0!==c?c:"";return Hc({name:p},o.parent,o.providers,p)}}}return s.THROW_IF_NOT_FOUND=ya,s.NULL=new xf,s.\u0275prov=Et({token:s,providedIn:"any",factory:()=>Xt(Uc)}),s.__NG_ELEMENT_ID__=-1,s})();function g_(s,r){Kn(fr(s)[1],Li())}function Ze(s){let r=function Be(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),o=!0;const l=[s];for(;r;){let c;if(Rr(s))c=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Vt(903,"");c=r.\u0275dir}if(c){if(o){l.push(c);const v=s;v.inputs=dn(s.inputs),v.declaredInputs=dn(s.declaredInputs),v.outputs=dn(s.outputs);const w=c.hostBindings;w&&Ef(s,w);const C=c.viewQuery,E=c.contentQueries;if(C&&Aw(s,C),E&&em(s,E),ex(s.inputs,c.inputs),ex(s.declaredInputs,c.declaredInputs),ex(s.outputs,c.outputs),Rr(c)&&c.data.animation){const P=s.data;P.animation=(P.animation||[]).concat(c.data.animation)}}const p=c.features;if(p)for(let v=0;v<p.length;v++){const w=p[v];w&&w.ngInherit&&w(s),w===Ze&&(o=!1)}}r=Object.getPrototypeOf(r)}!function Yn(s){let r=0,o=null;for(let l=s.length-1;l>=0;l--){const c=s[l];c.hostVars=r+=c.hostVars,c.hostAttrs=se(c.hostAttrs,o=se(o,c.hostAttrs))}}(l)}function dn(s){return s===Zo?{}:s===Jt?[]:s}function Aw(s,r){const o=s.viewQuery;s.viewQuery=o?(l,c)=>{r(l,c),o(l,c)}:r}function em(s,r){const o=s.contentQueries;s.contentQueries=o?(l,c,p)=>{r(l,c,p),o(l,c,p)}:r}function Ef(s,r){const o=s.hostBindings;s.hostBindings=o?(l,c)=>{r(l,c),o(l,c)}:r}let dh=null;function Ia(){if(!dh){const s=ae.Symbol;if(s&&s.iterator)dh=s.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<r.length;++o){const l=r[o];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(dh=l)}}}return dh}function Tf(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function pr(s,r,o){return!Object.is(s[r],o)&&(s[r]=o,!0)}function _o(s,r,o,l){const c=pt();return pr(c,Ol(),r)&&(Oe(),X(ri(),c,s,r,o,l)),_o}function om(s){return function lr(s,r){return s[r]}(function Cx(){return Pt.lFrame.contextLView}(),20+s)}function yt(s,r=_e.Default){const o=pt();return null===o?Xt(s,r):wy(Li(),o,Ne(s),r)}function Ue(s,r,o){const l=pt();return pr(l,Ol(),r)&&an(Oe(),ri(),l,s,r,l[11],o,!1),Ue}function Zn(s,r,o,l,c){const v=c?"class":"style";Av(s,o,r.inputs[v],v,l)}function pe(s,r,o,l){const c=pt(),p=Oe(),v=20+s,w=c[11],C=c[v]=Ec(w,r,function ec(){return Pt.lFrame.currentNamespace}()),E=p.firstCreatePass?function fl(s,r,o,l,c,p,v){const w=r.consts,E=ih(r,s,2,c,le(w,p));return function Fg(s,r,o,l){let c=!1;if(wx()){const p=function _v(s,r,o){const l=s.directiveRegistry;let c=null;if(l)for(let p=0;p<l.length;p++){const v=l[p];en(o,v.selectors,!1)&&(c||(c=[]),ji(Ru(o,r),s,v.type),Rr(v)?(vt(s,o),c.unshift(v)):c.push(v))}return c}(s,r,o),v=null===l?null:{"":-1};if(null!==p){c=!0,Sv(o,s.data.length,p.length);for(let P=0;P<p.length;P++){const L=p[P];L.providersResolver&&L.providersResolver(L)}let w=!1,C=!1,E=rh(s,r,p.length,null);for(let P=0;P<p.length;P++){const L=p[P];o.mergedAttrs=se(o.mergedAttrs,L.hostAttrs),Ev(s,o,r,E,L),Dv(E,L,v),null!==L.contentQueries&&(o.flags|=8),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(o.flags|=128);const V=L.type.prototype;!w&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(o.index),w=!0),!C&&(V.ngOnChanges||V.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(o.index),C=!0),E++}!function pw(s,r){const l=r.directiveEnd,c=s.data,p=r.attrs,v=[];let w=null,C=null;for(let E=r.directiveStart;E<l;E++){const P=c[E],L=P.inputs,V=null===p||cf(r)?null:Ta(L,p);v.push(V),w=yv(L,E,w),C=yv(P.outputs,E,C)}null!==w&&(w.hasOwnProperty("class")&&(r.flags|=16),w.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=v,r.inputs=w,r.outputs=C}(s,o)}v&&function Cv(s,r,o){if(r){const l=s.localNames=[];for(let c=0;c<r.length;c+=2){const p=o[r[c+1]];if(null==p)throw new Vt(-301,!1);l.push(r[c],p)}}}(o,l,v)}return o.mergedAttrs=se(o.mergedAttrs,o.attrs),c}(r,o,E,le(w,v)),null!==E.attrs&&Ei(E,E.attrs,!1),null!==E.mergedAttrs&&Ei(E,E.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,E),E}(v,p,c,0,r,o,l):p.data[v];ne(E,!0);const P=E.mergedAttrs;null!==P&&nc(w,C,P);const L=E.classes;null!==L&&gg(w,C,L);const V=E.styles;return null!==V&&Pc(w,C,V),64!=(64&E.flags)&&sf(p,c,C,E),0===function be(){return Pt.lFrame.elementDepthCount}()&&Rn(C,c),function xx(){Pt.lFrame.elementDepthCount++}(),go(E)&&(function Bs(s,r,o){!wx()||(function vw(s,r,o,l){const c=o.directiveStart,p=o.directiveEnd;s.firstCreatePass||Ru(o,r),Rn(l,r);const v=o.initialInputs;for(let w=c;w<p;w++){const C=s.data[w],E=Rr(C);E&&yi(r,o,C);const P=ac(r,s,w,o);Rn(P,r),null!==v&&xw(0,w-c,P,C,0,v),E&&(we(o.index,r)[8]=P)}}(s,r,o,In(o,r)),128==(128&o.flags)&&function c_(s,r,o){const l=o.directiveStart,c=o.directiveEnd,v=o.index,w=function Tx(){return Pt.lFrame.currentDirectiveIndex}();try{ii(v);for(let C=l;C<c;C++){const E=s.data[C],P=r[C];fy(C),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&Lg(E,P)}}finally{ii(-1),fy(w)}}(s,r,o))}(p,c,E),function Ag(s,r,o){if(An(r)){const c=r.directiveEnd;for(let p=r.directiveStart;p<c;p++){const v=s.data[p];v.contentQueries&&v.contentQueries(1,o[p],p)}}}(p,E,c)),null!==l&&function jc(s,r,o=In){const l=r.localNames;if(null!==l){let c=r.index+1;for(let p=0;p<l.length;p+=2){const v=l[p+1],w=-1===v?o(r,s):s[v];s[c++]=w}}}(c,E),pe}function ie(){let s=Li();Wa()?Ld():(s=s.parent,ne(s,!1));const r=s;!function Ut(){Pt.lFrame.elementDepthCount--}();const o=Oe();return o.firstCreatePass&&(Kn(o,s),An(s)&&o.queries.elementEnd(s)),null!=r.classesWithoutHost&&function Px(s){return 0!=(16&s.flags)}(r)&&Zn(o,r,pt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Ax(s){return 0!=(32&s.flags)}(r)&&Zn(o,r,pt(),r.stylesWithoutHost,!1),ie}function hs(s,r,o,l){return pe(s,r,o,l),ie(),hs}function cu(s){return!!s&&"function"==typeof s.then}const Zc=function xh(s){return!!s&&"function"==typeof s.subscribe};function Pe(s,r,o,l){const c=pt(),p=Oe(),v=Li();return function Kv(s,r,o,l,c,p,v,w){const C=go(l),P=s.firstCreatePass&&Hg(s),L=r[8],V=au(r);let U=!0;if(3&l.type||w){const lt=In(l,r),ft=w?w(lt):lt,ot=V.length,_t=w?Nt=>w(De(Nt[l.index])):l.index;if(ei(o)){let Nt=null;if(!w&&C&&(Nt=function gn(s,r,o,l){const c=s.cleanup;if(null!=c)for(let p=0;p<c.length-1;p+=2){const v=c[p];if(v===o&&c[p+1]===l){const w=r[7],C=c[p+2];return w.length>C?w[C]:null}"string"==typeof v&&(p+=2)}return null}(s,r,c,l.index)),null!==Nt)(Nt.__ngLastListenerFn__||Nt).__ngNextListenerFn__=p,Nt.__ngLastListenerFn__=p,U=!1;else{p=Zv(l,r,L,p,!1);const ee=o.listen(ft,c,p);V.push(p,ee),P&&P.push(c,_t,ot,ot+1)}}else p=Zv(l,r,L,p,!0),ft.addEventListener(c,p,v),V.push(p),P&&P.push(c,_t,ot,v)}else p=Zv(l,r,L,p,!1);const $=l.outputs;let rt;if(U&&null!==$&&(rt=$[c])){const lt=rt.length;if(lt)for(let ft=0;ft<lt;ft+=2){const Mi=r[rt[ft]][rt[ft+1]].subscribe(p),Ai=V.length;V.push(p,Mi),P&&P.push(c,l.index,Ai,-(Ai+1))}}}(p,c,c[11],v,s,r,!!o,l),Pe}function Uw(s,r,o,l){try{return!1!==o(l)}catch(c){return _w(s,c),!1}}function Zv(s,r,o,l,c){return function p(v){if(v===Function)return l;const w=2&s.flags?we(s.index,r):r;0==(32&r[2])&&vf(w);let C=Uw(r,0,l,v),E=p.__ngNextListenerFn__;for(;E;)C=Uw(r,0,E,v)&&C,E=E.__ngNextListenerFn__;return c&&!1===C&&(v.preventDefault(),v.returnValue=!1),C}}function x_(s,r){let o=null;const l=function yg(s){const r=s.attrs;if(null!=r){const o=r.indexOf(5);if(0==(1&o))return r[o+1]}return null}(s);for(let c=0;c<r.length;c++){const p=r[c];if("*"!==p){if(null===l?en(s,p,!0):ff(l,p))return c}else o=c}return o}function hm(s){const r=pt()[16][6];if(!r.projection){const l=r.projection=jl(s?s.length:1,null),c=l.slice();let p=r.child;for(;null!==p;){const v=s?x_(p,s):0;null!==v&&(c[v]?c[v].projectionNext=p:l[v]=p,c[v]=p),p=p.next}}}function cm(s,r=0,o){const l=pt(),c=Oe(),p=ih(c,20+s,16,null,o||null);null===p.projection&&(p.projection=r),Ld(),64!=(64&p.flags)&&function aw(s,r,o){ev(r[11],0,r,o,Wy(s,o,r),ss(o.parent||r[6],o,r))}(c,l,p)}function pm(s,r,o,l,c){const p=s[o+1],v=null===r;let w=l?Vo(p):js(p),C=!1;for(;0!==w&&(!1===C||v);){const P=s[w+1];Gw(s[w],r)&&(C=!0,s[w+1]=l?th(P):qu(P)),w=l?Vo(P):js(P)}C&&(s[o+1]=l?qu(p):th(p))}function Gw(s,r){return null===s||null==r||(Array.isArray(s)?s[1]:s)===r||!(!Array.isArray(s)||"string"!=typeof r)&&Bl(s,r)>=0}function gu(s,r){return function ds(s,r,o,l){const c=pt(),p=Oe(),v=function fa(s){const r=Pt.lFrame,o=r.bindingIndex;return r.bindingIndex=r.bindingIndex+s,o}(2);p.firstUpdatePass&&function Ra(s,r,o,l){const c=s.data;if(null===c[o+1]){const p=c[Br()],v=function La(s,r){return r>=s.expandoStartIndex}(s,o);(function ja(s,r){return 0!=(s.flags&(r?16:32))})(p,l)&&null===r&&!v&&(r=!1),r=function mm(s,r,o,l){const c=function py(s){const r=Pt.lFrame.currentDirectiveIndex;return-1===r?null:s[r]}(s);let p=l?r.residualClasses:r.residualStyles;if(null===c)0===(l?r.classBindings:r.styleBindings)&&(o=_h(o=Hf(null,s,r,o,l),r.attrs,l),p=null);else{const v=r.directiveStylingLast;if(-1===v||s[v]!==c)if(o=Hf(c,s,r,o,l),null===p){let C=function s0(s,r,o){const l=o?r.classBindings:r.styleBindings;if(0!==js(l))return s[Vo(l)]}(s,r,l);void 0!==C&&Array.isArray(C)&&(C=Hf(null,s,r,C[1],l),C=_h(C,r.attrs,l),function Uf(s,r,o,l){s[Vo(o?r.classBindings:r.styleBindings)]=l}(s,r,l,C))}else p=function ym(s,r,o){let l;const c=r.directiveEnd;for(let p=1+r.directiveStylingLast;p<c;p++)l=_h(l,s[p].hostAttrs,o);return _h(l,r.attrs,o)}(s,r,l)}return void 0!==p&&(l?r.residualClasses=p:r.residualStyles=p),o}(c,p,r,l),function Hw(s,r,o,l,c,p){let v=p?r.classBindings:r.styleBindings,w=Vo(v),C=js(v);s[l]=o;let P,E=!1;if(Array.isArray(o)){const L=o;P=L[1],(null===P||Bl(L,P)>0)&&(E=!0)}else P=o;if(c)if(0!==C){const V=Vo(s[w+1]);s[l+1]=io(V,w),0!==V&&(s[V+1]=nu(s[V+1],l)),s[w+1]=function hw(s,r){return 131071&s|r<<17}(s[w+1],l)}else s[l+1]=io(w,0),0!==w&&(s[w+1]=nu(s[w+1],l)),w=l;else s[l+1]=io(C,0),0===w?w=l:s[C+1]=nu(s[C+1],l),C=l;E&&(s[l+1]=qu(s[l+1])),pm(s,P,l,!0),pm(s,P,l,!1),function fm(s,r,o,l,c){const p=c?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof r&&Bl(p,r)>=0&&(o[l+1]=th(o[l+1]))}(r,P,s,l,p),v=io(w,C),p?r.classBindings=v:r.styleBindings=v}(c,p,r,o,v,l)}}(p,s,v,l),r!==fe&&pr(c,v,r)&&function wm(s,r,o,l,c,p,v,w){if(!(3&r.type))return;const C=s.data,E=C[w+1];Jc(function zr(s){return 1==(1&s)}(E)?Gf(C,r,o,c,js(E),v):void 0)||(Jc(p)||function Zt(s){return 2==(2&s)}(E)&&(p=Gf(C,null,o,c,w,v)),function qM(s,r,o,l,c){const p=ei(s);if(r)c?p?s.addClass(o,l):o.classList.add(l):p?s.removeClass(o,l):o.classList.remove(l);else{let v=-1===l.indexOf("-")?void 0:eo.DashCase;if(null==c)p?s.removeStyle(o,l,v):o.style.removeProperty(l);else{const w="string"==typeof c&&c.endsWith("!important");w&&(c=c.slice(0,-10),v|=eo.Important),p?s.setStyle(o,l,c,v):o.style.setProperty(l,c,w?"important":"")}}}(l,v,Ns(Br(),o),c,p))}(p,p.data[Br()],c,c[11],s,c[v+1]=function C_(s,r){return null==s||("string"==typeof r?s+=r:"object"==typeof s&&(s=yn(vo(s)))),s}(r,o),l,v)}(s,r,null,!0),gu}function Hf(s,r,o,l,c){let p=null;const v=o.directiveEnd;let w=o.directiveStylingLast;for(-1===w?w=o.directiveStart:w++;w<v&&(p=r[w],l=_h(l,p.hostAttrs,c),p!==s);)w++;return null!==s&&(o.directiveStylingLast=w),l}function _h(s,r,o){const l=o?1:2;let c=-1;if(null!==r)for(let p=0;p<r.length;p++){const v=r[p];"number"==typeof v?c=v:c===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Fn(s,v,!!o||r[++p]))}return void 0===s?null:s}function Gf(s,r,o,l,c,p){const v=null===r;let w;for(;c>0;){const C=s[c],E=Array.isArray(C),P=E?C[1]:C,L=null===P;let V=o[c+1];V===fe&&(V=L?Jt:void 0);let U=L?Vl(V,l):P===l?V:void 0;if(E&&!Jc(U)&&(U=Vl(C,l)),Jc(U)&&(w=U,v))return w;const $=s[c+1];c=v?Vo($):js($)}if(null!==r){let C=p?r.residualClasses:r.residualStyles;null!=C&&(w=Vl(C,l))}return w}function Jc(s){return void 0!==s}function Le(s,r=""){const o=pt(),l=Oe(),c=s+20,p=l.firstCreatePass?ih(l,c,1,r,null):l.data[c],v=o[c]=function eu(s,r){return ei(s)?s.createText(r):s.createTextNode(r)}(o[11],r);sf(l,o,v,p),ne(p,!1)}function pl(s){return gl("",s,""),pl}function gl(s,r,o){const l=pt(),c=function ph(s,r,o,l){return pr(s,Ol(),o)?r+D(o)+l:fe}(l,s,r,o);return c!==fe&&pn(l,Br(),c),gl}function vu(s,r,o){const l=pt();return pr(l,Ol(),r)&&an(Oe(),ri(),l,s,r,l[11],o,!0),vu}const td="en-US";let Tm=td;function Mu(s,r,o,l,c){if(s=Ne(s),Array.isArray(s))for(let p=0;p<s.length;p++)Mu(s[p],r,o,l,c);else{const p=Oe(),v=pt();let w=kr(s)?s:Ne(s.provide),C=Df(s);const E=Li(),P=1048575&E.providerIndexes,L=E.directiveStart,V=E.providerIndexes>>20;if(kr(s)||!s.multi){const U=new mo(C,c,yt),$=$n(w,r,c?P:P+V,L);-1===$?(ji(Ru(E,v),p,w),Ba(p,s,r.length),r.push(w),E.directiveStart++,E.directiveEnd++,c&&(E.providerIndexes+=1048576),o.push(U),v.push(U)):(o[$]=U,v[$]=U)}else{const U=$n(w,r,P+V,L),$=$n(w,r,P,P+V),rt=U>=0&&o[U],lt=$>=0&&o[$];if(c&&!lt||!c&&!rt){ji(Ru(E,v),p,w);const ft=function ys(s,r,o,l,c){const p=new mo(s,o,yt);return p.multi=[],p.index=r,p.componentProviders=0,ln(p,c,l&&!o),p}(c?nr:di,o.length,c,l,C);!c&&lt&&(o[$].providerFactory=ft),Ba(p,s,r.length,0),r.push(w),E.directiveStart++,E.directiveEnd++,c&&(E.providerIndexes+=1048576),o.push(ft),v.push(ft)}else Ba(p,s,U>-1?U:$,ln(o[c?$:U],C,!c&&l));!c&&l&&lt&&o[$].componentProviders++}}}function Ba(s,r,o,l){const c=kr(r),p=function Xg(s){return!!s.useClass}(r);if(c||p){const C=(p?Ne(r.useClass):r).prototype.ngOnDestroy;if(C){const E=s.destroyHooks||(s.destroyHooks=[]);if(!c&&r.multi){const P=E.indexOf(o);-1===P?E.push(o,[l,C]):E[P+1].push(l,C)}else E.push(o,C)}}}function ln(s,r,o){return o&&s.componentProviders++,s.multi.push(r)-1}function $n(s,r,o,l){for(let c=o;c<l;c++)if(r[c]===s)return c;return-1}function di(s,r,o,l){return zi(this.multi,[])}function nr(s,r,o,l){const c=this.multi;let p;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=ac(o,o[1],this.providerFactory.index,l);p=w.slice(0,v),zi(c,p);for(let C=v;C<w.length;C++)p.push(w[C])}else p=[],zi(c,p);return p}function zi(s,r){for(let o=0;o<s.length;o++)r.push((0,s[o])());return r}function We(s,r=[]){return o=>{o.providersResolver=(l,c)=>function ms(s,r,o){const l=Oe();if(l.firstCreatePass){const c=Rr(s);Mu(o,l.data,l.blueprint,c,!0),Mu(r,l.data,l.blueprint,c,!1)}}(l,c?c(s):s,r)}}class ad{}class Ml{resolveComponentFactory(r){throw function Qf(s){const r=Error(`No component factory found for ${yn(s)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=s,r}(r)}}let vs=(()=>{class s{}return s.NULL=new Ml,s})();function Eo(){return $r(Li(),pt())}function $r(s,r){return new mn(In(s,r))}let mn=(()=>{class s{constructor(o){this.nativeElement=o}}return s.__NG_ELEMENT_ID__=Eo,s})();function Js(s){return s instanceof mn?s.nativeElement:s}class xs{}let Ua=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Te(){const s=pt(),o=we(Li().index,s);return function _u(s){return s[11]}(Ts(o)?o:s)}(),s})(),ws=(()=>{class s{}return s.\u0275prov=Et({token:s,providedIn:"root",factory:()=>null}),s})();class on{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const ud=new on("13.3.8"),To={};function Qs(s,r,o,l,c=!1){for(;null!==o;){const p=r[o.index];if(null!==p&&l.push(De(p)),ct(p))for(let w=10;w<p.length;w++){const C=p[w],E=C[1].firstChild;null!==E&&Qs(C[1],C,E,l)}const v=o.type;if(8&v)Qs(s,r,o.child,l);else if(32&v){const w=ql(o,r);let C;for(;C=w();)l.push(C)}else if(16&v){const w=fg(r,o);if(Array.isArray(w))l.push(...w);else{const C=mi(r[16]);Qs(C[1],C,w,l,!0)}}o=c?o.projectionNext:o.next}return l}class mr{constructor(r,o){this._lView=r,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,o=r[1];return Qs(o,r,o.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(ct(r)){const o=r[8],l=o?o.indexOf(this):-1;l>-1&&(Tc(r,l),Rl(o,l))}this._attachedToViewContainer=!1}rf(this._lView[1],this._lView)}onDestroy(r){At(this._lView[1],this._lView,null,r)}markForCheck(){vf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function Pv(s,r,o){const l=r[10];l.begin&&l.begin();try{ru(s,r,s.template,o)}catch(c){throw _w(r,c),c}finally{l.end&&l.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Vt(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ag(s,r){Nc(s,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Vt(902,"");this._appRef=r}}class Cu extends mr{constructor(r){super(r),this._view=r}detectChanges(){ll(this._view)}checkNoChanges(){}get context(){return null}}class hd extends vs{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const o=Re(r);return new Fh(o,this.ngModule)}}function Ms(s){const r=[];for(let o in s)s.hasOwnProperty(o)&&r.push({propName:s[o],templateName:o});return r}class Fh extends ad{constructor(r,o){super(),this.componentDef=r,this.ngModule=o,this.componentType=r.type,this.selector=function rv(s){return s.map(Ac).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return Ms(this.componentDef.inputs)}get outputs(){return Ms(this.componentDef.outputs)}create(r,o,l,c){const p=(c=c||this.ngModule)?function Du(s,r){return{get:(o,l,c)=>{const p=s.get(o,To,c);return p!==To||l===To?p:r.get(o,l,c)}}}(r,c.injector):r,v=p.get(xs,hy),w=p.get(ws,null),C=v.createRenderer(null,this.componentDef),E=this.componentDef.selectors[0][0]||"div",P=l?function mv(s,r,o){if(ei(s))return s.selectRootElement(r,o===Un.ShadowDom);let l="string"==typeof r?s.querySelector(r):r;return l.textContent="",l}(C,l,this.componentDef.encapsulation):Ec(v.createRenderer(null,this.componentDef),E,function Oh(s){const r=s.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(E)),L=this.componentDef.onPush?576:528,V=function tm(s,r){return{components:[],scheduler:s||Cc,clean:ah,playerHandler:r||null,flags:0}}(),U=mf(0,null,null,1,0,null,null,null,null,null),$=Lc(null,U,V,L,null,null,v,C,w,p);let rt,lt;Sn($);try{const ft=function Fv(s,r,o,l,c,p){const v=o[1];o[20]=s;const C=ih(v,20,2,"#host",null),E=C.mergedAttrs=r.hostAttrs;null!==E&&(Ei(C,E,!0),null!==s&&(nc(c,s,E),null!==C.classes&&gg(c,s,C.classes),null!==C.styles&&Pc(c,s,C.styles)));const P=l.createRenderer(s,r),L=Lc(o,Ig(r),null,r.onPush?64:16,o[20],C,l,P,p||null,null);return v.firstCreatePass&&(ji(Ru(C,o),v,r.type),vt(v,C),Sv(C,o.length,1)),ka(o,L),o[20]=L}(P,this.componentDef,$,v,C);if(P)if(l)nc(C,P,["ng-version",ud.full]);else{const{attrs:ot,classes:_t}=function vg(s){const r=[],o=[];let l=1,c=2;for(;l<s.length;){let p=s[l];if("string"==typeof p)2===c?""!==p&&r.push(p,s[++l]):8===c&&o.push(p);else{if(!as(c))break;c=p}l++}return{attrs:r,classes:o}}(this.componentDef.selectors[0]);ot&&nc(C,P,ot),_t&&_t.length>0&&gg(C,P,_t.join(" "))}if(lt=Ji(U,20),void 0!==o){const ot=lt.projection=[];for(let _t=0;_t<this.ngContentSelectors.length;_t++){const Nt=o[_t];ot.push(null!=Nt?Array.from(Nt):null)}}rt=function qg(s,r,o,l,c){const p=o[1],v=function wv(s,r,o){const l=Li();s.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),Ev(s,l,r,rh(s,r,1,null),o));const c=ac(r,s,l.directiveStart,l);Rn(c,r);const p=In(l,r);return p&&Rn(p,r),c}(p,o,r);if(l.components.push(v),s[8]=v,c&&c.forEach(C=>C(v,r)),r.contentQueries){const C=Li();r.contentQueries(1,v,C.directiveStart)}const w=Li();return!p.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(ii(w.index),Mv(o[1],w,0,w.directiveStart,w.directiveEnd,r),Lg(r,v)),v}(ft,this.componentDef,$,V,[g_]),Rc(U,$,null)}finally{ni()}return new No(this.componentType,rt,$r(lt,$),$,lt)}}class No extends class bh{}{constructor(r,o,l,c,p){super(),this.location=l,this._rootLView=c,this._tNode=p,this.instance=o,this.hostView=this.changeDetectorRef=new Cu(c),this.componentType=r}get injector(){return new qa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class Xo{}const yr=new Map;class Am extends Xo{constructor(r,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new hd(this);const l=fo(r);this._bootstrapComponents=is(l.bootstrap),this._r3Injector=Gc(r,o,[{provide:Xo,useValue:this},{provide:vs,useValue:this.componentFactoryResolver}],yn(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,o=Ti.THROW_IF_NOT_FOUND,l=_e.Default){return r===Ti||r===Xo||r===Uc?this:this._r3Injector.get(r,o,l)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class Eu extends class qs{}{constructor(r){super(),this.moduleType=r,null!==fo(r)&&function cd(s){const r=new Set;!function o(l){const c=fo(l,!0),p=c.id;null!==p&&(function ta(s,r,o){if(r&&r!==o)throw new Error(`Duplicate module registered for ${s} - ${yn(r)} vs ${yn(r.name)}`)}(p,yr.get(p),l),yr.set(p,l));const v=is(c.imports);for(const w of v)r.has(w)||(r.add(w),o(w))}(s)}(r)}create(r){return new Am(this.moduleType,r)}}function C0(s,r,o,l){return function ip(s,r,o,l,c,p){const v=r+o;return pr(s,v,c)?function Us(s,r,o){return s[r]=o}(s,v+1,p?l.call(p,c):l(c)):function np(s,r){const o=s[r];return o===fe?void 0:o}(s,v+1)}(pt(),function Vr(){const s=Pt.lFrame;let r=s.bindingRootIndex;return-1===r&&(r=s.bindingRootIndex=s.tView.bindingStartIndex),r}(),s,r,o,l)}function D_(s){return r=>{setTimeout(s,void 0,r)}}const Or=class pN extends Yh{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,o,l){var c,p,v;let w=r,C=o||(()=>null),E=l;if(r&&"object"==typeof r){const L=r;w=null===(c=L.next)||void 0===c?void 0:c.bind(L),C=null===(p=L.error)||void 0===p?void 0:p.bind(L),E=null===(v=L.complete)||void 0===v?void 0:v.bind(L)}this.__isAsync&&(C=D_(C),w&&(w=D_(w)),E&&(E=D_(E)));const P=super.subscribe({next:w,error:C,complete:E});return r instanceof Wn&&r.add(P),P}};function gN(){return this._results[Ia()]()}class S_{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=Ia(),l=S_.prototype;l[o]||(l[o]=gN)}get changes(){return this._changes||(this._changes=new Or)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,o){return this._results.reduce(r,o)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,o){const l=this;l.dirty=!1;const c=bo(r);(this._changesDetected=!function jx(s,r,o){if(s.length!==r.length)return!1;for(let l=0;l<s.length;l++){let c=s[l],p=r[l];if(o&&(c=o(c),p=o(p)),p!==c)return!1}return!0}(l._results,c,o))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let jh=(()=>{class s{}return s.__NG_ELEMENT_ID__=vN,s})();const mN=jh,yN=class extends mN{constructor(r,o,l){super(),this._declarationLView=r,this._declarationTContainer=o,this.elementRef=l}createEmbeddedView(r){const o=this._declarationTContainer.tViews,l=Lc(this._declarationLView,o,r,16,null,o.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(o)),Rc(o,l,r),new mr(l)}};function vN(){return o1(Li(),pt())}function o1(s,r){return 4&s.type?new yN(r,s,$r(s,r)):null}let Tu=(()=>{class s{}return s.__NG_ELEMENT_ID__=xN,s})();function xN(){return uS(Li(),pt())}const wN=Tu,aS=class extends wN{constructor(r,o,l){super(),this._lContainer=r,this._hostTNode=o,this._hostLView=l}get element(){return $r(this._hostTNode,this._hostLView)}get injector(){return new qa(this._hostTNode,this._hostLView)}get parentInjector(){const r=pa(this._hostTNode,this._hostLView);if(vy(r)){const o=Fl(r,this._hostLView),l=Lu(r);return new qa(o[1].data[l+8],o)}return new qa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const o=lS(this._lContainer);return null!==o&&o[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,o,l){const c=r.createEmbeddedView(o||{});return this.insert(c,l),c}createComponent(r,o,l,c,p){const v=r&&!function hc(s){return"function"==typeof s}(r);let w;if(v)w=o;else{const L=o||{};w=L.index,l=L.injector,c=L.projectableNodes,p=L.ngModuleRef}const C=v?r:new Fh(Re(r)),E=l||this.parentInjector;if(!p&&null==C.ngModule){const V=(v?E:this.parentInjector).get(Xo,null);V&&(p=V)}const P=C.create(E,c,void 0,p);return this.insert(P.hostView,w),P}insert(r,o){const l=r._lView,c=l[1];if(function bu(s){return ct(s[3])}(l)){const P=this.indexOf(r);if(-1!==P)this.detach(P);else{const L=l[3],V=new aS(L,L[6],L[3]);V.detach(V.indexOf(r))}}const p=this._adjustIndex(o),v=this._lContainer;!function lg(s,r,o,l){const c=10+l,p=o.length;l>0&&(o[c-1][4]=r),l<p-10?(r[4]=o[c],Vx(o,10+l,r)):(o.push(r),r[4]=null),r[3]=o;const v=r[17];null!==v&&o!==v&&function ug(s,r){const o=s[9];r[16]!==r[3][3][16]&&(s[2]=!0),null===o?s[9]=[r]:o.push(r)}(v,r);const w=r[19];null!==w&&w.insertView(s),r[2]|=128}(c,l,v,p);const w=lf(p,v),C=l[11],E=of(C,v[7]);return null!==E&&function sg(s,r,o,l,c,p){l[0]=c,l[6]=r,Nc(s,l,o,1,c,p)}(c,v[6],C,l,E,w),r.attachToViewContainerRef(),Vx(E_(v),p,r),r}move(r,o){return this.insert(r,o)}indexOf(r){const o=lS(this._lContainer);return null!==o?o.indexOf(r):-1}remove(r){const o=this._adjustIndex(r,-1),l=Tc(this._lContainer,o);l&&(Rl(E_(this._lContainer),o),rf(l[1],l))}detach(r){const o=this._adjustIndex(r,-1),l=Tc(this._lContainer,o);return l&&null!=Rl(E_(this._lContainer),o)?new mr(l):null}_adjustIndex(r,o=0){return null==r?this.length+o:r}};function lS(s){return s[8]}function E_(s){return s[8]||(s[8]=[])}function uS(s,r){let o;const l=r[s.index];if(ct(l))o=l;else{let c;if(8&s.type)c=De(l);else{const p=r[11];c=p.createComment("");const v=In(s,r);Y(p,of(p,v),c,function Jy(s,r){return ei(s)?s.nextSibling(r):r.nextSibling}(p,v),!1)}r[s.index]=o=function Rg(s,r,o,l){return new Array(s,!0,!1,r,null,0,l,o,null,null)}(l,r,c,s),ka(r,o)}return new aS(o,s,r)}class T_{constructor(r){this.queryList=r,this.matches=null}clone(){return new T_(this.queryList)}setDirty(){this.queryList.setDirty()}}class k_{constructor(r=[]){this.queries=r}createEmbeddedView(r){const o=r.queries;if(null!==o){const l=null!==r.contentQueries?r.contentQueries[0]:o.length,c=[];for(let p=0;p<l;p++){const v=o.getByIndex(p);c.push(this.queries[v.indexInDeclarationView].clone())}return new k_(c)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let o=0;o<this.queries.length;o++)null!==pS(r,o).matches&&this.queries[o].setDirty()}}class hS{constructor(r,o,l=null){this.predicate=r,this.flags=o,this.read=l}}class N_{constructor(r=[]){this.queries=r}elementStart(r,o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(r,o)}elementEnd(r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(r)}embeddedTView(r){let o=null;for(let l=0;l<this.length;l++){const c=null!==o?o.length:0,p=this.getByIndex(l).embeddedTView(r,c);p&&(p.indexInDeclarationView=l,null!==o?o.push(p):o=[p])}return null!==o?new N_(o):null}template(r,o){for(let l=0;l<this.queries.length;l++)this.queries[l].template(r,o)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class P_{constructor(r,o=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(r,o){this.isApplyingToNode(o)&&this.matchTNode(r,o)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,o){this.elementStart(r,o)}embeddedTView(r,o){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,o),new P_(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let l=r.parent;for(;null!==l&&8&l.type&&l.index!==o;)l=l.parent;return o===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(r,o){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const p=l[c];this.matchTNodeWithReadOption(r,o,CN(o,p)),this.matchTNodeWithReadOption(r,o,Qa(o,r,p,!1,!1))}else l===jh?4&o.type&&this.matchTNodeWithReadOption(r,o,-1):this.matchTNodeWithReadOption(r,o,Qa(o,r,l,!1,!1))}matchTNodeWithReadOption(r,o,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===mn||c===Tu||c===jh&&4&o.type)this.addMatch(o.index,-2);else{const p=Qa(o,r,c,!1,!1);null!==p&&this.addMatch(o.index,p)}else this.addMatch(o.index,l)}}addMatch(r,o){null===this.matches?this.matches=[r,o]:this.matches.push(r,o)}}function CN(s,r){const o=s.localNames;if(null!==o)for(let l=0;l<o.length;l+=2)if(o[l]===r)return o[l+1];return null}function SN(s,r,o,l){return-1===o?function DN(s,r){return 11&s.type?$r(s,r):4&s.type?o1(s,r):null}(r,s):-2===o?function EN(s,r,o){return o===mn?$r(r,s):o===jh?o1(r,s):o===Tu?uS(r,s):void 0}(s,r,l):ac(s,s[1],o,r)}function cS(s,r,o,l){const c=r[19].queries[l];if(null===c.matches){const p=s.data,v=o.matches,w=[];for(let C=0;C<v.length;C+=2){const E=v[C];w.push(E<0?null:SN(r,p[E],v[C+1],o.metadata.read))}c.matches=w}return c.matches}function A_(s,r,o,l){const c=s.queries.getByIndex(o),p=c.matches;if(null!==p){const v=cS(s,r,c,o);for(let w=0;w<p.length;w+=2){const C=p[w];if(C>0)l.push(v[w/2]);else{const E=p[w+1],P=r[-C];for(let L=10;L<P.length;L++){const V=P[L];V[17]===V[3]&&A_(V[1],V,E,l)}if(null!==P[9]){const L=P[9];for(let V=0;V<L.length;V++){const U=L[V];A_(U[1],U,E,l)}}}}}return l}function s1(s){const r=pt(),o=Oe(),l=kx();bp(l+1);const c=pS(o,l);if(s.dirty&&Qr(r)===(2==(2&c.metadata.flags))){if(null===c.matches)s.reset([]);else{const p=c.crossesNgTemplate?A_(o,r,l,[]):cS(o,r,c,l);s.reset(p,Js),s.notifyOnChanges()}return!0}return!1}function a1(s,r,o){const l=Oe();l.firstCreatePass&&(function fS(s,r,o){null===s.queries&&(s.queries=new N_),s.queries.track(new P_(r,o))}(l,new hS(s,r,o),-1),2==(2&r)&&(l.staticViewQueries=!0)),function dS(s,r,o){const l=new S_(4==(4&o));At(s,r,l,l.destroy),null===r[19]&&(r[19]=new k_),r[19].queries.push(new T_(l))}(l,pt(),r)}function l1(){return function kN(s,r){return s[19].queries[r].queryList}(pt(),kx())}function pS(s,r){return s.queries.getByIndex(r)}function c1(...s){}const AS=new qt("Application Initializer");let R_=(()=>{class s{constructor(o){this.appInits=o,this.resolve=c1,this.reject=c1,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const o=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const p=this.appInits[c]();if(cu(p))o.push(p);else if(Zc(p)){const v=new Promise((w,C)=>{p.subscribe({complete:w,error:C})});o.push(v)}}Promise.all(o).then(()=>{l()}).catch(c=>{this.reject(c)}),0===o.length&&l(),this.initialized=!0}}return s.\u0275fac=function(o){return new(o||s)(Xt(AS,8))},s.\u0275prov=Et({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const k0=new qt("AppId",{providedIn:"root",factory:function IS(){return`${j_()}${j_()}${j_()}`}});function j_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const bS=new qt("Platform Initializer"),V_=new qt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),$N=new qt("appBootstrapListener"),Vh=new qt("LocaleId",{providedIn:"root",factory:()=>cc(Vh,_e.Optional|_e.SkipSelf)||function WN(){return"undefined"!=typeof $localize&&$localize.locale||td}()}),QN=(()=>Promise.resolve(0))();function B_(s){"undefined"==typeof Zone?QN.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class rr{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Or(!1),this.onMicrotaskEmpty=new Or(!1),this.onStable=new Or(!1),this.onError=new Or(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&o,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function qN(){let s=ae.requestAnimationFrame,r=ae.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&r){const o=s[Zone.__symbol__("OriginalDelegate")];o&&(s=o);const l=r[Zone.__symbol__("OriginalDelegate")];l&&(r=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function nP(s){const r=()=>{!function eP(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(ae,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,H_(s),s.isCheckStableRunning=!0,U_(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),H_(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,l,c,p,v,w)=>{try{return OS(s),o.invokeTask(c,p,v,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&r(),FS(s)}},onInvoke:(o,l,c,p,v,w,C)=>{try{return OS(s),o.invoke(c,p,v,w,C)}finally{s.shouldCoalesceRunChangeDetection&&r(),FS(s)}},onHasTask:(o,l,c,p)=>{o.hasTask(c,p),l===c&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,H_(s),U_(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(o,l,c,p)=>(o.handleError(c,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!rr.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(rr.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,o,l){return this._inner.run(r,o,l)}runTask(r,o,l,c){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+c,r,tP,c1,c1);try{return p.runTask(v,o,l)}finally{p.cancelTask(v)}}runGuarded(r,o,l){return this._inner.runGuarded(r,o,l)}runOutsideAngular(r){return this._outer.run(r)}}const tP={};function U_(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function H_(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function OS(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function FS(s){s._nesting--,U_(s)}class iP{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Or,this.onMicrotaskEmpty=new Or,this.onStable=new Or,this.onError=new Or}run(r,o,l){return r.apply(o,l)}runGuarded(r,o,l){return r.apply(o,l)}runOutsideAngular(r){return r()}runTask(r,o,l,c){return r.apply(o,l)}}let G_=(()=>{class s{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{rr.assertNotInAngularZone(),B_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())B_(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(o)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,l,c){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),o(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:o,timeoutId:p,updateCb:c})}whenStable(o,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,l,c){return[]}}return s.\u0275fac=function(o){return new(o||s)(Xt(rr))},s.\u0275prov=Et({token:s,factory:s.\u0275fac}),s})(),rP=(()=>{class s{constructor(){this._applications=new Map,z_.addToWindow(this)}registerApplication(o,l){this._applications.set(o,l)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,l=!0){return z_.findTestabilityInTree(this,o,l)}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=Et({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();class oP{addToWindow(r){}findTestabilityInTree(r,o,l){return null}}let z_=new oP,ap=null;const LS=new qt("AllowMultipleToken"),RS=new qt("PlatformOnDestroy");function jS(s,r,o=[]){const l=`Platform: ${r}`,c=new qt(l);return(p=[])=>{let v=Y_();if(!v||v.injector.get(LS,!1)){const w=[...o,...p,{provide:c,useValue:!0}];s?s(w):function uP(s){if(ap&&!ap.get(LS,!1))throw new Vt(400,"");ap=s;const r=s.get(VS),o=s.get(bS,null);o&&o.forEach(l=>l())}(function cP(s=[],r){return Ti.create({name:r,providers:[{provide:lh,useValue:"platform"},{provide:RS,useValue:()=>ap=null},...s]})}(w,l))}return function hP(s){const r=Y_();if(!r)throw new Vt(401,"");return r}()}}function Y_(){var s;return null!==(s=null==ap?void 0:ap.get(VS))&&void 0!==s?s:null}let VS=(()=>{class s{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,l){const w=function dP(s,r){let o;return o="noop"===s?new iP:("zone.js"===s?void 0:s)||new rr({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),o}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),C=[{provide:rr,useValue:w}];return w.run(()=>{const E=Ti.create({providers:C,parent:this.injector,name:o.moduleType.name}),P=o.create(E),L=P.injector.get(Er,null);if(!L)throw new Vt(402,"");return w.runOutsideAngular(()=>{const V=w.onError.subscribe({next:U=>{L.handleError(U)}});P.onDestroy(()=>{X_(this._modules,P),V.unsubscribe()})}),function fP(s,r,o){try{const l=o();return cu(l)?l.catch(c=>{throw r.runOutsideAngular(()=>s.handleError(c)),c}):l}catch(l){throw r.runOutsideAngular(()=>s.handleError(l)),l}}(L,w,()=>{const V=P.injector.get(R_);return V.runInitializers(),V.donePromise.then(()=>(function km(s){Bn(s,"Expected localeId to be defined"),"string"==typeof s&&(Tm=s.toLowerCase().replace(/_/g,"-"))}(P.injector.get(Vh,td)||td),this._moduleDoBootstrap(P),P))})})}bootstrapModule(o,l=[]){const c=BS({},l);return function aP(s,r,o){const l=new Eu(o);return Promise.resolve(l)}(0,0,o).then(p=>this.bootstrapModuleFactory(p,c))}_moduleDoBootstrap(o){const l=o.injector.get(US);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!o.instance.ngDoBootstrap)throw new Vt(403,"");o.instance.ngDoBootstrap(l)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Vt(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const o=this._injector.get(RS,null);null==o||o(),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(o){return new(o||s)(Xt(Ti))},s.\u0275prov=Et({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function BS(s,r){return Array.isArray(r)?r.reduce(BS,s):Object.assign(Object.assign({},s),r)}let US=(()=>{class s{constructor(o,l,c,p){this._zone=o,this._injector=l,this._exceptionHandler=c,this._initStatus=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new bi(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),w=new bi(C=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{rr.assertNotInAngularZone(),B_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const P=this._zone.onUnstable.subscribe(()=>{rr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{E.unsubscribe(),P.unsubscribe()}});this.isStable=function kM(...s){let r=Number.POSITIVE_INFINITY,o=null,l=s[s.length-1];return vM(l)?(o=s.pop(),s.length>1&&"number"==typeof s[s.length-1]&&(r=s.pop())):"number"==typeof l&&(r=s.pop()),null===o&&1===s.length&&s[0]instanceof bi?s[0]:function TM(s=Number.POSITIVE_INFINITY){return q0(pM,s)}(r)(tx(s,o))}(v,w.pipe(AM()))}bootstrap(o,l){if(!this._initStatus.done)throw new Vt(405,"");let c;c=o instanceof ad?o:this._injector.get(vs).resolveComponentFactory(o),this.componentTypes.push(c.componentType);const p=function lP(s){return s.isBoundToModule}(c)?void 0:this._injector.get(Xo),w=c.create(Ti.NULL,[],l||c.selector,p),C=w.location.nativeElement,E=w.injector.get(G_,null),P=E&&w.injector.get(rP);return E&&P&&P.registerApplication(C,E),w.onDestroy(()=>{this.detachView(w.hostView),X_(this.components,w),P&&P.unregisterApplication(C)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Vt(101,"");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const l=o;this._views.push(l),l.attachToAppRef(this)}detachView(o){const l=o;X_(this._views,l),l.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get($N,[]).concat(this._bootstrapListeners).forEach(c=>c(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(o){return new(o||s)(Xt(rr),Xt(Ti),Xt(Er),Xt(R_))},s.\u0275prov=Et({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function X_(s,r){const o=s.indexOf(r);o>-1&&s.splice(o,1)}let GS=!0,$_=(()=>{class s{}return s.__NG_ELEMENT_ID__=mP,s})();function mP(s){return function yP(s,r,o){if(zn(s)&&!o){const l=we(s.index,r);return new mr(l,l)}return 47&s.type?new mr(r[16],r):null}(Li(),pt(),16==(16&s))}class JS{constructor(){}supports(r){return r instanceof Map||Tf(r)}create(){return new EP}}class EP{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let o;for(o=this._mapHead;null!==o;o=o._next)r(o)}forEachPreviousItem(r){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)r(o)}forEachChangedItem(r){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}diff(r){if(r){if(!(r instanceof Map||Tf(r)))throw new Vt(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(r,(l,c)=>{if(o&&o.key===c)this._maybeAddToChanges(o,l),this._appendAfter=o,o=o._next;else{const p=this._getOrCreateRecordForKey(c,l);o=this._insertBeforeOrAppend(o,p)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let l=o;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,o){if(r){const l=r._prev;return o._next=r,o._prev=l,r._prev=o,l&&(l._next=o),r===this._mapHead&&(this._mapHead=o),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(r,o){if(this._records.has(r)){const c=this._records.get(r);this._maybeAddToChanges(c,o);const p=c._prev,v=c._next;return p&&(p._next=v),v&&(v._prev=p),c._next=null,c._prev=null,c}const l=new TP(r);return this._records.set(r,l),l.currentValue=o,this._addToAdditions(l),l}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,o){Object.is(o,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=o,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,o){r instanceof Map?r.forEach(o):Object.keys(r).forEach(l=>o(r[l],l))}}class TP{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function qS(){return new N0([new JS])}let N0=(()=>{class s{constructor(o){this.factories=o}static create(o,l){if(l){const c=l.factories.slice();o=o.concat(c)}return new s(o)}static extend(o){return{provide:s,useFactory:l=>s.create(o,l||qS()),deps:[[s,new dc,new Ul]]}}find(o){const l=this.factories.find(p=>p.supports(o));if(l)return l;throw new Vt(901,"")}}return s.\u0275prov=Et({token:s,providedIn:"root",factory:qS}),s})();const PP=jS(null,"core",[]);let AP=(()=>{class s{constructor(o){}}return s.\u0275fac=function(o){return new(o||s)(Xt(US))},s.\u0275mod=Lr({type:s}),s.\u0275inj=Xi({}),s})(),g1=null;function up(){return g1}const Ni=new qt("DocumentToken");let fE=(()=>{class s{constructor(o,l,c){this._ngEl=o,this._differs=l,this._renderer=c,this._ngStyle=null,this._differ=null}set ngStyle(o){this._ngStyle=o,!this._differ&&o&&(this._differ=this._differs.find(o).create())}ngDoCheck(){if(this._differ){const o=this._differ.diff(this._ngStyle);o&&this._applyChanges(o)}}_setStyle(o,l){const[c,p]=o.split(".");null!=(l=null!=l&&p?`${l}${p}`:l)?this._renderer.setStyle(this._ngEl.nativeElement,c,l):this._renderer.removeStyle(this._ngEl.nativeElement,c)}_applyChanges(o){o.forEachRemovedItem(l=>this._setStyle(l.key,null)),o.forEachAddedItem(l=>this._setStyle(l.key,l.currentValue)),o.forEachChangedItem(l=>this._setStyle(l.key,l.currentValue))}}return s.\u0275fac=function(o){return new(o||s)(yt(mn),yt(N0),yt(Ua))},s.\u0275dir=he({type:s,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),s})(),QA=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=Lr({type:s}),s.\u0275inj=Xi({}),s})();const gE="browser";class cC extends class oI extends class OP{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function bP(s){g1||(g1=s)}(new cC)}onAndCancel(r,o,l){return r.addEventListener(o,l,!1),()=>{r.removeEventListener(o,l,!1)}}dispatchEvent(r,o){r.dispatchEvent(o)}remove(r){r.parentNode&&r.parentNode.removeChild(r)}createElement(r,o){return(o=o||this.getDefaultDocument()).createElement(r)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(r){return r.nodeType===Node.ELEMENT_NODE}isShadowRoot(r){return r instanceof DocumentFragment}getGlobalEventTarget(r,o){return"window"===o?window:"document"===o?r:"body"===o?r.body:null}getBaseHref(r){const o=function sI(){return I0=I0||document.querySelector("base"),I0?I0.getAttribute("href"):null}();return null==o?null:function aI(s){S1=S1||document.createElement("a"),S1.setAttribute("href",s);const r=S1.pathname;return"/"===r.charAt(0)?r:`/${r}`}(o)}resetBaseElement(){I0=null}getUserAgent(){return window.navigator.userAgent}getCookie(r){return function wA(s,r){r=encodeURIComponent(r);for(const o of s.split(";")){const l=o.indexOf("="),[c,p]=-1==l?[o,""]:[o.slice(0,l),o.slice(l+1)];if(c.trim()===r)return decodeURIComponent(p)}return null}(document.cookie,r)}}let S1,I0=null;const yE=new qt("TRANSITION_ID"),uI=[{provide:AS,useFactory:function lI(s,r,o){return()=>{o.get(R_).donePromise.then(()=>{const l=up(),c=r.querySelectorAll(`style[ng-transition="${s}"]`);for(let p=0;p<c.length;p++)l.remove(c[p])})}},deps:[yE,Ni,Ti],multi:!0}];class dC{static init(){!function sP(s){z_=s}(new dC)}addToWindow(r){ae.getAngularTestability=(l,c=!0)=>{const p=r.findTestabilityInTree(l,c);if(null==p)throw new Error("Could not find testability for element.");return p},ae.getAllAngularTestabilities=()=>r.getAllTestabilities(),ae.getAllAngularRootElements=()=>r.getAllRootElements(),ae.frameworkStabilizers||(ae.frameworkStabilizers=[]),ae.frameworkStabilizers.push(l=>{const c=ae.getAllAngularTestabilities();let p=c.length,v=!1;const w=function(C){v=v||C,p--,0==p&&l(v)};c.forEach(function(C){C.whenStable(w)})})}findTestabilityInTree(r,o,l){if(null==o)return null;const c=r.getTestability(o);return null!=c?c:l?up().isShadowRoot(o)?this.findTestabilityInTree(r,o.host,!0):this.findTestabilityInTree(r,o.parentElement,!0):null}}let hI=(()=>{class s{build(){return new XMLHttpRequest}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=Et({token:s,factory:s.\u0275fac}),s})();const E1=new qt("EventManagerPlugins");let T1=(()=>{class s{constructor(o,l){this._zone=l,this._eventNameToPlugin=new Map,o.forEach(c=>c.manager=this),this._plugins=o.slice().reverse()}addEventListener(o,l,c){return this._findPluginFor(l).addEventListener(o,l,c)}addGlobalEventListener(o,l,c){return this._findPluginFor(l).addGlobalEventListener(o,l,c)}getZone(){return this._zone}_findPluginFor(o){const l=this._eventNameToPlugin.get(o);if(l)return l;const c=this._plugins;for(let p=0;p<c.length;p++){const v=c[p];if(v.supports(o))return this._eventNameToPlugin.set(o,v),v}throw new Error(`No event manager plugin found for event ${o}`)}}return s.\u0275fac=function(o){return new(o||s)(Xt(E1),Xt(rr))},s.\u0275prov=Et({token:s,factory:s.\u0275fac}),s})();class vE{constructor(r){this._doc=r}addGlobalEventListener(r,o,l){const c=up().getGlobalEventTarget(this._doc,r);if(!c)throw new Error(`Unsupported event target ${c} for event ${o}`);return this.addEventListener(c,o,l)}}let xE=(()=>{class s{constructor(){this._stylesSet=new Set}addStyles(o){const l=new Set;o.forEach(c=>{this._stylesSet.has(c)||(this._stylesSet.add(c),l.add(c))}),this.onStylesAdded(l)}onStylesAdded(o){}getAllStyles(){return Array.from(this._stylesSet)}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=Et({token:s,factory:s.\u0275fac}),s})(),b0=(()=>{class s extends xE{constructor(o){super(),this._doc=o,this._hostNodes=new Map,this._hostNodes.set(o.head,[])}_addStylesToHost(o,l,c){o.forEach(p=>{const v=this._doc.createElement("style");v.textContent=p,c.push(l.appendChild(v))})}addHost(o){const l=[];this._addStylesToHost(this._stylesSet,o,l),this._hostNodes.set(o,l)}removeHost(o){const l=this._hostNodes.get(o);l&&l.forEach(wE),this._hostNodes.delete(o)}onStylesAdded(o){this._hostNodes.forEach((l,c)=>{this._addStylesToHost(o,c,l)})}ngOnDestroy(){this._hostNodes.forEach(o=>o.forEach(wE))}}return s.\u0275fac=function(o){return new(o||s)(Xt(Ni))},s.\u0275prov=Et({token:s,factory:s.\u0275fac}),s})();function wE(s){up().remove(s)}const fC={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},pC=/%COMP%/g;function k1(s,r,o){for(let l=0;l<r.length;l++){let c=r[l];Array.isArray(c)?k1(s,c,o):(c=c.replace(pC,s),o.push(c))}return o}function CE(s){return r=>{if("__ngUnwrap__"===r)return s;!1===s(r)&&(r.preventDefault(),r.returnValue=!1)}}let N1=(()=>{class s{constructor(o,l,c){this.eventManager=o,this.sharedStylesHost=l,this.appId=c,this.rendererByCompId=new Map,this.defaultRenderer=new gC(o)}createRenderer(o,l){if(!o||!l)return this.defaultRenderer;switch(l.encapsulation){case Un.Emulated:{let c=this.rendererByCompId.get(l.id);return c||(c=new mI(this.eventManager,this.sharedStylesHost,l,this.appId),this.rendererByCompId.set(l.id,c)),c.applyToHost(o),c}case 1:case Un.ShadowDom:return new yI(this.eventManager,this.sharedStylesHost,o,l);default:if(!this.rendererByCompId.has(l.id)){const c=k1(l.id,l.styles,[]);this.sharedStylesHost.addStyles(c),this.rendererByCompId.set(l.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return s.\u0275fac=function(o){return new(o||s)(Xt(T1),Xt(b0),Xt(k0))},s.\u0275prov=Et({token:s,factory:s.\u0275fac}),s})();class gC{constructor(r){this.eventManager=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(r,o){return o?document.createElementNS(fC[o]||o,r):document.createElement(r)}createComment(r){return document.createComment(r)}createText(r){return document.createTextNode(r)}appendChild(r,o){r.appendChild(o)}insertBefore(r,o,l){r&&r.insertBefore(o,l)}removeChild(r,o){r&&r.removeChild(o)}selectRootElement(r,o){let l="string"==typeof r?document.querySelector(r):r;if(!l)throw new Error(`The selector "${r}" did not match any elements`);return o||(l.textContent=""),l}parentNode(r){return r.parentNode}nextSibling(r){return r.nextSibling}setAttribute(r,o,l,c){if(c){o=c+":"+o;const p=fC[c];p?r.setAttributeNS(p,o,l):r.setAttribute(o,l)}else r.setAttribute(o,l)}removeAttribute(r,o,l){if(l){const c=fC[l];c?r.removeAttributeNS(c,o):r.removeAttribute(`${l}:${o}`)}else r.removeAttribute(o)}addClass(r,o){r.classList.add(o)}removeClass(r,o){r.classList.remove(o)}setStyle(r,o,l,c){c&(eo.DashCase|eo.Important)?r.style.setProperty(o,l,c&eo.Important?"important":""):r.style[o]=l}removeStyle(r,o,l){l&eo.DashCase?r.style.removeProperty(o):r.style[o]=""}setProperty(r,o,l){r[o]=l}setValue(r,o){r.nodeValue=o}listen(r,o,l){return"string"==typeof r?this.eventManager.addGlobalEventListener(r,o,CE(l)):this.eventManager.addEventListener(r,o,CE(l))}}class mI extends gC{constructor(r,o,l,c){super(r),this.component=l;const p=k1(c+"-"+l.id,l.styles,[]);o.addStyles(p),this.contentAttr=function fI(s){return"_ngcontent-%COMP%".replace(pC,s)}(c+"-"+l.id),this.hostAttr=function pI(s){return"_nghost-%COMP%".replace(pC,s)}(c+"-"+l.id)}applyToHost(r){super.setAttribute(r,this.hostAttr,"")}createElement(r,o){const l=super.createElement(r,o);return super.setAttribute(l,this.contentAttr,""),l}}class yI extends gC{constructor(r,o,l,c){super(r),this.sharedStylesHost=o,this.hostEl=l,this.shadowRoot=l.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const p=k1(c.id,c.styles,[]);for(let v=0;v<p.length;v++){const w=document.createElement("style");w.textContent=p[v],this.shadowRoot.appendChild(w)}}nodeOrShadowRoot(r){return r===this.hostEl?this.shadowRoot:r}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(r,o){return super.appendChild(this.nodeOrShadowRoot(r),o)}insertBefore(r,o,l){return super.insertBefore(this.nodeOrShadowRoot(r),o,l)}removeChild(r,o){return super.removeChild(this.nodeOrShadowRoot(r),o)}parentNode(r){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(r)))}}let vI=(()=>{class s extends vE{constructor(o){super(o)}supports(o){return!0}addEventListener(o,l,c){return o.addEventListener(l,c,!1),()=>this.removeEventListener(o,l,c)}removeEventListener(o,l,c){return o.removeEventListener(l,c)}}return s.\u0275fac=function(o){return new(o||s)(Xt(Ni))},s.\u0275prov=Et({token:s,factory:s.\u0275fac}),s})();const SE=["alt","control","meta","shift"],wI={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},EE={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},MI={alt:s=>s.altKey,control:s=>s.ctrlKey,meta:s=>s.metaKey,shift:s=>s.shiftKey};let _I=(()=>{class s extends vE{constructor(o){super(o)}supports(o){return null!=s.parseEventName(o)}addEventListener(o,l,c){const p=s.parseEventName(l),v=s.eventCallback(p.fullKey,c,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>up().onAndCancel(o,p.domEventName,v))}static parseEventName(o){const l=o.toLowerCase().split("."),c=l.shift();if(0===l.length||"keydown"!==c&&"keyup"!==c)return null;const p=s._normalizeKey(l.pop());let v="";if(SE.forEach(C=>{const E=l.indexOf(C);E>-1&&(l.splice(E,1),v+=C+".")}),v+=p,0!=l.length||0===p.length)return null;const w={};return w.domEventName=c,w.fullKey=v,w}static getEventFullKey(o){let l="",c=function CI(s){let r=s.key;if(null==r){if(r=s.keyIdentifier,null==r)return"Unidentified";r.startsWith("U+")&&(r=String.fromCharCode(parseInt(r.substring(2),16)),3===s.location&&EE.hasOwnProperty(r)&&(r=EE[r]))}return wI[r]||r}(o);return c=c.toLowerCase()," "===c?c="space":"."===c&&(c="dot"),SE.forEach(p=>{p!=c&&MI[p](o)&&(l+=p+".")}),l+=c,l}static eventCallback(o,l,c){return p=>{s.getEventFullKey(p)===o&&c.runGuarded(()=>l(p))}}static _normalizeKey(o){return"esc"===o?"escape":o}}return s.\u0275fac=function(o){return new(o||s)(Xt(Ni))},s.\u0275prov=Et({token:s,factory:s.\u0275fac}),s})();const TI=jS(PP,"browser",[{provide:V_,useValue:gE},{provide:bS,useValue:function DI(){cC.makeCurrent(),dC.init()},multi:!0},{provide:Ni,useFactory:function EI(){return function vx(s){Ap=s}(document),document},deps:[]}]),kI=[{provide:lh,useValue:"root"},{provide:Er,useFactory:function SI(){return new Er},deps:[]},{provide:E1,useClass:vI,multi:!0,deps:[Ni,rr,V_]},{provide:E1,useClass:_I,multi:!0,deps:[Ni]},{provide:N1,useClass:N1,deps:[T1,b0,k0]},{provide:xs,useExisting:N1},{provide:xE,useExisting:b0},{provide:b0,useClass:b0,deps:[Ni]},{provide:G_,useClass:G_,deps:[rr]},{provide:T1,useClass:T1,deps:[E1,rr]},{provide:class rI{},useClass:hI,deps:[]}];let NI=(()=>{class s{constructor(o){if(o)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(o){return{ngModule:s,providers:[{provide:k0,useValue:o.appId},{provide:yE,useExisting:k0},uI]}}}return s.\u0275fac=function(o){return new(o||s)(Xt(s,12))},s.\u0275mod=Lr({type:s}),s.\u0275inj=Xi({providers:kI,imports:[QA,AP]}),s})();"undefined"!=typeof window&&window;let yC=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=Et({token:s,factory:function(o){let l=null;return l=o?new(o||s):Xt(NE),l},providedIn:"root"}),s})(),NE=(()=>{class s extends yC{constructor(o){super(),this._doc=o}sanitize(o,l){if(null==l)return null;switch(o){case Ye.NONE:return l;case Ye.HTML:return bs(l,"HTML")?vo(l):vc(this._doc,String(l)).toString();case Ye.STYLE:return bs(l,"Style")?vo(l):l;case Ye.SCRIPT:if(bs(l,"Script"))return vo(l);throw new Error("unsafe value used in a script context");case Ye.URL:return Ly(l),bs(l,"URL")?vo(l):il(String(l));case Ye.RESOURCE_URL:if(bs(l,"ResourceURL"))return vo(l);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${o} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(o){return function Yl(s){return new pc(s)}(o)}bypassSecurityTrustStyle(o){return function Ry(s){return new Jp(s)}(o)}bypassSecurityTrustScript(o){return function $u(s){return new Fy(s)}(o)}bypassSecurityTrustUrl(o){return function jy(s){return new Kx(s)}(o)}bypassSecurityTrustResourceUrl(o){return function Vy(s){return new Zx(s)}(o)}}return s.\u0275fac=function(o){return new(o||s)(Xt(Ni))},s.\u0275prov=Et({token:s,factory:function(o){let l=null;return l=o?new o:function VI(s){return new NE(s.get(Ni))}(Xt(Ti)),l},providedIn:"root"}),s})();var st=$m(813);class hp extends st.WA{constructor(){super(...arguments),this._arrowKeyBehavior="move",this._pasteOffset=new st.E9(10,10),this._lastPasteOffset=new st.E9(0,0)}get arrowKeyBehavior(){return this._arrowKeyBehavior}set arrowKeyBehavior(r){if("move"!==r&&"select"!==r&&"scroll"!==r&&"none"!==r)throw new Error('DrawCommandHandler.arrowKeyBehavior must be either "move", "select", "scroll", or "none", not: '+r);this._arrowKeyBehavior=r}get pasteOffset(){return this._pasteOffset}set pasteOffset(r){if(!(r instanceof st.E9))throw new Error("DrawCommandHandler.pasteOffset must be a Point, not: "+r);this._pasteOffset.set(r)}canAlignSelection(){const r=this.diagram;return!(r.isReadOnly||r.isModelReadOnly||r.selection.count<2)}alignLeft(){const r=this.diagram;r.startTransaction("aligning left");let o=1/0;r.selection.each(l=>{l instanceof st.rU||(o=Math.min(l.position.x,o))}),r.selection.each(l=>{l instanceof st.rU||l.move(new st.E9(o,l.position.y))}),r.commitTransaction("aligning left")}alignRight(){const r=this.diagram;r.startTransaction("aligning right");let o=-1/0;r.selection.each(l=>{l instanceof st.rU||(o=Math.max(l.actualBounds.x+l.actualBounds.width,o))}),r.selection.each(l=>{l instanceof st.rU||l.move(new st.E9(o-l.actualBounds.width,l.position.y))}),r.commitTransaction("aligning right")}alignTop(){const r=this.diagram;r.startTransaction("alignTop");let o=1/0;r.selection.each(l=>{l instanceof st.rU||(o=Math.min(l.position.y,o))}),r.selection.each(l=>{l instanceof st.rU||l.move(new st.E9(l.position.x,o))}),r.commitTransaction("alignTop")}alignBottom(){const r=this.diagram;r.startTransaction("aligning bottom");let o=-1/0;r.selection.each(l=>{l instanceof st.rU||(o=Math.max(l.actualBounds.y+l.actualBounds.height,o))}),r.selection.each(l=>{l instanceof st.rU||l.move(new st.E9(l.actualBounds.x,o-l.actualBounds.height))}),r.commitTransaction("aligning bottom")}alignCenterX(){const r=this.diagram,o=r.selection.first();if(!o)return;r.startTransaction("aligning Center X");const l=o.actualBounds.x+o.actualBounds.width/2;r.selection.each(c=>{c instanceof st.rU||c.move(new st.E9(l-c.actualBounds.width/2,c.actualBounds.y))}),r.commitTransaction("aligning Center X")}alignCenterY(){const r=this.diagram,o=r.selection.first();if(!o)return;r.startTransaction("aligning Center Y");const l=o.actualBounds.y+o.actualBounds.height/2;r.selection.each(c=>{c instanceof st.rU||c.move(new st.E9(c.actualBounds.x,l-c.actualBounds.height/2))}),r.commitTransaction("aligning Center Y")}alignColumn(r){const o=this.diagram;o.startTransaction("align Column"),void 0===r&&(r=0),r=parseFloat(r.toString());const l=new Array;o.selection.each(c=>{c instanceof st.rU||l.push(c)});for(let c=0;c<l.length-1;c++){const p=l[c];l[c+1].move(new st.E9(p.actualBounds.x,p.actualBounds.y+p.actualBounds.height+r))}o.commitTransaction("align Column")}alignRow(r){void 0===r&&(r=0),r=parseFloat(r.toString());const o=this.diagram;o.startTransaction("align Row");const l=new Array;o.selection.each(c=>{c instanceof st.rU||l.push(c)});for(let c=0;c<l.length-1;c++){const p=l[c];l[c+1].move(new st.E9(p.actualBounds.x+p.actualBounds.width+r,p.actualBounds.y))}o.commitTransaction("align Row")}canRotate(){const r=this.diagram;return!(r.isReadOnly||r.isModelReadOnly||r.selection.count<1)}rotate(r){void 0===r&&(r=90);const o=this.diagram;o.startTransaction("rotate "+r.toString()),o.selection.each(l=>{l instanceof st.rU||l instanceof st.ZA||(l.angle+=r)}),o.commitTransaction("rotate "+r.toString())}pullToFront(){const r=this.diagram;r.startTransaction("pullToFront");const o=new st.D5;r.selection.each(function(l){null!==l.layer&&o.set(l.layer,0)}),o.iteratorKeys.each(function(l){let c=0;l.parts.each(function(p){if(p.isSelected)return;const v=p.zOrder;isNaN(v)?p.zOrder=0:c=Math.max(c,v)}),o.set(l,c)}),r.selection.each(function(l){const c=o.get(l.layer)||0;hp._assignZOrder(l,c+1)}),r.commitTransaction("pullToFront")}pushToBack(){const r=this.diagram;r.startTransaction("pushToBack");const o=new st.D5;r.selection.each(function(l){null!==l.layer&&o.set(l.layer,0)}),o.iteratorKeys.each(function(l){let c=0;l.parts.each(function(p){if(p.isSelected)return;const v=p.zOrder;isNaN(v)?p.zOrder=0:c=Math.min(c,v)}),o.set(l,c)}),r.selection.each(function(l){const c=o.get(l.layer)||0;hp._assignZOrder(l,c-1-hp._findGroupDepth(l))}),r.commitTransaction("pushToBack")}static _assignZOrder(r,o,l){void 0===l&&(l=r),r.layer===l.layer&&(r.zOrder=o),r instanceof st.ZA&&r.memberParts.each(function(c){hp._assignZOrder(c,o+1,l)})}static _findGroupDepth(r){if(r instanceof st.ZA){let o=0;return r.memberParts.each(function(l){o=Math.max(o,hp._findGroupDepth(l))}),o+1}return 0}doKeyDown(){const o=this.diagram.lastInput;if("Up"===o.key||"Down"===o.key||"Left"===o.key||"Right"===o.key){const l=this.arrowKeyBehavior;if("none"===l)return;if("select"===l)return void this._arrowKeySelect();if("move"===l)return void this._arrowKeyMove()}super.doKeyDown()}_getAllParts(){const r=new Array;return this.diagram.nodes.each(o=>{r.push(o)}),this.diagram.parts.each(o=>{r.push(o)}),r}_arrowKeyMove(){const r=this.diagram,o=r.lastInput;let l=0,c=0;if(o.control||o.meta)l=1,c=1;else if(null!==r.grid){const p=r.grid.gridCellSize;c=p.width,l=p.height}r.startTransaction("arrowKeyMove"),r.selection.each(p=>{"Up"===o.key?p.move(new st.E9(p.actualBounds.x,p.actualBounds.y-l)):"Down"===o.key?p.move(new st.E9(p.actualBounds.x,p.actualBounds.y+l)):"Left"===o.key?p.move(new st.E9(p.actualBounds.x-c,p.actualBounds.y)):"Right"===o.key&&p.move(new st.E9(p.actualBounds.x+c,p.actualBounds.y))}),r.commitTransaction("arrowKeyMove")}_arrowKeySelect(){const r=this.diagram,o=r.lastInput;let l;"Up"===o.key?l=this._findNearestPartTowards(270):"Down"===o.key?l=this._findNearestPartTowards(90):"Left"===o.key?l=this._findNearestPartTowards(180):"Right"===o.key&&(l=this._findNearestPartTowards(0)),null!==l&&(o.shift?l.isSelected=!0:o.control||o.meta?l.isSelected=!l.isSelected:r.select(l))}_findNearestPartTowards(r){const o=this.diagram.selection.first();if(null===o)return null;const l=o.actualBounds.center,c=this._getAllParts();let p=1/0,v=o;for(let w=0;w<c.length;w++){const C=c[w];if(C===o)continue;const E=C.actualBounds.center,P=l.directionPoint(E),L=this._angleCloseness(P,r);if(L<=45){let V=l.distanceSquaredPoint(E);V*=1+Math.sin(L*Math.PI/180),V<p&&(p=V,v=C)}}return v}_angleCloseness(r,o){return Math.min(Math.abs(o-r),Math.min(Math.abs(o+360-r),Math.abs(o-360-r)))}copyToClipboard(r){super.copyToClipboard(r),this._lastPasteOffset.set(this.pasteOffset)}pasteFromClipboard(){const r=super.pasteFromClipboard();return this.diagram.moveParts(r,this._lastPasteOffset,!1),this._lastPasteOffset.add(this.pasteOffset),r}}class BI extends st.h1{constructor(){super(),this._guidelineSnapDistance=6,this._isGuidelineEnabled=!0,this._horizontalGuidelineColor="gray",this._verticalGuidelineColor="gray",this._centerGuidelineColor="gray",this._guidelineWidth=1,this._searchDistance=1e3,this._isGuidelineSnapEnabled=!0;const r={layerName:"Tool",isInDocumentBounds:!1},o={stroke:"gray",isGeometryPositioned:!0},l=st.bx.make;this.guidelineHtop=l(st.Lz,r,l(st.bn,o,{geometryString:"M0 0 100 0"})),this.guidelineHbottom=l(st.Lz,r,l(st.bn,o,{geometryString:"M0 0 100 0"})),this.guidelineHcenter=l(st.Lz,r,l(st.bn,o,{geometryString:"M0 0 100 0"})),this.guidelineVleft=l(st.Lz,r,l(st.bn,o,{geometryString:"M0 0 0 100"})),this.guidelineVright=l(st.Lz,r,l(st.bn,o,{geometryString:"M0 0 0 100"})),this.guidelineVcenter=l(st.Lz,r,l(st.bn,o,{geometryString:"M0 0 0 100"}))}get guidelineSnapDistance(){return this._guidelineSnapDistance}set guidelineSnapDistance(r){if("number"!=typeof r||isNaN(r)||r<0)throw new Error("new value for GuideddraggingTool.guidelineSnapDistance must be a non-negative number");this._guidelineSnapDistance!==r&&(this._guidelineSnapDistance=r)}get isGuidelineEnabled(){return this._isGuidelineEnabled}set isGuidelineEnabled(r){if("boolean"!=typeof r)throw new Error("new value for GuidedDraggingTool.isGuidelineEnabled must be a boolean value.");this._isGuidelineEnabled!==r&&(this._isGuidelineEnabled=r)}get horizontalGuidelineColor(){return this._horizontalGuidelineColor}set horizontalGuidelineColor(r){this._horizontalGuidelineColor!==r&&(this._horizontalGuidelineColor=r,this.guidelineHbottom.elements.first().stroke=this._horizontalGuidelineColor,this.guidelineHtop.elements.first().stroke=this._horizontalGuidelineColor)}get verticalGuidelineColor(){return this._verticalGuidelineColor}set verticalGuidelineColor(r){this._verticalGuidelineColor!==r&&(this._verticalGuidelineColor=r,this.guidelineVleft.elements.first().stroke=this._verticalGuidelineColor,this.guidelineVright.elements.first().stroke=this._verticalGuidelineColor)}get centerGuidelineColor(){return this._centerGuidelineColor}set centerGuidelineColor(r){this._centerGuidelineColor!==r&&(this._centerGuidelineColor=r,this.guidelineVcenter.elements.first().stroke=this._centerGuidelineColor,this.guidelineHcenter.elements.first().stroke=this._centerGuidelineColor)}get guidelineWidth(){return this._guidelineWidth}set guidelineWidth(r){if("number"!=typeof r||isNaN(r)||r<0)throw new Error("New value for GuidedDraggingTool.guidelineWidth must be a non-negative number.");this._guidelineWidth!==r&&(this._guidelineWidth=r,this.guidelineVcenter.elements.first().strokeWidth=r,this.guidelineHcenter.elements.first().strokeWidth=r,this.guidelineVleft.elements.first().strokeWidth=r,this.guidelineVright.elements.first().strokeWidth=r,this.guidelineHbottom.elements.first().strokeWidth=r,this.guidelineHtop.elements.first().strokeWidth=r)}get searchDistance(){return this._searchDistance}set searchDistance(r){if("number"!=typeof r||isNaN(r)||r<=0)throw new Error("new value for GuidedDraggingTool.searchDistance must be a positive number.");this._searchDistance!==r&&(this._searchDistance=r)}get isGuidelineSnapEnabled(){return this._isGuidelineSnapEnabled}set isGuidelineSnapEnabled(r){if("boolean"!=typeof r)throw new Error("new value for GuidedDraggingTool.isGuidelineSnapEnabled must be a boolean.");this._isGuidelineSnapEnabled!==r&&(this._isGuidelineSnapEnabled=r)}clearGuidelines(){this.diagram.remove(this.guidelineHbottom),this.diagram.remove(this.guidelineHcenter),this.diagram.remove(this.guidelineHtop),this.diagram.remove(this.guidelineVleft),this.diagram.remove(this.guidelineVright),this.diagram.remove(this.guidelineVcenter)}doDeactivate(){super.doDeactivate(),this.clearGuidelines()}doDragOver(r,o){this.clearGuidelines();const l=this.copiedParts||this.draggedParts;if(null===l)return;const c=l.iterator;if(c.next()){const p=c.key;this.showHorizontalMatches(p,this.isGuidelineEnabled,!1),this.showVerticalMatches(p,this.isGuidelineEnabled,!1)}}doDropOnto(r,o){this.clearGuidelines();const l=this.copiedParts||this.draggedParts;if(null===l)return;const c=l.iterator;if(c.next()){const p=c.key,v=this.diagram.lastInput,w=this.isGuidelineSnapEnabled&&!v.shift;this.showHorizontalMatches(p,!1,w),this.showVerticalMatches(p,!1,w)}}invalidateLinks(r){r instanceof st.NB&&r.invalidateConnectedLinks()}isGuiding(r,o){return r instanceof st.Lz&&!r.isSelected&&!(r instanceof st.rU)&&o instanceof st.Lz&&r.containingGroup===o.containingGroup&&null!==r.layer&&!r.layer.isTemporary}showHorizontalMatches(r,o,l){const c=r.locationObject.getDocumentBounds(),p=c.y,v=c.y+c.height/2,w=c.y+c.height,C=this.guidelineSnapDistance,E=this.searchDistance,P=c.copy();P.inflate(E,C+1);const L=this.diagram.findObjectsIn(P,lt=>lt.part,lt=>this.isGuiding(lt,r),!0);let V=C,U=null,$=st.z6.Default,rt=st.z6.Default;if(L.each(lt=>{if(lt===r)return;const ft=lt.locationObject.getDocumentBounds(),ot=ft.y,_t=ft.y+ft.height/2,Nt=ft.y+ft.height;Math.abs(v-_t)<V&&(V=Math.abs(v-_t),U=lt,$=st.z6.Center,rt=st.z6.Center),Math.abs(p-ot)<V?(V=Math.abs(p-ot),U=lt,$=st.z6.Top,rt=st.z6.Top):Math.abs(p-Nt)<V&&(V=Math.abs(p-Nt),U=lt,$=st.z6.Top,rt=st.z6.Bottom),Math.abs(w-ot)<V?(V=Math.abs(w-ot),U=lt,$=st.z6.Bottom,rt=st.z6.Top):Math.abs(w-Nt)<V&&(V=Math.abs(w-Nt),U=lt,$=st.z6.Bottom,rt=st.z6.Bottom)}),null!==U){const lt=c.x-r.actualBounds.x,ft=c.y-r.actualBounds.y,ot=U.locationObject.getDocumentBounds(),_t=Math.min(c.x,ot.x)-10,Nt=Math.max(c.x+c.width,ot.x+ot.width)+10,ee=(new st.E9).setRectSpot(ot,rt);$===st.z6.Center?(l&&(r.move(new st.E9(c.x-lt,ee.y-c.height/2-ft)),this.invalidateLinks(r)),o&&(this.guidelineHcenter.position=new st.E9(_t,ee.y),this.guidelineHcenter.elt(0).width=Nt-_t,this.diagram.add(this.guidelineHcenter))):$===st.z6.Top?(l&&(r.move(new st.E9(c.x-lt,ee.y-ft)),this.invalidateLinks(r)),o&&(this.guidelineHtop.position=new st.E9(_t,ee.y),this.guidelineHtop.elt(0).width=Nt-_t,this.diagram.add(this.guidelineHtop))):$===st.z6.Bottom&&(l&&(r.move(new st.E9(c.x-lt,ee.y-c.height-ft)),this.invalidateLinks(r)),o&&(this.guidelineHbottom.position=new st.E9(_t,ee.y),this.guidelineHbottom.elt(0).width=Nt-_t,this.diagram.add(this.guidelineHbottom)))}}showVerticalMatches(r,o,l){const c=r.locationObject.getDocumentBounds(),p=c.x,v=c.x+c.width/2,w=c.x+c.width,C=this.guidelineSnapDistance,E=this.searchDistance,P=c.copy();P.inflate(C+1,E);const L=this.diagram.findObjectsIn(P,lt=>lt.part,lt=>this.isGuiding(lt,r),!0);let V=C,U=null,$=st.z6.Default,rt=st.z6.Default;if(L.each(lt=>{if(lt===r)return;const ft=lt.locationObject.getDocumentBounds(),ot=ft.x,_t=ft.x+ft.width/2,Nt=ft.x+ft.width;Math.abs(v-_t)<V&&(V=Math.abs(v-_t),U=lt,$=st.z6.Center,rt=st.z6.Center),Math.abs(p-ot)<V?(V=Math.abs(p-ot),U=lt,$=st.z6.Left,rt=st.z6.Left):Math.abs(p-Nt)<V&&(V=Math.abs(p-Nt),U=lt,$=st.z6.Left,rt=st.z6.Right),Math.abs(w-ot)<V?(V=Math.abs(w-ot),U=lt,$=st.z6.Right,rt=st.z6.Left):Math.abs(w-Nt)<V&&(V=Math.abs(w-Nt),U=lt,$=st.z6.Right,rt=st.z6.Right)}),null!==U){const lt=c.x-r.actualBounds.x,ft=c.y-r.actualBounds.y,ot=U.locationObject.getDocumentBounds(),_t=Math.min(c.y,ot.y)-10,Nt=Math.max(c.y+c.height,ot.y+ot.height)+10,ee=(new st.E9).setRectSpot(ot,rt);$===st.z6.Center?(l&&(r.move(new st.E9(ee.x-c.width/2-lt,c.y-ft)),this.invalidateLinks(r)),o&&(this.guidelineVcenter.position=new st.E9(ee.x,_t),this.guidelineVcenter.elt(0).height=Nt-_t,this.diagram.add(this.guidelineVcenter))):$===st.z6.Left?(l&&(r.move(new st.E9(ee.x-lt,c.y-ft)),this.invalidateLinks(r)),o&&(this.guidelineVleft.position=new st.E9(ee.x,_t),this.guidelineVleft.elt(0).height=Nt-_t,this.diagram.add(this.guidelineVleft))):$===st.z6.Right&&(l&&(r.move(new st.E9(ee.x-c.width-lt,c.y-ft)),this.invalidateLinks(r)),o&&(this.guidelineVright.position=new st.E9(ee.x,_t),this.guidelineVright.elt(0).height=Nt-_t,this.diagram.add(this.guidelineVright)))}}}class UI extends st.GS{constructor(){super(),this.name="ResizeMultiple"}resize(r){this.diagram.selection.each(function(l){if(l instanceof st.rU)return;const c=l.resizeObject,p=l.position.copy(),v=c.getDocumentAngle(),w=c.getDocumentScale(),C=Math.PI*v/180,E=Math.cos(C),P=Math.sin(C),L=r.width-c.naturalBounds.width,V=r.height-c.naturalBounds.height,rt=v>90&&v<270?1:0,lt=v>180&&v<360?1:0;p.x+=w*((r.x+L*rt)*E-(r.y+V*(v>0&&v<180?1:0))*P),p.y+=w*((r.x+L*lt)*P+(r.y+V*rt)*E),c.desiredSize=r.size,l.position=p})}}class HI extends st.EA{constructor(){super(),this._initialInfo=null,this._initialAngle=0,this._centerPoint=new st.E9,this.name="RotateMultiple"}doActivate(){super.doActivate();const r=this.diagram;this._centerPoint=r.computePartsBounds(r.selection).center,this._initialAngle=this._centerPoint.directionPoint(r.lastInput.documentPoint);const o=new st.D5,l=this;r.selection.each(function(c){l.walkTree(c,o)}),this._initialInfo=o}walkTree(r,o){if(null===r||r instanceof st.rU)return;const l=Math.sqrt(this._centerPoint.distanceSquaredPoint(r.location)),c=this._centerPoint.directionPoint(r.location);if(o.add(r,new GI(c,l,r.rotateObject.angle)),r instanceof st.ZA){const p=r.memberParts.iterator;for(;p.next();)this.walkTree(p.value,o)}}doDeactivate(){this._initialInfo=null,super.doDeactivate()}rotate(r){if(null===this._initialInfo)return;const l=null!==this.adornedObject?this.adornedObject.part:null;if(null===l)return;const c=this.diagram.lastInput,p=r-l.rotateObject.angle,v=this;this._initialInfo.each(function(w){const C=w.key;if(C instanceof st.rU)return;const E=w.value;if(c.control||c.meta)l===C?C.rotateObject.angle=r:C.rotateObject.angle+=p;else{const P=r*(Math.PI/180),L=E.distance*Math.cos(P+E.placementAngle),V=E.distance*Math.sin(P+E.placementAngle);C.location=new st.E9(v._centerPoint.x+L,v._centerPoint.y+V),C.rotateObject.angle=E.rotationAngle+r}})}computeRotate(r){const o=this.diagram;if(null===this.adornedObject)return 0;let l=0;const c=o.lastInput;if(c.control||c.meta){const w=this.adornedObject.part;null!==w&&(l=w.getDocumentPoint(w.locationSpot).directionPoint(r))}else l=this._centerPoint.directionPoint(r)-this._initialAngle;l>=360?l-=360:l<0&&(l+=360);const p=Math.min(Math.abs(this.snapAngleMultiple),180),v=Math.min(Math.abs(this.snapAngleEpsilon),p/2);return!o.lastInput.shift&&p>0&&v>0&&(l%p<v?l=Math.floor(l/p)*p:l%p>p-v&&(l=(Math.floor(l/p)+1)*p),l>=360?l-=360:l<0&&(l+=360)),l}}class GI{constructor(r,o,l){this.placementAngle=r*(Math.PI/180),this.distance=o,this.rotationAngle=l}}let vC,PE=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=Lr({type:s}),s.\u0275inj=Xi({}),s})();try{vC="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(s){vC=!1}let O0,wC,P1=(()=>{class s{constructor(o){this._platformId=o,this.isBrowser=this._platformId?function nI(s){return s===gE}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!vC)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return s.\u0275fac=function(o){return new(o||s)(Xt(V_))},s.\u0275prov=Et({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function xC(s){return function XI(){if(null==O0&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>O0=!0}))}finally{O0=O0||!1}return O0}()?s:!!s.capture}function F0(s){return s.composedPath?s.composedPath()[0]:s.target}class ZI extends Yh{constructor(r){super(),this._value=r}get value(){return this.getValue()}_subscribe(r){const o=super._subscribe(r);return o&&!o.closed&&r.next(this._value),o}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new zh;return this._value}next(r){super.next(this._value=r)}}function dp(...s){let r=s[s.length-1];return vM(r)?(s.pop(),Z0(s,r)):tx(s)}class ib{constructor(r){this.total=r}call(r,o){return o.subscribe(new rb(r,this.total))}}class rb extends Yi{constructor(r,o){super(r),this.total=o,this.count=0}_next(r){++this.count>this.total&&this.destination.next(r)}}class sb{constructor(r,o){this.compare=r,this.keySelector=o}call(r,o){return o.subscribe(new ab(r,this.compare,this.keySelector))}}class ab extends Yi{constructor(r,o,l){super(r),this.keySelector=l,this.hasKey=!1,"function"==typeof o&&(this.compare=o)}compare(r,o){return r===o}_next(r){let o;try{const{keySelector:c}=this;o=c?c(r):r}catch(c){return this.destination.error(c)}let l=!1;if(this.hasKey)try{const{compare:c}=this;l=c(this.key,o)}catch(c){return this.destination.error(c)}else this.hasKey=!0;l||(this.key=o,this.destination.next(r))}}class ub{constructor(r){this.notifier=r}call(r,o){const l=new hb(r),c=Qm(this.notifier,new Jm(l));return c&&!l.seenValue?(l.add(c),o.subscribe(l)):l}}class hb extends Q0{constructor(r){super(r),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function fd(s){return null!=s&&"false"!=`${s}`}function bE(s,r=0){return function cb(s){return!isNaN(parseFloat(s))&&!isNaN(Number(s))}(s)?Number(s):r}function jm(s){return s instanceof mn?s.nativeElement:s}function RE(s){return 0===s.buttons||0===s.offsetX&&0===s.offsetY}function jE(s){const r=s.touches&&s.touches[0]||s.changedTouches&&s.changedTouches[0];return!(!r||-1!==r.identifier||null!=r.radiusX&&1!==r.radiusX||null!=r.radiusY&&1!==r.radiusY)}const xb=new qt("cdk-input-modality-detector-options"),wb={ignoreKeys:[18,17,224,91,16]},Vm=xC({passive:!0,capture:!0});let Mb=(()=>{class s{constructor(o,l,c,p){this._platform=o,this._mostRecentTarget=null,this._modality=new ZI(null),this._lastTouchMs=0,this._onKeydown=v=>{var w,C;(null===(C=null===(w=this._options)||void 0===w?void 0:w.ignoreKeys)||void 0===C?void 0:C.some(E=>E===v.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=F0(v))},this._onMousedown=v=>{Date.now()-this._lastTouchMs<650||(this._modality.next(RE(v)?"keyboard":"mouse"),this._mostRecentTarget=F0(v))},this._onTouchstart=v=>{jE(v)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=F0(v))},this._options=Object.assign(Object.assign({},wb),p),this.modalityDetected=this._modality.pipe(function nb(s){return r=>r.lift(new ib(s))}(1)),this.modalityChanged=this.modalityDetected.pipe(function ob(s,r){return o=>o.lift(new sb(s,r))}()),o.isBrowser&&l.runOutsideAngular(()=>{c.addEventListener("keydown",this._onKeydown,Vm),c.addEventListener("mousedown",this._onMousedown,Vm),c.addEventListener("touchstart",this._onTouchstart,Vm)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Vm),document.removeEventListener("mousedown",this._onMousedown,Vm),document.removeEventListener("touchstart",this._onTouchstart,Vm))}}return s.\u0275fac=function(o){return new(o||s)(Xt(P1),Xt(rr),Xt(Ni),Xt(xb,8))},s.\u0275prov=Et({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Cb=new qt("cdk-focus-monitor-default-options"),I1=xC({passive:!0,capture:!0});let Db=(()=>{class s{constructor(o,l,c,p,v){this._ngZone=o,this._platform=l,this._inputModalityDetector=c,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Yh,this._rootNodeFocusAndBlurListener=w=>{const C=F0(w),E="focus"===w.type?this._onFocus:this._onBlur;for(let P=C;P;P=P.parentElement)E.call(this,w,P)},this._document=p,this._detectionMode=(null==v?void 0:v.detectionMode)||0}monitor(o,l=!1){const c=jm(o);if(!this._platform.isBrowser||1!==c.nodeType)return dp(null);const p=function WI(s){if(function $I(){if(null==wC){const s="undefined"!=typeof document?document.head:null;wC=!(!s||!s.createShadowRoot&&!s.attachShadow)}return wC}()){const r=s.getRootNode?s.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&r instanceof ShadowRoot)return r}return null}(c)||this._getDocument(),v=this._elementInfo.get(c);if(v)return l&&(v.checkChildren=!0),v.subject;const w={checkChildren:l,subject:new Yh,rootNode:p};return this._elementInfo.set(c,w),this._registerGlobalListeners(w),w.subject}stopMonitoring(o){const l=jm(o),c=this._elementInfo.get(l);c&&(c.subject.complete(),this._setClasses(l),this._elementInfo.delete(l),this._removeGlobalListeners(c))}focusVia(o,l,c){const p=jm(o);p===this._getDocument().activeElement?this._getClosestElementsInfo(p).forEach(([w,C])=>this._originChanged(w,l,C)):(this._setOrigin(l),"function"==typeof p.focus&&p.focus(c))}ngOnDestroy(){this._elementInfo.forEach((o,l)=>this.stopMonitoring(l))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(o){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(o)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(o){return 1===this._detectionMode||!!(null==o?void 0:o.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(o,l){o.classList.toggle("cdk-focused",!!l),o.classList.toggle("cdk-touch-focused","touch"===l),o.classList.toggle("cdk-keyboard-focused","keyboard"===l),o.classList.toggle("cdk-mouse-focused","mouse"===l),o.classList.toggle("cdk-program-focused","program"===l)}_setOrigin(o,l=!1){this._ngZone.runOutsideAngular(()=>{this._origin=o,this._originFromTouchInteraction="touch"===o&&l,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(o,l){const c=this._elementInfo.get(l),p=F0(o);!c||!c.checkChildren&&l!==p||this._originChanged(l,this._getFocusOrigin(p),c)}_onBlur(o,l){const c=this._elementInfo.get(l);!c||c.checkChildren&&o.relatedTarget instanceof Node&&l.contains(o.relatedTarget)||(this._setClasses(l),this._emitOrigin(c.subject,null))}_emitOrigin(o,l){this._ngZone.run(()=>o.next(l))}_registerGlobalListeners(o){if(!this._platform.isBrowser)return;const l=o.rootNode,c=this._rootNodeFocusListenerCount.get(l)||0;c||this._ngZone.runOutsideAngular(()=>{l.addEventListener("focus",this._rootNodeFocusAndBlurListener,I1),l.addEventListener("blur",this._rootNodeFocusAndBlurListener,I1)}),this._rootNodeFocusListenerCount.set(l,c+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(function lb(s){return r=>r.lift(new ub(s))}(this._stopInputModalityDetector)).subscribe(p=>{this._setOrigin(p,!0)}))}_removeGlobalListeners(o){const l=o.rootNode;if(this._rootNodeFocusListenerCount.has(l)){const c=this._rootNodeFocusListenerCount.get(l);c>1?this._rootNodeFocusListenerCount.set(l,c-1):(l.removeEventListener("focus",this._rootNodeFocusAndBlurListener,I1),l.removeEventListener("blur",this._rootNodeFocusAndBlurListener,I1),this._rootNodeFocusListenerCount.delete(l))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(o,l,c){this._setClasses(o,l),this._emitOrigin(c.subject,l),this._lastFocusOrigin=l}_getClosestElementsInfo(o){const l=[];return this._elementInfo.forEach((c,p)=>{(p===o||c.checkChildren&&p.contains(o))&&l.push([p,c])}),l}}return s.\u0275fac=function(o){return new(o||s)(Xt(rr),Xt(P1),Xt(Mb),Xt(Ni,8),Xt(Cb,8))},s.\u0275prov=Et({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const BE="cdk-high-contrast-black-on-white",UE="cdk-high-contrast-white-on-black",MC="cdk-high-contrast-active";let Sb=(()=>{class s{constructor(o,l){this._platform=o,this._document=l}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const o=this._document.createElement("div");o.style.backgroundColor="rgb(1,2,3)",o.style.position="absolute",this._document.body.appendChild(o);const l=this._document.defaultView||window,c=l&&l.getComputedStyle?l.getComputedStyle(o):null,p=(c&&c.backgroundColor||"").replace(/ /g,"");switch(o.remove(),p){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const o=this._document.body.classList;o.remove(MC),o.remove(BE),o.remove(UE),this._hasCheckedHighContrastMode=!0;const l=this.getHighContrastMode();1===l?(o.add(MC),o.add(BE)):2===l&&(o.add(MC),o.add(UE))}}}return s.\u0275fac=function(o){return new(o||s)(Xt(P1),Xt(Ni))},s.\u0275prov=Et({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function sO(){return"undefined"!=typeof window&&void 0!==window.document}function CC(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}let TC=(s,r)=>!1,ZE=(s,r,o)=>[],JE=null;function kC(s){const r=s.parentNode||s.host;return r===JE?null:r}(CC()||"undefined"!=typeof Element)&&(sO()?(JE=(()=>document.documentElement)(),TC=(s,r)=>{for(;r;){if(r===s)return!0;r=kC(r)}return!1}):TC=(s,r)=>s.contains(r),ZE=(s,r,o)=>{if(o)return Array.from(s.querySelectorAll(r));const l=s.querySelector(r);return l?[l]:[]});const Q1=new qt("AnimationModuleType"),CF=new qt("mat-sanity-checks",{providedIn:"root",factory:function _F(){return!0}});let Hm=(()=>{class s{constructor(o,l,c){this._sanityChecks=l,this._document=c,this._hasDoneGlobalChecks=!1,o._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(o){return!function KI(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[o])}}return s.\u0275fac=function(o){return new(o||s)(Xt(Sb),Xt(CF,8),Xt(Ni))},s.\u0275mod=Lr({type:s}),s.\u0275inj=Xi({imports:[[PE],PE]}),s})();function DF(s){return class extends s{constructor(...r){super(...r),this._disabled=!1}get disabled(){return this._disabled}set disabled(r){this._disabled=fd(r)}}}function PT(s,r){return class extends s{constructor(...o){super(...o),this.defaultColor=r,this.color=r}get color(){return this._color}set color(o){const l=o||this.defaultColor;l!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),l&&this._elementRef.nativeElement.classList.add(`mat-${l}`),this._color=l)}}}function SF(s){return class extends s{constructor(...r){super(...r),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(r){this._disableRipple=fd(r)}}}function EF(s,r=0){return class extends s{constructor(...o){super(...o),this._tabIndex=r,this.defaultTabIndex=r}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(o){this._tabIndex=null!=o?bE(o):this.defaultTabIndex}}}class kF{constructor(r,o,l){this._renderer=r,this.element=o,this.config=l,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const AT={enterDuration:225,exitDuration:150},$C=xC({passive:!0}),IT=["mousedown","touchstart"],bT=["mouseup","mouseleave","touchend","touchcancel"];class PF{constructor(r,o,l,c){this._target=r,this._ngZone=o,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,c.isBrowser&&(this._containerElement=jm(l))}fadeInRipple(r,o,l={}){const c=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),p=Object.assign(Object.assign({},AT),l.animation);l.centered&&(r=c.left+c.width/2,o=c.top+c.height/2);const v=l.radius||function IF(s,r,o){const l=Math.max(Math.abs(s-o.left),Math.abs(s-o.right)),c=Math.max(Math.abs(r-o.top),Math.abs(r-o.bottom));return Math.sqrt(l*l+c*c)}(r,o,c),w=r-c.left,C=o-c.top,E=p.enterDuration,P=document.createElement("div");P.classList.add("mat-ripple-element"),P.style.left=w-v+"px",P.style.top=C-v+"px",P.style.height=2*v+"px",P.style.width=2*v+"px",null!=l.color&&(P.style.backgroundColor=l.color),P.style.transitionDuration=`${E}ms`,this._containerElement.appendChild(P),function AF(s){window.getComputedStyle(s).getPropertyValue("opacity")}(P),P.style.transform="scale(1)";const L=new kF(this,P,l);return L.state=0,this._activeRipples.add(L),l.persistent||(this._mostRecentTransientRipple=L),this._runTimeoutOutsideZone(()=>{const V=L===this._mostRecentTransientRipple;L.state=1,!l.persistent&&(!V||!this._isPointerDown)&&L.fadeOut()},E),L}fadeOutRipple(r){const o=this._activeRipples.delete(r);if(r===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!o)return;const l=r.element,c=Object.assign(Object.assign({},AT),r.config.animation);l.style.transitionDuration=`${c.exitDuration}ms`,l.style.opacity="0",r.state=2,this._runTimeoutOutsideZone(()=>{r.state=3,l.remove()},c.exitDuration)}fadeOutAll(){this._activeRipples.forEach(r=>r.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(r=>{r.config.persistent||r.fadeOut()})}setupTriggerEvents(r){const o=jm(r);!o||o===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=o,this._registerEvents(IT))}handleEvent(r){"mousedown"===r.type?this._onMousedown(r):"touchstart"===r.type?this._onTouchStart(r):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(bT),this._pointerUpEventsRegistered=!0)}_onMousedown(r){const o=RE(r),l=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!o&&!l&&(this._isPointerDown=!0,this.fadeInRipple(r.clientX,r.clientY,this._target.rippleConfig))}_onTouchStart(r){if(!this._target.rippleDisabled&&!jE(r)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const o=r.changedTouches;for(let l=0;l<o.length;l++)this.fadeInRipple(o[l].clientX,o[l].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(r=>{!r.config.persistent&&(1===r.state||r.config.terminateOnPointerUp&&0===r.state)&&r.fadeOut()}))}_runTimeoutOutsideZone(r,o=0){this._ngZone.runOutsideAngular(()=>setTimeout(r,o))}_registerEvents(r){this._ngZone.runOutsideAngular(()=>{r.forEach(o=>{this._triggerElement.addEventListener(o,this,$C)})})}_removeTriggerEvents(){this._triggerElement&&(IT.forEach(r=>{this._triggerElement.removeEventListener(r,this,$C)}),this._pointerUpEventsRegistered&&bT.forEach(r=>{this._triggerElement.removeEventListener(r,this,$C)}))}}const bF=new qt("mat-ripple-global-options");let OT=(()=>{class s{constructor(o,l,c,p,v){this._elementRef=o,this._animationMode=v,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=p||{},this._rippleRenderer=new PF(this,l,o,c)}get disabled(){return this._disabled}set disabled(o){o&&this.fadeOutAllNonPersistent(),this._disabled=o,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(o){this._trigger=o,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(o,l=0,c){return"number"==typeof o?this._rippleRenderer.fadeInRipple(o,l,Object.assign(Object.assign({},this.rippleConfig),c)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),o))}}return s.\u0275fac=function(o){return new(o||s)(yt(mn),yt(rr),yt(P1),yt(bF,8),yt(Q1,8))},s.\u0275dir=he({type:s,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(o,l){2&o&&gu("mat-ripple-unbounded",l.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),s})(),OF=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=Lr({type:s}),s.\u0275inj=Xi({imports:[[Hm],Hm]}),s})();function LF({error:s,subscriber:r}){r.error(s)}function q1(s,r){return new bi(o=>{const l=s.length;if(0===l)return void o.complete();const c=new Array(l);let p=0,v=0;for(let w=0;w<l;w++){const C=J0(s[w]);let E=!1;o.add(C.subscribe({next:P=>{E||(E=!0,v++),c[w]=P},error:P=>o.error(P),complete:()=>{p++,(p===l||!E)&&(v===l&&o.next(r?r.reduce((P,L,V)=>(P[L]=c[V],P),{}):c),o.complete())}}))}})}function md(){}function WC(s,r,o){return function(c){return c.lift(new RF(s,r,o))}}class RF{constructor(r,o,l){this.nextOrObserver=r,this.error=o,this.complete=l}call(r,o){return o.subscribe(new jF(r,this.nextOrObserver,this.error,this.complete))}}class jF extends Yi{constructor(r,o,l,c){super(r),this._tapNext=md,this._tapError=md,this._tapComplete=md,this._tapError=l||md,this._tapComplete=c||md,Sd(o)?(this._context=this,this._tapNext=o):o&&(this._context=o,this._tapNext=o.next||md,this._tapError=o.error||md,this._tapComplete=o.complete||md)}_next(r){try{this._tapNext.call(this._context,r)}catch(o){return void this.destination.error(o)}this.destination.next(r)}_error(r){try{this._tapError.call(this._context,r)}catch(o){return void this.destination.error(o)}this.destination.error(r)}_complete(){try{this._tapComplete.call(this._context)}catch(r){return void this.destination.error(r)}return this.destination.complete()}}class BF{constructor(r){this.selector=r}call(r,o){return o.subscribe(new UF(r,this.selector,this.caught))}}class UF extends Q0{constructor(r,o,l){super(r),this.selector=o,this.caught=l}error(r){if(!this.isStopped){let o;try{o=this.selector(r,this.caught)}catch(p){return void super.error(p)}this._unsubscribeAndRecycle();const l=new Jm(this);this.add(l);const c=Qm(o,l);c!==l&&this.add(c)}}}class GF{constructor(r){this.callback=r}call(r,o){return o.subscribe(new zF(r,this.callback))}}class zF extends Yi{constructor(r,o){super(r),this.add(new Wn(o))}}const YF=(()=>{function s(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return s.prototype=Object.create(Error.prototype),s})(),XF=new bi(s=>s.complete());class ZF{constructor(r){if(this.total=r,this.total<0)throw new YF}call(r,o){return o.subscribe(new JF(r,this.total))}}class JF extends Yi{constructor(r,o){super(r),this.total=o,this.count=0}_next(r){const o=this.total,l=++this.count;l<=o&&(this.destination.next(r),l===o&&(this.destination.complete(),this.unsubscribe()))}}class t2{constructor(r,o){this.predicate=r,this.thisArg=o}call(r,o){return o.subscribe(new e2(r,this.predicate,this.thisArg))}}class e2 extends Yi{constructor(r,o,l){super(r),this.predicate=o,this.thisArg=l,this.count=0}_next(r){let o;try{o=this.predicate.call(this.thisArg,r,this.count++)}catch(l){return void this.destination.error(l)}o&&this.destination.next(r)}}class n2{}class yd{constructor(r){this.normalizedNames=new Map,this.lazyUpdate=null,r?this.lazyInit="string"==typeof r?()=>{this.headers=new Map,r.split("\n").forEach(o=>{const l=o.indexOf(":");if(l>0){const c=o.slice(0,l),p=c.toLowerCase(),v=o.slice(l+1).trim();this.maybeSetNormalizedName(c,p),this.headers.has(p)?this.headers.get(p).push(v):this.headers.set(p,[v])}})}:()=>{this.headers=new Map,Object.keys(r).forEach(o=>{let l=r[o];const c=o.toLowerCase();"string"==typeof l&&(l=[l]),l.length>0&&(this.headers.set(c,l),this.maybeSetNormalizedName(o,c))})}:this.headers=new Map}has(r){return this.init(),this.headers.has(r.toLowerCase())}get(r){this.init();const o=this.headers.get(r.toLowerCase());return o&&o.length>0?o[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(r){return this.init(),this.headers.get(r.toLowerCase())||null}append(r,o){return this.clone({name:r,value:o,op:"a"})}set(r,o){return this.clone({name:r,value:o,op:"s"})}delete(r,o){return this.clone({name:r,value:o,op:"d"})}maybeSetNormalizedName(r,o){this.normalizedNames.has(o)||this.normalizedNames.set(o,r)}init(){this.lazyInit&&(this.lazyInit instanceof yd?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(r=>this.applyUpdate(r)),this.lazyUpdate=null))}copyFrom(r){r.init(),Array.from(r.headers.keys()).forEach(o=>{this.headers.set(o,r.headers.get(o)),this.normalizedNames.set(o,r.normalizedNames.get(o))})}clone(r){const o=new yd;return o.lazyInit=this.lazyInit&&this.lazyInit instanceof yd?this.lazyInit:this,o.lazyUpdate=(this.lazyUpdate||[]).concat([r]),o}applyUpdate(r){const o=r.name.toLowerCase();switch(r.op){case"a":case"s":let l=r.value;if("string"==typeof l&&(l=[l]),0===l.length)return;this.maybeSetNormalizedName(r.name,o);const c=("a"===r.op?this.headers.get(o):void 0)||[];c.push(...l),this.headers.set(o,c);break;case"d":const p=r.value;if(p){let v=this.headers.get(o);if(!v)return;v=v.filter(w=>-1===p.indexOf(w)),0===v.length?(this.headers.delete(o),this.normalizedNames.delete(o)):this.headers.set(o,v)}else this.headers.delete(o),this.normalizedNames.delete(o)}}forEach(r){this.init(),Array.from(this.normalizedNames.keys()).forEach(o=>r(this.normalizedNames.get(o),this.headers.get(o)))}}class i2{encodeKey(r){return LT(r)}encodeValue(r){return LT(r)}decodeKey(r){return decodeURIComponent(r)}decodeValue(r){return decodeURIComponent(r)}}const o2=/%(\d[a-f0-9])/gi,s2={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function LT(s){return encodeURIComponent(s).replace(o2,(r,o)=>{var l;return null!==(l=s2[o])&&void 0!==l?l:r})}function RT(s){return`${s}`}class vd{constructor(r={}){if(this.updates=null,this.cloneFrom=null,this.encoder=r.encoder||new i2,r.fromString){if(r.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function r2(s,r){const o=new Map;return s.length>0&&s.replace(/^\?/,"").split("&").forEach(c=>{const p=c.indexOf("="),[v,w]=-1==p?[r.decodeKey(c),""]:[r.decodeKey(c.slice(0,p)),r.decodeValue(c.slice(p+1))],C=o.get(v)||[];C.push(w),o.set(v,C)}),o}(r.fromString,this.encoder)}else r.fromObject?(this.map=new Map,Object.keys(r.fromObject).forEach(o=>{const l=r.fromObject[o];this.map.set(o,Array.isArray(l)?l:[l])})):this.map=null}has(r){return this.init(),this.map.has(r)}get(r){this.init();const o=this.map.get(r);return o?o[0]:null}getAll(r){return this.init(),this.map.get(r)||null}keys(){return this.init(),Array.from(this.map.keys())}append(r,o){return this.clone({param:r,value:o,op:"a"})}appendAll(r){const o=[];return Object.keys(r).forEach(l=>{const c=r[l];Array.isArray(c)?c.forEach(p=>{o.push({param:l,value:p,op:"a"})}):o.push({param:l,value:c,op:"a"})}),this.clone(o)}set(r,o){return this.clone({param:r,value:o,op:"s"})}delete(r,o){return this.clone({param:r,value:o,op:"d"})}toString(){return this.init(),this.keys().map(r=>{const o=this.encoder.encodeKey(r);return this.map.get(r).map(l=>o+"="+this.encoder.encodeValue(l)).join("&")}).filter(r=>""!==r).join("&")}clone(r){const o=new vd({encoder:this.encoder});return o.cloneFrom=this.cloneFrom||this,o.updates=(this.updates||[]).concat(r),o}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(r=>this.map.set(r,this.cloneFrom.map.get(r))),this.updates.forEach(r=>{switch(r.op){case"a":case"s":const o=("a"===r.op?this.map.get(r.param):void 0)||[];o.push(RT(r.value)),this.map.set(r.param,o);break;case"d":if(void 0===r.value){this.map.delete(r.param);break}{let l=this.map.get(r.param)||[];const c=l.indexOf(RT(r.value));-1!==c&&l.splice(c,1),l.length>0?this.map.set(r.param,l):this.map.delete(r.param)}}}),this.cloneFrom=this.updates=null)}}class a2{constructor(){this.map=new Map}set(r,o){return this.map.set(r,o),this}get(r){return this.map.has(r)||this.map.set(r,r.defaultValue()),this.map.get(r)}delete(r){return this.map.delete(r),this}has(r){return this.map.has(r)}keys(){return this.map.keys()}}function jT(s){return"undefined"!=typeof ArrayBuffer&&s instanceof ArrayBuffer}function VT(s){return"undefined"!=typeof Blob&&s instanceof Blob}function BT(s){return"undefined"!=typeof FormData&&s instanceof FormData}class B0{constructor(r,o,l,c){let p;if(this.url=o,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=r.toUpperCase(),function l2(s){switch(s){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||c?(this.body=void 0!==l?l:null,p=c):p=l,p&&(this.reportProgress=!!p.reportProgress,this.withCredentials=!!p.withCredentials,p.responseType&&(this.responseType=p.responseType),p.headers&&(this.headers=p.headers),p.context&&(this.context=p.context),p.params&&(this.params=p.params)),this.headers||(this.headers=new yd),this.context||(this.context=new a2),this.params){const v=this.params.toString();if(0===v.length)this.urlWithParams=o;else{const w=o.indexOf("?");this.urlWithParams=o+(-1===w?"?":w<o.length-1?"&":"")+v}}else this.params=new vd,this.urlWithParams=o}serializeBody(){return null===this.body?null:jT(this.body)||VT(this.body)||BT(this.body)||function u2(s){return"undefined"!=typeof URLSearchParams&&s instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof vd?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||BT(this.body)?null:VT(this.body)?this.body.type||null:jT(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof vd?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(r={}){var o;const l=r.method||this.method,c=r.url||this.url,p=r.responseType||this.responseType,v=void 0!==r.body?r.body:this.body,w=void 0!==r.withCredentials?r.withCredentials:this.withCredentials,C=void 0!==r.reportProgress?r.reportProgress:this.reportProgress;let E=r.headers||this.headers,P=r.params||this.params;const L=null!==(o=r.context)&&void 0!==o?o:this.context;return void 0!==r.setHeaders&&(E=Object.keys(r.setHeaders).reduce((V,U)=>V.set(U,r.setHeaders[U]),E)),r.setParams&&(P=Object.keys(r.setParams).reduce((V,U)=>V.set(U,r.setParams[U]),P)),new B0(l,c,v,{params:P,headers:E,context:L,reportProgress:C,responseType:p,withCredentials:w})}}var uo=(()=>((uo=uo||{})[uo.Sent=0]="Sent",uo[uo.UploadProgress=1]="UploadProgress",uo[uo.ResponseHeader=2]="ResponseHeader",uo[uo.DownloadProgress=3]="DownloadProgress",uo[uo.Response=4]="Response",uo[uo.User=5]="User",uo))();class KC extends class h2{constructor(r,o=200,l="OK"){this.headers=r.headers||new yd,this.status=void 0!==r.status?r.status:o,this.statusText=r.statusText||l,this.url=r.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(r={}){super(r),this.type=uo.Response,this.body=void 0!==r.body?r.body:null}clone(r={}){return new KC({body:void 0!==r.body?r.body:this.body,headers:r.headers||this.headers,status:void 0!==r.status?r.status:this.status,statusText:r.statusText||this.statusText,url:r.url||this.url||void 0})}}function ZC(s,r){return{body:r,headers:s.headers,context:s.context,observe:s.observe,params:s.params,reportProgress:s.reportProgress,responseType:s.responseType,withCredentials:s.withCredentials}}let HT=(()=>{class s{constructor(o){this.handler=o}request(o,l,c={}){let p;if(o instanceof B0)p=o;else{let C,E;C=c.headers instanceof yd?c.headers:new yd(c.headers),c.params&&(E=c.params instanceof vd?c.params:new vd({fromObject:c.params})),p=new B0(o,l,void 0!==c.body?c.body:null,{headers:C,context:c.context,params:E,reportProgress:c.reportProgress,responseType:c.responseType||"json",withCredentials:c.withCredentials})}const v=dp(p).pipe(function QF(s,r){return q0(s,r,1)}(C=>this.handler.handle(C)));if(o instanceof B0||"events"===c.observe)return v;const w=v.pipe(function qF(s,r){return function(l){return l.lift(new t2(s,r))}}(C=>C instanceof KC));switch(c.observe||"body"){case"body":switch(p.responseType){case"arraybuffer":return w.pipe(Ds(C=>{if(null!==C.body&&!(C.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return C.body}));case"blob":return w.pipe(Ds(C=>{if(null!==C.body&&!(C.body instanceof Blob))throw new Error("Response is not a Blob.");return C.body}));case"text":return w.pipe(Ds(C=>{if(null!==C.body&&"string"!=typeof C.body)throw new Error("Response is not a string.");return C.body}));default:return w.pipe(Ds(C=>C.body))}case"response":return w;default:throw new Error(`Unreachable: unhandled observe type ${c.observe}}`)}}delete(o,l={}){return this.request("DELETE",o,l)}get(o,l={}){return this.request("GET",o,l)}head(o,l={}){return this.request("HEAD",o,l)}jsonp(o,l){return this.request("JSONP",o,{params:(new vd).append(l,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(o,l={}){return this.request("OPTIONS",o,l)}patch(o,l,c={}){return this.request("PATCH",o,ZC(c,l))}post(o,l,c={}){return this.request("POST",o,ZC(c,l))}put(o,l,c={}){return this.request("PUT",o,ZC(c,l))}}return s.\u0275fac=function(o){return new(o||s)(Xt(n2))},s.\u0275prov=Et({token:s,factory:s.\u0275fac}),s})();const d2=["*"];let tM;function U0(s){var r;return(null===(r=function f2(){if(void 0===tM&&(tM=null,"undefined"!=typeof window)){const s=window;void 0!==s.trustedTypes&&(tM=s.trustedTypes.createPolicy("angular#components",{createHTML:r=>r}))}return tM}())||void 0===r?void 0:r.createHTML(s))||s}function GT(s){return Error(`Unable to find icon with the name "${s}"`)}function zT(s){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${s}".`)}function YT(s){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${s}".`)}class yp{constructor(r,o,l){this.url=r,this.svgText=o,this.options=l}}let eM=(()=>{class s{constructor(o,l,c,p){this._httpClient=o,this._sanitizer=l,this._errorHandler=p,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=c}addSvgIcon(o,l,c){return this.addSvgIconInNamespace("",o,l,c)}addSvgIconLiteral(o,l,c){return this.addSvgIconLiteralInNamespace("",o,l,c)}addSvgIconInNamespace(o,l,c,p){return this._addSvgIconConfig(o,l,new yp(c,null,p))}addSvgIconResolver(o){return this._resolvers.push(o),this}addSvgIconLiteralInNamespace(o,l,c,p){const v=this._sanitizer.sanitize(Ye.HTML,c);if(!v)throw YT(c);const w=U0(v);return this._addSvgIconConfig(o,l,new yp("",w,p))}addSvgIconSet(o,l){return this.addSvgIconSetInNamespace("",o,l)}addSvgIconSetLiteral(o,l){return this.addSvgIconSetLiteralInNamespace("",o,l)}addSvgIconSetInNamespace(o,l,c){return this._addSvgIconSetConfig(o,new yp(l,null,c))}addSvgIconSetLiteralInNamespace(o,l,c){const p=this._sanitizer.sanitize(Ye.HTML,l);if(!p)throw YT(l);const v=U0(p);return this._addSvgIconSetConfig(o,new yp("",v,c))}registerFontClassAlias(o,l=o){return this._fontCssClassesByAlias.set(o,l),this}classNameForFontAlias(o){return this._fontCssClassesByAlias.get(o)||o}setDefaultFontSetClass(o){return this._defaultFontSetClass=o,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(o){const l=this._sanitizer.sanitize(Ye.RESOURCE_URL,o);if(!l)throw zT(o);const c=this._cachedIconsByUrl.get(l);return c?dp(nM(c)):this._loadSvgIconFromConfig(new yp(o,null)).pipe(WC(p=>this._cachedIconsByUrl.set(l,p)),Ds(p=>nM(p)))}getNamedSvgIcon(o,l=""){const c=XT(l,o);let p=this._svgIconConfigs.get(c);if(p)return this._getSvgFromConfig(p);if(p=this._getIconConfigFromResolvers(l,o),p)return this._svgIconConfigs.set(c,p),this._getSvgFromConfig(p);const v=this._iconSetConfigs.get(l);return v?this._getSvgFromIconSetConfigs(o,v):function FF(s,r){return new bi(r?o=>r.schedule(LF,0,{error:s,subscriber:o}):o=>o.error(s))}(GT(c))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(o){return o.svgText?dp(nM(this._svgElementFromConfig(o))):this._loadSvgIconFromConfig(o).pipe(Ds(l=>nM(l)))}_getSvgFromIconSetConfigs(o,l){const c=this._extractIconWithNameFromAnySet(o,l);if(c)return dp(c);const p=l.filter(v=>!v.svgText).map(v=>this._loadSvgIconSetFromConfig(v).pipe(function VF(s){return function(o){const l=new BF(s),c=o.lift(l);return l.caught=c}}(w=>{const E=`Loading icon set URL: ${this._sanitizer.sanitize(Ye.RESOURCE_URL,v.url)} failed: ${w.message}`;return this._errorHandler.handleError(new Error(E)),dp(null)})));return function FT(...s){if(1===s.length){const r=s[0];if($0(r))return q1(r,null);if(Km(r)&&Object.getPrototypeOf(r)===Object.prototype){const o=Object.keys(r);return q1(o.map(l=>r[l]),o)}}if("function"==typeof s[s.length-1]){const r=s.pop();return q1(s=1===s.length&&$0(s[0])?s[0]:s,null).pipe(Ds(o=>r(...o)))}return q1(s,null)}(p).pipe(Ds(()=>{const v=this._extractIconWithNameFromAnySet(o,l);if(!v)throw GT(o);return v}))}_extractIconWithNameFromAnySet(o,l){for(let c=l.length-1;c>=0;c--){const p=l[c];if(p.svgText&&p.svgText.toString().indexOf(o)>-1){const v=this._svgElementFromConfig(p),w=this._extractSvgIconFromSet(v,o,p.options);if(w)return w}}return null}_loadSvgIconFromConfig(o){return this._fetchIcon(o).pipe(WC(l=>o.svgText=l),Ds(()=>this._svgElementFromConfig(o)))}_loadSvgIconSetFromConfig(o){return o.svgText?dp(null):this._fetchIcon(o).pipe(WC(l=>o.svgText=l))}_extractSvgIconFromSet(o,l,c){const p=o.querySelector(`[id="${l}"]`);if(!p)return null;const v=p.cloneNode(!0);if(v.removeAttribute("id"),"svg"===v.nodeName.toLowerCase())return this._setSvgAttributes(v,c);if("symbol"===v.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(v),c);const w=this._svgElementFromString(U0("<svg></svg>"));return w.appendChild(v),this._setSvgAttributes(w,c)}_svgElementFromString(o){const l=this._document.createElement("DIV");l.innerHTML=o;const c=l.querySelector("svg");if(!c)throw Error("<svg> tag not found");return c}_toSvgElement(o){const l=this._svgElementFromString(U0("<svg></svg>")),c=o.attributes;for(let p=0;p<c.length;p++){const{name:v,value:w}=c[p];"id"!==v&&l.setAttribute(v,w)}for(let p=0;p<o.childNodes.length;p++)o.childNodes[p].nodeType===this._document.ELEMENT_NODE&&l.appendChild(o.childNodes[p].cloneNode(!0));return l}_setSvgAttributes(o,l){return o.setAttribute("fit",""),o.setAttribute("height","100%"),o.setAttribute("width","100%"),o.setAttribute("preserveAspectRatio","xMidYMid meet"),o.setAttribute("focusable","false"),l&&l.viewBox&&o.setAttribute("viewBox",l.viewBox),o}_fetchIcon(o){var l;const{url:c,options:p}=o,v=null!==(l=null==p?void 0:p.withCredentials)&&void 0!==l&&l;if(!this._httpClient)throw function p2(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==c)throw Error(`Cannot fetch icon from URL "${c}".`);const w=this._sanitizer.sanitize(Ye.RESOURCE_URL,c);if(!w)throw zT(c);const C=this._inProgressUrlFetches.get(w);if(C)return C;const E=this._httpClient.get(w,{responseType:"text",withCredentials:v}).pipe(Ds(P=>U0(P)),function HF(s){return r=>r.lift(new GF(s))}(()=>this._inProgressUrlFetches.delete(w)),AM());return this._inProgressUrlFetches.set(w,E),E}_addSvgIconConfig(o,l,c){return this._svgIconConfigs.set(XT(o,l),c),this}_addSvgIconSetConfig(o,l){const c=this._iconSetConfigs.get(o);return c?c.push(l):this._iconSetConfigs.set(o,[l]),this}_svgElementFromConfig(o){if(!o.svgElement){const l=this._svgElementFromString(o.svgText);this._setSvgAttributes(l,o.options),o.svgElement=l}return o.svgElement}_getIconConfigFromResolvers(o,l){for(let c=0;c<this._resolvers.length;c++){const p=this._resolvers[c](l,o);if(p)return m2(p)?new yp(p.url,null,p.options):new yp(p,null)}}}return s.\u0275fac=function(o){return new(o||s)(Xt(HT,8),Xt(yC),Xt(Ni,8),Xt(Er))},s.\u0275prov=Et({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function nM(s){return s.cloneNode(!0)}function XT(s,r){return s+":"+r}function m2(s){return!(!s.url||!s.options)}const y2=PT(class{constructor(s){this._elementRef=s}}),v2=new qt("mat-icon-location",{providedIn:"root",factory:function x2(){const s=cc(Ni),r=s?s.location:null;return{getPathname:()=>r?r.pathname+r.search:""}}}),$T=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],w2=$T.map(s=>`[${s}]`).join(", "),M2=/^url\(['"]?#(.*?)['"]?\)$/;let _2=(()=>{class s extends y2{constructor(o,l,c,p,v){super(o),this._iconRegistry=l,this._location=p,this._errorHandler=v,this._inline=!1,this._currentIconFetch=Wn.EMPTY,c||o.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(o){this._inline=fd(o)}get svgIcon(){return this._svgIcon}set svgIcon(o){o!==this._svgIcon&&(o?this._updateSvgIcon(o):this._svgIcon&&this._clearSvgElement(),this._svgIcon=o)}get fontSet(){return this._fontSet}set fontSet(o){const l=this._cleanupFontValue(o);l!==this._fontSet&&(this._fontSet=l,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(o){const l=this._cleanupFontValue(o);l!==this._fontIcon&&(this._fontIcon=l,this._updateFontIconClasses())}_splitIconName(o){if(!o)return["",""];const l=o.split(":");switch(l.length){case 1:return["",l[0]];case 2:return l;default:throw Error(`Invalid icon name: "${o}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const o=this._elementsWithExternalReferences;if(o&&o.size){const l=this._location.getPathname();l!==this._previousPath&&(this._previousPath=l,this._prependPathToReferences(l))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(o){this._clearSvgElement();const l=this._location.getPathname();this._previousPath=l,this._cacheChildrenWithExternalReferences(o),this._prependPathToReferences(l),this._elementRef.nativeElement.appendChild(o)}_clearSvgElement(){const o=this._elementRef.nativeElement;let l=o.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();l--;){const c=o.childNodes[l];(1!==c.nodeType||"svg"===c.nodeName.toLowerCase())&&c.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const o=this._elementRef.nativeElement,l=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();l!=this._previousFontSetClass&&(this._previousFontSetClass&&o.classList.remove(this._previousFontSetClass),l&&o.classList.add(l),this._previousFontSetClass=l),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&o.classList.remove(this._previousFontIconClass),this.fontIcon&&o.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(o){return"string"==typeof o?o.trim().split(" ")[0]:o}_prependPathToReferences(o){const l=this._elementsWithExternalReferences;l&&l.forEach((c,p)=>{c.forEach(v=>{p.setAttribute(v.name,`url('${o}#${v.value}')`)})})}_cacheChildrenWithExternalReferences(o){const l=o.querySelectorAll(w2),c=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let p=0;p<l.length;p++)$T.forEach(v=>{const w=l[p],C=w.getAttribute(v),E=C?C.match(M2):null;if(E){let P=c.get(w);P||(P=[],c.set(w,P)),P.push({name:v,value:E[1]})}})}_updateSvgIcon(o){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),o){const[l,c]=this._splitIconName(o);l&&(this._svgNamespace=l),c&&(this._svgName=c),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(c,l).pipe(function KF(s){return r=>0===s?function $F(s){return s?function WF(s){return new bi(r=>s.schedule(()=>r.complete()))}(s):XF}():r.lift(new ZF(s))}(1)).subscribe(p=>this._setSvgElement(p),p=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${l}:${c}! ${p.message}`))})}}}return s.\u0275fac=function(o){return new(o||s)(yt(mn),yt(eM),uc("aria-hidden"),yt(v2),yt(Er))},s.\u0275cmp=N({type:s,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(o,l){2&o&&(_o("data-mat-icon-type",l._usingFontIcon()?"font":"svg")("data-mat-icon-name",l._svgName||l.fontIcon)("data-mat-icon-namespace",l._svgNamespace||l.fontSet),gu("mat-icon-inline",l.inline)("mat-icon-no-color","primary"!==l.color&&"accent"!==l.color&&"warn"!==l.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Ze],ngContentSelectors:d2,decls:1,vars:0,template:function(o,l){1&o&&(hm(),cm(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),s})(),C2=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=Lr({type:s}),s.\u0275inj=Xi({imports:[[Hm],Hm]}),s})();const Sl=new qt("NgValueAccessor");class CL extends Wn{constructor(r,o){super()}schedule(r,o=0){return this}}let Qk=(()=>{class s{constructor(o,l=s.now){this.SchedulerAction=o,this.now=l}schedule(o,l=0,c){return new this.SchedulerAction(this,o).schedule(c,l)}}return s.now=()=>Date.now(),s})();class _d extends Qk{constructor(r,o=Qk.now){super(r,()=>_d.delegate&&_d.delegate!==this?_d.delegate.now():o()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(r,o=0,l){return _d.delegate&&_d.delegate!==this?_d.delegate.schedule(r,o,l):super.schedule(r,o,l)}flush(r){const{actions:o}=this;if(this.active)return void o.push(r);let l;this.active=!0;do{if(l=r.execute(r.state,r.delay))break}while(r=o.shift());if(this.active=!1,l){for(;r=o.shift();)r.unsubscribe();throw l}}}const SL=new _d(class DL extends CL{constructor(r,o){super(r,o),this.scheduler=r,this.work=o,this.pending=!1}schedule(r,o=0){if(this.closed)return this;this.state=r;const l=this.id,c=this.scheduler;return null!=l&&(this.id=this.recycleAsyncId(c,l,o)),this.pending=!0,this.delay=o,this.id=this.id||this.requestAsyncId(c,this.id,o),this}requestAsyncId(r,o,l=0){return setInterval(r.flush.bind(r,this),l)}recycleAsyncId(r,o,l=0){if(null!==l&&this.delay===l&&!1===this.pending)return o;clearInterval(o)}execute(r,o){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const l=this._execute(r,o);if(l)return l;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(r,o){let c,l=!1;try{this.work(r)}catch(p){l=!0,c=!!p&&p||new Error(p)}if(l)return this.unsubscribe(),c}_unsubscribe(){const r=this.id,o=this.scheduler,l=o.actions,c=l.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==c&&l.splice(c,1),null!=r&&(this.id=this.recycleAsyncId(o,r,null)),this.delay=null}});class TL{constructor(r,o){this.dueTime=r,this.scheduler=o}call(r,o){return o.subscribe(new kL(r,this.dueTime,this.scheduler))}}class kL extends Yi{constructor(r,o,l){super(r),this.dueTime=o,this.scheduler=l,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(r){this.clearDebounce(),this.lastValue=r,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(NL,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:r}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(r)}}clearDebounce(){const r=this.debouncedSubscription;null!==r&&(this.remove(r),r.unsubscribe(),this.debouncedSubscription=null)}}function NL(s){s.debouncedNext()}let qk=(()=>{class s{create(o){return"undefined"==typeof MutationObserver?null:new MutationObserver(o)}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=Et({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),PL=(()=>{class s{constructor(o){this._mutationObserverFactory=o,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((o,l)=>this._cleanupObserver(l))}observe(o){const l=jm(o);return new bi(c=>{const v=this._observeElement(l).subscribe(c);return()=>{v.unsubscribe(),this._unobserveElement(l)}})}_observeElement(o){if(this._observedElements.has(o))this._observedElements.get(o).count++;else{const l=new Yh,c=this._mutationObserverFactory.create(p=>l.next(p));c&&c.observe(o,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(o,{observer:c,stream:l,count:1})}return this._observedElements.get(o).stream}_unobserveElement(o){this._observedElements.has(o)&&(this._observedElements.get(o).count--,this._observedElements.get(o).count||this._cleanupObserver(o))}_cleanupObserver(o){if(this._observedElements.has(o)){const{observer:l,stream:c}=this._observedElements.get(o);l&&l.disconnect(),c.complete(),this._observedElements.delete(o)}}}return s.\u0275fac=function(o){return new(o||s)(Xt(qk))},s.\u0275prov=Et({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),AL=(()=>{class s{constructor(o,l,c){this._contentObserver=o,this._elementRef=l,this._ngZone=c,this.event=new Or,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(o){this._disabled=fd(o),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(o){this._debounce=bE(o),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const o=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?o.pipe(function EL(s,r=SL){return o=>o.lift(new TL(s,r))}(this.debounce)):o).subscribe(this.event)})}_unsubscribe(){var o;null===(o=this._currentSubscription)||void 0===o||o.unsubscribe()}}return s.\u0275fac=function(o){return new(o||s)(yt(PL),yt(mn),yt(rr))},s.\u0275dir=he({type:s,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),s})(),IL=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=Lr({type:s}),s.\u0275inj=Xi({providers:[qk]}),s})();const bL=["input"],OL=function(s){return{enterDuration:s}},FL=["*"],LL=new qt("mat-checkbox-default-options",{providedIn:"root",factory:tN});function tN(){return{color:"accent",clickAction:"check-indeterminate"}}let RL=0;const eN=tN(),jL={provide:Sl,useExisting:Mn(()=>nN),multi:!0};class VL{}const BL=EF(PT(SF(DF(class{constructor(s){this._elementRef=s}}))));let nN=(()=>{class s extends BL{constructor(o,l,c,p,v,w,C){super(o),this._changeDetectorRef=l,this._focusMonitor=c,this._ngZone=p,this._animationMode=w,this._options=C,this.ariaLabel="",this.ariaLabelledby=null,this._uniqueId="mat-checkbox-"+ ++RL,this.id=this._uniqueId,this.labelPosition="after",this.name=null,this.change=new Or,this.indeterminateChange=new Or,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||eN,this.color=this.defaultColor=this._options.color||eN.color,this.tabIndex=parseInt(v)||0}get inputId(){return`${this.id||this._uniqueId}-input`}get required(){return this._required}set required(o){this._required=fd(o)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(o=>{o||Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}),this._syncIndeterminate(this._indeterminate)}ngAfterViewChecked(){}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}get checked(){return this._checked}set checked(o){const l=fd(o);l!=this.checked&&(this._checked=l,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(o){const l=fd(o);l!==this.disabled&&(this._disabled=l,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(o){const l=o!=this._indeterminate;this._indeterminate=fd(o),l&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(o){this.checked=!!o}registerOnChange(o){this._controlValueAccessorChangeFn=o}registerOnTouched(o){this._onTouched=o}setDisabledState(o){this.disabled=o}_getAriaChecked(){return this.checked?"true":this.indeterminate?"mixed":"false"}_transitionCheckState(o){let l=this._currentCheckState,c=this._elementRef.nativeElement;if(l!==o&&(this._currentAnimationClass.length>0&&c.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(l,o),this._currentCheckState=o,this._currentAnimationClass.length>0)){c.classList.add(this._currentAnimationClass);const p=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{c.classList.remove(p)},1e3)})}}_emitChangeEvent(){const o=new VL;o.source=this,o.checked=this.checked,this._controlValueAccessorChangeFn(this.checked),this.change.emit(o),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_onInputClick(o){var l;const c=null===(l=this._options)||void 0===l?void 0:l.clickAction;o.stopPropagation(),this.disabled||"noop"===c?!this.disabled&&"noop"===c&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==c&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}focus(o,l){o?this._focusMonitor.focusVia(this._inputElement,o,l):this._inputElement.nativeElement.focus(l)}_onInteractionEvent(o){o.stopPropagation()}_getAnimationClassForCheckStateTransition(o,l){if("NoopAnimations"===this._animationMode)return"";let c="";switch(o){case 0:if(1===l)c="unchecked-checked";else{if(3!=l)return"";c="unchecked-indeterminate"}break;case 2:c=1===l?"unchecked-checked":"unchecked-indeterminate";break;case 1:c=2===l?"checked-unchecked":"checked-indeterminate";break;case 3:c=1===l?"indeterminate-checked":"indeterminate-unchecked"}return`mat-checkbox-anim-${c}`}_syncIndeterminate(o){const l=this._inputElement;l&&(l.nativeElement.indeterminate=o)}}return s.\u0275fac=function(o){return new(o||s)(yt(mn),yt($_),yt(Db),yt(rr),uc("tabindex"),yt(Q1,8),yt(LL,8))},s.\u0275cmp=N({type:s,selectors:[["mat-checkbox"]],viewQuery:function(o,l){if(1&o&&(a1(bL,5),a1(OT,5)),2&o){let c;s1(c=l1())&&(l._inputElement=c.first),s1(c=l1())&&(l.ripple=c.first)}},hostAttrs:[1,"mat-checkbox"],hostVars:14,hostBindings:function(o,l){2&o&&(vu("id",l.id),_o("tabindex",null)("aria-label",null)("aria-labelledby",null),gu("mat-checkbox-indeterminate",l.indeterminate)("mat-checkbox-checked",l.checked)("mat-checkbox-disabled",l.disabled)("mat-checkbox-label-before","before"==l.labelPosition)("_mat-animation-noopable","NoopAnimations"===l._animationMode))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],id:"id",required:"required",labelPosition:"labelPosition",name:"name",value:"value",checked:"checked",disabled:"disabled",indeterminate:"indeterminate"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],features:[We([jL]),Ze],ngContentSelectors:FL,decls:17,vars:21,consts:[[1,"mat-checkbox-layout"],["label",""],[1,"mat-checkbox-inner-container"],["type","checkbox",1,"mat-checkbox-input","cdk-visually-hidden",3,"id","required","checked","disabled","tabIndex","change","click"],["input",""],["matRipple","",1,"mat-checkbox-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleRadius","matRippleCentered","matRippleAnimation"],[1,"mat-ripple-element","mat-checkbox-persistent-ripple"],[1,"mat-checkbox-frame"],[1,"mat-checkbox-background"],["version","1.1","focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mat-checkbox-checkmark"],["fill","none","stroke","white","d","M4.1,12.7 9,17.6 20.3,6.3",1,"mat-checkbox-checkmark-path"],[1,"mat-checkbox-mixedmark"],[1,"mat-checkbox-label",3,"cdkObserveContent"],["checkboxLabel",""],[2,"display","none"]],template:function(o,l){if(1&o&&(hm(),pe(0,"label",0,1)(2,"span",2)(3,"input",3,4),Pe("change",function(p){return l._onInteractionEvent(p)})("click",function(p){return l._onInputClick(p)}),ie(),pe(5,"span",5),hs(6,"span",6),ie(),hs(7,"span",7),pe(8,"span",8),function qe(){Pt.lFrame.currentNamespace="svg"}(),pe(9,"svg",9),hs(10,"path",10),ie(),function Lp(){!function tc(){Pt.lFrame.currentNamespace=null}()}(),hs(11,"span",11),ie()(),pe(12,"span",12,13),Pe("cdkObserveContent",function(){return l._onLabelTextChange()}),pe(14,"span",14),Le(15,"\xa0"),ie(),cm(16),ie()()),2&o){const c=om(1),p=om(13);_o("for",l.inputId),cn(2),gu("mat-checkbox-inner-container-no-side-margin",!p.textContent||!p.textContent.trim()),cn(1),Ue("id",l.inputId)("required",l.required)("checked",l.checked)("disabled",l.disabled)("tabIndex",l.tabIndex),_o("value",l.value)("name",l.name)("aria-label",l.ariaLabel||null)("aria-labelledby",l.ariaLabelledby)("aria-checked",l._getAriaChecked())("aria-describedby",l.ariaDescribedby),cn(2),Ue("matRippleTrigger",c)("matRippleDisabled",l._isRippleDisabled())("matRippleRadius",20)("matRippleCentered",!0)("matRippleAnimation",C0(19,OL,"NoopAnimations"===l._animationMode?0:150))}},directives:[OT,AL],styles:["@keyframes mat-checkbox-fade-in-background{0%{opacity:0}50%{opacity:1}}@keyframes mat-checkbox-fade-out-background{0%,50%{opacity:1}100%{opacity:0}}@keyframes mat-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:22.910259}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1)}100%{stroke-dashoffset:0}}@keyframes mat-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mat-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);stroke-dashoffset:0}to{stroke-dashoffset:-22.910259}}@keyframes mat-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(45deg)}}@keyframes mat-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:0;transform:rotate(45deg)}to{opacity:1;transform:rotate(360deg)}}@keyframes mat-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:0;transform:rotate(-45deg)}to{opacity:1;transform:rotate(0deg)}}@keyframes mat-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(315deg)}}@keyframes mat-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;opacity:1;transform:scaleX(1)}32.8%,100%{opacity:0;transform:scaleX(0)}}.mat-checkbox-background,.mat-checkbox-frame{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:2px;box-sizing:border-box;pointer-events:none}.mat-checkbox{display:inline-block;transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);cursor:pointer;-webkit-tap-highlight-color:transparent}._mat-animation-noopable.mat-checkbox{transition:none;animation:none}.mat-checkbox .mat-ripple-element:not(.mat-checkbox-persistent-ripple){opacity:.16}.mat-checkbox .mat-checkbox-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.cdk-high-contrast-active .mat-checkbox.cdk-keyboard-focused .mat-checkbox-ripple{outline:solid 3px}.mat-checkbox-layout{-webkit-user-select:none;user-select:none;cursor:inherit;align-items:baseline;vertical-align:middle;display:inline-flex;white-space:nowrap}.mat-checkbox-label{-webkit-user-select:auto;user-select:auto}.mat-checkbox-inner-container{display:inline-block;height:16px;line-height:0;margin:auto;margin-right:8px;order:0;position:relative;vertical-align:middle;white-space:nowrap;width:16px;flex-shrink:0}[dir=rtl] .mat-checkbox-inner-container{margin-left:8px;margin-right:auto}.mat-checkbox-inner-container-no-side-margin{margin-left:0;margin-right:0}.mat-checkbox-frame{background-color:transparent;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1);border-width:2px;border-style:solid}._mat-animation-noopable .mat-checkbox-frame{transition:none}.mat-checkbox-background{align-items:center;display:inline-flex;justify-content:center;transition:background-color 90ms cubic-bezier(0, 0, 0.2, 0.1),opacity 90ms cubic-bezier(0, 0, 0.2, 0.1);-webkit-print-color-adjust:exact;color-adjust:exact}._mat-animation-noopable .mat-checkbox-background{transition:none}.cdk-high-contrast-active .mat-checkbox .mat-checkbox-background{background:none}.mat-checkbox-persistent-ripple{display:block;width:100%;height:100%;transform:none}.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:.04}.mat-checkbox.cdk-keyboard-focused .mat-checkbox-persistent-ripple{opacity:.12}.mat-checkbox-persistent-ripple,.mat-checkbox.mat-checkbox-disabled .mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:0}@media(hover: none){.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{display:none}}.mat-checkbox-checkmark{top:0;left:0;right:0;bottom:0;position:absolute;width:100%}.mat-checkbox-checkmark-path{stroke-dashoffset:22.910259;stroke-dasharray:22.910259;stroke-width:2.1333333333px}.cdk-high-contrast-black-on-white .mat-checkbox-checkmark-path{stroke:#000 !important}.mat-checkbox-mixedmark{width:calc(100% - 6px);height:2px;opacity:0;transform:scaleX(0) rotate(0deg);border-radius:2px}.cdk-high-contrast-active .mat-checkbox-mixedmark{height:0;border-top:solid 2px;margin-top:2px}.mat-checkbox-label-before .mat-checkbox-inner-container{order:1;margin-left:8px;margin-right:auto}[dir=rtl] .mat-checkbox-label-before .mat-checkbox-inner-container{margin-left:auto;margin-right:8px}.mat-checkbox-checked .mat-checkbox-checkmark{opacity:1}.mat-checkbox-checked .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-checked .mat-checkbox-mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark{opacity:0;transform:rotate(45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-indeterminate .mat-checkbox-mixedmark{opacity:1;transform:scaleX(1) rotate(0deg)}.mat-checkbox-unchecked .mat-checkbox-background{background-color:transparent}.mat-checkbox-disabled{cursor:default}.cdk-high-contrast-active .mat-checkbox-disabled{opacity:.5}.mat-checkbox-anim-unchecked-checked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-checked .mat-checkbox-checkmark-path{animation:180ms linear 0ms mat-checkbox-unchecked-checked-checkmark-path}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-unchecked-indeterminate-mixedmark}.mat-checkbox-anim-checked-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-checked-unchecked .mat-checkbox-checkmark-path{animation:90ms linear 0ms mat-checkbox-checked-unchecked-checkmark-path}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-checkmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-checkmark}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-mixedmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-checkmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-checkmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-mixedmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-mixedmark}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-mixedmark{animation:300ms linear 0ms mat-checkbox-indeterminate-unchecked-mixedmark}.mat-checkbox-input{bottom:0;left:50%}\n"],encapsulation:2,changeDetection:0}),s})(),iN=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=Lr({type:s}),s.\u0275inj=Xi({}),s})(),GL=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=Lr({type:s}),s.\u0275inj=Xi({imports:[[OF,Hm,IL,iN],Hm,iN]}),s})();const zL=["fullScreen"],YL=function(s){return{"margin-left":s}},fn=st.bx.make;class XL{}class $L{constructor(){this.key=0,this.idPhongMay=0,this.idTu=0,this.tenTu="",this.idThietBiVTDR=0,this.tenThietBiVTDR="",this.idThietBiCNTT=0,this.tenThietBiCNTT="",this.visibleText=!0,this.loc="0 0",this.size="50 50",this.angle=0,this.strokeWidth=2,this.version=0,this.userCreate="",this.timeCreate=new Date,this.userLastUpdate="0 0",this.timeLastUpdate=new Date}}let WL=(()=>{class s{constructor(o){this.document=o,this.allowEdit=!1,this.checkedCongCu=!1,this.checkedXemTruoc=!1,this.dataJsonNumberKey=[],this.nodeDataArray=[],this.fullScreenDisplay=!1,this.showHideGrid=!1,this.version=0,this.tenThietBiSelect="",this.subscriptions=new Wn}ngOnInit(){this.fullScreenDisplay=!1,this.myDiagram=fn(st.S0,"myDiagram",{allowDrop:!0,allowLink:!1,allowTextEdit:!0,allowCopy:!0,commandHandler:new hp,"commandHandler.arrowKeyBehavior":"move","commandHandler.archetypeGroupData":{text:"Group",isGroup:!0},rotatingTool:new HI,resizingTool:new UI,draggingTool:new BI,"draggingTool.horizontalGuidelineColor":"blue","draggingTool.verticalGuidelineColor":"blue","draggingTool.centerGuidelineColor":"green","draggingTool.guidelineWidth":1}),this.myDiagram.scrollMode=st.S0.InfiniteScroll,this.myDiagram.grid.visible=this.showHideGrid,this.myDiagram.isReadOnly=!0,this.myDiagram.toolManager.contextMenuTool.isEnabled=!1;const o=fn("ContextMenu",fn("ContextMenuButton",fn(st.al,"M\xe0u n\u1ec1n",{textAlign:"center",font:"bold 12px Roboto, sans-serif",stroke:"red"})),this.LightFillButtons("color"),fn(st.bn,"LineH",{strokeWidth:2,height:1,stretch:st.bx.Horizontal}),fn("ContextMenuButton",fn(st.al,"M\xe0u ch\u1eef",{textAlign:"center",font:"bold 12px Roboto, sans-serif",stroke:"red"})),this.LightFillButtons("colorText"),this.makeButton("\u0110\u1ed5i t\xean",(p,v)=>{this.rename(v)}),this.makeButton("\u1ea8n/hi\u1ec7n t\xean",(p,v)=>{this.myDiagram.model.setDataProperty(v.part.data,"visibleText",!v.part.data.visibleText)}),this.makeButton("Copy",(p,v)=>{this.myDiagram.commandHandler.copySelection()}),this.makeButton("Delete",(p,v)=>{this.myDiagram.commandHandler.deleteSelection()})),l=fn(st.uz,st.s_.Auto,fn(st.bn,"RoundedRectangle",{fill:"whitesmoke",stroke:"gray"}),fn(st.al,{margin:3,editable:!0},new st.KX("text","",p=>void 0!==p.item?p.item:"(unnamed item)")));this.myDiagram.nodeTemplate=fn(st.NB,"Spot",{locationObjectName:"SHAPE",locationSpot:st.z6.Center,toolTip:l,selectionAdorned:!1,contextMenu:o},new st.KX("location","loc",st.E9.parse).makeTwoWay(st.E9.stringify),new st.KX("layerName","isSelected",p=>p?"Foreground":"").ofObject(),{resizable:!0,resizeObjectName:"SHAPE"},{rotatable:!0,rotateObjectName:"SHAPE"},fn(st.bn,{name:"SHAPE",geometryString:"F1 M0 0 L20 0 20 20 0 20 z",fill:"rgb(130, 130, 256)"},new st.KX("geometryString","geo"),new st.KX("stroke","color"),new st.KX("desiredSize","size",st.$u.parse).makeTwoWay(st.$u.stringify),new st.KX("angle","angle").makeTwoWay(),new st.KX("strokeWidth","strokeWidth").makeTwoWay()),fn(st.al,{margin:5,textAlign:"center",font:"bold 8px Roboto, sans-serif",stroke:"#484848",editable:!0,maxLines:3,width:50},new st.KX("text","item").makeTwoWay(),new st.KX("visible","visibleText",p=>p),new st.KX("stroke","colorText"),new st.KX("strokeWidth","strokeWidth")),{click:(p,v)=>{v.part&&(this.tenThietBiSelect=v.part.data.idThietBiVTDR>0?"Thi\u1ebft b\u1ecb: "+v.part.data.tenThietBiVTDR:v.part.data.idThietBiCNTT>0?"Thi\u1ebft b\u1ecb: "+v.part.data.tenThietBiCNTT:v.part.data.idTu>0?"T\u1ee7: "+v.part.data.tenTu:v.part.data.item)}}),this.myDiagram.groupTemplate=fn(st.ZA,st.s_.Auto,{ungroupable:!0,toolTip:l},fn(st.bn,"Rectangle",{fill:"transparent",stroke:"lightgray",strokeWidth:10}),fn(st.Vm)),this.myDiagram.addDiagramListener("SelectionGrouped",p=>{p.subject.memberParts.each(v=>{v.selectable=!1})}),this.myDiagram.addDiagramListener("SelectionUngrouped",p=>{p.parameter.each(v=>{v.selectable=!0,v.isSelected=!0})}),this.myDiagram.addDiagramListener("Modified",p=>{const v=document.getElementById("currentFile");if(v&&v.textContent){const w=v.textContent.indexOf("*");this.myDiagram.isModified?w<0&&(v.textContent=v.textContent+"*"):w>=0&&(v.textContent=v.textContent.substr(0,w))}});const c="black";this.myPalette=fn(st.YI,"myPalette",{nodeTemplate:this.myDiagram.nodeTemplate,"contextMenuTool.isEnabled":!1,allowZoom:!1,layout:fn(st.Me,{cellSize:new st.$u(1,1),spacing:new st.$u(5,5)}),model:fn(st.FJ,{nodeDataArray:[{key:0,geo:"M1425 896 1455 896",item:"",fill:"red",color:c,colorText:"black",visibleText:!0,angle:0,strokeWidth:2},{key:0,geo:"M1425 896 1455 896M1495 896 1525 896M1454.978 895.978C1458.68 886.59 1466.65 883 1475 883 1483.35 883 1491.32 886.59 1494.959 895.978",item:"",color:c,colorText:"black",visibleText:!0,angle:0,strokeWidth:2},{key:0,geo:"",item:"Text",color:c,colorText:"black",visibleText:!0,angle:0,strokeWidth:2},{key:0,geo:"M4 6C4 6 7 6 7 6 7 6 4 1 4 1 4 1 1 6 1 6 1 6 4 6 4 6M4 21C4 21 4 6 4 6",item:"",color:c,colorText:"black",visibleText:!0,angle:0,strokeWidth:2},{key:0,geo:"M1,9H6M46,9h5M6,1H46V17H6Z",item:"",color:c,colorText:"black",visibleText:!0,size:"50 20",angle:0,strokeWidth:2},{key:0,geo:"M 11 8 C 11 8 13 8 13 8 C 13 8 16 1 16 1 C 16 1 22 15 22 15 C 22 15 28 1 28 1 C 28 1 34 15 34 15 C 34 15 40 1 40 1 C 40 1 46 15 46 15 C 46 15 49 8 49 8 C 49 8 51 8 51 8 M 51 8 C 51 8 61 8 61 8 M 1 8 C 1 8 11 8 11 8",item:"",color:c,colorText:"black",visibleText:!0,angle:0,strokeWidth:2},{key:0,geo:"M 25 1 C 25 1 25 29 25 29 C 25 29 17 29 17 29 C 17 29 17 1 17 1 C 17 1 25 1 25 1 Z M 29 5 C 29 5 29 25 29 25 M 13 5 C 13 5 13 25 13 25 M 29 15 C 29 15 41 15 41 15 M 1 15 C 1 15 13 15 13 15",item:"",color:c,colorText:"black",visibleText:!0,angle:0,strokeWidth:2},{key:0,geo:"M 30 1 C 30 1 30 29 30 29 M 22 1 C 22 1 22 29 22 29 M 30 15 C 30 15 51 15 51 15 M 1 15 C 1 15 22 15 22 15",item:"",color:c,colorText:"black",visibleText:!0,angle:0,strokeWidth:2},{key:0,geo:"M 21 13 M 13 13 C 13 10.79 14.79 9 17 9 C 19.21 9 21 10.79 21 13 C 21 15.21 22.79 17 25 17 C 27.21 17 29 15.21 29 13 M 33 13 C 33 13 41 13 41 13 M 33 13 C 33 19.63 27.63 25 21 25 C 14.37 25 9 19.63 9 13 C 9 6.37 14.37 1 21 1 C 27.63 1 33 6.37 33 13 Z M 1 13 C 1 13 9 13 9 13",item:"",color:c,colorText:"black",visibleText:!0,angle:0,strokeWidth:2},{key:0,geo:"M1248 1681 1266 1681 1270 1671 1278 1691 1286 1671 1294 1691 1302 1671 1310 1691 1318 1671 1326 1691 1330 1681 1348 1681M1278 1711 1318 1651M1293 1696 1303 1711M1303 1696 1293 1711",item:"",color:c,colorText:"black",visibleText:!0,angle:0,strokeWidth:2},{key:0,geo:"M1268 598 1316.63 598M1321.88 598 1314.88 601.5 1316.63 598 1314.88 594.5Z",item:"",color:c,colorText:"black",visibleText:!0,angle:0,strokeWidth:2},{key:0,geo:"M1588 729 1603 729M1528 729 1546.5 729 1585 713",item:"",color:c,colorText:"black",visibleText:!0,angle:0,strokeWidth:2},{key:0,geo:"M1173 698 1183 678 1193 698ZM1158 688A25 25 0 101208 688 25 25 0 101158 688",item:"",color:c,colorText:"black",visibleText:!0,angle:0,strokeWidth:2},{key:0,geo:"M1170.903 677.767 1183.209 688.64M1182.9 703.831 1183.107 688.937M1197.173 679.629 1183.314 688.73M1158 688A25 25 0 101208 688 25 25 0 101158 688",item:"",color:c,colorText:"black",visibleText:!0,angle:0,strokeWidth:2}]})}),this.myOverview=fn(st.g2,"myOverview",{observed:this.myDiagram,maxScale:.5}),this.myDiagram.isModified=!1,this.newDocument(),this.myDiagram.addDiagramListener("InitialLayoutCompleted",p=>{const v=this.myDiagram.model.modelData.position;v&&(this.myDiagram.position=st.E9.parse(v))}),this.myDiagram.addDiagramListener("ChangedSelection",p=>{const v=this.myDiagram.commandHandler;this.enable("Undo",v.canUndo()),this.enable("Redo",v.canRedo()),this.enable("Copy",v.canCopySelection()),this.enable("Paste",v.canPasteSelection()),this.enable("Delete",v.canDeleteSelection()),this.enable("SelectAll",v.canSelectAll())}),this.myDiagram.addDiagramListener("ClipboardChanged",p=>{const v=this.myDiagram.model.modelData.position;v&&(this.myDiagram.position=st.E9.parse(v))}),this.myDiagram.contextMenu=fn("ContextMenu",this.makeButton("Paste",(p,v)=>{p.diagram.commandHandler.pasteSelection(p.diagram.toolManager.contextMenuTool.mouseDownPoint)},p=>p.diagram.commandHandler.canPasteSelection(p.diagram.toolManager.contextMenuTool.mouseDownPoint)),this.makeButton("Undo",(p,v)=>{p.diagram.commandHandler.undo()},p=>p.diagram.commandHandler.canUndo()),this.makeButton("Redo",(p,v)=>{p.diagram.commandHandler.redo()},p=>p.diagram.commandHandler.canRedo())),this.loadData()}showHideGridCheckBox(){this.myDiagram.grid.visible=this.showHideGrid}changeEdit(){this.allowEdit?(this.checkedCongCu=!0,this.checkedXemTruoc=!0,this.showHideGrid=!0,this.myDiagram.grid.visible=this.showHideGrid):(this.checkedCongCu=!1,this.checkedXemTruoc=!1,this.showHideGrid=!1,this.myDiagram.grid.visible=this.showHideGrid),this.myDiagram.isReadOnly=!this.allowEdit,this.myDiagram.toolManager.contextMenuTool.isEnabled=this.allowEdit}LightFillButtons(o){return[fn("ContextMenuButton",fn(st.s_,"Horizontal",this.colorButton("black",o),this.colorButton("crimson",o),this.colorButton("blueviolet",o),this.colorButton("darkblue",o))),fn("ContextMenuButton",fn(st.s_,"Horizontal",this.colorButton("aqua",o),this.colorButton("aquamarine",o),this.colorButton("cornflowerblue",o),this.colorButton("darkkhaki",o))),fn("ContextMenuButton",fn(st.s_,"Horizontal",this.colorButton("white",o),this.colorButton("#ececf1",o),this.colorButton("lightpink",o),this.colorButton("palegoldenrod",o)))]}colorButton(o,l){return l||(l="color"),fn(st.bn,{width:16,height:16,stroke:"lightgray",fill:o,margin:1,background:"transparent",mouseEnter(c,p){p.stroke="dodgerblue"},mouseLeave(c,p){p.stroke="lightgray"},click:this.clickFunction(l,o),contextClick:this.clickFunction(l,o)})}clickFunction(o,l){return(c,p)=>{c.handled=!0,c.diagram.model.commit(v=>{v.set(p.part.adornedPart.data,o,l)})}}makeButton(o,l,c){return fn("ContextMenuButton",{"ButtonBorder.fill":"white",_buttonFillOver:"#eeeeee"},fn(st.al,{textAlign:"left",margin:4},o),{click:l},c?new st.KX("visible","",(p,v)=>!!p.diagram&&c(p,v)).ofObject():{})}loadDiagramProperties(){const o=this.myDiagram.model.modelData.position;o&&(this.myDiagram.position=st.E9.parse(o))}enableAll(){const o=this.myDiagram.commandHandler;this.enable("Undo",o.canUndo()),this.enable("Redo",o.canRedo()),this.enable("Copy",o.canCopySelection()),this.enable("Paste",o.canPasteSelection()),this.enable("Delete",o.canDeleteSelection()),this.enable("SelectAll",o.canSelectAll())}enable(o,l){const c=document.getElementById(o);c&&(c.disabled=!l)}rename(o){this.myDiagram.startTransaction("rename");const l=prompt("Rename "+o.part.data.item+" to:");this.myDiagram.model.setDataProperty(o.part.data,"item",l),this.myDiagram.commitTransaction("rename")}changeRotate(o){0===this.myDiagram.selection.size?alert("Vui l\xf2ng ch\u1ecdn m\u1ee5c ti\xeau!"):(this.myDiagram.startTransaction("rotate"),this.myDiagram.selection.each(l=>{l.part&&(this.myDiagram.model.setDataProperty(l.part.data,"angle",o),this.myDiagram.commitTransaction("rotate"))}))}changeRotateKhac(){0===this.myDiagram.selection.size?alert("Vui l\xf2ng ch\u1ecdn m\u1ee5c ti\xeau!"):(this.myDiagram.startTransaction("rotate"),this.myDiagram.selection.each(o=>{const l=prompt("Rotate \xb0:");o.part&&(this.myDiagram.model.setDataProperty(o.part.data,"angle",l),this.myDiagram.commitTransaction("rotate"))}))}loadData(){if(this.nodeDataArray=[],localStorage.getItem("data")){const o=JSON.parse(localStorage.getItem("data")||"{}");for(const l of o){const c=new $L;c.key=l.key,c.item=l.item,c.geo=l.geo,c.idPhongMay=l.idPhongMay,c.idTu=l.idTu,c.tenTu=l.tenTu,c.idThietBiVTDR=l.idThietBiVTDR,c.tenThietBiVTDR=l.tenThietBiVTDR,c.idThietBiCNTT=l.idThietBiCNTT,c.tenThietBiCNTT=l.tenThietBiCNTT,c.loc=l.loc,c.color=l.color,c.colorText=l.colorText,c.visibleText=l.visibleText,c.size=l.size,c.angle=l.angle,c.strokeWidth=l.strokeWidth,c.version=o[0].version,this.nodeDataArray.push(c)}this.version=this.nodeDataArray.length>0?o[0].version:0,this.myDiagram.model=fn(st.FJ,{copiesArrays:!0,copiesArrayObjects:!0,nodeDataArray:this.nodeDataArray})}this.myDiagram.model=fn(st.FJ,{copiesArrays:!0,copiesArrayObjects:!0,nodeDataArray:this.nodeDataArray})}newDocument(){this.myDiagram.model=new st.FJ,this.myDiagram.model.undoManager.isEnabled=!0,this.myDiagram.isModified=!1}saveDocument(){if(confirm("Save?")){const o=[];for(const l of this.myDiagram.model.nodeDataArray){const c=new XL;c.key=l.key,c.idPhongMay=this.idPhongMay,c.item=l.item,c.geo=l.geo,c.loc=l.loc,c.color=l.color,c.colorText=l.colorText,c.visibleText=l.visibleText,c.size=l.size,c.angle=l.angle,c.strokeWidth=l.strokeWidth,c.version=this.version,o.push(c)}localStorage.setItem("data",JSON.stringify(o)),alert("Th\xe0nh c\xf4ng!!!")}}removeDocument(){alert("Kh\xf4ng \u0111\u01b0\u1ee3c quy\u1ec1n x\xf3a!")}openFullscreen(){const o=this.divRef.nativeElement;o.requestFullscreen?(o.requestFullscreen(),this.fullScreenDisplay=!0):o.msRequestFullscreen?(o.msRequestFullscreen(),this.fullScreenDisplay=!0):o.mozRequestFullScreen?(o.mozRequestFullScreen(),this.fullScreenDisplay=!0):o.webkitRequestFullscreen&&(o.webkitRequestFullscreen(),this.fullScreenDisplay=!0)}ngOnDestroy(){this.subscriptions.unsubscribe()}}return s.\u0275fac=function(o){return new(o||s)(yt(Ni))},s.\u0275cmp=N({type:s,selectors:[["app-root"]],viewQuery:function(o,l){if(1&o&&a1(zL,5),2&o){let c;s1(c=l1())&&(l.divRef=c.first)}},inputs:{idPhongMay:"idPhongMay"},decls:108,vars:21,consts:[[2,"position","relative"],["fullScreen",""],["id","currentFile"],[2,"position","absolute","top","0","right","10px"],["matPrefix","",1,"full-screen",3,"hidden","click"],["matPrefix","",1,"full-screen-exit",3,"hidden"],["id","menuBar"],["id","nav"],["href","javascript:void(0)"],["href","javascript:void(0)",3,"click"],["href","javascript:void(0)",3,"hidden","click"],["color","primary",2,"margin-right","10px",3,"checked","change"],["href","javascript:void(0)",3,"hidden"],[3,"hidden"],[2,"float","right",3,"hidden"],["matTooltip","L\u01b0u s\u01a1 \u0111\u1ed3",1,"icon-edit",3,"click"],[2,"float","right"],["matTooltip","Xem chi ti\u1ebft",1,"icon-done",2,"margin","0 20px"],["id","PaletteAndDiagram",2,"position","relative","overflow","hidden","width","100%","height","inherit"],["id","sideBar",2,"float","left","width","20%","text-align","center","min-height","400px","height","100%"],[1,"handle",3,"hidden"],["id","myPalette",2,"border","solid 1px gray","width","100%","min-height","400px","height","80%",3,"hidden"],["id","myOverview",2,"border","solid 1px gray","width","100%","height","20%","min-height","150px",3,"hidden"],["id","myDiagram",2,"position","absolute","border","1px solid gray","width","100%","height","100vh","background-color","white",3,"ngStyle"],["myDiagram",""]],template:function(o,l){1&o&&(pe(0,"div",0,1)(2,"div",2),Le(3,"S\u01a0 \u0110\u1ed2 \u0110I\u1ec6N ABC "),ie(),pe(4,"div",3)(5,"mat-icon",4),Pe("click",function(){return l.openFullscreen()}),Le(6,"fullscreen"),ie(),pe(7,"mat-icon",5),Le(8,"fullscreen_exit"),ie()(),pe(9,"div",6)(10,"ul",7)(11,"li")(12,"a",8),Le(13,"File"),ie(),pe(14,"ul")(15,"li")(16,"a",9),Pe("click",function(){return l.newDocument()}),Le(17,"New"),ie()(),pe(18,"li")(19,"a",10),Pe("click",function(){return l.saveDocument()}),Le(20,"Save"),ie()(),pe(21,"li")(22,"a",10),Pe("click",function(){return l.removeDocument()}),Le(23,"Delete"),ie()()()(),pe(24,"li")(25,"a",8),Le(26,"View"),ie(),pe(27,"ul")(28,"li")(29,"a",8)(30,"mat-checkbox",11),Pe("change",function(){return l.showHideGrid=!l.showHideGrid,l.showHideGridCheckBox()}),ie(),Le(31,"Hi\u1ec3n th\u1ecb l\u01b0\u1edbi "),ie()(),pe(32,"li")(33,"a",10),Pe("click",function(){return l.openFullscreen()}),Le(34,"Full Screen"),ie()(),pe(35,"li")(36,"a",12),Le(37,"Exit Full Screen"),ie()(),pe(38,"li",13)(39,"a",8),Le(40,"\u1ea8n hi\u1ec7n >>"),ie(),pe(41,"ul")(42,"li")(43,"a",8)(44,"mat-checkbox",11),Pe("change",function(){return l.checkedCongCu=!l.checkedCongCu}),ie(),Le(45,"C\xf4ng c\u1ee5"),ie()(),pe(46,"li")(47,"a",8)(48,"mat-checkbox",11),Pe("change",function(){return l.checkedXemTruoc=!l.checkedXemTruoc}),ie(),Le(49,"Xem tr\u01b0\u1edbc"),ie()()()()()(),pe(50,"li",13)(51,"a",8),Le(52,"Rotate"),ie(),pe(53,"ul")(54,"li")(55,"a",9),Pe("click",function(){return l.changeRotate(0)}),Le(56,"0\xb0"),ie()(),pe(57,"li")(58,"a",9),Pe("click",function(){return l.changeRotate(45)}),Le(59,"45\xb0"),ie()(),pe(60,"li")(61,"a",9),Pe("click",function(){return l.changeRotate(-45)}),Le(62,"-45\xb0"),ie()(),pe(63,"li")(64,"a",9),Pe("click",function(){return l.changeRotate(135)}),Le(65,"135\xb0"),ie()(),pe(66,"li")(67,"a",9),Pe("click",function(){return l.changeRotate(-135)}),Le(68,"-135\xb0"),ie()(),pe(69,"li")(70,"a",9),Pe("click",function(){return l.changeRotate(90)}),Le(71,"90\xb0"),ie()(),pe(72,"li")(73,"a",9),Pe("click",function(){return l.changeRotate(-90)}),Le(74,"-90\xb0"),ie()(),pe(75,"li")(76,"a",9),Pe("click",function(){return l.changeRotate(180)}),Le(77,"180\xb0"),ie()(),pe(78,"li")(79,"a",9),Pe("click",function(){return l.changeRotateKhac()}),Le(80,"Kh\xe1c"),ie()()()(),pe(81,"li")(82,"a",8),Le(83,"Options"),ie(),pe(84,"ul")(85,"li")(86,"a",8)(87,"mat-checkbox",11),Pe("change",function(){return l.allowEdit=!l.allowEdit,l.changeEdit()}),ie(),Le(88,"Ch\u1ec9nh s\u1eeda"),ie()()()(),pe(89,"li",14)(90,"mat-icon",15),Pe("click",function(){return l.saveDocument()}),Le(91,"save"),ie()(),pe(92,"li",16)(93,"mat-icon",17),Le(94,"visibility"),ie()(),pe(95,"li",16)(96,"span"),Le(97),ie()()()(),pe(98,"div",18)(99,"div",19)(100,"div",20),Le(101,"C\xf4ng c\u1ee5:"),ie(),hs(102,"div",21),pe(103,"div",20),Le(104,"Xem tr\u01b0\u1edbc:"),ie(),hs(105,"div",22),ie(),hs(106,"div",23,24),ie()()),2&o&&(cn(5),Ue("hidden",l.fullScreenDisplay),cn(2),Ue("hidden",!l.fullScreenDisplay),cn(12),Ue("hidden",!l.allowEdit),cn(3),Ue("hidden",!l.allowEdit),cn(8),Ue("checked",l.showHideGrid),cn(3),Ue("hidden",l.fullScreenDisplay),cn(3),Ue("hidden",!l.fullScreenDisplay),cn(2),Ue("hidden",!l.allowEdit),cn(6),Ue("checked",l.checkedCongCu),cn(4),Ue("checked",l.checkedXemTruoc),cn(2),Ue("hidden",!l.allowEdit),cn(37),Ue("checked",l.allowEdit),cn(2),Ue("hidden",!l.allowEdit),cn(8),pl(l.tenThietBiSelect),cn(3),Ue("hidden",!l.checkedCongCu),cn(2),Ue("hidden",!l.checkedCongCu),cn(1),Ue("hidden",!l.checkedXemTruoc),cn(2),Ue("hidden",!l.checkedXemTruoc),cn(1),Ue("ngStyle",C0(19,YL,l.checkedXemTruoc||l.checkedCongCu?"20%":"0")))},directives:[_2,nN,fE],styles:["a[_ngcontent-%COMP%]{text-decoration:none}a[_ngcontent-%COMP%]:hover{text-decoration:underline}a[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#0645ad}a[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus, a[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#cedff2}a[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]{background:#1e90ff;color:#fff}#menuBar[_ngcontent-%COMP%]{border:none;border:0;margin:0;padding:0;font-size:12px;font-weight:700;width:auto}#menuBar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{background:#ededed;height:25px;list-style:none;margin:0;padding:0}#menuBar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{float:left;padding:0}#menuBar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background:#ededed;display:block;font-weight:400;line-height:25px;margin:0;padding:0 5px;text-align:center;text-decoration:none}#menuBar[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{color:#000}#menuBar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000}#menuBar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover, #menuBar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover > a[_ngcontent-%COMP%]{background:#cacaca;color:#000;text-decoration:none}#menuBar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{background:#9ccb19;display:none;height:auto;padding:0;margin:0;border:0;position:absolute;width:150px;z-index:200}#menuBar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   ul[_ngcontent-%COMP%]{display:block}#menuBar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background:#ededed;display:block;float:none;margin:0;padding:0;width:150px}#menuBar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background:0 0}#menuBar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;height:25px;font-size:12px;font-style:normal;margin:0;padding:0 10px 0 15px;text-align:left}#menuBar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, #menuBar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover > a[_ngcontent-%COMP%]{background:#cacaca;border:0;color:#000;text-decoration:none}#nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:none}#nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   ul[_ngcontent-%COMP%]{background:#9ccb19;margin-left:150px;margin-top:-25px;display:block}#nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:none}#nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   ul[_ngcontent-%COMP%]{background:#9ccb19;margin-left:150px;margin-top:-25px;display:block;color:#0276fd}input[_ngcontent-%COMP%]{text-align:center;font-size:large;float:left}#myOverview[_ngcontent-%COMP%]{background-color:#d3d3d3}#currentFile[_ngcontent-%COMP%]{background:#a692b1;width:100%;text-align:center;font-weight:700;font-size:14px;padding:3px 0;color:#fff}.draggable[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;border:1px solid gray;background-color:#e2e2e2;position:absolute;top:40%;left:50%;width:300px;height:200px;z-index:500}.handle[_ngcontent-%COMP%]{background-color:#9ccb19;text-align:center;font:700 12px sans-serif}.elementText[_ngcontent-%COMP%]{font-size:medium;margin-left:10px;margin-top:20px;margin-bottom:10px}.mySavedFiles[_ngcontent-%COMP%]{font-size:medium;width:250px;margin-left:25px}.elementBtn[_ngcontent-%COMP%]{margin-top:20px;font-size:medium;margin-left:20px}.full-screen[_ngcontent-%COMP%]:hover{font-size:30px;color:#4169e1}.full-screen-exit[_ngcontent-%COMP%]:hover{font-size:20px;color:tomato}"]}),s})(),KL=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=Lr({type:s,bootstrap:[WL]}),s.\u0275inj=Xi({providers:[],imports:[[NI,C2,GL]]}),s})();(function gP(){GS=!1})(),TI().bootstrapModule(KL).catch(s=>console.error(s))},813:(Gh,X0,$m)=>{$m.d(X0,{$u:()=>_p,D5:()=>Km,E9:()=>_D,EA:()=>K0,FJ:()=>SD,GS:()=>xM,KX:()=>bi,Lz:()=>EM,Me:()=>PM,NB:()=>TM,S0:()=>CM,Vm:()=>kM,WA:()=>zh,YI:()=>DM,ZA:()=>Cs,al:()=>Qm,bn:()=>LD,bx:()=>Jm,g2:()=>SM,h1:()=>W0,rU:()=>tx,s_:()=>FD,uz:()=>jD,z6:()=>Cp}),Gh=$m.hmd(Gh),function(){var D;function wr(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function rx(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:wr(t)}}function bM(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}var Xh,WD="function"==typeof Object.create?Object.create:function(t){function e(){}return e.prototype=t,new e};if("function"==typeof Object.setPrototypeOf)Xh=Object.setPrototypeOf;else{var Zr;t:{var ox={};try{ox.__proto__={a:!0},Zr=ox.a;break t}catch(t){}Zr=!1}Xh=Zr?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var OM=Xh;function Ft(t,e){if(t.prototype=WD(e.prototype),t.prototype.constructor=t,OM)OM(t,e);else for(var n in e)if("prototype"!=n)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(e,n);i&&Object.defineProperty(t,n,i)}else t[n]=e[n];t.vB=e.prototype}var Dt="undefined"!=typeof global&&null!=global?global:self,ZD="function"==typeof Object.assign?Object.assign:function(t,e){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},JD="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};function FM(t,e){if(e){var n=Dt;t=t.split(".");for(var i=0;i<t.length-1;i++){var a=t[i];a in n||(n[a]={}),n=n[a]}(e=e(i=n[t=t[t.length-1]]))!=i&&null!=e&&JD(n,t,{writable:!0,value:e})}}FM("Object.assign",function(t){return t||ZD}),FM("Array.prototype.fill",function(t){return t||function(e,n,i){var a=this.length||0;for(0>n&&(n=Math.max(0,a+n)),(null==i||i>a)&&(i=a),0>(i=Number(i))&&(i=Math.max(0,a+i)),n=Number(n||0);n<i;n++)this[n]=e;return this}});var dt="object"==typeof globalThis&&globalThis||"object"==typeof global&&global.global===global&&global||"object"==typeof self&&self.self===self&&self||{};function $h(){}function qm(t,e){var n=-1;return function(){var i=this,a=arguments;-1!==n&&dt.clearTimeout(n),n=Pu(function(){n=-1,t.apply(i,a)},e)}}function Pu(t,e){return dt.setTimeout(t,e)}function Bn(t){return dt.document.createElement(t)}function z(t){throw Error(t)}function bt(t,e){t="The object is frozen, so its properties cannot be set: "+t.toString(),void 0!==e&&(t+="  to value: "+e),z(t)}function me(t,e,n,i){n=null===n?"*":"string"==typeof n?n:"function"==typeof n&&"string"==typeof n.className?n.className:"",void 0!==i&&(n+="."+i),z(n+" is not in the range "+e+": "+t)}function Oi(t){dt.console&&dt.console.log(t)}function Et(t){return"object"==typeof t&&null!==t}function _n(t){return Array.isArray(t)||dt.NodeList&&t instanceof dt.NodeList||dt.HTMLCollection&&t instanceof dt.HTMLCollection}function Xi(t){return Array.prototype.slice.call(t)}function Tl(t,e,n){Array.isArray(t)?e>=t.length?t.push(n):t.splice(e,0,n):z("Cannot insert an object into an HTMLCollection or NodeList: "+n+" at "+e)}function kl(t,e){Array.isArray(t)?e>=t.length?t.pop():t.splice(e,1):z("Cannot remove an object from an HTMLCollection or NodeList at "+e)}function ye(){var t=la.pop();return void 0===t?[]:t}function oe(t){t.length=0,la.push(t)}function aa(t){if("function"==typeof t){if(t.className)return t.className;if(t.name)return t.name;var e=t.toString();if(""!==(e=e.substring(9,e.indexOf("(")).trim()))return t._className=e}else if(Et(t)&&t.constructor)return aa(t.constructor);return typeof t}function sr(t){var e=t;return Et(t)&&(t.text?e=t.text:t.name?e=t.name:void 0!==t.key?e=t.key:void 0!==t.id?e=t.id:t.constructor===Object&&(t.Text?e=t.Text:t.Name?e=t.Name:void 0!==t.Key?e=t.Key:void 0!==t.Id?e=t.Id:void 0!==t.ID&&(e=t.ID))),void 0===e?"undefined":null===e?"null":e.toString()}function Sp(t,e){if(t.hasOwnProperty(e))return!0;for(t=Object.getPrototypeOf(t);t&&t!==Function;){if(t.hasOwnProperty(e))return!0;var n=t.hB;if(n&&n[e])return!0;t=Object.getPrototypeOf(t)}return!1}function co(t,e,n){Object.defineProperty(Ee.prototype,t,{get:e,set:n})}function $t(t){for(var e=[],n=0;256>n;n++)e["0123456789abcdef".charAt(n>>4)+"0123456789abcdef".charAt(15&n)]=String.fromCharCode(n);t.length%2&&(t="0"+t),n=[];for(var i=0,a=0;a<t.length;a+=2)n[i++]=e[t.substr(a,2)];for(t=""===(t=n.join(""))?"0":t,e=[],n=0;256>n;n++)e[n]=n;for(n=i=0;256>n;n++)a=e[n],e[n]=e[i=(i+e[n]+119)%256],e[i]=a;i=n=0;for(var u="",h=0;h<t.length;h++)a=e[n=(n+1)%256],e[n]=e[i=(i+e[n])%256],e[i]=a,u+=String.fromCharCode(t.charCodeAt(h)^e[(e[n]+e[i])%256]);return u}void 0===dt.requestAnimationFrame&&(dt.requestAnimationFrame=void 0===dt.setImmediate?function(t){dt.setTimeout(t,0)}:dt.setImmediate);var _e=void 0!==dt.navigator&&0<dt.navigator.userAgent.indexOf("Trident/7"),ty=void 0!==dt.navigator&&0<dt.navigator.userAgent.indexOf("Edge/"),Ss=void 0!==dt.navigator&&void 0!==dt.navigator.platform&&null!==dt.navigator.platform.match(/(iPhone|iPod|iPad|Mac)/i),la=[];function J(t,e,n){xn(this),this.j=t,this.na=e,this.o=n}function ua(t,e){return null==e||""===e?null:t[e]}function Es(){this.Fw=[]}function Nn(){}Object.freeze([]),$h.className="Util",$h.Dx="32ab5ff3b26f42dc0ed90f21462913b5",$h.adym="gojs.net",$h.vfo="28e644fdba",$h.className="Util",J.prototype.toString=function(){return"EnumValue."+this.na},Dt.Object.defineProperties(J.prototype,{classType:{get:function(){return this.j}},name:{get:function(){return this.na}},value:{get:function(){return this.o}}}),J.className="EnumValue",Es.prototype.toString=function(){return this.Fw.join("")},Es.prototype.add=function(t){""!==t&&this.Fw.push(t)},Es.className="StringBuilder",Nn.className="PropertyCollection";var Un,ey={jB:!1,oB:!1,lB:!1,nB:!1,tB:!1,rB:!1,Qx:!1,kB:null,trace:function(t){dt.console&&dt.console.log(t)},mB:function(t,e,n,i){t.strokeStyle="red",t.fillStyle="red",t.font="8px sans-serif",t.beginPath(),t.moveTo(-10,0),t.lineTo(10,0),t.moveTo(0,-10),t.lineTo(0,10),t.stroke(),t.setTransform(1,0,0,1,0,0),t.scale(n,n),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),t.lineWidth=2,t.beginPath(),t.moveTo(i.left,i.top+20),t.lineTo(i.left,i.top),t.lineTo(i.left+20,i.top),t.moveTo(i.right,i.bottom-20),t.lineTo(i.right,i.bottom),t.lineTo(i.right-20,i.bottom),t.stroke(),t.fillText("DB: "+Math.round(i.x)+", "+Math.round(i.y)+", "+Math.round(i.width)+", "+Math.round(i.height),i.left,i.top-5)},iB:function(t){var n,e={};for(n in t){if(e.x=n,"licenseKey"!==e.x){var i=t[e.x];if(void 0!==i.prototype){e.sm=Object.getOwnPropertyNames(i.prototype);for(var a={lk:0};a.lk<e.sm.length;(a={lk:a.lk}).lk++){var u=Object.getOwnPropertyDescriptor(i.prototype,e.sm[a.lk]);void 0!==u.get&&void 0===u.set&&Object.defineProperty(i.prototype,e.sm[a.lk],{set:function(h,d){return function(){throw Error("Property "+h.sm[d.lk]+" of "+h.x+" is read-only.")}}(e,a)})}}}e={sm:e.sm,x:e.x}}}};function _i(){}function Cn(t){this.key=-1,this.value=t}function vn(t){this.pb=t,this.af=null,t.Ja=null,this.ja=t.Ba,this.Qa=-1}function fi(t){this.pb=t,t.Ng=null,this.ja=t.Ba,this.Qa=t.m.length}function et(t){xn(this),this.v=!1,this.m=[],this.Ba=0,this.Ng=this.Ja=null,"string"==typeof t&&z("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),void 0!==t&&this.addAll(t)}function ae(t){this.ag=t,t.Ja=null,this.ja=t.Ba,this.la=null}function K(t){xn(this),this.v=!1,this.Ib={},this.Hb=0,this.Ja=null,this.Ba=0,this.We=this.ba=null,"string"==typeof t&&z("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),void 0!==t&&this.addAll(t)}function xn(t){t.__gohashid=Jo++}function Zo(t){var e=t.__gohashid;return void 0===e&&(e=Jo++,t.__gohashid=e),e}function Jt(t){return t.__gohashid}_i.prototype.reset=function(){},_i.prototype.next=function(){return!1},_i.prototype.od=function(){return!1},_i.prototype.first=function(){return null},_i.prototype.any=function(){return!1},_i.prototype.all=function(){return!0},_i.prototype.each=function(){return this},_i.prototype.map=function(){return this},_i.prototype.filter=function(){return this},_i.prototype.Qd=function(){},_i.prototype.toString=function(){return"EmptyIterator"},Dt.Object.defineProperties(_i.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 0}}}),_i.prototype.first=_i.prototype.first,_i.prototype.hasNext=_i.prototype.od,_i.prototype.next=_i.prototype.next,_i.prototype.reset=_i.prototype.reset,_i.className="EmptyIterator",Un=new _i,Cn.prototype.reset=function(){this.key=-1},Cn.prototype.next=function(){return-1===this.key&&(this.key=0,!0)},Cn.prototype.od=function(){return this.next()},Cn.prototype.first=function(){return this.key=0,this.value},Cn.prototype.any=function(t){return this.key=-1,t(this.value)},Cn.prototype.all=function(t){return this.key=-1,t(this.value)},Cn.prototype.each=function(t){return this.key=-1,t(this.value),this},Cn.prototype.map=function(t){return new Cn(t(this.value))},Cn.prototype.filter=function(t){return t(this.value)?new Cn(this.value):Un},Cn.prototype.Qd=function(){this.value=null},Cn.prototype.toString=function(){return"SingletonIterator("+this.value+")"},Dt.Object.defineProperties(Cn.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 1}}}),Cn.prototype.first=Cn.prototype.first,Cn.prototype.hasNext=Cn.prototype.od,Cn.prototype.next=Cn.prototype.next,Cn.prototype.reset=Cn.prototype.reset,Cn.className="SingletonIterator",vn.prototype.reset=function(){var t=this.pb;t.Ja=null,this.ja=t.Ba,this.Qa=-1},vn.prototype.next=function(){var t=this.pb;if(t.Ba!==this.ja&&0>this.key)return!1;var e=(t=t.m).length,n=++this.Qa,i=this.af;if(null!==i)for(;n<e;){var a=t[n];if(i(a))return this.key=this.Qa=n,this.value=a,!0;n++}else{if(n<e)return this.key=n,this.value=t[n],!0;this.Qd()}return!1},vn.prototype.od=function(){return this.next()},vn.prototype.first=function(){var t=this.pb;this.ja=t.Ba,this.Qa=0;var e=(t=t.m).length,n=this.af;if(null!==n){for(var i=0;i<e;){var a=t[i];if(n(a))return this.key=this.Qa=i,this.value=a;i++}return null}return 0<e?(t=t[0],this.key=0,this.value=t):null},vn.prototype.any=function(t){var e=this.pb;e.Ja=null,this.Qa=-1;for(var n=(e=e.m).length,i=this.af,a=0;a<n;a++){var u=e[a];if((null===i||i(u))&&t(u))return!0}return!1},vn.prototype.all=function(t){var e=this.pb;e.Ja=null,this.Qa=-1;for(var n=(e=e.m).length,i=this.af,a=0;a<n;a++){var u=e[a];if((null===i||i(u))&&!t(u))return!1}return!0},vn.prototype.each=function(t){var e=this.pb;e.Ja=null,this.Qa=-1;for(var n=(e=e.m).length,i=this.af,a=0;a<n;a++){var u=e[a];(null===i||i(u))&&t(u)}return this},vn.prototype.map=function(t){var e=this.pb;e.Ja=null,this.Qa=-1;for(var n=[],i=(e=e.m).length,a=this.af,u=0;u<i;u++){var h=e[u];(null===a||a(h))&&n.push(t(h))}return(t=new et).m=n,t.kb(),t.iterator},vn.prototype.filter=function(t){var e=this.pb;e.Ja=null,this.Qa=-1;for(var n=[],i=(e=e.m).length,a=this.af,u=0;u<i;u++){var h=e[u];(null===a||a(h))&&t(h)&&n.push(h)}return(t=new et).m=n,t.kb(),t.iterator},vn.prototype.Qd=function(){this.key=-1,this.value=null,this.ja=-1,this.af=null,this.pb.Ja=this},vn.prototype.toString=function(){return"ListIterator@"+this.Qa+"/"+this.pb.count},Dt.Object.defineProperties(vn.prototype,{iterator:{get:function(){return this}},predicate:{get:function(){return this.af},set:function(t){this.af=t}},count:{get:function(){var t=this.af;if(null!==t){for(var e=0,n=this.pb.m,i=n.length,a=0;a<i;a++)t(n[a])&&e++;return e}return this.pb.m.length}}}),vn.prototype.first=vn.prototype.first,vn.prototype.hasNext=vn.prototype.od,vn.prototype.next=vn.prototype.next,vn.prototype.reset=vn.prototype.reset,vn.className="ListIterator",fi.prototype.reset=function(){var t=this.pb;t.Ng=null,this.ja=t.Ba,this.Qa=t.m.length},fi.prototype.next=function(){var t=this.pb;if(t.Ba!==this.ja&&0>this.key)return!1;var e=--this.Qa;return 0<=e?(this.key=e,this.value=t.m[e],!0):(this.Qd(),!1)},fi.prototype.od=function(){return this.next()},fi.prototype.first=function(){var t=this.pb;this.ja=t.Ba;var e=t.m;return this.Qa=t=e.length-1,0<=t?(e=e[t],this.key=t,this.value=e):null},fi.prototype.any=function(t){var e=this.pb;e.Ng=null;var n=(e=e.m).length;for(this.Qa=n,--n;0<=n;n--)if(t(e[n]))return!0;return!1},fi.prototype.all=function(t){var e=this.pb;e.Ng=null;var n=(e=e.m).length;for(this.Qa=n,--n;0<=n;n--)if(!t(e[n]))return!1;return!0},fi.prototype.each=function(t){var e=this.pb;e.Ng=null;var n=(e=e.m).length;for(this.Qa=n,--n;0<=n;n--)t(e[n]);return this},fi.prototype.map=function(t){var e=this.pb;e.Ng=null;var n=[],i=(e=e.m).length;for(this.Qa=i,--i;0<=i;i--)n.push(t(e[i]));return(t=new et).m=n,t.kb(),t.iterator},fi.prototype.filter=function(t){var e=this.pb;e.Ng=null;var n=[],i=(e=e.m).length;for(this.Qa=i,--i;0<=i;i--){var a=e[i];t(a)&&n.push(a)}return(t=new et).m=n,t.kb(),t.iterator},fi.prototype.Qd=function(){this.key=-1,this.value=null,this.ja=-1,this.pb.Ng=this},fi.prototype.toString=function(){return"ListIteratorBackwards("+this.Qa+"/"+this.pb.count+")"},Dt.Object.defineProperties(fi.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.pb.m.length}}}),fi.prototype.first=fi.prototype.first,fi.prototype.hasNext=fi.prototype.od,fi.prototype.next=fi.prototype.next,fi.prototype.reset=fi.prototype.reset,fi.className="ListIteratorBackwards",(D=et.prototype).kb=function(){var t=this.Ba;999999999<++t&&(t=0),this.Ba=t},D.freeze=function(){return this.v=!0,this},D.ea=function(){return this.v=!1,this},D.toString=function(){return"List()#"+Jt(this)},D.add=function(t){return null===t||(this.v&&bt(this,t),this.m.push(t),this.kb()),this},D.push=function(t){this.add(t)},D.addAll=function(t){if(null===t)return this;this.v&&bt(this);var e=this.m;if(_n(t))for(var n=t.length,i=0;i<n;i++)e.push(t[i]);else for(t=t.iterator;t.next();)e.push(t.value);return this.kb(),this},D.clear=function(){this.v&&bt(this),this.m.length=0,this.kb()},D.contains=function(t){return null!==t&&-1!==this.m.indexOf(t)},D.has=function(t){return this.contains(t)},D.indexOf=function(t){return null===t?-1:this.m.indexOf(t)},D.J=function(t){var e=this.m;return(0>t||t>=e.length)&&me(t,"0 <= i < length",et,"elt:i"),e[t]},D.get=function(t){return this.J(t)},D.Lc=function(t,e){var n=this.m;(0>t||t>=n.length)&&me(t,"0 <= i < length",et,"setElt:i"),this.v&&bt(this,t),n[t]=e},D.set=function(t,e){this.Lc(t,e)},D.first=function(){var t=this.m;return 0===t.length?null:t[0]},D.Xb=function(){var t=this.m,e=t.length;return 0<e?t[e-1]:null},D.pop=function(){this.v&&bt(this);var t=this.m;return 0<t.length?t.pop():null},et.prototype.any=function(t){for(var e=this.m,n=e.length,i=0;i<n;i++)if(t(e[i]))return!0;return!1},et.prototype.all=function(t){for(var e=this.m,n=e.length,i=0;i<n;i++)if(!t(e[i]))return!1;return!0},et.prototype.each=function(t){for(var e=this.m,n=e.length,i=0;i<n;i++)t(e[i]);return this},et.prototype.map=function(t){for(var e=new et,n=[],i=this.m,a=i.length,u=0;u<a;u++)n.push(t(i[u]));return e.m=n,e.kb(),e},et.prototype.filter=function(t){for(var e=new et,n=[],i=this.m,a=i.length,u=0;u<a;u++){var h=i[u];t(h)&&n.push(h)}return e.m=n,e.kb(),e},(D=et.prototype).ub=function(t,e){0>t&&me(t,">= 0",et,"insertAt:i"),this.v&&bt(this,t);var n=this.m;t>=n.length?n.push(e):n.splice(t,0,e),this.kb()},D.remove=function(t){if(null===t)return!1;this.v&&bt(this,t);var e=this.m;return-1!==(t=e.indexOf(t))&&(t===e.length-1?e.pop():e.splice(t,1),this.kb(),!0)},D.delete=function(t){return this.remove(t)},D.eb=function(t){var e=this.m;(0>t||t>=e.length)&&me(t,"0 <= i < length",et,"removeAt:i"),this.v&&bt(this,t),t===e.length-1?e.pop():e.splice(t,1),this.kb()},D.removeRange=function(t,e){var n=this.m,i=n.length;if(0>t)t=0;else if(t>=i)return this;if(0>e)return this;if(e>=i&&(e=i-1),t>e)return this;this.v&&bt(this);for(var a=t,u=e+1;u<i;)n[a++]=n[u++];return n.length=i-(e-t+1),this.kb(),this},et.prototype.copy=function(){var t=new et,e=this.m;return 0<e.length&&(t.m=Array.prototype.slice.call(e)),t},(D=et.prototype).xa=function(){for(var t=this.m,e=this.count,n=Array(e),i=0;i<e;i++)n[i]=t[i];return n},D.ew=function(){for(var t=new K,e=this.m,n=this.count,i=0;i<n;i++)t.add(e[i]);return t},D.sort=function(t){return this.v&&bt(this),this.m.sort(t),this.kb(),this},D.Wi=function(t,e,n){var i=this.m,a=i.length;void 0===e&&(e=0),void 0===n&&(n=a),this.v&&bt(this);var u=n-e;if(1>=u)return this;if((0>e||e>=a-1)&&me(e,"0 <= from < length",et,"sortRange:from"),2===u)return 0<t(n=i[e],a=i[e+1])&&(i[e]=a,i[e+1]=n,this.kb()),this;if(0===e)if(n>=a)i.sort(t);else for((e=i.slice(0,n)).sort(t),t=0;t<n;t++)i[t]=e[t];else if(n>=a)for((n=i.slice(e)).sort(t),t=e;t<a;t++)i[t]=n[t-e];else for((a=i.slice(e,n)).sort(t),t=e;t<n;t++)i[t]=a[t-e];return this.kb(),this},D.reverse=function(){return this.v&&bt(this),this.m.reverse(),this.kb(),this},Dt.Object.defineProperties(et.prototype,{_dataArray:{get:function(){return this.m}},count:{get:function(){return this.m.length}},size:{get:function(){return this.m.length}},length:{get:function(){return this.m.length}},iterator:{get:function(){if(0>=this.m.length)return Un;var t=this.Ja;return null!==t?(t.reset(),t):new vn(this)}},iteratorBackwards:{get:function(){if(0>=this.m.length)return Un;var t=this.Ng;return null!==t?(t.reset(),t):new fi(this)}}}),et.prototype.reverse=et.prototype.reverse,et.prototype.sortRange=et.prototype.Wi,et.prototype.sort=et.prototype.sort,et.prototype.toSet=et.prototype.ew,et.prototype.toArray=et.prototype.xa,et.prototype.removeRange=et.prototype.removeRange,et.prototype.removeAt=et.prototype.eb,et.prototype.delete=et.prototype.delete,et.prototype.remove=et.prototype.remove,et.prototype.insertAt=et.prototype.ub,et.prototype.pop=et.prototype.pop,et.prototype.last=et.prototype.Xb,et.prototype.first=et.prototype.first,et.prototype.set=et.prototype.set,et.prototype.setElt=et.prototype.Lc,et.prototype.get=et.prototype.get,et.prototype.elt=et.prototype.J,et.prototype.indexOf=et.prototype.indexOf,et.prototype.has=et.prototype.has,et.prototype.contains=et.prototype.contains,et.prototype.clear=et.prototype.clear,et.prototype.addAll=et.prototype.addAll,et.prototype.push=et.prototype.push,et.prototype.add=et.prototype.add,et.prototype.thaw=et.prototype.ea,et.prototype.freeze=et.prototype.freeze,et.className="List",ae.prototype.reset=function(){var t=this.ag;t.Ja=null,this.ja=t.Ba,this.la=null},ae.prototype.next=function(){var t=this.ag;if(t.Ba!==this.ja&&null===this.key)return!1;var e=this.la;return null!==(e=null===e?t.ba:e.oa)?(this.la=e,this.value=e.value,this.key=e.key,!0):(this.Qd(),!1)},ae.prototype.od=function(){return this.next()},ae.prototype.first=function(){var t=this.ag;if(this.ja=t.Ba,null!==(t=t.ba)){this.la=t;var e=t.value;return this.key=t.key,this.value=e}return null},ae.prototype.any=function(t){var e=this.ag;for(this.la=e.Ja=null,e=e.ba;null!==e;){if(t(e.value))return!0;e=e.oa}return!1},ae.prototype.all=function(t){var e=this.ag;for(this.la=e.Ja=null,e=e.ba;null!==e;){if(!t(e.value))return!1;e=e.oa}return!0},ae.prototype.each=function(t){var e=this.ag;for(this.la=e.Ja=null,e=e.ba;null!==e;)t(e.value),e=e.oa;return this},ae.prototype.map=function(t){var e=this.ag;e.Ja=null;var n=new et;for(e=e.ba;null!==e;)n.add(t(e.value)),e=e.oa;return n.iterator},ae.prototype.filter=function(t){var e=this.ag;e.Ja=null;var n=new et;for(e=e.ba;null!==e;){var i=e.value;t(i)&&n.add(i),e=e.oa}return n.iterator},ae.prototype.Qd=function(){this.value=this.key=null,this.ja=-1,this.ag.Ja=this},ae.prototype.toString=function(){return null!==this.la?"SetIterator@"+this.la.value:"SetIterator"},Dt.Object.defineProperties(ae.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ag.Hb}}}),ae.prototype.first=ae.prototype.first,ae.prototype.hasNext=ae.prototype.od,ae.prototype.next=ae.prototype.next,ae.prototype.reset=ae.prototype.reset,ae.className="SetIterator",(D=K.prototype).kb=function(){var t=this.Ba;999999999<++t&&(t=0),this.Ba=t},D.freeze=function(){return this.v=!0,this},D.ea=function(){return this.v=!1,this},D.toString=function(){return"Set()#"+Jt(this)},D.add=function(t){if(null===t)return this;this.v&&bt(this,t);var e=t;return Et(t)&&(e=Zo(t)),void 0===this.Ib[e]&&(this.Hb++,t=new Po(t,t),this.Ib[e]=t,null===(e=this.We)?this.ba=t:(t.Fl=e,e.oa=t),this.We=t,this.kb()),this},D.addAll=function(t){if(null===t)return this;if(this.v&&bt(this),_n(t))for(var e=t.length,n=0;n<e;n++)this.add(t[n]);else for(t=t.iterator;t.next();)this.add(t.value);return this},D.contains=function(t){if(null===t)return!1;var e=t;return(!Et(t)||void 0!==(e=Jt(t)))&&void 0!==this.Ib[e]},D.has=function(t){return this.contains(t)},D.wz=function(t){if(null===t)return!0;for(t=t.iterator;t.next();)if(!this.contains(t.value))return!1;return!0},D.xz=function(t){if(null===t)return!0;for(t=t.iterator;t.next();)if(this.contains(t.value))return!0;return!1},D.first=function(){var t=this.ba;return null===t?null:t.value},K.prototype.any=function(t){for(var e=this.ba;null!==e;){if(t(e.value))return!0;e=e.oa}return!1},K.prototype.all=function(t){for(var e=this.ba;null!==e;){if(!t(e.value))return!1;e=e.oa}return!0},K.prototype.each=function(t){for(var e=this.ba;null!==e;)t(e.value),e=e.oa;return this},K.prototype.map=function(t){for(var e=new K,n=this.ba;null!==n;)e.add(t(n.value)),n=n.oa;return e},K.prototype.filter=function(t){for(var e=new K,n=this.ba;null!==n;){var i=n.value;t(i)&&e.add(i),n=n.oa}return e},(D=K.prototype).remove=function(t){if(null===t)return!1;this.v&&bt(this,t);var e=t;if(Et(t)&&void 0===(e=Jt(t))||void 0===(t=this.Ib[e]))return!1;var n=t.oa,i=t.Fl;return null!==n&&(n.Fl=i),null!==i&&(i.oa=n),this.ba===t&&(this.ba=n),this.We===t&&(this.We=i),delete this.Ib[e],this.Hb--,this.kb(),!0},D.delete=function(t){return this.remove(t)},D.Bq=function(t){if(null===t)return this;if(this.v&&bt(this),_n(t))for(var e=t.length,n=0;n<e;n++)this.remove(t[n]);else for(t=t.iterator;t.next();)this.remove(t.value);return this},D.SA=function(t){if(null===t||0===this.count)return this;this.v&&bt(this);var e=new K;e.addAll(t),t=[];for(var n=this.iterator;n.next();){var i=n.value;e.contains(i)||t.push(i)}return this.Bq(t),this},D.clear=function(){this.v&&bt(this),this.Ib={},this.Hb=0,null!==this.Ja&&this.Ja.reset(),this.We=this.ba=null,this.kb()},K.prototype.copy=function(){var n,t=new K,e=this.Ib;for(n in e)t.add(e[n].value);return t},K.prototype.xa=function(){var i,t=Array(this.Hb),e=this.Ib,n=0;for(i in e)t[n]=e[i].value,n++;return t},K.prototype.dw=function(){var n,t=new et,e=this.Ib;for(n in e)t.add(e[n].value);return t},Dt.Object.defineProperties(K.prototype,{count:{get:function(){return this.Hb}},size:{get:function(){return this.Hb}},iterator:{get:function(){if(0>=this.Hb)return Un;var t=this.Ja;return null!==t?(t.reset(),t):new ae(this)}}}),K.prototype.toList=K.prototype.dw,K.prototype.toArray=K.prototype.xa,K.prototype.clear=K.prototype.clear,K.prototype.retainAll=K.prototype.SA,K.prototype.removeAll=K.prototype.Bq,K.prototype.delete=K.prototype.delete,K.prototype.remove=K.prototype.remove,K.prototype.first=K.prototype.first,K.prototype.containsAny=K.prototype.xz,K.prototype.containsAll=K.prototype.wz,K.prototype.has=K.prototype.has,K.prototype.contains=K.prototype.contains,K.prototype.addAll=K.prototype.addAll,K.prototype.add=K.prototype.add,K.prototype.thaw=K.prototype.ea,K.prototype.freeze=K.prototype.freeze;var ha,ny,iy,ry,Lr,Jo=1;function Hn(t){this.ha=t,this.ja=t.Ba,this.la=null}function ke(t){K.call(this),xn(this),this.v=!0,this.ha=t}function qn(t){this.ha=t,t.Ve=null,this.ja=t.Ba,this.la=null}function Po(t,e){this.key=t,this.value=e,this.Fl=this.oa=null}function Pn(t){this.ha=t,t.Ja=null,this.ja=t.Ba,this.la=null}function xt(t){xn(this),this.v=!1,this.Ib={},this.Hb=0,this.Ve=this.Ja=null,this.Ba=0,this.We=this.ba=null,"string"==typeof t&&z("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),void 0!==t&&this.addAll(t)}function N(t,e){void 0===t?this.y=this.x=0:"number"==typeof t&&"number"==typeof e?(this.x=t,this.y=e):z("Invalid arguments to Point constructor: "+t+", "+e),this.v=!1}function sx(t){if("string"==typeof t){t=t.split(" ");for(var e=0,n=0;""===t[e];)e++;var i=t[e++];i&&(n=parseFloat(i));for(var a=0;""===t[e];)e++;return(i=t[e++])&&(a=parseFloat(i)),new N(n,a)}return new N}function oy(t){return t.x.toString()+" "+t.y.toString()}function he(t,e){if(0===t)return 0<e?90:0>e?270:0;if(0===e)return 0<t?0:180;if(isNaN(t)||isNaN(e))return 0;var n=180*Math.atan(Math.abs(e/t))/Math.PI;return 0>t?n=0>e?n+180:180-n:0>e&&(n=360-n),n}function He(t,e){return e.Ed(t),t}function Re(t,e,n,i,a,u){var h=a-n,d=u-i,f=h*h+d*d,g=-(n-=t)*h-(i-=e)*d;return 0>=g||g>=f?(h=a-t,d=u-e,Math.min(n*n+i*i,h*h+d*d)):(t=h*i-d*n)*t/f}function ar(t,e,n,i){return(t=n-t)*t+(e=i-e)*e}function Xa(t,e,n,i){return e=i-e,0==(t=n-t)?0<e?90:0>e?270:0:0===e?0<t?0:180:isNaN(t)||isNaN(e)?0:(i=180*Math.atan(Math.abs(e/t))/Math.PI,0>t?i=0>e?i+180:180-i:0>e&&(i=360-i),i)}K.className="Set",K.uniqueHash=xn,K.hashIdUnique=Zo,K.hashId=Jt,Hn.prototype.reset=function(){this.ja=this.ha.Ba,this.la=null},Hn.prototype.next=function(){var t=this.ha;if(t.Ba!==this.ja&&null===this.key)return!1;var e=this.la;return null!==(e=null===e?t.ba:e.oa)?(this.la=e,this.value=this.key=t=e.key,!0):(this.Qd(),!1)},Hn.prototype.od=function(){return this.next()},Hn.prototype.first=function(){var t=this.ha;return this.ja=t.Ba,null!==(t=t.ba)?(this.la=t,this.value=this.key=t=t.key):null},Hn.prototype.any=function(t){var e=this.ha;for(this.la=null,e=e.ba;null!==e;){if(t(e.key))return!0;e=e.oa}return!1},Hn.prototype.all=function(t){var e=this.ha;for(this.la=null,e=e.ba;null!==e;){if(!t(e.key))return!1;e=e.oa}return!0},Hn.prototype.each=function(t){var e=this.ha;for(this.la=null,e=e.ba;null!==e;)t(e.key),e=e.oa;return this},Hn.prototype.map=function(t){var e=this.ha;this.la=null;var n=new et;for(e=e.ba;null!==e;)n.add(t(e.key)),e=e.oa;return n.iterator},Hn.prototype.filter=function(t){var e=this.ha;this.la=null;var n=new et;for(e=e.ba;null!==e;){var i=e.key;t(i)&&n.add(i),e=e.oa}return n.iterator},Hn.prototype.Qd=function(){this.value=this.key=null,this.ja=-1},Hn.prototype.toString=function(){return null!==this.la?"MapKeySetIterator@"+this.la.value:"MapKeySetIterator"},Dt.Object.defineProperties(Hn.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ha.Hb}}}),Hn.prototype.first=Hn.prototype.first,Hn.prototype.hasNext=Hn.prototype.od,Hn.prototype.next=Hn.prototype.next,Hn.prototype.reset=Hn.prototype.reset,Hn.className="MapKeySetIterator",Ft(ke,K),(D=ke.prototype).freeze=function(){return this},D.ea=function(){return this},D.toString=function(){return"MapKeySet("+this.ha.toString()+")"},D.add=function(){z("This Set is read-only: "+this.toString())},D.contains=function(t){return this.ha.contains(t)},D.has=function(t){return this.contains(t)},D.remove=function(){z("This Set is read-only: "+this.toString())},D.delete=function(t){return this.remove(t)},D.clear=function(){z("This Set is read-only: "+this.toString())},D.first=function(){var t=this.ha.ba;return null!==t?t.key:null},ke.prototype.any=function(t){for(var e=this.ha.ba;null!==e;){if(t(e.key))return!0;e=e.oa}return!1},ke.prototype.all=function(t){for(var e=this.ha.ba;null!==e;){if(!t(e.key))return!1;e=e.oa}return!0},ke.prototype.each=function(t){for(var e=this.ha.ba;null!==e;)t(e.key),e=e.oa;return this},ke.prototype.map=function(t){for(var e=new K,n=this.ha.ba;null!==n;)e.add(t(n.key)),n=n.oa;return e},ke.prototype.filter=function(t){for(var e=new K,n=this.ha.ba;null!==n;){var i=n.key;t(i)&&e.add(i),n=n.oa}return e},ke.prototype.copy=function(){return new ke(this.ha)},ke.prototype.ew=function(){var n,t=new K,e=this.ha.Ib;for(n in e)t.add(e[n].key);return t},ke.prototype.xa=function(){var i,t=this.ha.Ib,e=Array(this.ha.Hb),n=0;for(i in t)e[n]=t[i].key,n++;return e},ke.prototype.dw=function(){var n,t=new et,e=this.ha.Ib;for(n in e)t.add(e[n].key);return t},Dt.Object.defineProperties(ke.prototype,{count:{get:function(){return this.ha.Hb}},size:{get:function(){return this.ha.Hb}},iterator:{get:function(){return 0>=this.ha.Hb?Un:new Hn(this.ha)}}}),ke.prototype.toList=ke.prototype.dw,ke.prototype.toArray=ke.prototype.xa,ke.prototype.toSet=ke.prototype.ew,ke.prototype.first=ke.prototype.first,ke.prototype.clear=ke.prototype.clear,ke.prototype.delete=ke.prototype.delete,ke.prototype.remove=ke.prototype.remove,ke.prototype.has=ke.prototype.has,ke.prototype.contains=ke.prototype.contains,ke.prototype.add=ke.prototype.add,ke.prototype.thaw=ke.prototype.ea,ke.prototype.freeze=ke.prototype.freeze,ke.className="MapKeySet",qn.prototype.reset=function(){var t=this.ha;t.Ve=null,this.ja=t.Ba,this.la=null},qn.prototype.next=function(){var t=this.ha;if(t.Ba!==this.ja&&null===this.key)return!1;var e=this.la;return null!==(e=null===e?t.ba:e.oa)?(this.la=e,this.value=e.value,this.key=e.key,!0):(this.Qd(),!1)},qn.prototype.od=function(){return this.next()},qn.prototype.first=function(){var t=this.ha;if(this.ja=t.Ba,null!==(t=t.ba)){this.la=t;var e=t.value;return this.key=t.key,this.value=e}return null},qn.prototype.any=function(t){var e=this.ha;for(this.la=e.Ve=null,e=e.ba;null!==e;){if(t(e.value))return!0;e=e.oa}return!1},qn.prototype.all=function(t){var e=this.ha;for(this.la=e.Ve=null,e=e.ba;null!==e;){if(!t(e.value))return!1;e=e.oa}return!0},qn.prototype.each=function(t){var e=this.ha;for(this.la=e.Ve=null,e=e.ba;null!==e;)t(e.value),e=e.oa;return this},qn.prototype.map=function(t){var e=this.ha;this.la=e.Ve=null;var n=new et;for(e=e.ba;null!==e;)n.add(t(e.value)),e=e.oa;return n.iterator},qn.prototype.filter=function(t){var e=this.ha;this.la=e.Ve=null;var n=new et;for(e=e.ba;null!==e;){var i=e.value;t(i)&&n.add(i),e=e.oa}return n.iterator},qn.prototype.Qd=function(){this.value=this.key=null,this.ja=-1,this.ha.Ve=this},qn.prototype.toString=function(){return null!==this.la?"MapValueSetIterator@"+this.la.value:"MapValueSetIterator"},Dt.Object.defineProperties(qn.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ha.Hb}}}),qn.prototype.first=qn.prototype.first,qn.prototype.hasNext=qn.prototype.od,qn.prototype.next=qn.prototype.next,qn.prototype.reset=qn.prototype.reset,qn.className="MapValueSetIterator",Po.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"},Po.className="KeyValuePair",Pn.prototype.reset=function(){var t=this.ha;t.Ja=null,this.ja=t.Ba,this.la=null},Pn.prototype.next=function(){var t=this.ha;if(t.Ba!==this.ja&&null===this.key)return!1;var e=this.la;return null!==(e=null===e?t.ba:e.oa)?(this.la=e,this.key=e.key,this.value=e.value,!0):(this.Qd(),!1)},Pn.prototype.od=function(){return this.next()},Pn.prototype.first=function(){var t=this.ha;return this.ja=t.Ba,null!==(t=t.ba)?(this.la=t,this.key=t.key,this.value=t.value,t):null},Pn.prototype.any=function(t){var e=this.ha;for(this.la=e.Ja=null,e=e.ba;null!==e;){if(t(e))return!0;e=e.oa}return!1},Pn.prototype.all=function(t){var e=this.ha;for(this.la=e.Ja=null,e=e.ba;null!==e;){if(!t(e))return!1;e=e.oa}return!0},Pn.prototype.each=function(t){var e=this.ha;for(this.la=e.Ja=null,e=e.ba;null!==e;)t(e),e=e.oa;return this},Pn.prototype.map=function(t){var e=this.ha;this.la=e.Ja=null;var n=new et;for(e=e.ba;null!==e;)n.add(t(e)),e=e.oa;return n.iterator},Pn.prototype.filter=function(t){var e=this.ha;this.la=e.Ja=null;var n=new et;for(e=e.ba;null!==e;)t(e)&&n.add(e),e=e.oa;return n.iterator},Pn.prototype.Qd=function(){this.value=this.key=null,this.ja=-1,this.ha.Ja=this},Pn.prototype.toString=function(){return null!==this.la?"MapIterator@"+this.la:"MapIterator"},Dt.Object.defineProperties(Pn.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ha.Hb}}}),Pn.prototype.first=Pn.prototype.first,Pn.prototype.hasNext=Pn.prototype.od,Pn.prototype.next=Pn.prototype.next,Pn.prototype.reset=Pn.prototype.reset,Pn.className="MapIterator",(D=xt.prototype).kb=function(){var t=this.Ba;999999999<++t&&(t=0),this.Ba=t},D.freeze=function(){return this.v=!0,this},D.ea=function(){return this.v=!1,this},D.toString=function(){return"Map()#"+Jt(this)},D.add=function(t,e){this.v&&bt(this,t);var n=t;Et(t)&&(n=Zo(t));var i=this.Ib[n];return void 0===i?(this.Hb++,t=new Po(t,e),this.Ib[n]=t,null===(n=this.We)?this.ba=t:(t.Fl=n,n.oa=t),this.We=t,this.kb()):i.value=e,this},D.set=function(t,e){return this.add(t,e)},D.addAll=function(t){if(null===t)return this;if(_n(t))for(var e=t.length,n=0;n<e;n++){var i=t[n];this.add(i.key,i.value)}else if(t instanceof xt)for(t=t.iterator;t.next();)this.add(t.key,t.value);else for(t=t.iterator;t.next();)this.add((e=t.value).key,e.value);return this},D.first=function(){return this.ba},xt.prototype.any=function(t){for(var e=this.ba;null!==e;){if(t(e))return!0;e=e.oa}return!1},xt.prototype.all=function(t){for(var e=this.ba;null!==e;){if(!t(e))return!1;e=e.oa}return!0},xt.prototype.each=function(t){for(var e=this.ba;null!==e;)t(e),e=e.oa;return this},xt.prototype.map=function(t){for(var e=new xt,n=this.ba;null!==n;)e.add(n.key,t(n)),n=n.oa;return e},xt.prototype.filter=function(t){for(var e=new xt,n=this.ba;null!==n;)t(n)&&e.add(n.key,n.value),n=n.oa;return e},(D=xt.prototype).contains=function(t){var e=t;return(!Et(t)||void 0!==(e=Jt(t)))&&void 0!==this.Ib[e]},D.has=function(t){return this.contains(t)},D.H=function(t){var e=t;return Et(t)&&void 0===(e=Jt(t))||void 0===(t=this.Ib[e])?null:t.value},D.get=function(t){return this.H(t)},D.remove=function(t){if(null===t)return!1;this.v&&bt(this,t);var e=t;if(Et(t)&&void 0===(e=Jt(t))||void 0===(t=this.Ib[e]))return!1;var n=t.oa,i=t.Fl;return null!==n&&(n.Fl=i),null!==i&&(i.oa=n),this.ba===t&&(this.ba=n),this.We===t&&(this.We=i),delete this.Ib[e],this.Hb--,this.kb(),!0},D.delete=function(t){return this.remove(t)},D.clear=function(){this.v&&bt(this),this.Ib={},this.Hb=0,null!==this.Ja&&this.Ja.reset(),null!==this.Ve&&this.Ve.reset(),this.We=this.ba=null,this.kb()},xt.prototype.copy=function(){var n,t=new xt,e=this.Ib;for(n in e){var i=e[n];t.add(i.key,i.value)}return t},xt.prototype.xa=function(){var i,t=this.Ib,e=Array(this.Hb),n=0;for(i in t){var a=t[i];e[n]=new Po(a.key,a.value),n++}return e},xt.prototype.Ef=function(){return new ke(this)},Dt.Object.defineProperties(xt.prototype,{count:{get:function(){return this.Hb}},size:{get:function(){return this.Hb}},iterator:{get:function(){if(0>=this.count)return Un;var t=this.Ja;return null!==t?(t.reset(),t):new Pn(this)}},iteratorKeys:{get:function(){return 0>=this.count?Un:new Hn(this)}},iteratorValues:{get:function(){if(0>=this.count)return Un;var t=this.Ve;return null!==t?(t.reset(),t):new qn(this)}}}),xt.prototype.toKeySet=xt.prototype.Ef,xt.prototype.toArray=xt.prototype.xa,xt.prototype.clear=xt.prototype.clear,xt.prototype.delete=xt.prototype.delete,xt.prototype.remove=xt.prototype.remove,xt.prototype.get=xt.prototype.get,xt.prototype.getValue=xt.prototype.H,xt.prototype.has=xt.prototype.has,xt.prototype.contains=xt.prototype.contains,xt.prototype.first=xt.prototype.first,xt.prototype.addAll=xt.prototype.addAll,xt.prototype.set=xt.prototype.set,xt.prototype.add=xt.prototype.add,xt.prototype.thaw=xt.prototype.ea,xt.prototype.freeze=xt.prototype.freeze,xt.className="Map",N.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this},N.prototype.h=function(t,e){return this.x=t,this.y=e,this},N.prototype.ng=function(t,e){return this.x=t,this.y=e,this},N.prototype.set=function(t){return this.x=t.x,this.y=t.y,this},N.prototype.copy=function(){var t=new N;return t.x=this.x,t.y=this.y,t},(D=N.prototype).ca=function(){return this.v=!0,Object.freeze(this),this},D.I=function(){return this.v||Object.isFrozen(this)?this:this.copy().freeze()},D.freeze=function(){return this.v=!0,this},D.ea=function(){return Object.isFrozen(this)&&z("cannot thaw constant: "+this),this.v=!1,this},D.toString=function(){return"Point("+this.x+","+this.y+")"},D.A=function(t){return t instanceof N&&this.x===t.x&&this.y===t.y},D.Gi=function(t,e){return this.x===t&&this.y===e},D.Ta=function(t){return R.w(this.x,t.x)&&R.w(this.y,t.y)},D.add=function(t){return this.x+=t.x,this.y+=t.y,this},D.ge=function(t){return this.x-=t.x,this.y-=t.y,this},D.offset=function(t,e){return this.x+=t,this.y+=e,this},N.prototype.rotate=function(t){if(0===t)return this;var e=this.x,n=this.y;if(0===e&&0===n)return this;if(360<=t?t-=360:0>t&&(t+=360),90===t){t=0;var i=1}else 180===t?(t=-1,i=0):270===t?(t=0,i=-1):(i=t*Math.PI/180,t=Math.cos(i),i=Math.sin(i));return this.x=t*e-i*n,this.y=i*e+t*n,this},(D=N.prototype).scale=function(t,e){return this.x*=t,this.y*=e,this},D.tf=function(t){var e=t.x-this.x;return e*e+(t=t.y-this.y)*t},D.nd=function(t,e){return(t-=this.x)*t+(e-=this.y)*e},D.normalize=function(){var t=this.x,e=this.y,n=Math.sqrt(t*t+e*e);return 0<n&&(this.x=t/n,this.y=e/n),this},D.Oa=function(t){return he(t.x-this.x,t.y-this.y)},D.direction=function(t,e){return he(t-this.x,e-this.y)},D.vz=function(t,e){return R.em(t.x,t.y,e.x,e.y,this.x,this.y)},D.IA=function(t,e,n,i){return R.Eh(t,e,n,i,this.x,this.y,this),this},D.JA=function(t,e){return R.Eh(t.x,t.y,e.x,e.y,this.x,this.y,this),this},D.XA=function(t,e,n,i){return R.jq(this.x,this.y,t,e,n,i,this),this},D.YA=function(t,e){return R.jq(this.x,this.y,t.x,t.y,e.width,e.height,this),this},D.Ui=function(t,e){return this.x=t.x+e.x*t.width+e.offsetX,this.y=t.y+e.y*t.height+e.offsetY,this},D.Vi=function(t,e,n,i,a){return this.x=t+a.x*n+a.offsetX,this.y=e+a.y*i+a.offsetY,this},D.transform=function(t){return t.ya(this),this},D.u=function(){return isFinite(this.x)&&isFinite(this.y)},N.alloc=function(){var t=fo.pop();return void 0===t?new N:t},N.allocAt=function(t,e){var n=fo.pop();return void 0===n?new N(t,e):(n.x=t,n.y=e,n)},N.free=function(t){fo.push(t)},N.prototype.isReal=N.prototype.u,N.prototype.setSpot=N.prototype.Vi,N.prototype.setRectSpot=N.prototype.Ui,N.prototype.snapToGridPoint=N.prototype.YA,N.prototype.snapToGrid=N.prototype.XA,N.prototype.projectOntoLineSegmentPoint=N.prototype.JA,N.prototype.projectOntoLineSegment=N.prototype.IA,N.intersectingLineSegments=function(t,e,n,i,a,u,h,d){return R.lm(t,e,n,i,a,u,h,d)},N.prototype.compareWithLineSegmentPoint=N.prototype.vz,N.compareWithLineSegment=function(t,e,n,i,a,u){return R.em(t,e,n,i,a,u)},N.prototype.direction=N.prototype.direction,N.prototype.directionPoint=N.prototype.Oa,N.prototype.normalize=N.prototype.normalize,N.prototype.distanceSquared=N.prototype.nd,N.prototype.distanceSquaredPoint=N.prototype.tf,N.prototype.scale=N.prototype.scale,N.prototype.rotate=N.prototype.rotate,N.prototype.offset=N.prototype.offset,N.prototype.subtract=N.prototype.ge,N.prototype.add=N.prototype.add,N.prototype.equalsApprox=N.prototype.Ta,N.prototype.equalTo=N.prototype.Gi,N.prototype.equals=N.prototype.A,N.prototype.set=N.prototype.set,N.prototype.setTo=N.prototype.ng;var Nl,Pl,Wh,Ao,Mr,ax,po,fo=[];function mt(t,e){void 0===t?this.height=this.width=0:"number"==typeof t&&(0<=t||isNaN(t))&&"number"==typeof e&&(0<=e||isNaN(e))?(this.width=t,this.height=e):z("Invalid arguments to Size constructor: "+t+", "+e),this.v=!1}function Ot(t){if("string"==typeof t){t=t.split(" ");for(var e=0,n=0;""===t[e];)e++;var i=t[e++];i&&(n=parseFloat(i));for(var a=0;""===t[e];)e++;return(i=t[e++])&&(a=parseFloat(i)),new mt(n,a)}return new mt}function Ae(t){return t.width.toString()+" "+t.height.toString()}N.className="Point",N.parse=sx,N.stringify=oy,N.distanceLineSegmentSquared=Re,N.distanceSquared=ar,N.direction=Xa,N.Origin=ha=new N(0,0).ca(),N.InfiniteTopLeft=ny=new N(-1/0,-1/0).ca(),N.InfiniteBottomRight=iy=new N(1/0,1/0).ca(),N.SixPoint=ry=new N(6,6).ca(),N.NoPoint=Lr=new N(NaN,NaN).ca(),N.parse=sx,N.stringify=oy,N.distanceLineSegmentSquared=Re,N.distanceSquared=ar,N.direction=Xa,mt.prototype.assign=function(t){return this.width=t.width,this.height=t.height,this},mt.prototype.h=function(t,e){return this.width=t,this.height=e,this},mt.prototype.ng=function(t,e){return this.width=t,this.height=e,this},mt.prototype.set=function(t){return this.width=t.width,this.height=t.height,this},mt.prototype.copy=function(){var t=new mt;return t.width=this.width,t.height=this.height,t},(D=mt.prototype).ca=function(){return this.v=!0,Object.freeze(this),this},D.I=function(){return this.v||Object.isFrozen(this)?this:this.copy().freeze()},D.freeze=function(){return this.v=!0,this},D.ea=function(){return Object.isFrozen(this)&&z("cannot thaw constant: "+this),this.v=!1,this},D.toString=function(){return"Size("+this.width+","+this.height+")"},D.A=function(t){return t instanceof mt&&this.width===t.width&&this.height===t.height},D.Gi=function(t,e){return this.width===t&&this.height===e},D.Ta=function(t){return R.w(this.width,t.width)&&R.w(this.height,t.height)},D.u=function(){return isFinite(this.width)&&isFinite(this.height)},mt.alloc=function(){var t=Gn.pop();return void 0===t?new mt:t},mt.free=function(t){Gn.push(t)},mt.prototype.isReal=mt.prototype.u,mt.prototype.equalsApprox=mt.prototype.Ta,mt.prototype.equalTo=mt.prototype.Gi,mt.prototype.equals=mt.prototype.A,mt.prototype.set=mt.prototype.set,mt.prototype.setTo=mt.prototype.ng;var Gn=[];function B(t,e,n,i){void 0===t?this.height=this.width=this.y=this.x=0:"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&(0<=n||isNaN(n))&&"number"==typeof i&&(0<=i||isNaN(i))?(this.x=t,this.y=e,this.width=n,this.height=i):t instanceof N?(n=t.x,t=t.y,e instanceof N?(i=e.x,e=e.y,this.x=Math.min(n,i),this.y=Math.min(t,e),this.width=Math.abs(n-i),this.height=Math.abs(t-e)):e instanceof mt?(this.x=n,this.y=t,this.width=e.width,this.height=e.height):z("Incorrect second argument supplied to Rect constructor "+e)):z("Invalid arguments to Rect constructor: "+t+", "+e+", "+n+", "+i),this.v=!1}function _r(t,e,n){t.width=e,t.height=n}function $i(t){if("string"==typeof t){t=t.split(" ");for(var e=0,n=0;""===t[e];)e++;var i=t[e++];i&&(n=parseFloat(i));for(var a=0;""===t[e];)e++;(i=t[e++])&&(a=parseFloat(i));for(var u=0;""===t[e];)e++;(i=t[e++])&&(u=parseFloat(i));for(var h=0;""===t[e];)e++;return(i=t[e++])&&(h=parseFloat(i)),new B(n,a,u,h)}return new B}function Al(t){return t.x.toString()+" "+t.y.toString()+" "+t.width.toString()+" "+t.height.toString()}function ti(t,e){return R.aa(t.x,e.x)&&R.aa(t.y,e.y)&&R.aa(t.width,e.width)&&R.aa(t.height,e.height)}function Il(t,e,n,i,a){var u=t.width;return n+a<=-u?(t.x+=u/2,t.width=0):(t.x-=a,t.width+=n+a),e+i<=-(n=t.height)?(t.y+=n/2,t.height=0):(t.y-=e,t.height+=e+i),t}function Au(t,e,n,i,a){var u=Math.max(t.x,e),h=Math.max(t.y,n);return e=Math.min(t.x+t.width,e+i),n=Math.min(t.y+t.height,n+a),t.x=u,t.y=h,t.width=Math.max(0,e-u),t.height=Math.max(0,n-h),t}function Se(t,e){var n=t.width,i=t.x,a=e.x-10;return!(i>e.width+10+10+a||a>n+i||(n=t.height,(t=t.y)>e.height+10+10+(i=e.y-10)||i>n+t))}function hn(t,e,n,i,a){var u=Math.min(t.x,e),h=Math.min(t.y,n);return e=Math.max(t.x+t.width,e+i),n=Math.max(t.y+t.height,n+a),t.x=u,t.y=h,t.width=e-u,t.height=n-h,t}function Wi(t,e,n,i,a,u,h,d){return void 0===h&&(h=0),void 0===d&&(d=0),t<=a&&a+h<=t+n&&e<=u&&u+d<=e+i}function Ep(t,e,n,i,a,u,h,d){return!(t>h+a||a>n+t||e>d+u||u>i+e)}mt.className="Size",mt.parse=Ot,mt.stringify=Ae,mt.ZeroSize=Nl=new mt(0,0).ca(),mt.OneSize=Pl=new mt(1,1).ca(),mt.SixSize=Wh=new mt(6,6).ca(),mt.EightSize=Ao=new mt(8,8).ca(),mt.TenSize=Mr=new mt(10,10).ca(),mt.InfiniteSize=ax=new mt(1/0,1/0).ca(),mt.NoSize=po=new mt(NaN,NaN).ca(),mt.parse=Ot,mt.stringify=Ae,(D=B.prototype).assign=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},D.h=function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this},D.ng=function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this},D.set=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},D.Mc=function(t){return this.x=t.x,this.y=t.y,this},D.WA=function(t){return this.width=t.width,this.height=t.height,this},B.prototype.copy=function(){var t=new B;return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},(D=B.prototype).ca=function(){return this.v=!0,Object.freeze(this),this},D.I=function(){return this.v||Object.isFrozen(this)?this:this.copy().freeze()},D.freeze=function(){return this.v=!0,this},D.ea=function(){return Object.isFrozen(this)&&z("cannot thaw constant: "+this),this.v=!1,this},D.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"},D.A=function(t){return t instanceof B&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},D.Gi=function(t,e,n,i){return this.x===t&&this.y===e&&this.width===n&&this.height===i},D.Ta=function(t){return R.w(this.x,t.x)&&R.w(this.y,t.y)&&R.w(this.width,t.width)&&R.w(this.height,t.height)},D.$=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y},D.De=function(t){return this.x<=t.x&&t.x+t.width<=this.x+this.width&&this.y<=t.y&&t.y+t.height<=this.y+this.height},D.contains=function(t,e,n,i){return void 0===n&&(n=0),void 0===i&&(i=0),this.x<=t&&t+n<=this.x+this.width&&this.y<=e&&e+i<=this.y+this.height},D.offset=function(t,e){return this.x+=t,this.y+=e,this},D.Gc=function(t,e){return Il(this,e,t,e,t)},D.Xp=function(t){return Il(this,t.top,t.right,t.bottom,t.left)},D.cw=function(t){return Il(this,-t.top,-t.right,-t.bottom,-t.left)},D.lA=function(t,e,n,i){return Il(this,t,e,n,i)},D.hy=function(t){return Au(this,t.x,t.y,t.width,t.height)},D.zv=function(t,e,n,i){return Au(this,t,e,n,i)},D.Ic=function(t){return this.Av(t.x,t.y,t.width,t.height)},D.Av=function(t,e,n,i){var a=this.width,u=this.x;return!(a!==1/0&&n!==1/0&&(a+=u,n+=t,isNaN(n)||isNaN(a)||u>n||t>a)||(n=this.y,(t=this.height)!==1/0&&i!==1/0&&(t+=n,i+=e,isNaN(i)||isNaN(t)||n>i||e>t)))},D.Le=function(t){return hn(this,t.x,t.y,0,0)},D.Nc=function(t){return hn(this,t.x,t.y,t.width,t.height)},D.gw=function(t,e,n,i){return void 0===n&&(n=0),void 0===i&&(i=0),hn(this,t,e,n,i)},D.Vi=function(t,e,n){return this.x=t-n.offsetX-n.x*this.width,this.y=e-n.offsetY-n.y*this.height,this},D.u=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},D.rA=function(){return 0===this.width&&0===this.height},B.alloc=function(){var t=Iu.pop();return void 0===t?new B:t},B.allocAt=function(t,e,n,i){var a=Iu.pop();return void 0===a?new B(t,e,n,i):a.h(t,e,n,i)},B.free=function(t){Iu.push(t)},Dt.Object.defineProperties(B.prototype,{left:{get:function(){return this.x},set:function(t){this.x=t}},top:{get:function(){return this.y},set:function(t){this.y=t}},right:{get:function(){return this.x+this.width},set:function(t){this.x+=t-(this.x+this.width)}},bottom:{get:function(){return this.y+this.height},set:function(t){this.y+=t-(this.y+this.height)}},position:{get:function(){return new N(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y}},size:{get:function(){return new mt(this.width,this.height)},set:function(t){this.width=t.width,this.height=t.height}},center:{get:function(){return new N(this.x+this.width/2,this.y+this.height/2)},set:function(t){this.x=t.x-this.width/2,this.y=t.y-this.height/2}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}}),B.prototype.isEmpty=B.prototype.rA,B.prototype.isReal=B.prototype.u,B.intersectsLineSegment=function(t,e,n,i,a,u,h,d){return R.iy(t,e,n,i,a,u,h,d)},B.prototype.setSpot=B.prototype.Vi,B.prototype.union=B.prototype.gw,B.prototype.unionRect=B.prototype.Nc,B.prototype.unionPoint=B.prototype.Le,B.prototype.intersects=B.prototype.Av,B.prototype.intersectsRect=B.prototype.Ic,B.prototype.intersect=B.prototype.zv,B.prototype.intersectRect=B.prototype.hy,B.prototype.grow=B.prototype.lA,B.prototype.subtractMargin=B.prototype.cw,B.prototype.addMargin=B.prototype.Xp,B.prototype.inflate=B.prototype.Gc,B.prototype.offset=B.prototype.offset,B.prototype.contains=B.prototype.contains,B.prototype.containsRect=B.prototype.De,B.prototype.containsPoint=B.prototype.$,B.prototype.equalsApprox=B.prototype.Ta,B.prototype.equalTo=B.prototype.Gi,B.prototype.equals=B.prototype.A,B.prototype.setSize=B.prototype.WA,B.prototype.setPoint=B.prototype.Mc,B.prototype.set=B.prototype.set,B.prototype.setTo=B.prototype.ng;var $a,Jr,Iu=[];function Lt(t,e,n,i){void 0===t?this.left=this.bottom=this.right=this.top=0:void 0===e?this.left=this.bottom=this.right=this.top=t:void 0===n?(this.top=t,this.right=e,this.bottom=t,this.left=e):void 0!==i?(this.top=t,this.right=e,this.bottom=n,this.left=i):z("Invalid arguments to Margin constructor: "+t+", "+e+", "+n+", "+i),this.v=!1}function Qo(t){if("string"==typeof t){t=t.split(" ");for(var e=0,n=NaN;""===t[e];)e++;var i=t[e++];if(i&&(n=parseFloat(i)),isNaN(n))return new Lt;for(var a=NaN;""===t[e];)e++;if((i=t[e++])&&(a=parseFloat(i)),isNaN(a))return new Lt(n);for(var u=NaN;""===t[e];)e++;if((i=t[e++])&&(u=parseFloat(i)),isNaN(u))return new Lt(n,a);for(var h=NaN;""===t[e];)e++;return(i=t[e++])&&(h=parseFloat(i)),isNaN(h)?new Lt(n,a):new Lt(n,a,u,h)}return new Lt}function Dn(t){return t.top.toString()+" "+t.right.toString()+" "+t.bottom.toString()+" "+t.left.toString()}B.className="Rect",B.parse=$i,B.stringify=Al,B.contains=Wi,B.intersects=Ep,B.ZeroRect=$a=new B(0,0,0,0).ca(),B.NoRect=Jr=new B(NaN,NaN,NaN,NaN).ca(),B.parse=$i,B.stringify=Al,B.contains=Wi,B.intersects=Ep,Lt.prototype.assign=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},Lt.prototype.ng=function(t,e,n,i){return this.top=t,this.right=e,this.bottom=n,this.left=i,this},Lt.prototype.set=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},Lt.prototype.copy=function(){var t=new Lt;return t.top=this.top,t.right=this.right,t.bottom=this.bottom,t.left=this.left,t},(D=Lt.prototype).ca=function(){return this.v=!0,Object.freeze(this),this},D.I=function(){return this.v||Object.isFrozen(this)?this:this.copy().freeze()},D.freeze=function(){return this.v=!0,this},D.ea=function(){return Object.isFrozen(this)&&z("cannot thaw constant: "+this),this.v=!1,this},D.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"},D.A=function(t){return t instanceof Lt&&this.top===t.top&&this.right===t.right&&this.bottom===t.bottom&&this.left===t.left},D.Gi=function(t,e,n,i){return this.top===t&&this.right===e&&this.bottom===n&&this.left===i},D.Ta=function(t){return R.w(this.top,t.top)&&R.w(this.right,t.right)&&R.w(this.bottom,t.bottom)&&R.w(this.left,t.left)},D.u=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)},Lt.alloc=function(){var t=Ts.pop();return void 0===t?new Lt:t},Lt.free=function(t){Ts.push(t)},Lt.prototype.isReal=Lt.prototype.u,Lt.prototype.equalsApprox=Lt.prototype.Ta,Lt.prototype.equalTo=Lt.prototype.Gi,Lt.prototype.equals=Lt.prototype.A,Lt.prototype.set=Lt.prototype.set,Lt.prototype.setTo=Lt.prototype.ng;var Kh,lx,An,zn,go,Rr,Td,Wt,kd,Zh,Jh,ks,Nd,Pd,Ad,Id,ux,hx,cx,dx,fx,px,gx,mx,Tp,bd,yx,Fi,LM,bl,sy,ca,Cr,jr,Ki,Dr,kp,ay,Ts=[];function ct(t,e,n,i){void 0===t?this.offsetY=this.offsetX=this.y=this.x=0:(void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=t,this.y=e,this.offsetX=n,this.offsetY=i),this.v=!1}function Zi(t,e){return t.x=NaN,t.y=NaN,t.offsetX=e,t}function ly(t){if("string"==typeof t){if("None"===(t=t.trim()))return An;if("TopLeft"===t)return zn;if("Top"===t||"TopCenter"===t||"MiddleTop"===t)return go;if("TopRight"===t)return Rr;if("Left"===t||"LeftCenter"===t||"MiddleLeft"===t)return Td;if("Center"===t)return Wt;if("Right"===t||"RightCenter"===t||"MiddleRight"===t)return kd;if("BottomLeft"===t)return Zh;if("Bottom"===t||"BottomCenter"===t||"MiddleBottom"===t)return Jh;if("BottomRight"===t)return ks;if("TopSide"===t)return Nd;if("LeftSide"===t)return Pd;if("RightSide"===t)return Ad;if("BottomSide"===t)return Id;if("TopBottomSides"===t)return ux;if("LeftRightSides"===t)return hx;if("TopLeftSides"===t)return cx;if("TopRightSides"===t)return dx;if("BottomLeftSides"===t)return fx;if("BottomRightSides"===t)return px;if("NotTopSide"===t)return gx;if("NotLeftSide"===t)return mx;if("NotRightSide"===t)return Tp;if("NotBottomSide"===t)return bd;if("AllSides"===t)return yx;if("Default"===t)return Fi;t=t.split(" ");for(var e=0,n=0;""===t[e];)e++;var i=t[e++];void 0!==i&&0<i.length&&(n=parseFloat(i));for(var a=0;""===t[e];)e++;void 0!==(i=t[e++])&&0<i.length&&(a=parseFloat(i));for(var u=0;""===t[e];)e++;void 0!==(i=t[e++])&&0<i.length&&(u=parseFloat(i));for(var h=0;""===t[e];)e++;return void 0!==(i=t[e++])&&0<i.length&&(h=parseFloat(i)),new ct(n,a,u,h)}return new ct}function Io(t){return t.hb()?t.x.toString()+" "+t.y.toString()+" "+t.offsetX.toString()+" "+t.offsetY.toString():t.toString()}Lt.className="Margin",Lt.parse=Qo,Lt.stringify=Dn,Lt.ZeroMargin=Kh=new Lt(0,0,0,0).ca(),Lt.TwoMargin=lx=new Lt(2,2,2,2).ca(),Lt.parse=Qo,Lt.stringify=Dn,ct.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},ct.prototype.ng=function(t,e,n,i){return this.x=t,this.y=e,this.offsetX=n,this.offsetY=i,this},ct.prototype.set=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},ct.prototype.copy=function(){var t=new ct;return t.x=this.x,t.y=this.y,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t},(D=ct.prototype).ca=function(){return this.v=!0,Object.freeze(this),this},D.I=function(){return this.v||Object.isFrozen(this)?this:this.copy().freeze()},D.freeze=function(){return this.v=!0,this},D.ea=function(){return Object.isFrozen(this)&&z("cannot thaw constant: "+this),this.v=!1,this},D.toString=function(){return this.hb()?0===this.offsetX&&0===this.offsetY?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.A(An)?"None":this.A(zn)?"TopLeft":this.A(go)?"Top":this.A(Rr)?"TopRight":this.A(Td)?"Left":this.A(Wt)?"Center":this.A(kd)?"Right":this.A(Zh)?"BottomLeft":this.A(Jh)?"Bottom":this.A(ks)?"BottomRight":this.A(Nd)?"TopSide":this.A(Pd)?"LeftSide":this.A(Ad)?"RightSide":this.A(Id)?"BottomSide":this.A(ux)?"TopBottomSides":this.A(hx)?"LeftRightSides":this.A(cx)?"TopLeftSides":this.A(dx)?"TopRightSides":this.A(fx)?"BottomLeftSides":this.A(px)?"BottomRightSides":this.A(gx)?"NotTopSide":this.A(mx)?"NotLeftSide":this.A(Tp)?"NotRightSide":this.A(bd)?"NotBottomSide":this.A(yx)?"AllSides":this.A(Fi)?"Default":"None"},D.A=function(t){return t instanceof ct&&(this.x===t.x||isNaN(this.x)&&isNaN(t.x))&&(this.y===t.y||isNaN(this.y)&&isNaN(t.y))&&this.offsetX===t.offsetX&&this.offsetY===t.offsetY},D.Jv=function(){return new ct(.5-(this.x-.5),.5-(this.y-.5),-this.offsetX,-this.offsetY)},D.zf=function(t){if(!this.Kc())return!1;if(!t.Kc())if(t.A(LM))t=Pd;else if(t.A(bl))t=Ad;else if(t.A(sy))t=Nd;else{if(!t.A(ca))return!1;t=Id}return(this.offsetY&(t=t.offsetY))===t},D.hb=function(){return!isNaN(this.x)&&!isNaN(this.y)},D.wc=function(){return isNaN(this.x)||isNaN(this.y)},D.Kc=function(){return isNaN(this.x)&&isNaN(this.y)&&1===this.offsetX&&0!==this.offsetY},D.Qs=function(){return isNaN(this.x)&&isNaN(this.y)&&0===this.offsetX&&0===this.offsetY},D.Lb=function(){return isNaN(this.x)&&isNaN(this.y)&&-1===this.offsetX&&0===this.offsetY},ct.alloc=function(){var t=Np.pop();return void 0===t?new ct:t},ct.free=function(t){Np.push(t)},ct.prototype.isDefault=ct.prototype.Lb,ct.prototype.isNone=ct.prototype.Qs,ct.prototype.isSide=ct.prototype.Kc,ct.prototype.isNoSpot=ct.prototype.wc,ct.prototype.isSpot=ct.prototype.hb,ct.prototype.includesSide=ct.prototype.zf,ct.prototype.opposite=ct.prototype.Jv,ct.prototype.equals=ct.prototype.A,ct.prototype.set=ct.prototype.set,ct.prototype.setTo=ct.prototype.ng;var Np=[];function St(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0}ct.className="Spot",ct.parse=ly,ct.stringify=Io,ct.None=An=Zi(new ct(0,0,0,0),0).ca(),ct.Default=Fi=Zi(new ct(0,0,-1,0),-1).ca(),ct.TopLeft=zn=new ct(0,0,0,0).ca(),ct.TopCenter=go=new ct(.5,0,0,0).ca(),ct.TopRight=Rr=new ct(1,0,0,0).ca(),ct.LeftCenter=Td=new ct(0,.5,0,0).ca(),ct.Center=Wt=new ct(.5,.5,0,0).ca(),ct.RightCenter=kd=new ct(1,.5,0,0).ca(),ct.BottomLeft=Zh=new ct(0,1,0,0).ca(),ct.BottomCenter=Jh=new ct(.5,1,0,0).ca(),ct.BottomRight=ks=new ct(1,1,0,0).ca(),ct.MiddleTop=Cr=go,ct.MiddleLeft=jr=Td,ct.MiddleRight=Ki=kd,ct.MiddleBottom=Dr=Jh,ct.Top=sy=go,ct.Left=LM=Td,ct.Right=bl=kd,ct.Bottom=ca=Jh,ct.TopSide=Nd=Zi(new ct(0,0,1,1),1).ca(),ct.LeftSide=Pd=Zi(new ct(0,0,1,2),1).ca(),ct.RightSide=Ad=Zi(new ct(0,0,1,4),1).ca(),ct.BottomSide=Id=Zi(new ct(0,0,1,8),1).ca(),ct.TopBottomSides=ux=Zi(new ct(0,0,1,9),1).ca(),ct.LeftRightSides=hx=Zi(new ct(0,0,1,6),1).ca(),ct.TopLeftSides=cx=Zi(new ct(0,0,1,3),1).ca(),ct.TopRightSides=dx=Zi(new ct(0,0,1,5),1).ca(),ct.BottomLeftSides=fx=Zi(new ct(0,0,1,10),1).ca(),ct.BottomRightSides=px=Zi(new ct(0,0,1,12),1).ca(),ct.NotTopSide=gx=Zi(new ct(0,0,1,14),1).ca(),ct.NotLeftSide=mx=Zi(new ct(0,0,1,13),1).ca(),ct.NotRightSide=Tp=Zi(new ct(0,0,1,11),1).ca(),ct.NotBottomSide=bd=Zi(new ct(0,0,1,7),1).ca(),ct.AllSides=yx=Zi(new ct(0,0,1,15),1).ca(),kp=new ct(.156,.156).ca(),ay=new ct(.844,.844).ca(),ct.parse=ly,ct.stringify=Io,St.prototype.set=function(t){return this.m11=t.m11,this.m12=t.m12,this.m21=t.m21,this.m22=t.m22,this.dx=t.dx,this.dy=t.dy,this},St.prototype.setTransform=function(t,e,n,i,a,u){return this.m11=t,this.m12=e,this.m21=n,this.m22=i,this.dx=a,this.dy=u,this},St.prototype.copy=function(){var t=new St;return t.m11=this.m11,t.m12=this.m12,t.m21=this.m21,t.m22=this.m22,t.dx=this.dx,t.dy=this.dy,t},St.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"},St.prototype.A=function(t){return this.m11===t.m11&&this.m12===t.m12&&this.m21===t.m21&&this.m22===t.m22&&this.dx===t.dx&&this.dy===t.dy},St.prototype.Os=function(){return 0===this.dx&&0===this.dy&&1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22},St.prototype.reset=function(){return this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0,this},St.prototype.multiply=function(t){var e=this.m11*t.m11+this.m21*t.m12,n=this.m12*t.m11+this.m22*t.m12,i=this.m11*t.m21+this.m21*t.m22,a=this.m12*t.m21+this.m22*t.m22;return this.dx=this.m11*t.dx+this.m21*t.dy+this.dx,this.dy=this.m12*t.dx+this.m22*t.dy+this.dy,this.m11=e,this.m12=n,this.m21=i,this.m22=a,this},St.prototype.Hv=function(t){var e=1/(t.m11*t.m22-t.m12*t.m21),n=t.m22*e,i=-t.m12*e,a=-t.m21*e,u=t.m11*e,h=e*(t.m21*t.dy-t.m22*t.dx);return t=e*(t.m12*t.dx-t.m11*t.dy),e=this.m11*n+this.m21*i,n=this.m12*n+this.m22*i,i=this.m11*a+this.m21*u,a=this.m12*a+this.m22*u,this.dx=this.m11*h+this.m21*t+this.dx,this.dy=this.m12*h+this.m22*t+this.dy,this.m11=e,this.m12=n,this.m21=i,this.m22=a,this},St.prototype.Ns=function(){var t=1/(this.m11*this.m22-this.m12*this.m21),e=-this.m12*t,n=-this.m21*t,i=this.m11*t,a=t*(this.m21*this.dy-this.m22*this.dx),u=t*(this.m12*this.dx-this.m11*this.dy);return this.m11=this.m22*t,this.m12=e,this.m21=n,this.m22=i,this.dx=a,this.dy=u,this},St.prototype.rotate=function(t,e,n){if(360<=t?t-=360:0>t&&(t+=360),0===t)return this;if(this.translate(e,n),90===t){t=0;var i=1}else 180===t?(t=-1,i=0):270===t?(t=0,i=-1):(i=t*Math.PI/180,t=Math.cos(i),i=Math.sin(i));var a=this.m12*t+this.m22*i,u=this.m11*-i+this.m21*t,h=this.m12*-i+this.m22*t;return this.m11=this.m11*t+this.m21*i,this.m12=a,this.m21=u,this.m22=h,this.translate(-e,-n),this},(D=St.prototype).translate=function(t,e){return this.dx+=this.m11*t+this.m21*e,this.dy+=this.m12*t+this.m22*e,this},D.scale=function(t,e){return void 0===e&&(e=t),this.m11*=t,this.m12*=t,this.m21*=e,this.m22*=e,this},D.ya=function(t){var e=t.x,n=t.y;return t.h(e*this.m11+n*this.m21+this.dx,e*this.m12+n*this.m22+this.dy)},D.Ed=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),n=t.x,i=t.y;return t.h(n*this.m22*e+i*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),n*-this.m12*e+i*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},D.Fx=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),n=1.25*t.x,i=1.2*t.y;return t.h(n*this.m22*e+i*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),n*-this.m12*e+i*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},D.Jq=function(t){var e=t.x,n=t.y,i=e+t.width,a=n+t.height,u=this.m11,h=this.m12,d=this.m21,f=this.m22,g=this.dx,m=this.dy,y=e*u+n*d+g,x=e*h+n*f+m,_=i*u+n*d+g,M=i*h+n*f+m;return n=e*u+a*d+g,e=e*h+a*f+m,u=i*u+a*d+g,i=i*h+a*f+m,a=Math.min(y,_),y=Math.max(y,_),_=Math.min(x,M),x=Math.max(x,M),a=Math.min(a,n),y=Math.max(y,n),_=Math.min(_,e),x=Math.max(x,e),a=Math.min(a,u),y=Math.max(y,u),_=Math.min(_,i),x=Math.max(x,i),t.h(a,_,y-a,x-_),t},St.alloc=function(){var t=Pp.pop();return void 0===t?new St:t},St.free=function(t){Pp.push(t)},St.prototype.transformRect=St.prototype.Jq,St.prototype.transformPoint=St.prototype.ya,St.prototype.scale=St.prototype.scale,St.prototype.translate=St.prototype.translate,St.prototype.rotate=St.prototype.rotate,St.prototype.invert=St.prototype.Ns,St.prototype.multiplyInverted=St.prototype.Hv,St.prototype.multiply=St.prototype.multiply,St.prototype.reset=St.prototype.reset,St.prototype.isIdentity=St.prototype.Os,St.prototype.equals=St.prototype.A,St.prototype.setTransform=St.prototype.setTransform,St.prototype.set=St.prototype.set;var Pp=[];St.className="Transform",St.xF="54a702f3e53909c447824c6706603faf4c";var R={fB:"7da71ca0ad381e90",qg:(Math.sqrt(2)-1)/3*4,uw:null,sqrt:function(t){if(0>=t)return 0;var e=R.uw;if(null===e){e=[];for(var n=0;2e3>=n;n++)e[n]=Math.sqrt(n);R.uw=e}return 1>t?2e3>=(n=1/t)?1/e[0|n]:Math.sqrt(t):2e3>=t?e[0|t]:Math.sqrt(t)},w:function(t,e){return.5>(t-=e)&&-.5<t},aa:function(t,e){return 5e-8>(t-=e)&&-5e-8<t},Mb:function(t,e,n,i,a,u,h){if(0>=a&&(a=1e-6),t<n)var d=t,f=n;else d=n,f=t;if(e<i)var g=e,m=i;else g=i,m=e;if(t===n)return g<=h&&h<=m&&t-a<=u&&u<=t+a;if(e===i)return d<=u&&u<=f&&e-a<=h&&h<=e+a;if(f+=a,(d-=a)<=u&&u<=f&&(m+=a,(g-=a)<=h&&h<=m))if(f-d>m-g){if(!(t-n>a||n-t>a))return!0;if((u=(i-e)/(n-t)*(u-t)+e)-a<=h&&h<=u+a)return!0}else{if(!(e-i>a||i-e>a))return!0;if((h=(n-t)/(i-e)*(h-e)+t)-a<=u&&u<=h+a)return!0}return!1},vs:function(t,e,n,i,a,u,h,d,f,g,m,y){if(R.Mb(t,e,h,d,y,n,i)&&R.Mb(t,e,h,d,y,a,u))return R.Mb(t,e,h,d,y,g,m);var x=(t+n)/2,_=(e+i)/2,M=(n+a)/2,S=(i+u)/2,T=((i=(x+M)/2)+(M=(M+(a=(a+h)/2))/2))/2,k=((n=(_+S)/2)+(S=(S+(u=(u+d)/2))/2))/2;return R.vs(t,e,x,_,i,n,T,k,f,g,m,y)||R.vs(T,k,M,S,a,u,h,d,f,g,m,y)},pz:function(t,e,n,i,a,u,h,d,f){var g=(n+a)/2,m=(i+u)/2;return f.h((((t+n)/2+g)/2+(g+(a+h)/2)/2)/2,(((e+i)/2+m)/2+(m+(u+d)/2)/2)/2),f},oz:function(t,e,n,i,a,u,h,d){var f=(n+a)/2,g=(i+u)/2;return Xa(((t+n)/2+f)/2,((e+i)/2+g)/2,(f+(a+h)/2)/2,(g+(u+d)/2)/2)},cm:function(t,e,n,i,a,u,h,d,f,g){if(R.Mb(t,e,h,d,f,n,i)&&R.Mb(t,e,h,d,f,a,u))hn(g,t,e,0,0),hn(g,h,d,0,0);else{var m=(t+n)/2,y=(e+i)/2,x=(n+a)/2,_=(i+u)/2,M=((i=(m+x)/2)+(x=(x+(a=(a+h)/2))/2))/2,S=((n=(y+_)/2)+(_=(_+(u=(u+d)/2))/2))/2;R.cm(t,e,m,y,i,n,M,S,f,g),R.cm(M,S,x,_,a,u,h,d,f,g)}return g},Ce:function(t,e,n,i,a,u,h,d,f,g){if(R.Mb(t,e,h,d,f,n,i)&&R.Mb(t,e,h,d,f,a,u))0===g.length&&(g.push(t),g.push(e)),g.push(h),g.push(d);else{var m=(t+n)/2,y=(e+i)/2,x=(n+a)/2,_=(i+u)/2,M=((i=(m+x)/2)+(x=(x+(a=(a+h)/2))/2))/2,S=((n=(y+_)/2)+(_=(_+(u=(u+d)/2))/2))/2;R.Ce(t,e,m,y,i,n,M,S,f,g),R.Ce(M,S,x,_,a,u,h,d,f,g)}return g},Mv:function(t,e,n,i,a,u,h,d,f,g){if(R.Mb(t,e,a,u,g,n,i))return R.Mb(t,e,a,u,g,d,f);var m=(t+n)/2,y=(e+i)/2,x=(m+(n=(n+a)/2))/2,_=(y+(i=(i+u)/2))/2;return R.Mv(t,e,m,y,x,_,h,d,f,g)||R.Mv(x,_,n,i,a,u,h,d,f,g)},uB:function(t,e,n,i,a,u,h){return h.h(((t+n)/2+(n+a)/2)/2,((e+i)/2+(i+u)/2)/2),h},Lv:function(t,e,n,i,a,u,h,d){if(R.Mb(t,e,a,u,h,n,i))hn(d,t,e,0,0),hn(d,a,u,0,0);else{var f=(t+n)/2,g=(e+i)/2,m=(f+(n=(n+a)/2))/2,y=(g+(i=(i+u)/2))/2;R.Lv(t,e,f,g,m,y,h,d),R.Lv(m,y,n,i,a,u,h,d)}return d},xq:function(t,e,n,i,a,u,h,d){if(R.Mb(t,e,a,u,h,n,i))0===d.length&&(d.push(t),d.push(e)),d.push(a),d.push(u);else{var f=(t+n)/2,g=(e+i)/2,m=(f+(n=(n+a)/2))/2,y=(g+(i=(i+u)/2))/2;R.xq(t,e,f,g,m,y,h,d),R.xq(m,y,n,i,a,u,h,d)}return d},Zp:function(t,e,n,i,a,u,h,d,f,g,m,y,x,_){if(R.Mb(t,e,h,d,x,n,i)&&R.Mb(t,e,h,d,x,a,u))return!(!R.lm(t,e,h,d,f,g,m,y)||(x=(t-h)*(g-y)-(e-d)*(f-m),0===x)||(_.h(((t*d-e*h)*(f-m)-(t-h)*(f*y-g*m))/x,((t*d-e*h)*(g-y)-(e-d)*(f*y-g*m))/x),0));var M=(t+n)/2,S=(e+i)/2,T=(n+a)/2,k=(i+u)/2,b=((i=(M+T)/2)+(T=(T+(a=(a+h)/2))/2))/2,I=((n=(S+k)/2)+(k=(k+(u=(u+d)/2))/2))/2,O=1/0,F=!1,H=0,W=0;return R.Zp(t,e,M,S,i,n,b,I,f,g,m,y,x,_)&&(t=(_.x-f)*(_.x-f)+(_.y-g)*(_.y-g))<O&&(O=t,F=!0,H=_.x,W=_.y),R.Zp(b,I,T,k,a,u,h,d,f,g,m,y,x,_)&&(_.x-f)*(_.x-f)+(_.y-g)*(_.y-g)<O&&(F=!0,H=_.x,W=_.y),F&&(_.x=H,_.y=W),F},$p:function(t,e,n,i,a,u,h,d,f,g,m,y,x){var _=0;if(R.Mb(t,e,h,d,x,n,i)&&R.Mb(t,e,h,d,x,a,u)){if(0==(x=(t-h)*(g-y)-(e-d)*(f-m)))return _;var M=((t*d-e*h)*(f-m)-(t-h)*(f*y-g*m))/x,S=((t*d-e*h)*(g-y)-(e-d)*(f*y-g*m))/x;if(M>=m)return _;if((f>m?f-m:m-f)<(g>y?g-y:y-g)){if(e<d?(f=e,t=d):(f=d,t=e),S<f||S>t)return _}else if(t<h?(f=t,t=h):f=h,M<f||M>t)return _;0<x?_++:0>x&&_--}else{S=(e+i)/2;var T=(n+a)/2,k=(i+u)/2,b=((i=((M=(t+n)/2)+T)/2)+(T=(T+(a=(a+h)/2))/2))/2,I=((n=(S+k)/2)+(k=(k+(u=(u+d)/2))/2))/2;_+=R.$p(t,e,M,S,i,n,b,I,f,g,m,y,x),_+=R.$p(b,I,T,k,a,u,h,d,f,g,m,y,x)}return _},Eh:function(t,e,n,i,a,u,h){return R.aa(t,n)?(e<i?(n=e,e=i):n=i,u<n?(h.h(t,n),!1):u>e?(h.h(t,e),!1):(h.h(t,u),!0)):R.aa(e,i)?(t<n?(i=t,t=n):i=n,a<i?(h.h(i,e),!1):a>t?(h.h(t,e),!1):(h.h(a,e),!0)):-5e-6>(a=((t-a)*(t-n)+(e-u)*(e-i))/((n-t)*(n-t)+(i-e)*(i-e)))?(h.h(t,e),!1):1.000005<a?(h.h(n,i),!1):(h.h(t+a*(n-t),e+a*(i-e)),!0)},Ie:function(t,e,n,i,a,u,h,d,f){return R.w(t,n)&&R.w(e,i)?(f.h(t,e),!1):R.aa(a,h)?R.aa(t,n)?(R.Eh(t,e,n,i,a,u,f),!1):R.Eh(t,e,n,i,a,(i-e)/(n-t)*(a-t)+e,f):(d=(d-u)/(h-a),R.aa(t,n)?(n=d*(t-a)+u,e<i?(a=e,e=i):a=i,n<a?(f.h(t,a),!1):n>e?(f.h(t,e),!1):(f.h(t,n),!0)):R.aa(d,h=(i-e)/(n-t))?(R.Eh(t,e,n,i,a,u,f),!1):(a=(h*t-d*a+u-e)/(h-d),R.aa(h,0)?(t<n?(i=t,t=n):i=n,a<i?(f.h(i,e),!1):a>t?(f.h(t,e),!1):(f.h(a,e),!0)):R.Eh(t,e,n,i,a,h*(a-t)+e,f)))},sB:function(t,e,n,i,a){return R.Ie(n.x,n.y,i.x,i.y,t.x,t.y,e.x,e.y,a)},qB:function(t,e,n,i,a,u,h,d,f,g){function m(T,k){var b=(T-t)*(T-t)+(k-e)*(k-e);b<y&&(y=b,f.h(T,k))}var y=1/0;m(f.x,f.y);var x=0,_=0,M=0,S=0;if(a<h?(x=a,_=h):(x=h,_=a),u<d?(M=a,S=h):(M=h,S=a),x=(_-x)/2+g,g=(S-M)/2+g,a=(a+h)/2,u=(u+d)/2,0===x||0===g)return f;if(.5>(n>t?n-t:t-n)){if(0>(x=1-(n-a)*(n-a)/(x*x)))return f;i=-g*(x=Math.sqrt(x))+u,m(n,g*x+u),m(n,i)}else{if(0>(x=(d=2*(n=(i-e)/(n-t))*(e-n*t)/(g*g)-2*n*u/(g*g)-2*a/(x*x))*d-4*(i=1/(x*x)+n*n/(g*g))*(2*n*t*u/(g*g)-2*e*u/(g*g)+u*u/(g*g)+a*a/(x*x)-1+(e-n*t)*(e-n*t)/(g*g))))return f;m(g=(-d+(x=Math.sqrt(x)))/(2*i),n*g-n*t+e),m(x=(-d-x)/(2*i),n*x-n*t+e)}return f},yf:function(t,e,n,i,a,u,h,d,f){var g=1e21,m=t,y=e;if(R.Ie(t,e,t,i,a,u,h,d,f)){var x=(f.x-a)*(f.x-a)+(f.y-u)*(f.y-u);x<g&&(g=x,m=f.x,y=f.y)}return R.Ie(n,e,n,i,a,u,h,d,f)&&(x=(f.x-a)*(f.x-a)+(f.y-u)*(f.y-u))<g&&(g=x,m=f.x,y=f.y),R.Ie(t,e,n,e,a,u,h,d,f)&&(e=(f.x-a)*(f.x-a)+(f.y-u)*(f.y-u))<g&&(g=e,m=f.x,y=f.y),R.Ie(t,i,n,i,a,u,h,d,f)&&(t=(f.x-a)*(f.x-a)+(f.y-u)*(f.y-u))<g&&(g=t,m=f.x,y=f.y),f.h(m,y),1e21>g},pB:function(t,e,n,i,a,u,h,d,f){return h=a-h,a=0==(n=t-n)||0===h?0===n?(e=(u-d)/h)*(d=t)+(u-e*a):(u=(e-i)/n)*(d=a)+(e-u*t):(i=(e-i)/n)*(d=(u-(d=(u-d)/h)*a-(t=e-i*t))/(i-d))+t,f.h(d,a),f},Ls:function(t,e,n){return R.iy(t.x,t.y,t.width,t.height,e.x,e.y,n.x,n.y)},iy:function(t,e,n,i,a,u,h,d){var f=t+n,g=e+i;return a===h?(u<d?(h=u,u=d):h=d,t<=a&&a<=f&&h<=g&&u>=e):u===d?(a<h?(d=a,a=h):d=h,e<=u&&u<=g&&d<=f&&a>=t):!!(Wi(t,e,n,i,a,u)||Wi(t,e,n,i,h,d)||R.lm(t,e,f,e,a,u,h,d)||R.lm(f,e,f,g,a,u,h,d)||R.lm(f,g,t,g,a,u,h,d)||R.lm(t,g,t,e,a,u,h,d))},lm:function(t,e,n,i,a,u,h,d){return 0>=R.em(t,e,n,i,a,u)*R.em(t,e,n,i,h,d)&&0>=R.em(a,u,h,d,t,e)*R.em(a,u,h,d,n,i)},em:function(t,e,n,i,a,u){return n-=t,0==(u=(t=a-t)*(i-=e)-(e=u-e)*n)&&0<(u=t*n+e*i)&&0>(u=(t-n)*n+(e-i)*i)&&(u=0),u},vq:function(t){return 0>t&&(t+=360),360<=t&&(t-=360),t},Lx:function(t,e,n,i,a,u){var h=Math.PI;u||(i*=h/180,a*=h/180);var d=i>a?-1:1;u=[];var f=h/2,g=i;if(1e-5>(i=Math.min(2*h,Math.abs(a-i))))return f=g+d*Math.min(i,f),d=t+n*Math.cos(g),g=e+n*Math.sin(g),t+=n*Math.cos(f),e+=n*Math.sin(f),u.push([d,g,n=(d+t)/2,f=(g+e)/2,n,f,t,e]),u;for(;1e-5<i;)a=g+d*Math.min(i,f),u.push(R.zz(n,g,a,t,e)),i-=Math.abs(a-g),g=a;return u},zz:function(t,e,n,i,a){var u=(n-e)/2,h=t*Math.cos(u),d=t*Math.sin(u),f=-d,g=h*h+f*f,m=g+h*h+f*d;return d=h-(g=4/3*(Math.sqrt(2*g*m)-m)/(h*d-f*h))*f,f=-(h=f+g*h),g=u+e,u=Math.cos(g),g=Math.sin(g),[i+t*Math.cos(e),a+t*Math.sin(e),i+d*u-h*g,a+d*g+h*u,i+d*u-f*g,a+d*g+f*u,i+t*Math.cos(n),a+t*Math.sin(n)]},jq:function(t,e,n,i,a,u,h){var d=n=Math.floor((t-n)/a)*a+n;return n+a-t<a/2&&(d=n+a),t=i=Math.floor((e-i)/u)*u+i,i+u-e<u/2&&(t=i+u),h.h(d,t),h},Wx:function(t,e){var i,n=Math.max(t,e);t=Math.min(t,e);do{e=n%t,n=i=t,t=e}while(0<e);return i},Ez:function(t,e,n,i){var a=0>n,u=0>i;if(t<e)var h=1,d=0;else h=0,d=1;var f=0===h?t:e,g=0===h?n:i;return(0===h?a:u)&&(g=-g),n=0===(h=d)?n:i,(0===h?a:u)&&(n=-n),R.Fz(f,0===h?t:e,g,n,0,0)},Fz:function(t,e,n,i,a,u){if(0<i)if(0<n){a=t*t,t*=n;var h=e*i,d=-(u=e*e)+h,f=-u+Math.sqrt(t*t+h*h);e=d;for(var g=0;9999999999>g&&(e=.5*(d+f))!==d&&e!==f;++g){var m=t/(e+a),y=h/(e+u);if(0<(m=m*m+y*y-1))d=e;else{if(!(0>m))break;f=e}}n=a*n/(e+a)-n,i=u*i/(e+u)-i,n=Math.sqrt(n*n+i*i)}else n=Math.abs(i-e);else(u=t*n)<(i=t*t-e*e)?(i=u/i,u=e*Math.sqrt(Math.abs(1-i*i)),n=t*i-n,n=Math.sqrt(n*n+u*u)):n=Math.abs(n-t);return n},Ne:new Nn,Qm:new Nn,Ff:new Nn,Gf:0,Rm:100};function q(t){xn(this),this.v=!1,void 0===t&&(t=q.o),this.ia=t,this.oc=this.fc=this.$c=this.Zc=0,this.rj=new et,this.nr=this.rj.Ba,this.Zq=(new B).freeze(),this.qa=!0,this.Zm=this.Hk=null,this.$m=NaN,this.hf=zn,this.jf=ks,this.jl=this.kl=NaN,this.Kf=Ve}function Ap(t,e){return t.type===q.j&&e.type===q.o&&!!(1===e.figures.count&&(e=e.figures.J(0),1===e.segments.count&&R.w(t.startX,e.startX)&&R.w(t.startY,e.startY)&&(e=e.segments.J(0),e.type===Ge&&R.w(t.endX,e.endX)&&R.w(t.endY,e.endY))))}function vx(t,e,n){switch(t.type){case q.j:case q.C:case q.M:n?e.h(t.Zc,t.$c,0,0):hn(e,t.Zc,t.$c,0,0),hn(e,t.fc,t.oc,0,0);break;case q.o:var i=t.figures;t=i.m,i=i.length;for(var a=0;a<i;a++){var u=t[a];n&&0===a?e.h(u.startX,u.startY,0,0):hn(e,u.startX,u.startY,0,0);for(var h=u.segments.m,d=h.length,f=u.startX,g=u.startY,m=0;m<d;m++){var y=h[m];switch(y.type){case Ge:case In:hn(e,f=y.endX,g=y.endY,0,0);break;case Ji:R.cm(f,g,y.point1X,y.point1Y,y.point2X,y.point2Y,y.endX,y.endY,.5,e),f=y.endX,g=y.endY;break;case lr:R.Lv(f,g,y.point1X,y.point1Y,y.endX,y.endY,.5,e),f=y.endX,g=y.endY;break;case we:case Qr:var x=y.type===we?da(y,u):Ns(y,u,f,g),_=x.length;if(0===_){hn(e,f=y.type===we?y.centerX:y.endX,g=y.type===we?y.centerY:y.endY,0,0);break}y=null;for(var M=0;M<_;M++)R.cm((y=x[M])[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7],.5,e);null!==y&&(f=y[6],g=y[7]);break;default:z("Unknown Segment type: "+y.type)}}}break;default:z("Unknown Geometry type: "+t.type)}}function Od(t,e,n,i,a){var u=e.x;e=e.y;for(var f,g,m,y,h=t.bounds.x-20,d=0,x=t.figures.m,_=x.length,M=0;M<_;M++){var S=x[M];if(S.isFilled){if(i&&S.$(u,e,n))return!0;for(var T=S.segments,k=f=S.startX,b=g=S.startY,I=T.m,O=0;O<=T.length;O++){var F=void 0;if(O!==T.length){var H=(F=I[O]).type;t=F.endX,y=F.endY}else H=Ge,t=k,y=b;switch(H){case In:if(k=uy(u,e,h,e,f,g,k,b),isNaN(k))return!0;d+=k,k=t,b=y;break;case Ge:if(f=uy(u,e,h,e,f,g,t,y),isNaN(f))return!0;d+=f;break;case Ji:d+=m=R.$p(f,g,F.point1X,F.point1Y,F.point2X,F.point2Y,t,y,h,e,u,e,.5);break;case lr:d+=m=R.$p(f,g,(f+2*F.point1X)/3,(g+2*F.point1Y)/3,(2*F.point1X+t)/3,(2*F.point1Y+y)/3,t,y,h,e,u,e,.5);break;case we:case Qr:var W=(H=F.type===we?da(F,S):Ns(F,S,f,g)).length;if(0===W){if(f=uy(u,e,h,e,f,g,F.type===we?F.centerX:F.endX,F.type===we?F.centerY:F.endY),isNaN(f))return!0;d+=f;break}F=null;for(var it=0;it<W;it++){if(F=H[it],0===it){if(m=uy(u,e,h,e,f,g,F[0],F[1]),isNaN(m))return!0;d+=m}d+=m=R.$p(F[0],F[1],F[2],F[3],F[4],F[5],F[6],F[7],h,e,u,e,.5)}null!==F&&(t=F[6],y=F[7]);break;default:z("Unknown Segment type: "+F.type)}f=t,g=y}if(0!==d)return!0;d=0}else if(S.$(u,e,a?n:n+2))return!0}return 0!==d}function uy(t,e,n,i,a,u,h,d){if(R.Mb(a,u,h,d,.05,t,e))return NaN;var f=(t-n)*(u-d);if(0===f)return 0;var g=((t*i-e*n)*(a-h)-(t-n)*(a*d-u*h))/f;if(e=(t*i-e*n)*(u-d)/f,g>=t)return 0;if((a>h?a-h:h-a)<(u>d?u-d:d-u)){if(u<d){if(e<u||e>d)return 0}else if(e<d||e>u)return 0}else if(a<h){if(g<a||g>h)return 0}else if(g<h||g>a)return 0;return 0<f?1:-1}function ei(t,e,n,i){for(var a=(t=t.figures.m).length,u=0;u<a;u++)if(t[u].$(e,n,i))return!0;return!1}function hy(t){if(null===t.Hk){var e=t.Hk=[],n=t.Zm=[],i=[],a=[];if(t.type===q.j)i.push(t.startX),i.push(t.startY),i.push(t.endX),i.push(t.endY),e.push(i),a.push(Math.sqrt((t.startX-t.endX)*(t.startX-t.endX)+(t.startY-t.endY)*(t.startY-t.endY))),n.push(a);else if(t.type===q.C)i.push(t.startX),i.push(t.startY),i.push(t.endX),i.push(t.startY),i.push(t.endX),i.push(t.endY),i.push(t.startX),i.push(t.endY),i.push(t.startX),i.push(t.startY),e.push(i),a.push(Math.abs(t.startX-t.endX)),a.push(Math.abs(t.startY-t.endY)),a.push(Math.abs(t.startX-t.endX)),a.push(Math.abs(t.startY-t.endY)),n.push(a);else if(t.type===q.M){var u=new De;u.startX=t.endX,u.startY=(t.startY+t.endY)/2;var h=new Yt(we);if(h.startAngle=0,h.sweepAngle=360,h.centerX=(t.startX+t.endX)/2,h.centerY=(t.startY+t.endY)/2,h.radiusX=Math.abs(t.startX-t.endX)/2,h.radiusY=Math.abs(t.startY-t.endY)/2,u.add(h),0===(a=(t=da(h,u)).length))i.push(h.centerX),i.push(h.centerY);else{h=u.startX,u=u.startY;for(var d=0;d<a;d++){var f=t[d];R.Ce(h,u,f[2],f[3],f[4],f[5],f[6],f[7],.5,i),h=f[6],u=f[7]}}e.push(i),n.push(cy(i))}else for(t=t.figures.iterator;t.next();){(i=[]).push((a=t.value).startX),i.push(a.startY),d=h=a.startX,f=u=a.startY;for(var g=a.segments.m,m=g.length,y=0;y<m;y++){var x=g[y];switch(x.type){case In:4<=i.length&&(e.push(i),n.push(cy(i))),(i=[]).push(x.endX),i.push(x.endY),d=h=x.endX,f=u=x.endY;break;case Ge:i.push(x.endX),i.push(x.endY),h=x.endX,u=x.endY;break;case Ji:R.Ce(h,u,x.point1X,x.point1Y,x.point2X,x.point2Y,x.endX,x.endY,.5,i),h=x.endX,u=x.endY;break;case lr:R.xq(h,u,x.point1X,x.point1Y,x.endX,x.endY,.5,i),h=x.endX,u=x.endY;break;case we:var _=da(x,a),M=_.length;if(0===M){i.push(x.centerX),i.push(x.centerY),h=x.centerX,u=x.centerY;break}for(var S=0;S<M;S++){var T=_[S];R.Ce(h,u,T[2],T[3],T[4],T[5],T[6],T[7],.5,i),h=T[6],u=T[7]}break;case Qr:if(_=Ns(x,a,h,u),S=x.endX,T=x.endY,0===(M=_.length)){i.push(S),i.push(T),h=S,u=T;break}for(S=0;S<M;S++)R.Ce(h,u,(T=_[S])[2],T[3],T[4],T[5],T[6],T[7],.5,i),h=T[6],u=T[7];break;default:z("Segment not of valid type: "+x.type)}x.isClosed&&(i.push(d),i.push(f))}4<=i.length&&(e.push(i),n.push(cy(i)))}}}function cy(t){for(var e=[],n=0,i=0,a=t.length,u=0;u<a;u+=2){var h=t[u],d=t[u+1];0!==u&&e.push(Math.sqrt(ar(n,i,h,d))),n=h,i=d}return e}function De(t,e,n,i){xn(this),this.Gw=null,this.v=!1,void 0===n&&(n=!0),this.xr=n,void 0===i&&(i=!0),this.Cr=i,this.Zc=void 0!==t?t:0,this.$c=void 0!==e?e:0,this.Ml=new et,this.bs=this.Ml.Ba,this.qa=!0}function Yt(t,e,n,i,a,u,h,d){xn(this),this.v=!1,void 0===t&&(t=Ge),this.ia=t,this.fc=void 0!==e?e:0,this.oc=void 0!==n?n:0,void 0===i&&(i=0),void 0===a&&(a=0),void 0===u&&(u=0),void 0===h&&(h=0),t===Qr?(0>(t=u%360)&&(t+=360),this.Ae=t,this.pi=0,this.ri=Math.max(i,0),this.ah=Math.max(a,0),this.rl="boolean"==typeof h?h:"number"==typeof h&&!!h,this.Nk=!!d):(this.Ae=i,this.pi=a,t===we&&(u=Math.max(u,0)),this.ri=u,"number"==typeof h?(t===we&&(h=Math.max(h,0)),this.ah=h):this.ah=0,this.Nk=this.rl=!1),this.yj=!1,this.qa=!0,this.Od=null}function da(t,e){if(null!==t.Od&&!1===e.qa)return t.Od;var n=t.radiusX,i=t.radiusY;if(void 0===i&&(i=n),0===n||0===i)return t.Od=[],t.Od;e=t.Ae;var a=t.pi,u=R.Lx(0,0,n<i?n:i,t.startAngle,t.startAngle+t.sweepAngle,!1);if(n!==i){var h=St.alloc();h.reset(),n<i?h.scale(1,i/n):h.scale(n/i,1),q.Ha(u,h),St.free(h)}for(n=u.length,i=0;i<n;i++)(h=u[i])[0]+=e,h[1]+=a,h[2]+=e,h[3]+=a,h[4]+=e,h[5]+=a,h[6]+=e,h[7]+=a;return t.Od=u,t.Od}function Ns(t,e,n,i){function a(S,T,k,b){return(S*b<T*k?-1:1)*Math.acos((S*k+T*b)/(Math.sqrt(S*S+T*T)*Math.sqrt(k*k+b*b)))}if(null!==t.Od&&!1===e.qa)return t.Od;if(0===t.radiusX||0===t.radiusY)return t.Od=[],t.Od;var u=t.ah;0===(e=t.ri)&&(e=1e-4),0===u&&(u=1e-4);var h=Math.PI/180*t.Ae,d=t.rl,f=t.Nk,g=t.fc,m=t.oc,y=Math.cos(h),x=Math.sin(h),_=y*(n-g)/2+x*(i-m)/2,M=_*_/(e*e)+(h=-x*(n-g)/2+y*(i-m)/2)*h/(u*u);return 1<M&&(e*=Math.sqrt(M),u*=Math.sqrt(M)),M=(d===f?-1:1)*Math.sqrt((e*e*u*u-e*e*h*h-u*u*_*_)/(e*e*h*h+u*u*_*_)),isNaN(M)&&(M=0),d=M*e*h/u,M=M*-u*_/e,isNaN(d)&&(d=0),isNaN(M)&&(M=0),n=(n+g)/2+y*d-x*M,i=(i+m)/2+x*d+y*M,m=a(1,0,(_-d)/e,(h-M)/u),h=a(y=(_-d)/e,g=(h-M)/u,_=(-_-d)/e,d=(-h-M)/u),-1>=(_=(y*_+g*d)/(Math.sqrt(y*y+g*g)*Math.sqrt(_*_+d*d)))?h=Math.PI:1<=_&&(h=0),!f&&0<h&&(h-=2*Math.PI),f&&0>h&&(h+=2*Math.PI),f=e>u?1:e/u,_=e>u?u/e:1,e=R.Lx(0,0,e>u?e:u,m,m+h,!0),(u=St.alloc()).reset(),u.translate(n,i),u.rotate(t.Ae,0,0),u.scale(f,_),q.Ha(e,u),St.free(u),t.Od=e,t.Od}R.za=R.fB,q.prototype.copy=function(){var t=new q;t.ia=this.ia,t.Zc=this.Zc,t.$c=this.$c,t.fc=this.fc,t.oc=this.oc;for(var e=this.rj.m,n=e.length,i=t.rj,a=0;a<n;a++){var u=e[a].copy();i.add(u)}return t.nr=this.nr,t.Zq.assign(this.Zq),t.qa=this.qa,t.Hk=this.Hk,t.Zm=this.Zm,t.$m=this.$m,t.hf=this.hf.I(),t.jf=this.jf.I(),t.kl=this.kl,t.jl=this.jl,t.Kf=this.Kf,t},q.prototype.ca=function(){return this.freeze(),Object.freeze(this),this},q.prototype.freeze=function(){this.v=!0;var t=this.figures;t.freeze();for(var e=(t=t.m).length,n=0;n<e;n++)t[n].freeze();return this},q.prototype.ea=function(){Object.isFrozen(this)&&z("cannot thaw constant: "+this),this.v=!1;var t=this.figures;t.ea();for(var e=(t=t.m).length,n=0;n<e;n++)t[n].ea();return this},q.prototype.Ta=function(t){if(!(t instanceof q))return!1;if(this.type!==t.type)return this.type===q.j&&t.type===q.o?Ap(this,t):t.type===q.j&&this.type===q.o&&Ap(t,this);if(this.type===q.o){var e=this.figures.m,n=e.length;if(n!==(t=t.figures.m).length)return!1;for(var i=0;i<n;i++)if(!e[i].Ta(t[i]))return!1;return!0}return R.w(this.startX,t.startX)&&R.w(this.startY,t.startY)&&R.w(this.endX,t.endX)&&R.w(this.endY,t.endY)},q.Ga=function(t){return t.toString()},q.prototype.gb=function(t){t.classType===q&&(this.type=t)},q.prototype.toString=function(t){switch(void 0===t&&(t=-1),this.type){case q.j:return 0>t?"M"+this.startX.toString()+" "+this.startY.toString()+"L"+this.endX.toString()+" "+this.endY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t)+"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);case q.C:var e=new B(this.startX,this.startY,0,0);return e.gw(this.endX,this.endY,0,0),0>t?"M"+e.x.toString()+" "+e.y.toString()+"H"+e.right.toString()+"V"+e.bottom.toString()+"H"+e.left.toString()+"z":"M"+e.x.toFixed(t)+" "+e.y.toFixed(t)+"H"+e.right.toFixed(t)+"V"+e.bottom.toFixed(t)+"H"+e.left.toFixed(t)+"z";case q.M:if((e=new B(this.startX,this.startY,0,0)).gw(this.endX,this.endY,0,0),0>t)return"M"+(t=e.left.toString()+" "+(e.y+e.height/2).toString())+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+e.right.toString()+" "+(e.y+e.height/2).toString()+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+t;var n=e.left.toFixed(t)+" "+(e.y+e.height/2).toFixed(t);return"M"+n+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+e.right.toFixed(t)+" "+(e.y+e.height/2).toFixed(t)+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+n;case q.o:e="";for(var i=(n=this.figures.m).length,a=0;a<i;a++){var u=n[a];0<a&&(e+=" x "),u.isFilled&&(e+="F "),e+=u.toString(t)}return e;default:return this.type.toString()}},q.Wa=function(t){for(var e=(t=t.split(/[Xx]/)).length,n="",i=0;i<e;i++){var a=t[i];n=null!==a.match(/[Ff]/)?0===i?n+a:n+"X"+(" "===a[0]?"":" ")+a:n+(0===i?"":"X ")+"F"+(" "===a[0]?"":" ")+a}return n},q.parse=function(t,e){function n(){return S>=O-1||null!==g[S+1].match(F)}function i(){return S++,g[S]}function a(G){var Mt=parseFloat(i()),gt=parseFloat(i());T===T.toLowerCase()&&(Mt=I.x+Mt,gt=I.y+gt),G.h(Mt,gt)}function u(){return a(I),I}function h(){return a(b),b}function d(){var G=k.toLowerCase();return"c"!==G&&"s"!==G&&"q"!==G&&"t"!==G?I:new N(2*I.x-b.x,2*I.y-b.y)}void 0===e&&(e=!1);var f=/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,g=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/,/gm," ")).replace(f,"$1 $2")).replace(f,"$1 $2")).replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([^s])/gm,"$1 $2")).replace(/([^s])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,"$1 $2")).replace(/([0-9])([+\-])/gm,"$1 $2")).replace(/[\s\r\t\n]+/gm," ")).replace(/^\s+|\s+$/g,"")).split(" ");for(t=0;t<g.length;t++){var m=g[t];if(null!==m.match(/(\.[0-9]*)(\.)/gm)){f=ye();for(var y="",x=!1,_=0;_<m.length;_++){var M=m[_];"."!==M||x?"."===M?(f.push(y),y="."):y+=M:(x=!0,y+=M)}for(f.push(y),g.splice(t,1),m=0;m<f.length;m++)g.splice(t+m,0,f[m]);t+=f.length-1,oe(f)}}var S=-1,T="",k="";f=new N(0,0);var b=new N(0,0),I=new N(0,0),O=g.length;t=Eg(null),y=m=!1,x=!0,_=null;for(var F=/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/;!(S>=O-1);)if(k=T,""!==(T=i()))switch(T.toUpperCase()){case"X":x=!0,y=m=!1;break;case"M":for(_=u(),null===t.gc||!0===x?(iu(t,_.x,_.y,m,!y),x=!1):t.moveTo(_.x,_.y),f.assign(I);!n();)_=u(),t.lineTo(_.x,_.y);break;case"L":for(;!n();)_=u(),t.lineTo(_.x,_.y);break;case"H":for(;!n();)I=new N((T===T.toLowerCase()?I.x:0)+parseFloat(i()),I.y),t.lineTo(I.x,I.y);break;case"V":for(;!n();)I=new N(I.x,(T===T.toLowerCase()?I.y:0)+parseFloat(i())),t.lineTo(I.x,I.y);break;case"C":for(;!n();){a(_=new N),M=h();var H=u();Vs(t,_.x,_.y,M.x,M.y,H.x,H.y)}break;case"S":for(;!n();)_=d(),M=h(),H=u(),Vs(t,_.x,_.y,M.x,M.y,H.x,H.y);break;case"Q":for(;!n();)_=h(),M=u(),Fc(t,_.x,_.y,M.x,M.y);break;case"T":for(;!n();)b=_=d(),M=u(),Fc(t,_.x,_.y,M.x,M.y);break;case"B":for(;!n();){_=parseFloat(i()),M=parseFloat(i()),H=parseFloat(i());var W=parseFloat(i()),it=parseFloat(i()),nt=it,tt=!1;n()||(nt=parseFloat(i()),n()||(tt=0!==parseFloat(i()))),T===T.toLowerCase()&&(H+=I.x,W+=I.y),t.arcTo(_,M,H,W,it,nt,tt)}break;case"A":for(;!n();)_=Math.abs(parseFloat(i())),M=Math.abs(parseFloat(i())),H=parseFloat(i()),it=W=!1,tt=nt=0,1===(nt=i()).length?(W=!!parseFloat(nt),it=!!parseFloat(i()),nt=parseFloat(i())):2===nt.length?(W=!!parseFloat(nt[0]),it=!!parseFloat(nt[1]),nt=parseFloat(i())):(W=!!parseFloat(nt[0]),it=!!parseFloat(nt[1]),nt=parseFloat(nt.slice(2))),tt=parseFloat(i()),T===T.toLowerCase()&&(nt=I.x+nt,tt=I.y+tt),I.h(nt,tt),fw(t,_,M,H,W,it,nt,tt);break;case"Z":u_(t),I.assign(f);break;case"F":for(_="",M=1;g[S+M];)if(null!==g[S+M].match(/[Uu]/))M++;else{if(null!==g[S+M].match(F)){_=g[S+M];break}M++}_.match(/[Mm]/)?m=!0:0<t.gc.segments.length&&(t.gc.isFilled=!0);break;case"U":for(_="",M=1;g[S+M];)if(null!==g[S+M].match(/[Ff]/))M++;else{if(null!==g[S+M].match(F)){_=g[S+M];break}M++}_.match(/[Mm]/)?y=!0:t.Jm(!1)}if(f=t.Fs,Tg=t,e)for(e=f.figures.iterator;e.next();)e.value.isFilled=!0;return f},q.Ha=function(t,e){for(var n=t.length,i=N.alloc(),a=0;a<n;a++){var u=t[a];i.x=u[0],i.y=u[1],e.ya(i),u[0]=i.x,u[1]=i.y,i.x=u[2],i.y=u[3],e.ya(i),u[2]=i.x,u[3]=i.y,i.x=u[4],i.y=u[5],e.ya(i),u[4]=i.x,u[5]=i.y,i.x=u[6],i.y=u[7],e.ya(i),u[6]=i.x,u[7]=i.y}N.free(i)},q.prototype.Ev=function(){if(this.qa||this.nr!==this.figures.Ba)return!0;for(var t=this.figures.m,e=t.length,n=0;n<e;n++)if(t[n].Ev())return!0;return!1},q.prototype.computeBounds=function(){this.qa=!1,this.Zm=this.Hk=null,this.$m=NaN,this.nr=this.figures.Ba;for(var t=this.figures.m,e=t.length,n=0;n<e;n++){var i=t[n];i.qa=!1;var a=i.segments;i.bs=a.Ba,a=(i=a.m).length;for(var u=0;u<a;u++){var h=i[u];h.qa=!1,h.Od=null}}(t=this.Zq).ea(),isNaN(this.kl)||isNaN(this.jl)?t.h(0,0,0,0):t.h(0,0,this.kl,this.jl),vx(this,t,!1),hn(t,0,0,0,0),t.freeze()},q.prototype.Kx=function(){var t=new B;return vx(this,t,!0),t},q.prototype.normalize=function(){this.v&&bt(this);var t=this.Kx();return this.offset(-t.x,-t.y),new N(-t.x,-t.y)},q.prototype.offset=function(t,e){return this.v&&bt(this),this.transform(1,0,0,1,t,e),this},q.prototype.scale=function(t,e){return this.v&&bt(this),this.transform(t,0,0,e,0,0),this},q.prototype.rotate=function(t,e,n){this.v&&bt(this),void 0===e&&(e=0),void 0===n&&(n=0);var i=St.alloc();return i.reset(),i.rotate(t,e,n),this.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),St.free(i),this},(D=q.prototype).transform=function(t,e,n,i,a,u){switch(this.type){case q.j:case q.C:case q.M:var h=this.Zc,d=this.$c;this.Zc=h*t+d*n+a,this.$c=h*e+d*i+u,this.fc=(h=this.fc)*t+(d=this.oc)*n+a,this.oc=h*e+d*i+u;break;case q.o:for(var f=this.figures.m,g=f.length,m=0;m<g;m++){var y=f[m];y.startX=(h=y.startX)*t+(d=y.startY)*n+a,y.startY=h*e+d*i+u;for(var x=(y=y.segments.m).length,_=0;_<x;_++){var M=y[_];switch(M.type){case Ge:case In:M.endX=(h=M.endX)*t+(d=M.endY)*n+a,M.endY=h*e+d*i+u;break;case Ji:M.point1X=(h=M.point1X)*t+(d=M.point1Y)*n+a,M.point1Y=h*e+d*i+u,M.point2X=(h=M.point2X)*t+(d=M.point2Y)*n+a,M.point2Y=h*e+d*i+u,M.endX=(h=M.endX)*t+(d=M.endY)*n+a,M.endY=h*e+d*i+u;break;case lr:M.point1X=(h=M.point1X)*t+(d=M.point1Y)*n+a,M.point1Y=h*e+d*i+u,M.endX=(h=M.endX)*t+(d=M.endY)*n+a,M.endY=h*e+d*i+u;break;case we:M.centerX=(h=M.centerX)*t+(d=M.centerY)*n+a,M.centerY=h*e+d*i+u,0!==e&&(0>(h=180*Math.atan2(e,t)/Math.PI)&&(h+=360),M.startAngle+=h),0>t&&(M.startAngle=180-M.startAngle,M.sweepAngle=-M.sweepAngle),0>i&&(M.startAngle=-M.startAngle,M.sweepAngle=-M.sweepAngle),M.radiusX*=Math.sqrt(t*t+n*n),void 0!==M.radiusY&&(M.radiusY*=Math.sqrt(e*e+i*i));break;case Qr:if(M.endX=(h=M.endX)*t+(d=M.endY)*n+a,M.endY=h*e+d*i+u,0===M.radiusX||0===M.radiusY)break;0!==e&&(0>(h=180*Math.atan2(e,t)/Math.PI)&&(h+=360),M.xAxisRotation+=h),0>t&&(M.xAxisRotation=180-M.xAxisRotation,M.isClockwiseArc=!M.isClockwiseArc),0>i&&(M.xAxisRotation=-M.xAxisRotation,M.isClockwiseArc=!M.isClockwiseArc),M.radiusX*=Math.sqrt(t*t+n*n),M.radiusY*=Math.sqrt(e*e+i*i);break;default:z("Unknown Segment type: "+M.type)}}}}return this.qa=!0,this},D.$=function(t,e){void 0===e&&(e=0);var n=this.Zc,i=this.$c,a=this.fc,u=this.oc;switch(this.type){case q.j:return R.Mb(n,i,a,u,e,t.x,t.y);case q.C:var h=B.allocAt(Math.min(n,a)-e,Math.min(i,u)-e,Math.abs(a-n)+2*e,Math.abs(u-i)+2*e);return t=h.$(t),B.free(h),t;case q.M:h=Math.min(n,a)-e;var d=Math.min(i,u)-e;return n=(Math.abs(a-n)+2*e)/2,e=(Math.abs(u-i)+2*e)/2,!(0>=n||0>=e)&&1>=(h=t.x-(h+n))*h/(n*n)+(d=t.y-(d+e))*d/(e*e);case q.o:return Od(this,t,e,!0,!1);default:return!1}},D.uv=function(t,e){if(0>t?t=0:1<t&&(t=1),void 0===e&&(e=new N),this.type===q.j)return e.h(this.startX+t*(this.endX-this.startX),this.startY+t*(this.endY-this.startY)),e;for(var n=this.flattenedSegments,i=this.flattenedLengths,a=n.length,u=this.flattenedTotalLength*t,h=0,d=0;d<a;d++){var f=i[d],g=f.length;for(t=0;t<g;t++){var m=f[t];if(h+m>=u)return i=u-h,e.h((d=(n=n[d])[2*t])+(n[2*t+2]-d)*(i=0===m?0:i/m),(a=n[2*t+1])+(n[2*t+3]-a)*i),e;h+=m}}return e},D.Xx=function(t){if(0>t?t=0:1<t&&(t=1),this.type===q.j)return 180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI;for(var e=this.flattenedSegments,n=this.flattenedLengths,i=e.length,a=this.flattenedTotalLength*t,u=0,h=0;h<i;h++){var d=n[h],f=d.length;for(t=0;t<f;t++){var g=d[t];if(u+g>=a)return e=(a=e[h])[2*t],n=a[2*t+1],i=a[2*t+2],t=a[2*t+3],1>Math.abs(i-e)&&1>Math.abs(t-n)?0:1>Math.abs(i-e)?0<=t-n?90:270:1>Math.abs(t-n)?0<=i-e?0:180:180*Math.atan2(t-n,i-e)/Math.PI;u+=g}}return NaN},D.vv=function(t,e){if(0>t?t=0:1<t&&(t=1),void 0===e&&(e=[]),e.length=3,this.type===q.j)return e[0]=this.startX+t*(this.endX-this.startX),e[1]=this.startY+t*(this.endY-this.startY),e[2]=180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI,e;for(var n=this.flattenedSegments,i=this.flattenedLengths,a=n.length,u=this.flattenedTotalLength*t,h=0,d=0;d<a;d++){var f=i[d],g=f.length;for(t=0;t<g;t++){var m=f[t];if(h+m>=u)return i=u-h,i=0===m?0:i/m,n=(m=n[d])[2*t],d=m[2*t+1],a=m[2*t+2],t=m[2*t+3],e[0]=n+(a-n)*i,e[1]=d+(t-d)*i,e[2]=1>Math.abs(a-n)&&1>Math.abs(t-d)?0:1>Math.abs(a-n)?0<=t-d?90:270:1>Math.abs(t-d)?0<=a-n?0:180:180*Math.atan2(t-d,a-n)/Math.PI,e;h+=m}}return e},D.Yx=function(t){if(this.type===q.j){var e=this.startX,n=this.startY,i=this.endX,a=this.endY;if(e!==i||n!==a){var u=t.x;if(t=t.y,e===i){if(n<a){var h=n;i=a}else h=a,i=n;return t<=h?h===n?0:1:t>=i?i===n?0:1:Math.abs(t-n)/(i-h)}if(n===a)return e<i?h=e:(h=i,i=e),u<=h?h===e?0:1:u>=i?i===e?0:1:Math.abs(u-e)/(i-h);h=(i-e)*(i-e)+(a-n)*(a-n);var d=N.alloc();return R.Eh(e,n,i,a,u,t,d),t=d.x,u=d.y,N.free(d),Math.sqrt(((t-e)*(t-e)+(u-n)*(u-n))/h)}}else{if(this.type!==q.C){e=this.flattenedSegments,n=this.flattenedLengths,u=this.flattenedTotalLength,i=N.alloc(),a=1/0,d=h=0,f=e.length;for(var m=g=0,y=0;y<f;y++)for(var x=e[y],_=n[y],M=x.length,S=0;S<M;S+=2){var T=x[S],k=x[S+1];if(0!==S){R.Eh(g,m,T,k,t.x,t.y,i);var b=(i.x-t.x)*(i.x-t.x)+(i.y-t.y)*(i.y-t.y);b<a&&(a=b,h=d,h+=Math.sqrt((i.x-g)*(i.x-g)+(i.y-m)*(i.y-m))),d+=_[(S-2)/2]}g=T,m=k}return N.free(i),0>(t=h/u)?0:1<t?1:t}d=this.startY;var f=this.endX;if(a=this.endY,(h=this.startX)!==f||d!==a){u=2*(e=f-h)+2*(n=a-d),i=t.x,t=t.y,i=Math.min(Math.max(i,h),f),t=Math.min(Math.max(t,d),a),h=Math.abs(i-h),f=Math.abs(i-f),d=Math.abs(t-d),a=Math.abs(t-a);var g=Math.min(h,f,d,a);if(g===d)return i/u;if(g===f)return(e+t)/u;if(g===a)return(2*e+n-i)/u;if(g===h)return(2*e+2*n-t)/u}}return 0},D.add=function(t){return this.rj.add(t),this},D.Km=function(t,e,n,i,a,u,h,d){return this.v&&bt(this),this.hf=new ct(t,e,a,u).freeze(),this.jf=new ct(n,i,h,d).freeze(),this},Dt.Object.defineProperties(q.prototype,{flattenedSegments:{get:function(){return hy(this),this.Hk}},flattenedLengths:{get:function(){return hy(this),this.Zm}},flattenedTotalLength:{get:function(){var t=this.$m;if(isNaN(t)){if(this.type===q.j){t=Math.abs(this.endX-this.startX);var e=Math.abs(this.endY-this.startY);t=Math.sqrt(t*t+e*e)}else if(this.type===q.C)t=2*Math.abs(this.endX-this.startX)+2*Math.abs(this.endY-this.startY);else for(var n=(e=this.flattenedLengths).length,i=t=0;i<n;i++)for(var a=e[i],u=a.length,h=0;h<u;h++)t+=a[h];this.$m=t}return t}},type:{get:function(){return this.ia},set:function(t){this.ia!==t&&(this.v&&bt(this,t),this.ia=t,this.qa=!0)}},startX:{get:function(){return this.Zc},set:function(t){this.Zc!==t&&(this.v&&bt(this,t),this.Zc=t,this.qa=!0)}},startY:{get:function(){return this.$c},set:function(t){this.$c!==t&&(this.v&&bt(this,t),this.$c=t,this.qa=!0)}},endX:{get:function(){return this.fc},set:function(t){this.fc!==t&&(this.v&&bt(this,t),this.fc=t,this.qa=!0)}},endY:{get:function(){return this.oc},set:function(t){this.oc!==t&&(this.v&&bt(this,t),this.oc=t,this.qa=!0)}},figures:{get:function(){return this.rj},set:function(t){this.rj!==t&&(this.v&&bt(this,t),this.rj=t,this.qa=!0)}},spot1:{get:function(){return this.hf},set:function(t){this.v&&bt(this,t),this.hf=t.I()}},spot2:{get:function(){return this.jf},set:function(t){this.v&&bt(this,t),this.jf=t.I()}},defaultStretch:{get:function(){return this.Kf},set:function(t){this.v&&bt(this,t),this.Kf=t}},bounds:{get:function(){return this.Ev()&&this.computeBounds(),this.Zq}}}),q.prototype.setSpots=q.prototype.Km,q.prototype.add=q.prototype.add,q.prototype.getFractionForPoint=q.prototype.Yx,q.prototype.getPointAndAngleAlongPath=q.prototype.vv,q.prototype.getAngleAlongPath=q.prototype.Xx,q.prototype.getPointAlongPath=q.prototype.uv,q.prototype.containsPoint=q.prototype.$,q.prototype.transform=q.prototype.transform,q.prototype.rotate=q.prototype.rotate,q.prototype.scale=q.prototype.scale,q.prototype.offset=q.prototype.offset,q.prototype.normalize=q.prototype.normalize,q.prototype.computeBoundsWithoutOrigin=q.prototype.Kx,q.prototype.equalsApprox=q.prototype.Ta,q.className="Geometry",q.j=new J(q,"Line",0),q.C=new J(q,"Rectangle",1),q.M=new J(q,"Ellipse",2),q.o=new J(q,"Path",3),q.Oc="UuBbMmZzLlHhVvCcSsQqTtAaFfXx",q.className="Geometry",q.stringify=q.Ga,q.fillPath=q.Wa,q.parse=q.parse,q.Line=q.j,q.Rectangle=q.C,q.Ellipse=q.M,q.Path=q.o,De.prototype.copy=function(){var t=new De;t.xr=this.xr,t.Cr=this.Cr,t.Zc=this.Zc,t.$c=this.$c;for(var e=this.Ml.m,n=e.length,i=t.Ml,a=0;a<n;a++){var u=e[a].copy();i.add(u)}return t.bs=this.bs,t.qa=this.qa,t.Gw=this.Gw,t},(D=De.prototype).Ta=function(t){if(!(t instanceof De&&R.w(this.startX,t.startX)&&R.w(this.startY,t.startY)))return!1;var e=this.segments.m,n=e.length;if(n!==(t=t.segments.m).length)return!1;for(var i=0;i<n;i++)if(!e[i].Ta(t[i]))return!1;return!0},D.toString=function(t){void 0===t&&(t=-1);for(var e=0>t?"M"+this.startX.toString()+" "+this.startY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t),n=this.segments.m,i=n.length,a=0;a<i;a++)e+=" "+n[a].toString(t);return e},D.freeze=function(){this.v=!0;var t=this.segments;t.freeze();var e=t.m;t=t.length;for(var n=0;n<t;n++)e[n].freeze();return this},D.ea=function(){this.v=!1;var t=this.segments;t.ea();for(var e=(t=t.m).length,n=0;n<e;n++)t[n].ea();return this},D.Ev=function(){if(this.qa)return!0;var t=this.segments;if(this.bs!==t.Ba)return!0;for(var e=(t=t.m).length,n=0;n<e;n++)if(t[n].qa)return!0;return!1},D.add=function(t){return this.Ml.add(t),this},D.$=function(t,e,n){for(var i=this.startX,a=this.startY,u=i,h=a,d=this.segments.m,f=d.length,g=0;g<f;g++){var m=d[g];switch(m.type){case In:u=m.endX,h=m.endY,i=m.endX,a=m.endY;break;case Ge:if(R.Mb(i,a,m.endX,m.endY,n,t,e))return!0;i=m.endX,a=m.endY;break;case Ji:if(R.vs(i,a,m.point1X,m.point1Y,m.point2X,m.point2Y,m.endX,m.endY,.5,t,e,n))return!0;i=m.endX,a=m.endY;break;case lr:if(R.Mv(i,a,m.point1X,m.point1Y,m.endX,m.endY,.5,t,e,n))return!0;i=m.endX,a=m.endY;break;case we:case Qr:var y=m.type===we?da(m,this):Ns(m,this,i,a),x=y.length,_=m.type===we?m.centerX:m.endX,M=m.type===we?m.centerY:m.endY;if(0===x){if(R.Mb(i,a,_,M,n,t,e))return!0;i=_,a=M;break}for(_=null,M=0;M<x;M++)if(_=y[M],0===M&&R.Mb(i,a,_[0],_[1],n,t,e)||R.vs(_[0],_[1],_[2],_[3],_[4],_[5],_[6],_[7],.5,t,e,n))return!0;null!==_&&(i=_[6],a=_[7]);break;default:z("Unknown Segment type: "+m.type)}if(m.isClosed&&(i!==u||a!==h)&&R.Mb(i,a,u,h,n,t,e))return!0}return!1},Dt.Object.defineProperties(De.prototype,{isFilled:{get:function(){return this.xr},set:function(t){this.v&&bt(this,t),this.xr=t}},isShadowed:{get:function(){return this.Cr},set:function(t){this.v&&bt(this,t),this.Cr=t}},startX:{get:function(){return this.Zc},set:function(t){this.v&&bt(this,t),this.Zc=t,this.qa=!0}},startY:{get:function(){return this.$c},set:function(t){this.v&&bt(this,t),this.$c=t,this.qa=!0}},segments:{get:function(){return this.Ml},set:function(t){this.v&&bt(this,t),this.Ml=t,this.qa=!0}}}),De.prototype.add=De.prototype.add,De.prototype.equalsApprox=De.prototype.Ta,De.className="PathFigure",Yt.prototype.copy=function(){var t=new Yt;return t.ia=this.ia,t.fc=this.fc,t.oc=this.oc,t.Ae=this.Ae,t.pi=this.pi,t.ri=this.ri,t.ah=this.ah,t.rl=this.rl,t.Nk=this.Nk,t.yj=this.yj,t.qa=this.qa,t},(D=Yt.prototype).Ta=function(t){if(!(t instanceof Yt)||this.type!==t.type||this.isClosed!==t.isClosed)return!1;switch(this.type){case In:case Ge:return R.w(this.endX,t.endX)&&R.w(this.endY,t.endY);case Ji:return R.w(this.endX,t.endX)&&R.w(this.endY,t.endY)&&R.w(this.point1X,t.point1X)&&R.w(this.point1Y,t.point1Y)&&R.w(this.point2X,t.point2X)&&R.w(this.point2Y,t.point2Y);case lr:return R.w(this.endX,t.endX)&&R.w(this.endY,t.endY)&&R.w(this.point1X,t.point1X)&&R.w(this.point1Y,t.point1Y);case we:return R.w(this.startAngle,t.startAngle)&&R.w(this.sweepAngle,t.sweepAngle)&&R.w(this.centerX,t.centerX)&&R.w(this.centerY,t.centerY)&&R.w(this.radiusX,t.radiusX)&&R.w(this.radiusY,t.radiusY);case Qr:return this.isClockwiseArc===t.isClockwiseArc&&this.isLargeArc===t.isLargeArc&&R.w(this.xAxisRotation,t.xAxisRotation)&&R.w(this.endX,t.endX)&&R.w(this.endY,t.endY)&&R.w(this.radiusX,t.radiusX)&&R.w(this.radiusY,t.radiusY);default:return!1}},D.gb=function(t){t.classType===Yt&&(this.type=t)},D.toString=function(t){switch(void 0===t&&(t=-1),this.type){case In:t=0>t?"M"+this.endX.toString()+" "+this.endY.toString():"M"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case Ge:t=0>t?"L"+this.endX.toString()+" "+this.endY.toString():"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case Ji:t=0>t?"C"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.point2X.toString()+" "+this.point2Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"C"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.point2X.toFixed(t)+" "+this.point2Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case lr:t=0>t?"Q"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"Q"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case we:t=0>t?"B"+this.startAngle.toString()+" "+this.sweepAngle.toString()+" "+this.centerX.toString()+" "+this.centerY.toString()+" "+this.radiusX.toString()+" "+this.radiusY.toString():"B"+this.startAngle.toFixed(t)+" "+this.sweepAngle.toFixed(t)+" "+this.centerX.toFixed(t)+" "+this.centerY.toFixed(t)+" "+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t);break;case Qr:t=0>t?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.xAxisRotation.toString()+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toString()+" "+this.endY.toString():"A"+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t)+" "+this.xAxisRotation.toFixed(t)+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;default:t=this.type.toString()}return t+(this.yj?"z":"")},D.freeze=function(){return this.v=!0,this},D.ea=function(){return this.v=!1,this},D.close=function(){return this.yj=!0,this},Dt.Object.defineProperties(Yt.prototype,{isClosed:{get:function(){return this.yj},set:function(t){this.yj!==t&&(this.yj=t,this.qa=!0)}},type:{get:function(){return this.ia},set:function(t){this.v&&bt(this,t),this.ia=t,this.qa=!0}},endX:{get:function(){return this.fc},set:function(t){this.v&&bt(this,t),this.fc=t,this.qa=!0}},endY:{get:function(){return this.oc},set:function(t){this.v&&bt(this,t),this.oc=t,this.qa=!0}},point1X:{get:function(){return this.Ae},set:function(t){this.v&&bt(this,t),this.Ae=t,this.qa=!0}},point1Y:{get:function(){return this.pi},set:function(t){this.v&&bt(this,t),this.pi=t,this.qa=!0}},point2X:{get:function(){return this.ri},set:function(t){this.v&&bt(this,t),this.ri=t,this.qa=!0}},point2Y:{get:function(){return this.ah},set:function(t){this.v&&bt(this,t),this.ah=t,this.qa=!0}},centerX:{get:function(){return this.Ae},set:function(t){this.v&&bt(this,t),this.Ae=t,this.qa=!0}},centerY:{get:function(){return this.pi},set:function(t){this.v&&bt(this,t),this.pi=t,this.qa=!0}},radiusX:{get:function(){return this.ri},set:function(t){0>t&&me(t,">= zero",Yt,"radiusX"),this.v&&bt(this,t),this.ri=t,this.qa=!0}},radiusY:{get:function(){return this.ah},set:function(t){0>t&&me(t,">= zero",Yt,"radiusY"),this.v&&bt(this,t),this.ah=t,this.qa=!0}},startAngle:{get:function(){return this.fc},set:function(t){this.fc!==t&&(this.v&&bt(this,t),0>(t%=360)&&(t+=360),this.fc=t,this.qa=!0)}},sweepAngle:{get:function(){return this.oc},set:function(t){this.v&&bt(this,t),360<t&&(t=360),-360>t&&(t=-360),this.oc=t,this.qa=!0}},isClockwiseArc:{get:function(){return this.Nk},set:function(t){this.v&&bt(this,t),this.Nk=t,this.qa=!0}},isLargeArc:{get:function(){return this.rl},set:function(t){this.v&&bt(this,t),this.rl=t,this.qa=!0}},xAxisRotation:{get:function(){return this.Ae},set:function(t){0>(t%=360)&&(t+=360),this.v&&bt(this,t),this.Ae=t,this.qa=!0}}}),Yt.prototype.equalsApprox=Yt.prototype.Ta;var In=new J(Yt,"Move",0),Ge=new J(Yt,"Line",1),Ji=new J(Yt,"Bezier",2),lr=new J(Yt,"QuadraticBezier",3),we=new J(Yt,"Arc",4),Qr=new J(Yt,"SvgArc",4);function Qi(){this.F=null,this.Wu=new N(0,0).freeze(),this.Ht=new N(0,0).freeze(),this.Sq=this.Lr=0,this.Tq=1,this.ci="",this.rs=this.hr=!1,this.fr=this.Vq=0,this.sg=this.ur=this.Ar=!1,this.lr=null,this.ps=0,this.md=this.os=null}function bu(){this.F=null,this.na="",this.Tr=this.ks=null}function le(){this.fn=ve,this.bf=this.Kr="",this.Mo=this.No=this.So=this.To=this.Ro=this.F=this.Tb=null}Yt.className="PathSegment",Yt.Move=In,Yt.Line=Ge,Yt.Bezier=Ji,Yt.QuadraticBezier=lr,Yt.Arc=we,Yt.SvgArc=Qr,Qi.prototype.copy=function(){var t=new Qi;return this.clone(t)},Qi.prototype.clone=function(t){return t.F=this.F,t.Wu.assign(this.viewPoint),t.Ht.assign(this.documentPoint),t.Lr=this.Lr,t.Sq=this.Sq,t.Tq=this.Tq,t.ci=this.ci,t.hr=this.hr,t.rs=this.rs,t.Vq=this.Vq,t.fr=this.fr,t.Ar=this.Ar,t.ur=this.ur,t.sg=this.sg,t.lr=this.lr,t.ps=this.ps,t.os=this.os,t.md=this.md,t},Qi.prototype.toString=function(){var t="^";return 0!==this.modifiers&&(t+="M:"+this.modifiers),0!==this.button&&(t+="B:"+this.button),""!==this.key&&(t+="K:"+this.key),0!==this.clickCount&&(t+="C:"+this.clickCount),0!==this.delta&&(t+="D:"+this.delta),this.handled&&(t+="h"),this.bubbles&&(t+="b"),null!==this.documentPoint&&(t+="@"+this.documentPoint.toString()),t},Qi.prototype.mq=function(t,e){var n=this.diagram;return null===n||Yd(n,this.event,t,e),e},Qi.prototype.fA=function(t,e){var n=this.diagram;return null===n||(Yd(n,this.event,t,e),e.assign(n.kt(e))),e},Dt.Object.defineProperties(Qi.prototype,{diagram:{get:function(){return this.F},set:function(t){this.F=t}},viewPoint:{get:function(){return this.Wu},set:function(t){this.Wu.assign(t)}},documentPoint:{get:function(){return this.Ht},set:function(t){this.Ht.assign(t)}},modifiers:{get:function(){return this.Lr},set:function(t){this.Lr=t}},button:{get:function(){return this.Sq},set:function(t){if(this.Sq=t,null===this.event)switch(t){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2}}},buttons:{get:function(){return this.Tq},set:function(t){this.Tq=t}},key:{get:function(){return this.ci},set:function(t){this.ci=t}},down:{get:function(){return this.hr},set:function(t){this.hr=t}},up:{get:function(){return this.rs},set:function(t){this.rs=t}},clickCount:{get:function(){return this.Vq},set:function(t){this.Vq=t}},delta:{get:function(){return this.fr},set:function(t){this.fr=t}},isMultiTouch:{get:function(){return this.Ar},set:function(t){this.Ar=t}},handled:{get:function(){return this.ur},set:function(t){this.ur=t}},bubbles:{get:function(){return this.sg},set:function(t){this.sg=t}},event:{get:function(){return this.lr},set:function(t){this.lr=t}},isTouchEvent:{get:function(){var t=dt.TouchEvent,e=this.event;return!!(t&&e instanceof t)||(t=dt.PointerEvent)&&e instanceof t&&("touch"===e.pointerType||"pen"===e.pointerType)}},timestamp:{get:function(){return this.ps},set:function(t){this.ps=t}},targetDiagram:{get:function(){return this.os},set:function(t){this.os=t}},targetObject:{get:function(){return this.md},set:function(t){this.md=t}},control:{get:function(){return 0!=(1&this.modifiers)},set:function(t){this.modifiers=t?1|this.modifiers:-2&this.modifiers}},shift:{get:function(){return 0!=(4&this.modifiers)},set:function(t){this.modifiers=t?4|this.modifiers:-5&this.modifiers}},alt:{get:function(){return 0!=(2&this.modifiers)},set:function(t){this.modifiers=t?2|this.modifiers:-3&this.modifiers}},meta:{get:function(){return 0!=(8&this.modifiers)},set:function(t){this.modifiers=t?8|this.modifiers:-9&this.modifiers}},left:{get:function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(1&this.buttons):0===this.button},set:function(t){this.buttons=t?1|this.buttons:-2&this.buttons}},right:{get:function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(2&this.buttons):2===this.button},set:function(t){this.buttons=t?2|this.buttons:-3&this.buttons}},middle:{get:function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(4&this.buttons):1===this.button},set:function(t){this.buttons=t?4|this.buttons:-5&this.buttons}}}),Qi.prototype.getMultiTouchDocumentPoint=Qi.prototype.fA,Qi.prototype.getMultiTouchViewPoint=Qi.prototype.mq,Qi.className="InputEvent",bu.prototype.copy=function(){var t=new bu;return t.F=this.F,t.na=this.na,t.ks=this.ks,t.Tr=this.Tr,t},bu.prototype.toString=function(){var t="*"+this.name;return null!==this.subject&&(t+=":"+this.subject.toString()),null!==this.parameter&&(t+="("+this.parameter.toString()+")"),t},Dt.Object.defineProperties(bu.prototype,{diagram:{get:function(){return this.F},set:function(t){this.F=t}},name:{get:function(){return this.na},set:function(t){this.na=t}},subject:{get:function(){return this.ks},set:function(t){this.ks=t}},parameter:{get:function(){return this.Tr},set:function(t){this.Tr=t}}}),bu.className="DiagramEvent",le.prototype.clear=function(){this.Mo=this.No=this.So=this.To=this.Ro=this.F=this.Tb=null},le.prototype.copy=function(){var t=new le;t.fn=this.fn,t.Kr=this.Kr,t.bf=this.bf,t.Tb=this.Tb,t.F=this.F,t.Ro=this.Ro;var e=this.To;return t.To=Et(e)&&"function"==typeof e.I?e.I():e,t.So=Et(e=this.So)&&"function"==typeof e.I?e.I():e,t.No=Et(e=this.No)&&"function"==typeof e.I?e.I():e,t.Mo=Et(e=this.Mo)&&"function"==typeof e.I?e.I():e,t},le.prototype.gb=function(t){t.classType===le&&(this.change=t)},le.prototype.toString=function(){var t="";return t=this.change===qr?t+"* ":this.change===ve?t+(null!==this.model?"!m":"!d"):t+(null!==this.model?"!m":"!d")+this.change,this.propertyName&&"string"==typeof this.propertyName&&(t+=" "+this.propertyName),this.modelChange&&this.modelChange!==this.propertyName&&(t+=" "+this.modelChange),t+=": ",this.change===qr?null!==this.oldValue&&(t+=" "+this.oldValue):(null!==this.object&&(t+=sr(this.object)),null!==this.oldValue&&(t+="  old: "+sr(this.oldValue)),null!==this.oldParam&&(t+=" "+this.oldParam),null!==this.newValue&&(t+="  new: "+sr(this.newValue)),null!==this.newParam&&(t+=" "+this.newParam)),t},le.prototype.H=function(t){return t?this.oldValue:this.newValue},le.prototype.hA=function(t){return t?this.oldParam:this.newParam},le.prototype.canUndo=function(){return null!==this.model||null!==this.diagram},le.prototype.undo=function(){this.canUndo()&&(null!==this.model?this.model.changeState(this,!0):null!==this.diagram&&this.diagram.changeState(this,!0))},le.prototype.canRedo=function(){return null!==this.model||null!==this.diagram},le.prototype.redo=function(){this.canRedo()&&(null!==this.model?this.model.changeState(this,!1):null!==this.diagram&&this.diagram.changeState(this,!1))},Dt.Object.defineProperties(le.prototype,{model:{get:function(){return this.Tb},set:function(t){this.Tb=t}},diagram:{get:function(){return this.F},set:function(t){this.F=t}},change:{get:function(){return this.fn},set:function(t){this.fn=t}},modelChange:{get:function(){return this.Kr},set:function(t){this.Kr=t}},propertyName:{get:function(){return this.bf},set:function(t){this.bf=t}},isTransactionFinished:{get:function(){return this.fn===qr&&("CommittedTransaction"===this.bf||"FinishedUndo"===this.bf||"FinishedRedo"===this.bf)}},object:{get:function(){return this.Ro},set:function(t){this.Ro=t}},oldValue:{get:function(){return this.To},set:function(t){this.To=t}},oldParam:{get:function(){return this.So},set:function(t){this.So=t}},newValue:{get:function(){return this.No},set:function(t){this.No=t}},newParam:{get:function(){return this.Mo},set:function(t){this.Mo=t}}}),le.prototype.redo=le.prototype.redo,le.prototype.canRedo=le.prototype.canRedo,le.prototype.undo=le.prototype.undo,le.prototype.canUndo=le.prototype.canUndo,le.prototype.getParam=le.prototype.hA,le.prototype.getValue=le.prototype.H,le.prototype.clear=le.prototype.clear;var qr=new J(le,"Transaction",-1),ve=new J(le,"Property",0),Pt=new J(le,"Insert",1),sn=new J(le,"Remove",2);function bn(){this.o=(new et).freeze(),this.na="",this.j=!1}function be(){this.nu=new K,this.td=!1,this.C=(new et).freeze(),this.pe=-1,this.o=999,this.re=!1,this.cr=null,this.yi=0,this.j=!1,this.we=(new et).freeze(),this.Al=new et,this.Pt=!0,this.Zt=this.yr=this.bu=this.au=!1}function xx(t,e,n){if(t.isUndoingRedoing)return!1;t.checksTransactionLevel&&1>t.transactionLevel&&Oi("Ending transaction without having started a transaction: "+n);var i=1===t.transactionLevel,a=t.currentTransaction;i&&e&&(t.isInternalTransaction||t.Cb("CommittingTransaction",n,a));var u=0;if(0<t.transactionLevel&&(t.yi--,t.isEnabled)){var h=t.we.count;0<h&&(""===n&&(n=t.we.J(0)),t.we.ea(),t.we.eb(h-1),t.we.freeze()),0<(h=t.Al.count)&&(u=t.Al.J(h-1),t.Al.eb(h-1))}if(i){if(e){if(t.yr=!1,null===a&&""!==n&&(a=t.currentTransaction),t.isEnabled&&null!==a){for(a.isComplete||(a.isComplete=!0,a.name=n),(e=t.history).ea(),i=e.count-1;i>t.historyIndex;i--)null!==(u=e.J(i))&&u.clear(),e.eb(i),t.yr=!0;0<=(i=t.maxHistoryLength)&&(0===i?e.clear():e.count>=i&&(null!==(u=e.J(0))&&u.clear(),e.eb(0),t.pe--)),0===i||0!==e.count&&e.get(e.count-1)===a||(e.add(a),t.pe++),e.freeze()}t.isInternalTransaction||t.Cb("CommittedTransaction",n,a)}else{t.re=!0;try{t.isEnabled&&null!==a&&(a.isComplete=!0,a.undo())}finally{t.isInternalTransaction||t.Cb("RolledBackTransaction",n,a),t.re=!1}null!==a&&a.clear()}return t.cr=null,t.isPendingClear&&t.clear(),t.isPendingClear=!1,t.isPendingUnmodified=!1,!0}if(t.isEnabled&&!e&&null!==a){for(t=u,a=(n=a.changes).count-1;a>=t;a--)null!==(e=n.J(a))&&e.undo(),n.ea(),n.eb(a);n.freeze()}return!1}function Ut(){xn(this),this.F=zd,this.na="",this.td=!0,this.Oc=!1,this.tw=null,this.cz=new Qi,this.ts=-1}function Ee(){Ut.call(this),this.name="ToolManager",this.yc=new et,this.Pc=new et,this.Kd=new et,this.M=this.Ga=850,this.o=new mt(2,2).ca(),this.Wa=5e3,this.Ha=pt,this.C=Li,this.br=this.j=null,this.Vj=-1}function Mx(t,e){t.standardMouseOver(),t.isBeyondDragSize()&&t.standardWaitAfter(t.isActive?t.holdDelay:t.hoverDelay,e.lastInput)}le.className="ChangedEvent",le.Transaction=qr,le.Property=ve,le.Insert=Pt,le.Remove=sn,bn.prototype.toString=function(t){var e="Transaction: "+this.name+" "+this.changes.count.toString()+(this.isComplete?"":", incomplete");if(void 0!==t&&0<t){t=this.changes.count;for(var n=0;n<t;n++){var i=this.changes.J(n);null!==i&&(e+="\n  "+i.toString())}}return e},bn.prototype.clear=function(){var t=this.changes;t.ea();for(var e=t.count-1;0<=e;e--){var n=t.J(e);null!==n&&n.clear()}t.clear(),t.freeze()},bn.prototype.canUndo=function(){return this.isComplete},bn.prototype.undo=function(){if(this.canUndo())for(var t=this.changes.count-1;0<=t;t--){var e=this.changes.J(t);null!==e&&e.undo()}},bn.prototype.canRedo=function(){return this.isComplete},bn.prototype.redo=function(){if(this.canRedo())for(var t=this.changes.count,e=0;e<t;e++){var n=this.changes.J(e);null!==n&&n.redo()}},bn.prototype.Zs=function(){if(this.isComplete){var t=this.changes;t.ea();for(var e=new xt,n=0;n<t.count;n++){var i=t.J(n);if(null!==i&&i.change===ve&&i.object){var a=e.get(i.object);a||(a=new xt,e.set(i.object,a));var u=a.get(i.propertyName);null===u?a.set(i.propertyName,-1):(0<u&&t.Lc(u,null),a.set(i.propertyName,n))}}for(n=e=0;n<t.count;n++)null!==(i=t.J(n))&&(n>e&&t.Lc(e,i),e++);for(;t.length>e;)t.pop();t.freeze()}},Dt.Object.defineProperties(bn.prototype,{changes:{get:function(){return this.o}},name:{get:function(){return this.na},set:function(t){this.na=t}},isComplete:{get:function(){return this.j},set:function(t){this.j=t}}}),bn.prototype.optimize=bn.prototype.Zs,bn.prototype.redo=bn.prototype.redo,bn.prototype.canRedo=bn.prototype.canRedo,bn.prototype.undo=bn.prototype.undo,bn.prototype.canUndo=bn.prototype.canUndo,bn.prototype.clear=bn.prototype.clear,bn.className="Transaction",be.prototype.toString=function(t){var e="UndoManager "+this.historyIndex+"<"+this.history.count+"<="+this.maxHistoryLength;e+="[";for(var n=this.nestedTransactionNames.count,i=0;i<n;i++)0<i&&(e+=" "),e+=this.nestedTransactionNames.J(i);if(e+="]",void 0!==t&&0<t)for(n=this.history.count,i=0;i<n;i++)e+="\n "+this.history.J(i).toString(t-1);return e},be.prototype.clear=function(){var t=this.history;t.ea();for(var e=t.count-1;0<=e;e--){var n=t.J(e);null!==n&&n.clear()}t.clear(),this.pe=-1,t.freeze(),this.re=!1,this.cr=null,this.yi=0,this.we.ea(),this.we.clear(),this.we.freeze(),this.Al.clear(),this.Zt=this.yr=this.bu=this.au=!1},be.prototype.copyProperties=function(t){this.isEnabled=t.isEnabled,this.maxHistoryLength=t.maxHistoryLength,this.checksTransactionLevel=t.checksTransactionLevel},(D=be.prototype).Ax=function(t){this.nu.add(t)},D.xy=function(t){this.nu.remove(t)},D.wa=function(t){if(void 0===t&&(t=""),null===t&&(t=""),this.isUndoingRedoing)return!1;!0===this.Pt&&(this.Pt=!1,this.yi++,this.isInternalTransaction||this.Cb("StartingFirstTransaction",t,this.currentTransaction),0<this.yi&&this.yi--),this.isEnabled&&(this.we.ea(),this.we.add(t),this.we.freeze(),this.Al.add(null===this.currentTransaction?0:this.currentTransaction.changes.count)),this.yi++;var e=1===this.transactionLevel;return e&&(this.isInternalTransaction||this.Cb("StartedTransaction",t,this.currentTransaction)),e},D.Xa=function(t){return void 0===t&&(t=""),xx(this,!0,t)},D.Df=function(){return xx(this,!1,"")},be.prototype.canUndo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToUndo;return!(null===t||!t.canUndo())},be.prototype.undo=function(){if(this.canUndo()){var t=this.transactionToUndo;try{this.re=!0,this.Cb("StartingUndo","Undo",t),this.pe--,t.undo()}catch(e){Oi("undo error: "+e.toString())}finally{this.Cb("FinishedUndo","Undo",t),this.re=!1}}},be.prototype.canRedo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToRedo;return!(null===t||!t.canRedo())},be.prototype.redo=function(){if(this.canRedo()){var t=this.transactionToRedo;try{this.re=!0,this.Cb("StartingRedo","Redo",t),this.pe++,t.redo()}catch(e){Oi("redo error: "+e.toString())}finally{this.Cb("FinishedRedo","Redo",t),this.re=!1}}},be.prototype.Cb=function(t,e,n){void 0===n&&(n=null);var i=new le;for(i.change=qr,i.propertyName=t,i.object=n,i.oldValue=e,t=this.models;t.next();)i.model=e=t.value,e.ws(i)},be.prototype.yv=function(t){if(this.isEnabled&&!this.isUndoingRedoing&&!this.skipsEvent(t)){var e=this.currentTransaction;null===e&&(this.cr=e=new bn);var n=t.copy();(e=e.changes).ea(),e.add(n),e.freeze(),this.checksTransactionLevel&&0>=this.transactionLevel&&!this.Pt&&(null!==(t=t.diagram)&&!1===t.Pi||Oi("Change not within a transaction: "+n.toString()))}},be.prototype.skipsEvent=function(t){if(null===t||0>t.change.value)return!0;if(null===(t=t.object))return!1;if(void 0!==t.layer){if(null!==(t=t.layer)&&t.isTemporary)return!0}else if(t.isTemporary)return!0;return!1},Dt.Object.defineProperties(be.prototype,{models:{get:function(){return this.nu.iterator}},isEnabled:{get:function(){return this.td},set:function(t){this.td=t}},transactionToUndo:{get:function(){return 0<=this.historyIndex&&this.historyIndex<=this.history.count-1?this.history.J(this.historyIndex):null}},transactionToRedo:{get:function(){return this.historyIndex<this.history.count-1?this.history.J(this.historyIndex+1):null}},isUndoingRedoing:{get:function(){return this.re}},history:{get:function(){return this.C}},maxHistoryLength:{get:function(){return this.o},set:function(t){this.o=t}},historyIndex:{get:function(){return this.pe}},currentTransaction:{get:function(){return this.cr}},transactionLevel:{get:function(){return this.yi}},isInTransaction:{get:function(){return 0<this.yi}},checksTransactionLevel:{get:function(){return this.j},set:function(t){this.j=t}},nestedTransactionNames:{get:function(){return this.we}},isPendingClear:{get:function(){return this.au},set:function(t){this.au=t}},isPendingUnmodified:{get:function(){return this.bu},set:function(t){this.bu=t}},isInternalTransaction:{get:function(){return this.Zt},set:function(t){this.Zt=t}},isJustDiscarded:{get:function(){return this.yr}}}),be.prototype.handleChanged=be.prototype.yv,be.prototype.redo=be.prototype.redo,be.prototype.undo=be.prototype.undo,be.prototype.canUndo=be.prototype.canUndo,be.prototype.rollbackTransaction=be.prototype.Df,be.prototype.commitTransaction=be.prototype.Xa,be.prototype.startTransaction=be.prototype.wa,be.prototype.removeModel=be.prototype.xy,be.prototype.addModel=be.prototype.Ax,be.prototype.clear=be.prototype.clear,be.className="UndoManager",Ut.prototype.toString=function(){return""!==this.name?this.name+" Tool":aa(this.constructor)},Ut.prototype.updateAdornments=function(){},Ut.prototype.canStart=function(){return this.isEnabled},Ut.prototype.doStart=function(){},Ut.prototype.doActivate=function(){this.isActive=!0},Ut.prototype.doDeactivate=function(){this.isActive=!1},Ut.prototype.doStop=function(){},Ut.prototype.doCancel=function(){this.transactionResult=null,this.stopTool()},Ut.prototype.stopTool=function(){var t=this.diagram;t.currentTool===this&&(t.currentTool=null,t.currentCursor="")},Ut.prototype.doMouseDown=function(){!this.isActive&&this.canStart()&&this.doActivate()},Ut.prototype.doMouseMove=function(){},Ut.prototype.doMouseUp=function(){this.stopTool()},Ut.prototype.doMouseWheel=function(){},Ut.prototype.canStartMultiTouch=function(){return!0},Ut.prototype.standardPinchZoomStart=function(){var t=this.diagram,e=t.lastInput,n=e.mq(0,N.allocAt(NaN,NaN)),i=e.mq(1,N.allocAt(NaN,NaN));if(n.u()&&i.u()&&(this.doCancel(),t.km("hasGestureZoom"))){t.bx=t.scale;var a=i.x-n.x,u=i.y-n.y;t.mx=Math.sqrt(a*a+u*u),e.bubbles=!1}N.free(n),N.free(i)},Ut.prototype.standardPinchZoomMove=function(){var t=this.diagram,e=t.lastInput,n=e.mq(0,N.allocAt(NaN,NaN)),i=e.mq(1,N.allocAt(NaN,NaN));if(n.u()&&i.u()&&(this.doCancel(),t.km("hasGestureZoom"))){var a=i.x-n.x,u=i.y-n.y;u=Math.sqrt(a*a+u*u)/t.mx,a=new N((Math.min(i.x,n.x)+Math.max(i.x,n.x))/2,(Math.min(i.y,n.y)+Math.max(i.y,n.y))/2);var h=t.commandHandler;if((u*=t.bx)!==t.scale&&h.canResetZoom(u)){var d=t.zoomPoint;t.zoomPoint=a,h.resetZoom(u),t.zoomPoint=d}e.bubbles=!1}N.free(n),N.free(i)},Ut.prototype.doKeyDown=function(){"Esc"===this.diagram.lastInput.key&&this.doCancel()},Ut.prototype.doKeyUp=function(){},Ut.prototype.wa=function(t){return void 0===t&&(t=this.name),this.transactionResult=null,this.diagram.wa(t)},Ut.prototype.stopTransaction=function(){var t=this.diagram;return null===this.transactionResult?t.Df():t.Xa(this.transactionResult)},Ut.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.lastInput,n=t.im(e.documentPoint,!1);if(null!==n){if(Ss?e.meta:e.control){for(t.S("ChangingSelection",t.selection),e=n;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&(e.isSelected=!e.isSelected),t.S("ChangedSelection",t.selection)}else if(e.shift){if(!n.isSelected){for(t.S("ChangingSelection",t.selection),e=n;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&(e.isSelected=!0),t.S("ChangedSelection",t.selection)}}else if(!n.isSelected){for(e=n;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&t.select(e)}}else!e.left||(Ss?e.meta:e.control)||e.shift||t.clearSelection()}},Ut.prototype.standardMouseClick=function(t,e){void 0===t&&(t=null),void 0===e&&(e=function(a){return!a.layer.isTemporary});var n=this.diagram,i=n.lastInput;return t=n.Wb(i.documentPoint,t,e),i.targetObject=t,function wx(t,e,n){if(e.handled=!1,null===t||t.Af()){var i=0;e.left?i=1===e.clickCount?1:2===e.clickCount?2:1:e.right&&1===e.clickCount&&(i=3);var a="ObjectSingleClicked";if(null!==t){switch(i){case 1:a="ObjectSingleClicked";break;case 2:a="ObjectDoubleClicked";break;case 3:a="ObjectContextClicked"}0!==i&&n.S(a,t)}else{switch(i){case 1:a="BackgroundSingleClicked";break;case 2:a="BackgroundDoubleClicked";break;case 3:a="BackgroundContextClicked"}0!==i&&n.S(a)}if(null!==t)for(;null!==t;){switch(n=null,i){case 1:n=t.click;break;case 2:n=t.doubleClick?t.doubleClick:t.click;break;case 3:n=t.contextClick}if(null!==n&&(n(e,t),e.handled))break;t=t.panel}else{switch(t=null,i){case 1:t=n.click;break;case 2:t=n.doubleClick?n.doubleClick:n.click;break;case 3:t=n.contextClick}null!==t&&t(e)}}}(t,i,n),i.handled},Ut.prototype.standardMouseOver=function(){var t=this.diagram,e=t.lastInput;if(!0!==t.animationManager.rb){var n=t.skipsUndoManager;t.skipsUndoManager=!0;var i=t.viewportBounds.$(e.documentPoint)?t.Wb(e.documentPoint,null,null):null;e.targetObject=i;var a=!1;if(i!==t.Tk){var u=t.Tk,h=u;for(t.Tk=i,this.doCurrentObjectChanged(u,i),e.handled=!1;null!==u;){var d=u.mouseLeave;if(null!==d&&(i===u||null!==i&&i.mg(u)||(d(e,u,i),a=!0,e.handled)))break;u=u.panel}for(u=h,e.handled=!1;null!==i&&(null===(h=i.mouseEnter)||!(u===i||null!==u&&u.mg(i)||(h(e,i,u),a=!0,e.handled)));)i=i.panel;i=t.Tk}if(null!==i){for(u=i,h="";null!==u&&""===(h=u.cursor);)u=u.panel;for(t.currentCursor=h,e.handled=!1,u=i;null!==u&&(null===(i=u.mouseOver)||(i(e,u),a=!0,!e.handled));)u=u.panel}else t.currentCursor="",null!==(i=t.mouseOver)&&(i(e),a=!0);a&&t.Fb(),t.skipsUndoManager=n}},Ut.prototype.doCurrentObjectChanged=function(){},Ut.prototype.standardMouseWheel=function(){var t=this.diagram,e=t.lastInput,n=e.delta;if(0!==n&&t.documentBounds.u()){var i=t.commandHandler,a=t.toolManager.mouseWheelBehavior;if(null!==i&&(a===Oe&&!e.shift||a===pt&&e.control))(0<n?i.canIncreaseZoom():i.canDecreaseZoom())&&(a=t.zoomPoint,t.zoomPoint=e.viewPoint,0<n?i.increaseZoom():i.decreaseZoom(),t.zoomPoint=a),e.bubbles=!1;else if(a===Oe&&e.shift||a===pt&&!e.control){i=t.position.copy();var u=0<n?n:-n,h=e.event,d=h.deltaMode;if(a=h.deltaX,h=h.deltaY,(_e||ty)&&(d=1,0<a&&(a=3),0>a&&(a=-3),0<h&&(h=3),0>h&&(h=-3)),void 0===d||void 0===a||void 0===h||0===a&&0===h||e.shift)!e.shift&&t.allowVerticalScroll?t.scroll("pixel",0<n?"up":"down",u=3*u*t.scrollVerticalLineChange):e.shift&&t.allowHorizontalScroll&&t.scroll("pixel",0<n?"left":"right",u=3*u*t.scrollHorizontalLineChange);else{switch(d){case 0:default:n="pixel";break;case 1:n="line";break;case 2:n="page"}0!==a&&t.allowHorizontalScroll&&(0<(a*=t.scrollHorizontalLineChange/16)?t.scroll(n,"left",-a):t.scroll(n,"right",a)),0!==h&&t.allowVerticalScroll&&(0<(h*=t.scrollVerticalLineChange/16)?t.scroll(n,"up",-h):t.scroll(n,"down",h))}t.position.A(i)||(e.bubbles=!1)}}},Ut.prototype.standardWaitAfter=function(t,e){void 0===e&&(e=this.diagram.lastInput),this.cancelWaitAfter();var n=this,i=e.clone(this.cz);this.ts=Pu(function(){n.doWaitAfter(i)},t)},Ut.prototype.cancelWaitAfter=function(){-1!==this.ts&&dt.clearTimeout(this.ts),this.ts=-1},Ut.prototype.doWaitAfter=function(){},Ut.prototype.findToolHandleAt=function(t,e){return null===(t=this.diagram.Wb(t,function(n){for(;null!==n&&!(n.panel instanceof At);)n=n.panel;return n}))?null:t.part.category===e?t:null},Ut.prototype.isBeyondDragSize=function(t,e){var n=this.diagram;void 0===t&&(t=n.firstInput.viewPoint),void 0===e&&(e=n.lastInput.viewPoint);var i=n.toolManager.dragSize,a=i.width;return i=i.height,n.firstInput.isTouchEvent&&(a+=6,i+=6),Math.abs(e.x-t.x)>a||Math.abs(e.y-t.y)>i},Dt.Object.defineProperties(Ut.prototype,{diagram:{get:function(){return this.F},set:function(t){t instanceof j&&(this.F=t)}},name:{get:function(){return this.na},set:function(t){this.na=t}},isEnabled:{get:function(){return this.td},set:function(t){this.td=t}},isActive:{get:function(){return this.Oc},set:function(t){this.Oc=t}},transactionResult:{get:function(){return this.tw},set:function(t){this.tw=t}}}),Ut.prototype.startTransaction=Ut.prototype.wa,Ut.className="Tool",Ft(Ee,Ut),Ee.prototype.initializeStandardTools=function(){},Ee.prototype.updateAdornments=function(t){var e=this.currentToolTip;if(e instanceof At&&this.br===t){var n=e.adornedObject;(null!==t?n.part===t:null===n)?this.showToolTip(e,n):this.hideToolTip()}},Ee.prototype.doMouseDown=function(){var t=this.diagram,e=t.lastInput;if(e.isTouchEvent&&this.gestureBehavior===Fd&&(e.bubbles=!1),e.isMultiTouch){if(this.cancelWaitAfter(),this.gestureBehavior===Ou)return void(e.bubbles=!0);if(this.gestureBehavior===Fd)return;if(t.currentTool.canStartMultiTouch())return void t.currentTool.standardPinchZoomStart()}for(var n=this.mouseDownTools.length,i=0;i<n;i++){var a=this.mouseDownTools.J(i);if(a.diagram=this.diagram,a.canStart())return t.doFocus(),t.currentTool=a,void(t.currentTool===a&&(a.isActive||a.doActivate(),a.doMouseDown()))}1===t.lastInput.button&&(this.mouseWheelBehavior===pt?this.mouseWheelBehavior=Oe:this.mouseWheelBehavior===Oe&&(this.mouseWheelBehavior=pt)),this.doActivate(),this.standardWaitAfter(this.holdDelay,e)},Ee.prototype.doMouseMove=function(){var t=this.diagram,e=t.lastInput;if(e.isMultiTouch){if(this.gestureBehavior===Ou)return void(e.bubbles=!0);if(this.gestureBehavior===Fd)return;if(t.currentTool.canStartMultiTouch())return void t.currentTool.standardPinchZoomMove()}if(this.isActive)for(var n=this.mouseMoveTools.length,i=0;i<n;i++){var a=this.mouseMoveTools.J(i);if(a.diagram=this.diagram,a.canStart())return t.doFocus(),t.currentTool=a,void(t.currentTool===a&&(a.isActive||a.doActivate(),a.doMouseMove()))}Mx(this,t),null===(t=e.event)||"pointermove"!==t.type&&t.cancelable||(e.bubbles=!0)},Ee.prototype.doCurrentObjectChanged=function(t,e){null===(t=this.currentToolTip)||null!==e&&t instanceof At&&(e===t||e.mg(t))||this.hideToolTip()},Ee.prototype.doWaitAfter=function(t){var e=this.diagram;e.Aa&&(this.doMouseHover(),this.isActive||this.doToolTip(),t.isTouchEvent&&!e.lastInput.handled&&((t=t.copy()).button=2,t.buttons=2,e.lastInput=t,e.Pu=!0,e.doMouseUp()))},Ee.prototype.doMouseHover=function(){var t=this.diagram,e=t.lastInput;null===e.targetObject&&(e.targetObject=t.Wb(e.documentPoint,null,null));var n=e.targetObject;if(null!==n)for(e.handled=!1;null!==n&&(null===(t=this.isActive?n.mouseHold:n.mouseHover)||(t(e,n),!e.handled));)n=n.panel;else null!==(n=this.isActive?t.mouseHold:t.mouseHover)&&n(e)},Ee.prototype.doToolTip=function(){var t=this.diagram,e=t.lastInput;if(null===e.targetObject&&(e.targetObject=t.Wb(e.documentPoint,null,null)),null!==(e=e.targetObject)){if(!((t=this.currentToolTip)instanceof At)||e!==t&&!e.mg(t)){for(;null!==e;){if(null!==(t=e.toolTip))return void this.showToolTip(t,e);e=e.panel}this.hideToolTip()}}else null!==(e=t.toolTip)?this.showToolTip(e,null):this.hideToolTip()},Ee.prototype.showToolTip=function(t,e){var n=this.diagram;if(t!==this.currentToolTip&&this.hideToolTip(),t instanceof At){t.layerName="Tool",t.selectable=!1,t.scale=1/n.scale,t.category="ToolTip",null!==t.placeholder&&(t.placeholder.scale=n.scale);var i=t.diagram;null!==i&&i!==n&&i.remove(t),n.add(t),null!==e?t.adornedObject=e:t.data=n.model,t.Sa(),this.positionToolTip(t,e)}else t instanceof mo&&t!==this.currentToolTip&&t.show(e,n,this);if(this.currentToolTip=t,-1!==this.Vj&&(dt.clearTimeout(this.Vj),this.Vj=-1),0<(t=this.toolTipDuration)&&t!==1/0){var a=this;this.Vj=Pu(function(){a.hideToolTip()},t)}},Ee.prototype.positionToolTip=function(t){if(null===t.placeholder){var e=this.diagram,n=e.lastInput.documentPoint.copy(),i=t.measuredBounds,a=e.viewportBounds;e.lastInput.isTouchEvent&&(n.x-=i.width),n.x+i.width>a.right&&(n.x-=i.width+5/e.scale),n.x<a.x&&(n.x=a.x),n.y=n.y+20/e.scale+i.height>a.bottom?n.y-(i.height+5/e.scale):n.y+20/e.scale,n.y<a.y&&(n.y=a.y),t.position=n}},Ee.prototype.hideToolTip=function(){-1!==this.Vj&&(dt.clearTimeout(this.Vj),this.Vj=-1);var t=this.diagram,e=this.currentToolTip;null!==e&&(e instanceof At?(t.remove(e),null!==this.br&&this.br.Cf(e.category),e.data=null,e.adornedObject=null):e instanceof mo&&null!==e.hide&&e.hide(t,this),this.currentToolTip=null)},Ee.prototype.doMouseUp=function(){this.cancelWaitAfter();var t=this.diagram;if(this.isActive)for(var e=this.mouseUpTools.length,n=0;n<e;n++){var i=this.mouseUpTools.J(n);if(i.diagram=this.diagram,i.canStart())return t.doFocus(),t.currentTool=i,void(t.currentTool===i&&(i.isActive||i.doActivate(),i.doMouseUp()))}t.doFocus(),this.doDeactivate()},Ee.prototype.doMouseWheel=function(){this.standardMouseWheel()},Ee.prototype.doKeyDown=function(){var t=this.diagram;null!==t.commandHandler&&t.commandHandler.doKeyDown()},Ee.prototype.doKeyUp=function(){var t=this.diagram;null!==t.commandHandler&&t.commandHandler.doKeyUp()},Ee.prototype.findTool=function(t){for(var e=this.mouseDownTools.length,n=0;n<e;n++){var i=this.mouseDownTools.J(n);if(i.name===t)return i}for(e=this.mouseMoveTools.length,n=0;n<e;n++)if((i=this.mouseMoveTools.J(n)).name===t)return i;for(e=this.mouseUpTools.length,n=0;n<e;n++)if((i=this.mouseUpTools.J(n)).name===t)return i;return null},Ee.prototype.replaceTool=function(t,e){null!==e&&(e.diagram=this.diagram);for(var n=this.mouseDownTools.length,i=0;i<n;i++){var a=this.mouseDownTools.J(i);if(a.name===t)return null!==e?this.mouseDownTools.Lc(i,e):this.mouseDownTools.eb(i),a}for(n=this.mouseMoveTools.length,i=0;i<n;i++)if((a=this.mouseMoveTools.J(i)).name===t)return null!==e?this.mouseMoveTools.Lc(i,e):this.mouseMoveTools.eb(i),a;for(n=this.mouseUpTools.length,i=0;i<n;i++)if((a=this.mouseUpTools.J(i)).name===t)return null!==e?this.mouseUpTools.Lc(i,e):this.mouseUpTools.eb(i),a;return null},Ee.prototype.Za=function(t,e,n){null!==e&&(e.name=t,e.diagram=this.diagram),this.findTool(t)?this.replaceTool(t,e):null!==e&&n.add(e)},Dt.Object.defineProperties(Ee.prototype,{mouseWheelBehavior:{get:function(){return this.Ha},set:function(t){this.Ha=t}},gestureBehavior:{get:function(){return this.C},set:function(t){this.C=t}},currentToolTip:{get:function(){return this.j},set:function(t){this.j=t,this.br=null!==t&&t instanceof At?t.adornedPart:null}},mouseDownTools:{get:function(){return this.yc}},mouseMoveTools:{get:function(){return this.Pc}},mouseUpTools:{get:function(){return this.Kd}},hoverDelay:{get:function(){return this.Ga},set:function(t){this.Ga=t}},holdDelay:{get:function(){return this.M},set:function(t){this.M=t}},dragSize:{get:function(){return this.o},set:function(t){this.o=t.I()}},toolTipDuration:{get:function(){return this.Wa},set:function(t){this.Wa=t}}}),Ee.prototype.replaceStandardTool=Ee.prototype.Za;var Wa,pt=new J(Ee,"WheelScroll",0),Oe=new J(Ee,"WheelZoom",1),RM=new J(Ee,"WheelNone",2),Li=new J(Ee,"GestureZoom",3),Fd=new J(Ee,"GestureCancel",4),Ou=new J(Ee,"GestureNone",5);function ne(){Ut.call(this),this.name="Dragging",this.C=this.Pc=!0,this.o=this.Wa=this.Ga=this.Yf=null,this.Cn=this.Kd=!1,this.Sl=new N(NaN,NaN),this.hs=new N,this.yc=!0,this.Zk=100,this.Eg=[],this.Zi=(new K).freeze(),this.Ha=new Wu,this.qo=null,this.M="copy",this.Ih="",this.Jh="no-drop"}function Ld(t,e){if(t.dragsLink){var n=t.diagram;n.allowRelink&&(n.model.nk()&&1===e.count&&e.first()instanceof X?(t.draggedLink=e.first(),t.draggedLink.canRelinkFrom()&&t.draggedLink.canRelinkTo()&&t.draggedLink.$j(),t.Yf=n.toolManager.findTool("Relinking"),null===t.Yf&&(t.Yf=new ii,t.Yf.diagram=n)):(t.draggedLink=null,t.Yf=null))}}function _x(t){var e=t.diagram,n=e.skipsUndoManager;e.skipsUndoManager=!0,fa(t,e.lastInput,null),e.skipsUndoManager=n,t.Eg.length=0}function Cx(){var t=On;qo(t),Ip(t);var e=t.diagram;t.Sl.u()&&(e.position=t.Sl),e.og()}function Dx(t,e){if(null===t.copiedParts){var n=t.diagram;if((!e||!n.isReadOnly&&!n.isModelReadOnly)&&null!==t.draggedParts){var i=n.undoManager;for(i.isEnabled&&i.isInTransaction?null!==i.currentTransaction&&0<i.currentTransaction.changes.count&&(n.undoManager.Df(),n.wa("Drag")):Ip(t),n.skipsUndoManager=!e,n.partManager.addsToTemporaryLayer=!e,t.startPoint=n.firstInput.documentPoint,e=t.copiesEffectiveCollection?t.draggedParts.Ef():n.selection,e=n.ek(e,n,!0),n=new xt,i=t.draggedParts.iterator;i.next();){var a=i.key;if(a.Jc()&&a.canCopy()){var u=e.H(a);null!==u&&(u.location=a.location,u.Sa(),n.add(u,t.yd(u.location)))}}for(e=e.iterator;e.next();)(i=e.value)instanceof X&&i.canCopy()&&n.add(i,t.yd());t.copiedParts=n,Ld(t,n.Ef()),null!==t.draggedLink&&Ta(n=t.draggedLink,t.startPoint.x-((e=n.routeBounds).x+e.width/2),t.startPoint.y-(e.y+e.height/2)),t.doUpdateCursor(null,!0)}}}function qo(t){var e=t.diagram;if(null!==t.copiedParts){if(e.bt(t.copiedParts.Ef(),!1),t.copiedParts=null,null!==t.draggedParts)for(var n=t.draggedParts.iterator;n.next();)n.key instanceof X&&(n.value.point=new N(0,0));t.doUpdateCursor(null,!0)}e.skipsUndoManager=!1,e.partManager.addsToTemporaryLayer=!1,t.startPoint=e.firstInput.documentPoint}function Vr(t){if(null!==t.draggedLink){if(t.dragsLink&&null!==t.Yf){var e=t.Yf;e.diagram.remove(e.temporaryFromNode),e.diagram.remove(e.temporaryToNode)}t.draggedLink=null,t.Yf=null}}function to(t,e,n){var i=t.diagram,a=t.startPoint,u=N.alloc();u.assign(i.lastInput.documentPoint),t.moveParts(e,u.ge(a),n),N.free(u),!0===i.Fe("temporaryPixelRatio")&&null===i.ti&&30<i.Ex&&(Rl(i),i.Aq())}function Ip(t){if(null!==t.draggedParts){for(var e=t.diagram,n=t.draggedParts.iterator;n.next();){var i=n.key;i.Jc()&&(i.location=n.value.point)}for(n=t.draggedParts.iterator;n.next();)if((i=n.key)instanceof X&&i.suspendsRouting){var a=n.value.point;t.draggedParts.add(i,t.yd()),Ta(i,-a.x,-a.y)}e.ed()}}function Ol(t,e){var n=t.diagram;t.dragsLink&&(null!==t.draggedLink&&(t.draggedLink.fromNode=null,t.draggedLink.toNode=null),Ex(t,!1));var i=t.findDragOverObject(e),a=n.lastInput;a.targetObject=i,t.doUpdateCursor(i,!1);var u=n.skipsUndoManager,h=!1;try{if(n.skipsUndoManager=!0,h=fa(t,a,i),!t.isActive&&null===On)return;var d=null!==i?i.part:null;if(null===d||n.handlesDragDropForTopLevelParts&&d.isTopLevel&&!(d instanceof vt)){var f=n.mouseDragOver;null!==f&&(f(a),h=!0)}if(!t.isActive&&null===On||(t.doDragOver(e,i),!t.isActive&&null===On))return}finally{n.skipsUndoManager=u,h&&n.ed()}t.qo=i,n.isReadOnly||!n.allowMove&&!n.allowCopy||!n.allowHorizontalScroll&&!n.allowVerticalScroll||n.zs(a.viewPoint)}function fa(t,e,n){var i=!1,a=t.Eg.length,u=0<a?t.Eg[0]:null;if(n===u)return!1;e.handled=!1;for(var h=0;h<a;h++){var d=t.Eg[h],f=d.mouseDragLeave;if(null!==f&&(f(e,d,n),i=!0,e.handled))break}if(t.Eg.length=0,!t.isActive&&null===On||null===n)return i;for(e.handled=!1,a=n;null!==a;)t.Eg.push(a),a=Sx(a);for(a=t.Eg.length,n=0;n<a&&(null===(d=(h=t.Eg[n]).mouseDragEnter)||(d(e,h,u),i=!0,!e.handled));n++);return i}function Sx(t){var e=t.panel;return null!==e?e:t instanceof ht&&!(t instanceof vt)&&null!==(t=t.containingGroup)&&t.handlesDragDropForMembers?t:null}function dy(t,e,n){var i=t.Yf;if(null===i)return null;var a=t.diagram.kg(e,i.portGravity,function(g){return i.findValidLinkablePort(g,n)});t=N.alloc();var u=1/0,h=null;for(a=a.iterator;a.next();){var d=a.value;if(null!==d.part){var f=d.da(Wt,t);(f=e.tf(f))<u&&(h=d,u=f)}}return N.free(t),h}function Ex(t,e){var n=t.draggedLink;if(null!==n&&!(2>n.pointsCount)){var i=t.diagram;if(!i.isReadOnly){var a=t.Yf;if(null!==a){var u=null,h=null;null===n.fromNode&&null!==(u=dy(t,n.i(0),!1))&&(h=u.part);var d=null,f=null;null===n.toNode&&null!==(d=dy(t,n.i(n.pointsCount-1),!0))&&(f=d.part),a.isValidLink(h,u,f,d)?e?(n.defaultFromPoint=n.i(0),n.defaultToPoint=n.i(n.pointsCount-1),n.suspendsRouting=!1,n.fromNode=h,null!==u&&(n.fromPortId=u.portId),n.toNode=f,null!==d&&(n.toPortId=d.portId),n.fromPort!==i.sy&&i.S("LinkRelinked",n,i.sy),n.toPort!==i.ty&&i.S("LinkRelinked",n,i.ty)):ri(a,h,u,f,d):ri(a,null,null,null,null)}}}}function Tx(t,e){var n=t.diagram;t.dragsLink&&Ex(t,!0),_x(t);var i=t.findDragOverObject(e),a=n.lastInput;if(a.targetObject=i,null!==i){a.handled=!1;for(var u=i;null!==u;){var h=u.mouseDrop;if(null!==h&&(h(a,u),a.handled))break;fy(t,a,u),u=Sx(u)}}else null!==(u=n.mouseDrop)&&u(a);if(t.isActive||null!==On){for(a=(t.copiedParts||t.draggedParts).iterator;a.next();)(u=a.key)instanceof Q&&u.linksConnected.each(function(d){d.suspendsRouting=!1});if(t.doDropOnto(e,i),t.isActive||null!==On){for(t=B.alloc(),e=n.selection.iterator;e.next();)(i=e.value)instanceof Q&&py(n,i,t);B.free(t)}}}function fy(t,e,n){n=n.part,!(t=t.diagram).handlesDragDropForTopLevelParts||!n.isTopLevel||n instanceof vt||null!==(n=t.mouseDrop)&&n(e)}function py(t,e,n){var i=!1;if(e.getAvoidableRect(n),t.viewportBounds.De(n)&&(i=!0),0!==(t=t.sv(n,function(a){return a.part},function(a){return a instanceof X},!0,function(a){return a instanceof X},i)).count)for(t=t.iterator;t.next();)!(n=t.value).Fd(e)&&n.isAvoiding&&n.Ua()}function bp(t,e,n,i){if(null===t.copiedParts){var a=t.diagram;if(!a.isReadOnly&&!a.isModelReadOnly){a.skipsUndoManager=!n,a.partManager.addsToTemporaryLayer=!n,t.startPoint=i.documentPoint,n=a.ek(e,a,!0);var u=B.alloc();a=i=1/0;for(var h=-1/0,d=-1/0,f=e.iterator;f.next();){var g=f.value;if(g.isVisible()){var m=g.location;g=m.x,m=m.y,isNaN(g)||isNaN(m)||(g<i&&(i=g),m<a&&(a=m),g>h&&(h=g),m>d&&(d=m))}}for(i===1/0?u.h(0,0,0,0):u.h(i,a,h-i,d-a),i=u.x+u.width/2,a=u.y+u.height/2,B.free(u),u=t.hs,h=new xt,d=N.alloc(),f=e.iterator;f.next();)(g=f.value)instanceof X&&g.canCopy()&&null!==(m=n.H(g))&&(m.points=g.points,Ta(m,u.x-i,u.y-a),m.suspendsRouting=!0,h.add(m,t.yd()));for(e=e.iterator;e.next();)(g=e.value).Jc()&&g.canCopy()&&null!==(f=n.H(g))&&(d.h(u.x-(i-(g=g.location).x),u.y-(a-g.y)),f.location=d,f.Sa(),h.add(f,t.yd(d)));N.free(d),t.copiedParts=h,Ld(t,h.Ef()),null!==t.draggedLink&&Ta(n=t.draggedLink,t.startPoint.x-((e=n.routeBounds).x+e.width/2),t.startPoint.y-(e.y+e.height/2)),t.doUpdateCursor(null,!0)}}}Ee.className="ToolManager",Ee.WheelScroll=pt,Ee.WheelZoom=Oe,Ee.WheelNone=RM,Ee.GestureZoom=Li,Ee.GestureCancel=Fd,Ee.GestureNone=Ou,Ft(ne,Ut),ne.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly&&!t.allowDragOut||!t.allowMove&&!t.allowCopy&&!t.allowDragOut||!t.allowSelect)return!1;var e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.isTouchEvent&&e.timestamp-t.firstInput.timestamp<this.Zk))&&null!==this.findDraggablePart()},ne.prototype.findDraggablePart=function(){var t=this.diagram;if(null===(t=t.im(t.firstInput.documentPoint,!1)))return null;for(;null!==t&&!t.canSelect();)t=t.containingGroup;return null!==t&&(t.canMove()||t.canCopy())?t:null},ne.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.im(t.firstInput.documentPoint,!1);if(null!==e){for(;null!==e&&!e.canSelect();)e=e.containingGroup;this.currentPart=e,null===this.currentPart||this.currentPart.isSelected||(t.S("ChangingSelection",t.selection),e=t.lastInput,(Ss?e.meta:e.control)||e.shift||t.clearSelection(!0),this.currentPart.isSelected=!0,t.S("ChangedSelection",t.selection))}}},ne.prototype.doActivate=function(){var t=this.diagram;this.qo=null,null===this.currentPart&&this.standardMouseSelect();var e=this.currentPart;null!==e&&(e.canMove()||e.canCopy())&&(t.ev(!0),On=null,this.isActive=!0,this.Sl.set(t.position),Ld(this,t.selection),this.Eg.length=0,t.animationManager.nc(),this.draggedParts=this.computeEffectiveCollection(t.selection,this.dragOptions),t.ht=!0,!0===t.Fe("temporaryPixelRatio")&&30<t.Ex&&Rl(t),$p(t,this.draggedParts),this.wa("Drag"),this.startPoint=t.firstInput.documentPoint,t.isMouseCaptured=!0,t.allowDragOut&&(this.isDragOutStarted=!0,this.Cn=!1,On=this,Ka=this.diagram,this.doSimulatedDragOut()))},ne.prototype.computeEffectiveCollection=function(t,e){return this.diagram.commandHandler.computeEffectiveCollection(t,e)},ne.prototype.yd=function(t){return new hr(void 0===t?ha:this.isGridSnapEnabled?new N(Math.round(1e3*t.x)/1e3,Math.round(1e3*t.y)/1e3):t.copy())},ne.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;if(t.ev(!1),t.og(),_x(this),zu(t,this.draggedParts),this.draggedParts=this.currentPart=this.qo=null,this.Cn=this.isDragOutStarted=!1,0<Wa.count){for(var e=Wa,n=e.length,i=0;i<n;i++){var a=e.J(i);Vr(a),qo(a),_x(a),a.diagram.og()}e.clear()}Vr(this),this.Sl.h(NaN,NaN),null!==Ka&&(Ka.currentCursor=""),On=Ka=null,qo(this),t.isMouseCaptured=!1,t.currentCursor="",t.ht=!1,this.stopTransaction(),jl(t,!0)},ne.prototype.stopTransaction=function(){var t=this.diagram,e=Ut.prototype.stopTransaction.call(this);return e&&null!==t.undoManager.transactionToUndo&&t.undoManager.transactionToUndo.Zs(),e},ne.prototype.doCancel=function(){qo(this),Ip(this);var t=this.diagram;this.Sl.u()&&(t.position=this.Sl),this.stopTool()},ne.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput;this.isActive&&("Esc"===e.key?this.doCancel():e.key!==t.previousInput.key&&this.doMouseMove())},ne.prototype.doKeyUp=function(){this.isActive&&this.doMouseMove()},ne.prototype.moveParts=function(t,e,n){void 0===n&&(n=!1);var i=this.diagram;null!==i&&Gu(i,t,e,this.dragOptions,n)},ne.prototype.findDragOverObject=function(t){var e=this;return Hx(this.diagram,t,null,function(n){return!(n=null===n||!!(null===(n=n.part)||n instanceof At||n.layer.isTemporary||e.draggedParts&&e.draggedParts.contains(n)||e.copiedParts&&e.copiedParts.contains(n)))})},ne.prototype.doUpdateCursor=function(t,e){var n=this.diagram;(e||this.qo!==t)&&(!this.diagram.currentTool.isActive||this.mayCopy()?n.currentCursor=this.copyCursor:this.mayMove()?n.currentCursor=this.moveCursor:this.mayDragOut()&&(n.currentCursor=this.nodropCursor))},ne.prototype.doDragOver=function(){},ne.prototype.doDropOnto=function(){},ne.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;this.simulatedMouseMove(e.event,e.documentPoint,e.targetDiagram)||null===this.currentPart||null===this.draggedParts||(this.mayCopy()?(Dx(this,!1),$p(t,this.copiedParts),to(this,this.copiedParts,!1),zu(t,this.copiedParts)):this.mayMove()?(qo(this),to(this,this.draggedParts,!0)):this.mayDragOut()?(Dx(this,!1),to(this,this.copiedParts,!1)):qo(this),Ol(this,t.lastInput.documentPoint))}},ne.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;if(!this.simulatedMouseUp(e.event,e.documentPoint,e.targetDiagram)){e=!1;var n=this.mayCopy();if(n&&null!==this.copiedParts?(qo(this),Dx(this,!0),$p(t,this.copiedParts),to(this,this.copiedParts,!1),zu(t,this.copiedParts),null!==this.copiedParts&&(t.S("ChangingSelection",t.selection),t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(a){a.isSelected=!0}))):(e=!0,qo(this),this.mayMove()&&(to(this,this.draggedParts,!0),Ol(this,t.lastInput.documentPoint))),this.Cn=!0,Tx(this,t.lastInput.documentPoint),this.isActive){var i=n?this.copiedParts.Ef():this.draggedParts.Ef();this.copiedParts=null,e&&function kx(t){if(null!==t.draggedParts)for(var e=t.draggedParts.iterator;e.next();){var n=e.key;n instanceof Q&&(null===(n=n.containingGroup)||null===n.placeholder||t.draggedParts.contains(n)||n.placeholder.s())}}(this),t.Pa(),zu(t,this.draggedParts),this.transactionResult=n?"Copy":"Move",t.S(n?"SelectionCopied":"SelectionMoved",i)}this.stopTool(),n&&t.S("ChangedSelection",t.selection)}}},ne.prototype.simulatedMouseMove=function(t,e,n){if(null===On)return!1;var i=On.diagram;n instanceof j||(n=null);var a=Ka;return n!==a&&(null!==a&&a!==i&&(a.og(),On.isDragOutStarted=!1,null!==(a=a.toolManager.findTool("Dragging"))&&a.doSimulatedDragLeave()),Ka=n,null!==n&&n!==i&&(Cx(),null!==(a=n.toolManager.findTool("Dragging"))&&(Wa.contains(a)||Wa.add(a),a.doSimulatedDragEnter())),this.doUpdateCursor(null,!0)),!(null===n||n===i||!n.allowDrop||n.isReadOnly||!n.allowInsert||(null!==(i=n.toolManager.findTool("Dragging"))&&(null!==t&&(void 0!==t.targetTouches&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=n.getMouse(t)),n.lastInput.documentPoint=e,n.lastInput.viewPoint=n.Iq(e),n.lastInput.down=!1,n.lastInput.up=!1,i.doSimulatedDragOver()),0))},ne.prototype.simulatedMouseUp=function(t,e,n){if(null===On)return!1;var i=Ka,a=On.diagram;if(null===n)return On.doCancel(),!0;if(n!==i){var u=i.toolManager.findTool("Dragging");if(null!==i&&i!==a&&null!==u)return i.og(),On.isDragOutStarted=!1,u.doSimulatedDragLeave(),!1;Ka=n,null!==(i=n.toolManager.findTool("Dragging"))&&(Cx(),Wa.contains(i)||Wa.add(i),i.doSimulatedDragEnter())}return n!==this.diagram&&(null!==t?(void 0!==t.targetTouches&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=n.getMouse(t)):null===e&&(e=new N),n.lastInput.documentPoint=e,n.lastInput.viewPoint=n.Iq(e),n.lastInput.down=!1,n.lastInput.up=!0,null!==(t=n.toolManager.findTool("Dragging"))&&t.doSimulatedDrop(),null!==(t=On)&&(n=t.mayCopy(),t.transactionResult=n?"Copy":"Move",t.stopTool()),!0)},ne.prototype.mayCopy=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowCopy||(Ss?!t.lastInput.alt:!t.lastInput.control))return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canCopy())},ne.prototype.mayDragOut=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(!t.allowDragOut||!t.allowCopy||t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canCopy())},ne.prototype.mayMove=function(){var t=this.diagram;if(t.isReadOnly||!t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canMove())return!0;return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canMove())},ne.prototype.computeBorder=function(t,e,n){return this.Cn||null===this.draggedParts||this.draggedParts.contains(t)?null:n.assign(e)},ne.prototype.eA=function(){return On},ne.prototype.mayDragIn=function(){var t=this.diagram;return!(!t.allowDrop||t.isReadOnly||t.isModelReadOnly||!t.allowInsert)&&!(null===On||On.diagram.model.dataFormat!==t.model.dataFormat)},ne.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var t=this.diagram;t.animationManager.nc(),Is(t),t.animationManager.nc(),null!==(t=On)&&(t.diagram.ht=!1),this.doUpdateCursor(null,!0)}},ne.prototype.doSimulatedDragLeave=function(){null!==On&&On.doSimulatedDragOut(),this.doCancel()},ne.prototype.doSimulatedDragOver=function(){var t=this.diagram;t.animationManager.dn=!0;var e=On;if(null!==e&&null!==e.draggedParts){if(!this.mayDragIn())return;bp(this,e.draggedParts.Ef(),!1,t.firstInput),to(this,this.copiedParts,!1),Ol(this,t.lastInput.documentPoint)}t.animationManager.dn=!1},ne.prototype.doSimulatedDrop=function(){var t=this.diagram,e=On;if(null!==e){var n=e.diagram;if(e.Cn=!0,qo(this),!this.mayDragIn())return;t.animationManager.dn=!0,t.S("ChangingSelection",t.selection),this.wa("Drop"),bp(this,e.draggedParts.Ef(),!0,t.lastInput),to(this,this.copiedParts,!1),null!==this.copiedParts&&(t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(i){i.isSelected=!0})),Tx(this,t.lastInput.documentPoint),t.Pa(),e=t.selection,null!==this.copiedParts?this.transactionResult="ExternalCopy":e=new K,this.copiedParts=null,t.doFocus(),t.S("ExternalObjectsDropped",e,n),this.stopTransaction(),t.S("ChangedSelection",t.selection)}t.animationManager.dn=!1},ne.prototype.doSimulatedDragOut=function(){var t=this.diagram;t.ht=!1,t.currentCursor=this.mayCopy()||this.mayMove()?"":this.nodropCursor,this.qo=null},ne.prototype.computeMove=function(t,e,n,i){return null!==(n=this.diagram)?n.computeMove(t,e,this.dragOptions,i):new N},Dt.Object.defineProperties(ne.prototype,{isCopyEnabled:{get:function(){return this.Pc},set:function(t){this.Pc=t}},copiesEffectiveCollection:{get:function(){return this.C},set:function(t){this.C=t}},dragOptions:{get:function(){return this.Ha},set:function(t){this.Ha=t}},isGridSnapEnabled:{get:function(){return this.dragOptions.isGridSnapEnabled},set:function(t){this.dragOptions.isGridSnapEnabled=t}},isComplexRoutingRealtime:{get:function(){return this.yc},set:function(t){this.yc=t}},isGridSnapRealtime:{get:function(){return this.dragOptions.isGridSnapRealtime},set:function(t){this.dragOptions.isGridSnapRealtime=t}},gridSnapCellSize:{get:function(){return this.dragOptions.gridSnapCellSize},set:function(t){this.dragOptions.gridSnapCellSize.A(t)||(t=t.I(),this.dragOptions.gridSnapCellSize=t)}},gridSnapCellSpot:{get:function(){return this.dragOptions.gridSnapCellSpot},set:function(t){this.dragOptions.gridSnapCellSpot.A(t)||(t=t.I(),this.dragOptions.gridSnapCellSpot=t)}},gridSnapOrigin:{get:function(){return this.dragOptions.gridSnapOrigin},set:function(t){this.dragOptions.gridSnapOrigin.A(t)||(t=t.I(),this.dragOptions.gridSnapOrigin=t)}},dragsLink:{get:function(){return this.dragOptions.dragsLink},set:function(t){this.dragOptions.dragsLink=t}},dragsTree:{get:function(){return this.dragOptions.dragsTree},set:function(t){this.dragOptions.dragsTree=t}},copyCursor:{get:function(){return this.M},set:function(t){this.M=t}},moveCursor:{get:function(){return this.Ih},set:function(t){this.Ih=t}},nodropCursor:{get:function(){return this.Jh},set:function(t){this.Jh=t}},currentPart:{get:function(){return this.Ga},set:function(t){this.Ga=t}},copiedParts:{get:function(){return this.o},set:function(t){this.o=t}},draggedParts:{get:function(){return this.Wa},set:function(t){this.Wa=t}},draggingParts:{get:function(){return null!==this.copiedParts?this.copiedParts.Ef():null!==this.draggedParts?this.draggedParts.Ef():this.Zi}},draggedLink:{get:function(){return this.diagram.draggedLink},set:function(t){this.diagram.draggedLink=t}},isDragOutStarted:{get:function(){return this.Kd},set:function(t){this.Kd=t}},startPoint:{get:function(){return this.hs},set:function(t){this.hs.A(t)||this.hs.assign(t)}},delay:{get:function(){return this.Zk},set:function(t){this.Zk=t}}}),ne.prototype.getDraggingSource=ne.prototype.eA;var On=null,Ka=null;function Sn(){Ut.call(this),this.Jh=100,this.Ha=!1,this.Sh="pointer";var t=new X,e=new wt;e.isPanelMain=!0,e.stroke="blue",t.add(e),(e=new wt).toArrow="Standard",e.fill="blue",e.stroke="blue",t.add(e),t.layerName="Tool",this.rw=t,t=new Q,(e=new wt).portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=Pl,t.add(e),t.selectable=!1,t.layerName="Tool",this.Tm=t,this.j=e,t=new Q,(e=new wt).portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=Pl,t.add(e),t.selectable=!1,t.layerName="Tool",this.sw=t,this.o=e,this.Ih=this.Kd=this.yc=this.Wa=this.Pc=null,this.Ga=!0,this.My=new xt,this.Zi=this.ii=this.Sm=null}function Op(t,e,n,i){if(e===n)return!0;var a=e.fromNode;return!(null===a||!a.isLinkLabel||(i.add(a),!Op(t,a.labeledLink,n,i)))||!(null===(e=e.toNode)||!e.isLinkLabel||(i.add(e),!Op(t,e.labeledLink,n,i)))}function Qh(t,e,n,i,a){if(e===n)return!0;if(null===e||null===n)return!1;for(var u=e.linksConnected;u.next();){var h=u.value;if(h!==i&&(!a||h.isTreeLink)&&h.toNode===e&&(h=h.fromNode)!==e&&Qh(t,h,n,i,a))return!0}return!1}function gy(t,e,n,i,a){if(n===i)return!0;if(null===n||null===i||e.contains(n))return!1;e.add(n);for(var u=n.linksConnected;u.next();){var h=u.value;if(h!==a&&h.toNode===n&&(h=h.fromNode)!==n&&gy(t,e,h,i,a))return!0}return!1}function my(t,e,n,i,a){if(n===i)return!0;if(null===n||null===i||e.contains(n))return!1;e.add(n);for(var u=n.linksConnected;u.next();){var h=u.value;if(h!==a){var d=h.fromNode;if(h=h.toNode,(d=d===n?h:d)!==n&&my(t,e,d,i,a))return!0}}return!1}function ni(){Sn.call(this),this.name="Linking",this.M={},this.C=null,this.K=Fp,this.Kh=null}ne.className="DraggingTool",Wa=new et,co("draggingTool",function(){return this.findTool("Dragging")},function(t){this.Za("Dragging",t,this.mouseMoveTools)}),Ee.prototype.doCancel=function(){null!==On&&On.doCancel(),Ut.prototype.doCancel.call(this)},Ft(Sn,Ut),Sn.prototype.doStop=function(){this.diagram.og(),this.originalToPort=this.originalToNode=this.originalFromPort=this.originalFromNode=this.originalLink=null,this.validPortsCache.clear(),this.targetPort=null},Sn.prototype.copyPortProperties=function(t,e,n,i,a){if(null!==t&&null!==e&&null!==n&&null!==i){var u=e.wf(),h=mt.alloc();h.width=e.naturalBounds.width*u,h.height=e.naturalBounds.height*u,i.desiredSize=h,mt.free(h),a?(i.toSpot=e.toSpot,i.toEndSegmentLength=e.toEndSegmentLength):(i.fromSpot=e.fromSpot,i.fromEndSegmentLength=e.fromEndSegmentLength),n.locationSpot=Wt,u=N.alloc(),n.location=e.da(Wt,u),N.free(u),i.angle=e.Li(),null!==this.portTargeted&&this.portTargeted(t,e,n,i,a)}},Sn.prototype.setNoTargetPortProperties=function(t,e,n){null!==e&&(e.desiredSize=Pl,e.fromSpot=An,e.toSpot=An),null!==t&&(t.location=this.diagram.lastInput.documentPoint),null!==this.portTargeted&&this.portTargeted(null,null,t,e,n)},Sn.prototype.doMouseDown=function(){this.isActive&&this.doMouseMove()},Sn.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram;if(this.targetPort=this.findTargetPort(this.isForwards),null!==this.targetPort&&this.targetPort.part instanceof Q){var e=this.targetPort.part;this.isForwards?this.copyPortProperties(e,this.targetPort,this.temporaryToNode,this.temporaryToPort,!0):this.copyPortProperties(e,this.targetPort,this.temporaryFromNode,this.temporaryFromPort,!1)}else this.isForwards?this.setNoTargetPortProperties(this.temporaryToNode,this.temporaryToPort,!0):this.setNoTargetPortProperties(this.temporaryFromNode,this.temporaryFromPort,!1);(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.zs(t.lastInput.viewPoint)}},Sn.prototype.findValidLinkablePort=function(t,e){if(null===t)return null;var n=t.part;if(!(n instanceof Q))return null;for(;null!==t;){var i=e?t.toLinkable:t.fromLinkable;if(!0===i&&(null!==t.portId||t instanceof Q)&&(e?this.isValidTo(n,t):this.isValidFrom(n,t)))return t;if(!1===i)break;t=t.panel}return null},Sn.prototype.findTargetPort=function(t){var e=this.diagram,n=e.lastInput.documentPoint,i=this.portGravity;0>=i&&(i=.1);var a=this,u=e.kg(n,i,function(y){return a.findValidLinkablePort(y,t)},null,!0);for(i=1/0,e=null,u=u.iterator;u.next();){var h=u.value,d=h.part;if(d instanceof Q){var f=h.da(Wt,N.alloc()),g=n.x-f.x,m=n.y-f.y;N.free(f),(f=g*g+m*m)<i&&(null!==(g=this.validPortsCache.H(h))?g&&(e=h,i=f):t&&this.isValidLink(this.originalFromNode,this.originalFromPort,d,h)||!t&&this.isValidLink(d,h,this.originalToNode,this.originalToPort)?(this.validPortsCache.add(h,!0),e=h,i=f):this.validPortsCache.add(h,!1))}}return null!==e&&(n=e.part)instanceof Q&&(null===n.layer||n.layer.allowLink)?e:null},Sn.prototype.isValidFrom=function(t,e){if(null===t||null===e)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(null!==t.layer&&!t.layer.allowLink||!0!==e.fromLinkable))return!1;var n=e.fromMaxLinks;if(1/0>n){if(null!==this.originalLink&&t===this.originalFromNode&&e===this.originalFromPort)return!0;if(null===(e=e.portId)&&(e=""),t.iq(e).count>=n)return!1}return!0},Sn.prototype.isValidTo=function(t,e){if(null===t||null===e)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(null!==t.layer&&!t.layer.allowLink||!0!==e.toLinkable))return!1;var n=e.toMaxLinks;if(1/0>n){if(null!==this.originalLink&&t===this.originalToNode&&e===this.originalToPort)return!0;if(null===(e=e.portId)&&(e=""),t.Dd(e).count>=n)return!1}return!0},Sn.prototype.isInSameNode=function(t,e){return null!==t&&null!==e&&(t===e||(e=e.part,null!==(t=t.part)&&t===e))},Sn.prototype.isLinked=function(t,e){if(null===t||null===e)return!1;var n=t.part;if(!(n instanceof Q))return!1;null===(t=t.portId)&&(t="");var i=e.part;if(!(i instanceof Q))return!1;for(null===(e=e.portId)&&(e=""),e=i.Dd(e);e.next();)if((i=e.value).fromNode===n&&i.fromPortId===t)return!0;return!1},Sn.prototype.isValidLink=function(t,e,n,i){if(!this.isValidFrom(t,e)||!this.isValidTo(n,i)||!(null===e||null===i||(e.fromLinkableSelfNode&&i.toLinkableSelfNode||!this.isInSameNode(e,i))&&(e.fromLinkableDuplicates&&i.toLinkableDuplicates||!this.isLinked(e,i)))||null!==this.originalLink&&(null!==t&&this.isLabelDependentOnLink(t,this.originalLink)||null!==n&&this.isLabelDependentOnLink(n,this.originalLink))||null!==t&&null!==n&&(null===t.data&&null!==n.data||null!==t.data&&null===n.data)||!this.isValidCycle(t,n,this.originalLink))return!1;if(null!==t){var a=t.linkValidation;if(null!==a&&!a(t,e,n,i,this.originalLink))return!1}return!(null!==n&&(a=n.linkValidation,null!==a&&!a(t,e,n,i,this.originalLink)))&&(null===(a=this.linkValidation)||a(t,e,n,i,this.originalLink))},Sn.prototype.isLabelDependentOnLink=function(t,e){if(null===t)return!1;var n=t.labeledLink;if(null===n)return!1;if(n===e)return!0;var i=new K;return i.add(t),Op(this,n,e,i)},Sn.prototype.isValidCycle=function(t,e,n){if(void 0===n&&(n=null),null===t||null===e)return this.isUnconnectedLinkValid;var i=this.diagram.validCycle;if(i!==Fy){if(i===bs){if(null!==(i=n||this.temporaryLink)&&!i.isTreeLink)return!0;for(i=e.linksConnected;i.next();){var a=i.value;if(a!==n&&a.isTreeLink&&a.toNode===e)return!1}return!Qh(this,t,e,n,!0)}if(i===Ly){if(null!==(i=n||this.temporaryLink)&&!i.isTreeLink)return!0;for(i=t.linksConnected;i.next();)if((a=i.value)!==n&&a.isTreeLink&&a.fromNode===t)return!1;return!Qh(this,t,e,n,!0)}if(i===Kx)return t===e?t=!0:((i=new K).add(e),t=gy(this,i,t,e,n)),!t;if(i===Zx)return!Qh(this,t,e,n,!1);if(i===vo)return t===e?t=!0:((i=new K).add(e),t=my(this,i,t,e,n)),!t}return!0},Dt.Object.defineProperties(Sn.prototype,{portGravity:{get:function(){return this.Jh},set:function(t){0<=t&&(this.Jh=t)}},isUnconnectedLinkValid:{get:function(){return this.Ha},set:function(t){this.Ha=t}},linkingCursor:{get:function(){return this.Sh},set:function(t){this.Sh=t}},temporaryLink:{get:function(){return this.rw},set:function(t){this.rw=t}},temporaryFromNode:{get:function(){return this.Tm},set:function(t){(this.Tm=t)&&(this.j=t.port)}},temporaryFromPort:{get:function(){return this.j},set:function(t){if(null!==this.j){var e=this.j.panel;if(null!==e){var n=e.T.indexOf(this.j);e.eb(n),e.ub(n,t)}}this.j=t}},temporaryToNode:{get:function(){return this.sw},set:function(t){(this.sw=t)&&(this.o=t.port)}},temporaryToPort:{get:function(){return this.o},set:function(t){if(null!==this.o){var e=this.o.panel;if(null!==e){var n=e.T.indexOf(this.o);e.eb(n),e.ub(n,t)}}this.o=t}},originalLink:{get:function(){return this.Pc},set:function(t){this.Pc=t}},originalFromNode:{get:function(){return this.Wa},set:function(t){this.Wa=t}},originalFromPort:{get:function(){return this.yc},set:function(t){this.yc=t}},originalToNode:{get:function(){return this.Kd},set:function(t){this.Kd=t}},originalToPort:{get:function(){return this.Ih},set:function(t){this.Ih=t}},isForwards:{get:function(){return this.Ga},set:function(t){this.Ga=t}},validPortsCache:{get:function(){return this.My}},targetPort:{get:function(){return this.Sm},set:function(t){this.Sm=t}},linkValidation:{get:function(){return this.ii},set:function(t){this.ii=t}},portTargeted:{get:function(){return this.Zi},set:function(t){this.Zi=t}}}),Sn.className="LinkingBaseTool",Ft(ni,Sn),ni.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowLink||!t.model.Ps()||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())&&null!==this.findLinkablePort()},ni.prototype.findLinkablePort=function(){var t=this.diagram,e=this.startObject;if(null===e&&(e=t.Wb(t.firstInput.documentPoint,null,null)),null===e||!((t=e.part)instanceof Q))return null;var n=this.direction;if(n===Fp||n===Nx){var i=this.findValidLinkablePort(e,!1);if(null!==i||this.startObject===t&&this.findValidLinkablePort(i=t.port,!1))return this.isForwards=!0,i}return n!==Fp&&n!==Br||!(null!==(e=this.findValidLinkablePort(e,!0))||this.startObject===t&&this.findValidLinkablePort(e=t.port,!0))?null:(this.isForwards=!1,e)},ni.prototype.doActivate=function(){var t=this.diagram,e=this.findLinkablePort();null===e?this.stopTool():(this.wa(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.isForwards?(null===this.temporaryToNode||this.temporaryToNode.location.u()||(this.temporaryToNode.location=t.lastInput.documentPoint),this.originalFromPort=e,(e=this.originalFromPort.part)instanceof Q&&(this.originalFromNode=e),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1)):(null===this.temporaryFromNode||this.temporaryFromNode.location.u()||(this.temporaryFromNode.location=t.lastInput.documentPoint),this.originalToPort=e,(e=this.originalToPort.part)instanceof Q&&(this.originalToNode=e),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0)),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),null!==this.temporaryLink&&(null!==this.temporaryFromNode&&(this.temporaryLink.fromNode=this.temporaryFromNode),null!==this.temporaryToNode&&(this.temporaryLink.toNode=this.temporaryToNode),this.temporaryLink.isTreeLink=this.isNewTreeLink(),this.temporaryLink.Ua(),t.add(this.temporaryLink)),this.isActive=!0)},ni.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.stopTransaction()},ni.prototype.doStop=function(){Sn.prototype.doStop.call(this),this.startObject=null},ni.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=this.transactionResult=null,n=null,i=null,a=null,u=null;try{var h=this.targetPort=this.findTargetPort(this.isForwards);if(null!==h){var d=h.part;d instanceof Q&&(this.isForwards?(null!==this.originalFromNode&&(e=this.originalFromNode,n=this.originalFromPort),i=d,a=h):(e=d,n=h,null!==this.originalToNode&&(i=this.originalToNode,a=this.originalToPort)))}else this.isForwards?null!==this.originalFromNode&&this.isUnconnectedLinkValid&&(e=this.originalFromNode,n=this.originalFromPort):null!==this.originalToNode&&this.isUnconnectedLinkValid&&(i=this.originalToNode,a=this.originalToPort);null!==e||null!==i?null!==(u=this.insertLink(e,n,i,a))?(null===h&&(this.isForwards?u.defaultToPoint=t.lastInput.documentPoint:u.defaultFromPoint=t.lastInput.documentPoint),t.allowSelect&&(t.S("ChangingSelection",t.selection),t.clearSelection(!0),u.isSelected=!0),this.transactionResult=this.name,t.S("LinkDrawn",u)):this.doNoLink(e,n,i,a):this.isForwards?this.doNoLink(this.originalFromNode,this.originalFromPort,null,null):this.doNoLink(null,null,this.originalToNode,this.originalToPort)}finally{this.stopTool(),u&&t.allowSelect&&t.S("ChangedSelection",t.selection)}}},ni.prototype.isNewTreeLink=function(){var t=this.archetypeLinkData;if(null===t)return!0;if(t instanceof X)return t.isTreeLink;var e=this.diagram;return null===e||(t=e.partManager.getLinkCategoryForData(t),null===(e=e.partManager.findLinkTemplateForCategory(t))||e.isTreeLink)},ni.prototype.insertLink=function(t,e,n,i){return this.diagram.partManager.insertLink(t,e,n,i)},ni.prototype.doNoLink=function(){},Dt.Object.defineProperties(ni.prototype,{archetypeLinkData:{get:function(){return this.M},set:function(t){this.M=t}},archetypeLabelNodeData:{get:function(){return this.C},set:function(t){this.C=t}},direction:{get:function(){return this.K},set:function(t){this.K=t}},startObject:{get:function(){return this.Kh},set:function(t){this.Kh=t}}});var Fp=new J(ni,"Either",0),Nx=new J(ni,"ForwardsOnly",0),Br=new J(ni,"BackwardsOnly",0);function ii(){Sn.call(this),this.name="Relinking";var t=new wt;t.figure="Diamond",t.desiredSize=Ao,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=0,this.M=t,(t=new wt).figure="Diamond",t.desiredSize=Ao,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=-1,this.Kh=t,this.C=null,this.hx=new B}function ri(t,e,n,i,a){null!==e?(t.copyPortProperties(e,n,t.temporaryFromNode,t.temporaryFromPort,!1),t.diagram.add(t.temporaryFromNode)):t.diagram.remove(t.temporaryFromNode),null!==i?(t.copyPortProperties(i,a,t.temporaryToNode,t.temporaryToPort,!0),t.diagram.add(t.temporaryToNode)):t.diagram.remove(t.temporaryToNode)}function qe(){Ut.call(this),this.name="LinkReshaping";var t=new wt;t.figure="Rectangle",t.desiredSize=Wh,t.fill="lightblue",t.stroke="dodgerblue",this.o=t,(t=new wt).figure="Diamond",t.desiredSize=Ao,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="move",this.C=t,this.M=3,this.ot=this.j=null,this.ix=new N,this.Sr=new et}function qh(t,e,n,i,a,u){return u?Math.abs(e.y-n.y)<t.resegmentingDistance&&Math.abs(n.y-i.y)<t.resegmentingDistance&&Math.abs(i.y-a.y)<t.resegmentingDistance:Math.abs(e.x-n.x)<t.resegmentingDistance&&Math.abs(n.x-i.x)<t.resegmentingDistance&&Math.abs(i.x-a.x)<t.resegmentingDistance}ni.className="LinkingTool",ni.Either=Fp,ni.ForwardsOnly=Nx,ni.BackwardsOnly=Br,Ft(ii,Sn),ii.prototype.updateAdornments=function(t){if(null!==t&&t instanceof X){var e="RelinkFrom",n=null;if(t.isSelected&&!this.diagram.isReadOnly){var i=t.selectionObject;null!==i&&t.canRelinkFrom()&&t.actualBounds.u()&&t.isVisible()&&i.actualBounds.u()&&i.Bf()&&null===(n=t.hk(e))&&(n=this.makeAdornment(i,!1),t.th(e,n))}null===n&&t.Cf(e),e="RelinkTo",n=null,t.isSelected&&!this.diagram.isReadOnly&&null!==(i=t.selectionObject)&&t.canRelinkTo()&&t.actualBounds.u()&&t.isVisible()&&i.actualBounds.u()&&i.Bf()&&(null===(n=t.hk(e))?(n=this.makeAdornment(i,!0),t.th(e,n)):n.s()),null===n&&t.Cf(e)}},ii.prototype.makeAdornment=function(t,e){var n=new At;return n.type=Y.Link,null!==(e=e?this.toHandleArchetype:this.fromHandleArchetype)&&n.add(e.copy()),n.adornedObject=t,n},ii.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowRelink||!t.model.Ps()||!t.lastInput.left)return!1;var e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom");return null===e&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo")),null!==e},ii.prototype.doActivate=function(){var t=this.diagram;if(null===this.originalLink){var e=this.handle;if(null===e&&null===(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom"))&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo")),null===e)return;var n=e.part;if(!(n instanceof At&&n.adornedPart instanceof X))return;this.handle=e,this.isForwards=null===n||"RelinkTo"===n.category,this.originalLink=n.adornedPart}this.wa(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.originalFromPort=this.originalLink.fromPort,this.originalFromNode=this.originalLink.fromNode,this.originalToPort=this.originalLink.toPort,this.originalToNode=this.originalLink.toNode,this.hx.set(this.originalLink.actualBounds),null!==this.originalLink&&0<this.originalLink.pointsCount&&(null===this.originalLink.fromNode&&(null!==this.temporaryFromPort&&(this.temporaryFromPort.desiredSize=Nl),null!==this.temporaryFromNode&&(this.temporaryFromNode.location=this.originalLink.i(0))),null===this.originalLink.toNode&&(null!==this.temporaryToPort&&(this.temporaryToPort.desiredSize=Nl),null!==this.temporaryToNode&&(this.temporaryToNode.location=this.originalLink.i(this.originalLink.pointsCount-1)))),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),null!==this.temporaryLink&&(null!==this.temporaryFromNode&&(this.temporaryLink.fromNode=this.temporaryFromNode),null!==this.temporaryToNode&&(this.temporaryLink.toNode=this.temporaryToNode),this.copyLinkProperties(this.originalLink,this.temporaryLink),this.temporaryLink.Ua(),t.add(this.temporaryLink)),this.isActive=!0},ii.prototype.copyLinkProperties=function(t,e){if(null!==t&&null!==e){e.adjusting=t.adjusting,e.corner=t.corner;var n=t.curve;(n===Bc||n===Na)&&(n=pn),e.curve=n,e.curviness=t.curviness,e.isTreeLink=t.isTreeLink,e.points=t.points,e.routing=t.routing,e.smoothness=t.smoothness,e.fromSpot=t.fromSpot,e.fromEndSegmentLength=t.fromEndSegmentLength,e.fromShortLength=t.fromShortLength,e.toSpot=t.toSpot,e.toEndSegmentLength=t.toEndSegmentLength,e.toShortLength=t.toShortLength}},ii.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.stopTransaction()},ii.prototype.doStop=function(){Sn.prototype.doStop.call(this),this.handle=null},ii.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;this.transactionResult=null;var e=this.originalFromNode,n=this.originalFromPort,i=this.originalToNode,a=this.originalToPort,u=this.originalLink;try{if(this.targetPort=this.findTargetPort(this.isForwards),null!==this.targetPort){var h=this.targetPort.part;h instanceof Q&&(this.isForwards?(i=h,a=this.targetPort):(e=h,n=this.targetPort))}else this.isUnconnectedLinkValid?this.isForwards?a=i=null:n=e=null:u=null;null!==u?(this.reconnectLink(u,this.isForwards?i:e,this.isForwards?a:n,this.isForwards),null===this.targetPort&&(this.isForwards?u.defaultToPoint=t.lastInput.documentPoint:u.defaultFromPoint=t.lastInput.documentPoint,u.Ua()),this.transactionResult=this.name,t.S("LinkRelinked",u,this.isForwards?this.originalToPort:this.originalFromPort)):this.doNoRelink(this.originalLink,this.isForwards),this.originalLink.rq(this.hx)}finally{this.stopTool()}}},ii.prototype.reconnectLink=function(t,e,n,i){return n=null!==n&&null!==n.portId?n.portId:"",i?(t.toNode=e,t.toPortId=n):(t.fromNode=e,t.fromPortId=n),!0},ii.prototype.doNoRelink=function(){},Dt.Object.defineProperties(ii.prototype,{fromHandleArchetype:{get:function(){return this.M},set:function(t){this.M=t}},toHandleArchetype:{get:function(){return this.Kh},set:function(t){this.Kh=t}},handle:{get:function(){return this.C},set:function(t){if(null!==t&&!(t.part instanceof At))throw Error("new handle is not in an Adornment: "+t);this.C=t}}}),ii.className="RelinkingTool",co("linkingTool",function(){return this.findTool("Linking")},function(t){this.Za("Linking",t,this.mouseMoveTools)}),co("relinkingTool",function(){return this.findTool("Relinking")},function(t){this.Za("Relinking",t,this.mouseDownTools)}),Ft(qe,Ut),qe.prototype.wv=function(t){return t&&t.Wr&&0!==t.Wr.value?t.Wr:Lp},qe.prototype.Im=function(t,e){t.Wr=e},qe.prototype.updateAdornments=function(t){if(null!==t&&t instanceof X){var e=null;if(t.isSelected&&!this.diagram.isReadOnly){var n=t.path;null!==n&&t.canReshape()&&t.actualBounds.u()&&t.isVisible()&&n.actualBounds.u()&&n.Bf()&&(null===(e=t.hk(this.name))||e.ax!==t.pointsCount||e.xx!==t.resegmentable)&&null!==(e=this.makeAdornment(n))&&(e.ax=t.pointsCount,e.xx=t.resegmentable,t.th(this.name,e))}null===e&&t.Cf(this.name)}},qe.prototype.makeAdornment=function(t){var e=t.part,n=e.pointsCount,i=e.isOrthogonal,a=null;if(null!==e.points&&1<n){(a=new At).type=Y.Link,n=e.firstPickIndex;var u=e.lastPickIndex,h=i?1:0;if(e.resegmentable&&e.computeCurve()!==Ei)for(var d=n+h;d<u-h;d++){var f=this.makeResegmentHandle(t,d);null!==f&&(f.segmentIndex=d,f.segmentFraction=.5,f.fromMaxLinks=999,a.add(f))}for(h=n+1;h<u;h++)if(null!==(d=this.makeHandle(t,h))){if(d.segmentIndex=h,h!==n)if(h===n+1&&i){f=e.i(n);var g=e.i(n+1);R.w(f.x,g.x)&&R.w(f.y,g.y)&&(g=e.i(n-1)),R.w(f.x,g.x)?(this.Im(d,ec),d.cursor="n-resize"):R.w(f.y,g.y)&&(this.Im(d,tc),d.cursor="w-resize")}else h===u-1&&i?(f=e.i(u-1),g=e.i(u),R.w(f.x,g.x)&&R.w(f.y,g.y)&&(f=e.i(u+1)),R.w(f.x,g.x)?(this.Im(d,ec),d.cursor="n-resize"):R.w(f.y,g.y)&&(this.Im(d,tc),d.cursor="w-resize")):h!==u&&(this.Im(d,yy),d.cursor="move");a.add(d)}a.adornedObject=t}return a},qe.prototype.makeHandle=function(){var t=this.handleArchetype;return null===t?null:t.copy()},qe.prototype.makeResegmentHandle=function(){var t=this.midHandleArchetype;return null===t?null:t.copy()},qe.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowReshape||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},qe.prototype.doActivate=function(){var t=this.diagram;if(null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null!==this.handle){var e=this.handle.part.adornedPart;if(e instanceof X){if(this.ot=e,t.isMouseCaptured=!0,this.wa(this.name),e.resegmentable&&999===this.handle.fromMaxLinks){var n=e.points.copy(),i=this.getResegmentingPoint();if(n.ub(this.handle.segmentIndex+1,i),e.isOrthogonal&&n.ub(this.handle.segmentIndex+1,i),e.points=n,e.Kb(),e.updateAdornments(),this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name),null===this.handle)return void this.doDeactivate()}this.ix=e.i(this.handle.segmentIndex),this.Sr=e.points.copy(),this.isActive=!0}}},qe.prototype.doDeactivate=function(){this.stopTransaction(),this.ot=this.handle=null,this.isActive=this.diagram.isMouseCaptured=!1},qe.prototype.doCancel=function(){var t=this.adornedLink;null!==t&&(t.points=this.Sr),this.stopTool()},qe.prototype.getResegmentingPoint=function(){return this.handle.da(Wt)},qe.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeReshape(t.lastInput.documentPoint),this.reshape(t))},qe.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.computeReshape(t.lastInput.documentPoint);if(this.reshape(e),null!==(e=this.adornedLink)&&e.resegmentable){var n=this.handle.segmentIndex,i=e.i(n-1),a=e.i(n),u=e.i(n+1);if(e.isOrthogonal){if(n>e.firstPickIndex+1&&n<e.lastPickIndex-1){var h=e.i(n-2);if(Math.abs(i.x-a.x)<this.resegmentingDistance&&Math.abs(i.y-a.y)<this.resegmentingDistance&&(qh(this,h,i,a,u,!0)||qh(this,h,i,a,u,!1))){var d=e.points.copy();qh(this,h,i,a,u,!0)?(d.Lc(n-2,new N(h.x,(u.y+h.y)/2)),d.Lc(n+1,new N(u.x,(u.y+h.y)/2))):(d.Lc(n-2,new N((u.x+h.x)/2,h.y)),d.Lc(n+1,new N((u.x+h.x)/2,u.y))),d.eb(n),d.eb(n-1),e.points=d,e.Kb()}else h=e.i(n+2),Math.abs(a.x-u.x)<this.resegmentingDistance&&Math.abs(a.y-u.y)<this.resegmentingDistance&&(qh(this,i,a,u,h,!0)||qh(this,i,a,u,h,!1))&&(d=e.points.copy(),qh(this,i,a,u,h,!0)?(d.Lc(n-1,new N(i.x,(i.y+h.y)/2)),d.Lc(n+2,new N(h.x,(i.y+h.y)/2))):(d.Lc(n-1,new N((i.x+h.x)/2,i.y)),d.Lc(n+2,new N((i.x+h.x)/2,h.y))),d.eb(n+1),d.eb(n),e.points=d,e.Kb())}}else h=N.alloc(),R.Eh(i.x,i.y,u.x,u.y,a.x,a.y,h)&&h.tf(a)<this.resegmentingDistance*this.resegmentingDistance&&((i=e.points.copy()).eb(n),e.points=i,e.Kb()),N.free(h)}t.Pa(),this.transactionResult=this.name,t.S("LinkReshaped",this.adornedLink,this.Sr)}this.stopTool()},qe.prototype.reshape=function(t){var e=this.adornedLink;e.Hh();var n=this.handle.segmentIndex,i=this.wv(this.handle);if(e.isOrthogonal)if(n===e.firstPickIndex+1)n=e.firstPickIndex+1,i===ec?(e.L(n,e.i(n-1).x,t.y),e.L(n+1,e.i(n+2).x,t.y)):i===tc&&(e.L(n,t.x,e.i(n-1).y),e.L(n+1,t.x,e.i(n+2).y));else if(n===e.lastPickIndex-1)n=e.lastPickIndex-1,i===ec?(e.L(n-1,e.i(n-2).x,t.y),e.L(n,e.i(n+1).x,t.y)):i===tc&&(e.L(n-1,t.x,e.i(n-2).y),e.L(n,t.x,e.i(n+1).y));else{var a=e.i(i=n),u=e.i(i-1),h=e.i(i+1);R.w(u.x,a.x)&&R.w(a.y,h.y)?(R.w(u.x,e.i(i-2).x)&&!R.w(u.y,e.i(i-2).y)?(e.l(i,t.x,u.y),n++,i++):e.L(i-1,t.x,u.y),R.w(h.y,e.i(i+2).y)&&!R.w(h.x,e.i(i+2).x)?e.l(i+1,h.x,t.y):e.L(i+1,h.x,t.y)):R.w(u.y,a.y)&&R.w(a.x,h.x)?(R.w(u.y,e.i(i-2).y)&&!R.w(u.x,e.i(i-2).x)?(e.l(i,u.x,t.y),n++,i++):e.L(i-1,u.x,t.y),R.w(h.x,e.i(i+2).x)&&!R.w(h.y,e.i(i+2).y)?e.l(i+1,t.x,h.y):e.L(i+1,t.x,h.y)):R.w(u.x,a.x)&&R.w(a.x,h.x)?(R.w(u.x,e.i(i-2).x)&&!R.w(u.y,e.i(i-2).y)?(e.l(i,t.x,u.y),n++,i++):e.L(i-1,t.x,u.y),R.w(h.x,e.i(i+2).x)&&!R.w(h.y,e.i(i+2).y)?e.l(i+1,t.x,h.y):e.L(i+1,t.x,h.y)):R.w(u.y,a.y)&&R.w(a.y,h.y)&&(R.w(u.y,e.i(i-2).y)&&!R.w(u.x,e.i(i-2).x)?(e.l(i,u.x,t.y),n++,i++):e.L(i-1,u.x,t.y),R.w(h.y,e.i(i+2).y)&&!R.w(h.x,e.i(i+2).x)?e.l(i+1,h.x,t.y):e.L(i+1,h.x,t.y)),e.L(n,t.x,t.y)}else e.L(n,t.x,t.y),a=e.fromPort,null!==(i=e.fromNode)&&null!==(u=i.findVisibleNode())&&u!==i&&(a=(i=u).port),1===n&&e.computeSpot(!0,a).wc()&&(u=a.da(Wt,N.alloc()),i=e.getLinkPointFromPoint(i,a,u,t,!0,N.alloc()),e.L(0,i.x,i.y),N.free(u),N.free(i)),a=e.toPort,null!==(i=e.toNode)&&null!==(u=i.findVisibleNode())&&u!==i&&(a=(i=u).port),n===e.pointsCount-2&&e.computeSpot(!1,a).wc()&&(n=a.da(Wt,N.alloc()),t=e.getLinkPointFromPoint(i,a,n,t,!1,N.alloc()),e.L(e.pointsCount-1,t.x,t.y),N.free(n),N.free(t));e.rf()},qe.prototype.computeReshape=function(t){var e=this.adornedLink,n=this.handle.segmentIndex;switch(this.wv(this.handle)){case yy:return t;case ec:return new N(e.i(n).x,t.y);case tc:return new N(t.x,e.i(n).y);default:return e.i(n)}},Dt.Object.defineProperties(qe.prototype,{handleArchetype:{get:function(){return this.o},set:function(t){this.o=t}},midHandleArchetype:{get:function(){return this.C},set:function(t){this.C=t}},handle:{get:function(){return this.j},set:function(t){if(null!==t&&!(t.part instanceof At))throw Error("new handle is not in an Adornment: "+t);this.j=t}},adornedLink:{get:function(){return this.ot}},resegmentingDistance:{get:function(){return this.M},set:function(t){this.M=t}},originalPoint:{get:function(){return this.ix}},originalPoints:{get:function(){return this.Sr}}}),qe.prototype.setReshapingBehavior=qe.prototype.Im,qe.prototype.getReshapingBehavior=qe.prototype.wv;var Lp=new J(qe,"None",0),tc=new J(qe,"Horizontal",1),ec=new J(qe,"Vertical",2),yy=new J(qe,"All",3);function Kn(){Ut.call(this),this.name="Resizing",this.Uf=new mt(1,1).freeze(),this.Tf=new mt(9999,9999).freeze(),this.tg=new mt(NaN,NaN).freeze(),this.C=!1,this.M=!0,this.ie=null;var t=new wt;t.alignmentFocus=Wt,t.figure="Rectangle",t.desiredSize=Wh,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.o=t,this.j=null,this.Rr=new N,this.gx=new mt,this.Uo=new N,this.Nt=new mt(0,0),this.Mt=new mt(1/0,1/0),this.Lt=new mt(1,1)}function Ri(){Ut.call(this),this.name="Rotating",this.Ha=45,this.Ga=2,this.Uo=new N,this.ie=null;var t=new wt;t.figure="Ellipse",t.desiredSize=Ao,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.o=t,this.j=null,this.ex=0,this.Xr=new N(NaN,NaN),this.C=0,this.M=50}function Za(){Ut.call(this),this.name="ClickSelecting"}function ts(){Ut.call(this),this.name="Action",this.Dk=null}function Ja(){Ut.call(this),this.name="ClickCreating",this.mj=null,this.o=!0,this.j=!1,this.Nw=new N(0,0)}function es(){Ut.call(this),this.name="DragSelecting",this.Zk=175,this.o=!1;var t=new ht;t.layerName="Tool",t.selectable=!1;var e=new wt;e.name="SHAPE",e.figure="Rectangle",e.fill=null,e.stroke="magenta",t.add(e),this.j=t}function qi(){Ut.call(this),this.name="Panning",this.vu=new N,this.bz=new N,this.sg=!1;var t=this;this.nx=function(){var e=t.diagram;null!==e&&e.removeEventListener(dt.document,"scroll",t.nx,!1),t.stopTool()}}function mo(){this.M=this.C=this.j=this.o=null}function yo(t,e,n){this.text=t,this.Jx=e,this.visible=n}function ur(){Ut.call(this),this.name="ContextMenu",this.o=this.Ct=this.j=null,this.Zw=new N,this.Et=null,this.$t=!1;var t=this;this.Su=function(){t.stopTool()}}function jd(t){return t.preventDefault(),!1}function Px(t){var e=t.diagram;if(t.isActive){var n=t.currentContextMenu;if(null!==n){if(!(n instanceof mo)){var i=e.Wb(e.lastInput.documentPoint,null,null);null!==i&&i.mg(n)&&t.standardMouseClick(null,null)}t.stopTool(),t.canStart()&&(e.currentTool=t,t.doMouseUp())}}else t.canStart()&&(Ax(t,!0),t.isActive||t.stopTool())}function Ax(t,e,n){if(void 0===n&&(n=null),!t.$t&&(t.$t=!0,e&&t.standardMouseSelect(),e=t.standardMouseClick(),t.$t=!1,!e)){if(t.isActive=!0,e=Vd,null===n&&(n=t.findObjectWithContextMenu()),null!==n){var i=n.contextMenu;null!==i?(t.currentObject=n instanceof ut?n:null,t.showContextMenu(i,t.currentObject)):null!==e&&t.showContextMenu(e,t.currentObject)}else null!==e&&t.showContextMenu(e,null);t.currentContextMenu instanceof At&&!t.currentContextMenu.visible&&t.stopTool()}}qe.className="LinkReshapingTool",qe.None=Lp,qe.Horizontal=tc,qe.Vertical=ec,qe.All=yy,co("linkReshapingTool",function(){return this.findTool("LinkReshaping")},function(t){this.Za("LinkReshaping",t,this.mouseDownTools)}),Ft(Kn,Ut),Kn.prototype.updateAdornments=function(t){if(!(null===t||t instanceof X)){if(t.isSelected&&!this.diagram.isReadOnly){var e=t.resizeObject,n=t.hk(this.name);if(null!==e&&t.canResize()&&t.actualBounds.u()&&t.isVisible()&&e.actualBounds.u()&&e.Bf()&&((null===n||n.adornedObject!==e)&&(n=this.makeAdornment(e)),null!==n))return e=e.Li(),Bs(t)&&this.updateResizeHandles(n,e),void t.th(this.name,n)}t.Cf(this.name)}},Kn.prototype.makeAdornment=function(t){var e=t.part.resizeAdornmentTemplate;if(null===e){(e=new At).type=Y.Spot,e.locationSpot=Wt;var n=new yi;n.isPanelMain=!0,e.add(n),e.add(this.makeHandle(t,zn)),e.add(this.makeHandle(t,Rr)),e.add(this.makeHandle(t,ks)),e.add(this.makeHandle(t,Zh)),e.add(this.makeHandle(t,Cr)),e.add(this.makeHandle(t,Ki)),e.add(this.makeHandle(t,Dr)),e.add(this.makeHandle(t,jr))}else if(Gr(e),null===(e=e.copy()))return null;return e.adornedObject=t,e},Kn.prototype.makeHandle=function(t,e){return null===(t=this.handleArchetype)?null:((t=t.copy()).alignment=e,t)},Kn.prototype.updateResizeHandles=function(t,e){if(null!==t)if(!t.alignment.Lb()&&("pointer"===t.cursor||0<t.cursor.indexOf("resize")))t:{var n=t.alignment;if(n.wc()&&(n=Wt),0>=n.x)e=0>=n.y?e+225:1<=n.y?e+135:e+180;else if(1<=n.x)0>=n.y?e+=315:1<=n.y&&(e+=45);else if(0>=n.y)e+=270;else{if(!(1<=n.y))break t;e+=90}0>e?e+=360:360<=e&&(e-=360),t.cursor=22.5>e?"e-resize":67.5>e?"se-resize":112.5>e?"s-resize":157.5>e?"sw-resize":202.5>e?"w-resize":247.5>e?"nw-resize":292.5>e?"n-resize":337.5>e?"ne-resize":"e-resize"}else if(t instanceof Y)for(t=t.elements;t.next();)this.updateResizeHandles(t.value,e)},Kn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowResize||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},Kn.prototype.doActivate=function(){var t=this.diagram;null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null!==this.handle&&(this.adornedObject=this.handle.part.adornedObject,null!==this.adornedObject&&(t.isMouseCaptured=!0,t.animationManager.nc(),this.wa(this.name),this.Rr.set(this.adornedObject.da(this.handle.alignment.Jv())),this.Uo.set(this.adornedObject.part.location),this.gx.set(this.adornedObject.desiredSize),this.Lt=this.computeCellSize(),this.Nt=this.computeMinSize(),this.Mt=this.computeMaxSize(),this.isActive=!0))},Kn.prototype.doDeactivate=function(){var t=this.diagram;this.stopTransaction(),this.ie=this.handle=null,this.isActive=t.isMouseCaptured=!1},Kn.prototype.doCancel=function(){null!==this.adornedObject&&(this.adornedObject.desiredSize=this.originalDesiredSize,this.adornedObject.part.location=this.originalLocation),this.stopTool()},Kn.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive){var e=this.Nt,n=this.Mt,i=this.Lt,a=this.adornedObject.Hs(t.lastInput.documentPoint,N.alloc()),u=this.computeReshape();e=this.computeResize(a,this.handle.alignment,e,n,i,u),this.resize(e),t.ed(),N.free(a)}},Kn.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.Nt,n=this.Mt,i=this.Lt,a=this.adornedObject.Hs(t.lastInput.documentPoint,N.alloc()),u=this.computeReshape();e=this.computeResize(a,this.handle.alignment,e,n,i,u),this.resize(e),N.free(a),t.Pa(),this.transactionResult=this.name,t.S("PartResized",this.adornedObject,this.originalDesiredSize)}this.stopTool()},Kn.prototype.resize=function(t){var e=this.diagram,n=this.adornedObject;if(null!==n){if(n.desiredSize=t.size,(t=n.part).Sa(),n=n.da(this.handle.alignment.Jv()),t instanceof vt){var i=new et;if(i.add(t),!this.dragsMembers&&null===t.placeholder){var a=new Wu;a.dragsMembers=!1}e.moveParts(i,this.oppositePoint.copy().ge(n),!0,a)}else t.location=t.location.copy().ge(n).add(this.oppositePoint);e.ed()}},Kn.prototype.computeResize=function(t,e,n,i,a,u){e.wc()&&(e=Wt);var h=this.adornedObject.naturalBounds,d=h.x,f=h.y,g=h.x+h.width,m=h.y+h.height,y=1;if(!u){var x=h.height;0>=(y=h.width)&&(y=1),0>=x&&(x=1),y=x/y}return x=N.alloc(),R.jq(t.x,t.y,d,f,a.width,a.height,x),t=h.copy(),0>=e.x?0>=e.y?(t.x=Math.max(x.x,g-i.width),t.x=Math.min(t.x,g-n.width),t.width=Math.max(g-t.x,n.width),t.y=Math.max(x.y,m-i.height),t.y=Math.min(t.y,m-n.height),t.height=Math.max(m-t.y,n.height),u||(1<=t.height/t.width?(t.height=Math.max(Math.min(y*t.width,i.height),n.height),t.width=t.height/y):(t.width=Math.max(Math.min(t.height/y,i.width),n.width),t.height=y*t.width),t.x=g-t.width,t.y=m-t.height)):1<=e.y?(t.x=Math.max(x.x,g-i.width),t.x=Math.min(t.x,g-n.width),t.width=Math.max(g-t.x,n.width),t.height=Math.max(Math.min(x.y-f,i.height),n.height),u||(1<=t.height/t.width?(t.height=Math.max(Math.min(y*t.width,i.height),n.height),t.width=t.height/y):(t.width=Math.max(Math.min(t.height/y,i.width),n.width),t.height=y*t.width),t.x=g-t.width)):(t.x=Math.max(x.x,g-i.width),t.x=Math.min(t.x,g-n.width),t.width=g-t.x,u||(t.height=Math.max(Math.min(y*t.width,i.height),n.height),t.width=t.height/y,t.y=f+.5*(m-f-t.height))):1<=e.x?0>=e.y?(t.width=Math.max(Math.min(x.x-d,i.width),n.width),t.y=Math.max(x.y,m-i.height),t.y=Math.min(t.y,m-n.height),t.height=Math.max(m-t.y,n.height),u||(1<=t.height/t.width?(t.height=Math.max(Math.min(y*t.width,i.height),n.height),t.width=t.height/y):(t.width=Math.max(Math.min(t.height/y,i.width),n.width),t.height=y*t.width),t.y=m-t.height)):1<=e.y?(t.width=Math.max(Math.min(x.x-d,i.width),n.width),t.height=Math.max(Math.min(x.y-f,i.height),n.height),u||(1<=t.height/t.width?(t.height=Math.max(Math.min(y*t.width,i.height),n.height),t.width=t.height/y):(t.width=Math.max(Math.min(t.height/y,i.width),n.width),t.height=y*t.width))):(t.width=Math.max(Math.min(x.x-d,i.width),n.width),u||(t.height=Math.max(Math.min(y*t.width,i.height),n.height),t.width=t.height/y,t.y=f+.5*(m-f-t.height))):0>=e.y?(t.y=Math.max(x.y,m-i.height),t.y=Math.min(t.y,m-n.height),t.height=m-t.y,u||(t.width=Math.max(Math.min(t.height/y,i.width),n.width),t.height=y*t.width,t.x=d+.5*(g-d-t.width))):1<=e.y&&(t.height=Math.max(Math.min(x.y-f,i.height),n.height),u||(t.width=Math.max(Math.min(t.height/y,i.width),n.width),t.height=y*t.width,t.x=d+.5*(g-d-t.width))),N.free(x),t},Kn.prototype.computeReshape=function(){var t=ze;return this.adornedObject instanceof wt&&(t=rv(this.adornedObject)),!(t===Fo||this.diagram.lastInput.shift)},Kn.prototype.computeMinSize=function(){var t=this.adornedObject.minSize.copy(),e=this.minSize;return!isNaN(e.width)&&e.width>t.width&&(t.width=e.width),!isNaN(e.height)&&e.height>t.height&&(t.height=e.height),t},Kn.prototype.computeMaxSize=function(){var t=this.adornedObject.maxSize.copy(),e=this.maxSize;return!isNaN(e.width)&&e.width<t.width&&(t.width=e.width),!isNaN(e.height)&&e.height<t.height&&(t.height=e.height),t},Kn.prototype.computeCellSize=function(){var t=new mt(NaN,NaN),e=this.adornedObject.part;return null!==e&&(e=e.resizeCellSize,!isNaN(e.width)&&0<e.width&&(t.width=e.width),!isNaN(e.height)&&0<e.height&&(t.height=e.height)),e=this.cellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height),e=this.diagram,(isNaN(t.width)||isNaN(t.height))&&e&&null!==(e=e.grid)&&e.visible&&this.isGridSnapEnabled&&(e=e.gridCellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height)),(isNaN(t.width)||0===t.width||t.width===1/0)&&(t.width=1),(isNaN(t.height)||0===t.height||t.height===1/0)&&(t.height=1),t},Dt.Object.defineProperties(Kn.prototype,{handleArchetype:{get:function(){return this.o},set:function(t){this.o=t}},handle:{get:function(){return this.j},set:function(t){if(null!==t&&!(t.part instanceof At))throw Error("new handle is not in an Adornment: "+t);this.j=t}},adornedObject:{get:function(){return this.ie},set:function(t){if(null!==t&&t.part instanceof At)throw Error("new handle must not be in an Adornment: "+t);this.ie=t}},minSize:{get:function(){return this.Uf},set:function(t){if(!this.Uf.A(t)){var e=t.width;isNaN(e)&&(e=0),t=t.height,isNaN(t)&&(t=0),this.Uf.h(e,t)}}},maxSize:{get:function(){return this.Tf},set:function(t){if(!this.Tf.A(t)){var e=t.width;isNaN(e)&&(e=1/0),t=t.height,isNaN(t)&&(t=1/0),this.Tf.h(e,t)}}},cellSize:{get:function(){return this.tg},set:function(t){this.tg.A(t)||this.tg.assign(t)}},isGridSnapEnabled:{get:function(){return this.C},set:function(t){this.C=t}},dragsMembers:{get:function(){return this.M},set:function(t){this.M=t}},oppositePoint:{get:function(){return this.Rr},set:function(t){this.Rr.A(t)||this.Rr.assign(t)}},originalDesiredSize:{get:function(){return this.gx}},originalLocation:{get:function(){return this.Uo}}}),Kn.className="ResizingTool",co("resizingTool",function(){return this.findTool("Resizing")},function(t){this.Za("Resizing",t,this.mouseDownTools)}),Ft(Ri,Ut),Ri.prototype.updateAdornments=function(t){if(null!==t){if(t.Dh()){var e=t.rotateObject;if(e===t||e===t.path||e.isPanelMain)return}if(t.isSelected&&!this.diagram.isReadOnly&&null!==(e=t.rotateObject)&&t.canRotate()&&t.actualBounds.u()&&t.isVisible()&&e.actualBounds.u()&&e.Bf()){var n=t.hk(this.name);if((null===n||n.adornedObject!==e)&&(n=this.makeAdornment(e)),null!==n)return n.angle=e.Li(),null===n.placeholder&&(n.location=this.computeAdornmentLocation(e)),void t.th(this.name,n)}t.Cf(this.name)}},Ri.prototype.makeAdornment=function(t){var e=t.part.rotateAdornmentTemplate;if(null===e){(e=new At).type=Y.Position,e.locationSpot=Wt;var n=this.handleArchetype;null!==n&&e.add(n.copy())}else if(Gr(e),null===(e=e.copy()))return null;return e.adornedObject=t,e},Ri.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowRotate||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},Ri.prototype.doActivate=function(){var t=this.diagram;if(null===this.adornedObject){if(null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null===this.handle)return;this.adornedObject=this.handle.part.adornedObject}null!==this.adornedObject&&(t.isMouseCaptured=!0,t.delaysLayout=!0,this.wa(this.name),this.ex=this.adornedObject.angle,this.Xr=this.computeRotationPoint(this.adornedObject),this.Uo=this.adornedObject.part.location.copy(),this.isActive=!0)},Ri.prototype.computeRotationPoint=function(t){var e=t.part,n=e.locationObject;return e.rotationSpot.hb()?t.da(e.rotationSpot):t===e||t===n?n.da(e.locationSpot):t.da(Wt)},Ri.prototype.computeAdornmentLocation=function(t){var e=this.rotationPoint;e.u()||(e=this.computeRotationPoint(t)),e=t.Hs(e);var n=this.handleAngle;0>n?n+=360:360<=n&&(n-=360),n=Math.round(45*Math.round(n/45));var i=this.handleDistance;return 0===n?e.x=t.naturalBounds.width+i:45===n?(e.x=t.naturalBounds.width+i,e.y=t.naturalBounds.height+i):90===n?e.y=t.naturalBounds.height+i:135===n?(e.x=-i,e.y=t.naturalBounds.height+i):180===n?e.x=-i:225===n?(e.x=-i,e.y=-i):270===n?e.y=-i:315===n&&(e.x=t.naturalBounds.width+i,e.y=-i),t.da(e)},Ri.prototype.doDeactivate=function(){var t=this.diagram;this.stopTransaction(),this.ie=this.handle=null,this.Xr=new N(NaN,NaN),this.isActive=t.isMouseCaptured=!1},Ri.prototype.doCancel=function(){this.diagram.delaysLayout=!1,this.rotate(this.originalAngle),this.stopTool()},Ri.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeRotate(t.lastInput.documentPoint),this.rotate(t))},Ri.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){t.delaysLayout=!1;var e=this.computeRotate(t.lastInput.documentPoint);this.rotate(e),t.Pa(),this.transactionResult=this.name,t.S("PartRotated",this.adornedObject,this.originalAngle)}this.stopTool()},Ri.prototype.rotate=function(t){var e=this.adornedObject;if(null!==e){e.angle=t,(e=e.part).Sa();var n=e.locationObject,i=e.rotateObject;(n===i||n.mg(i))&&(n=this.Uo.copy(),e.location=n.ge(this.rotationPoint).rotate(t-this.originalAngle).add(this.rotationPoint)),this.diagram.ed()}},Ri.prototype.computeRotate=function(t){t=this.rotationPoint.Oa(t)-this.handleAngle;var e=this.adornedObject.panel;null!==e&&(t-=e.Li()),360<=t?t-=360:0>t&&(t+=360),e=Math.min(Math.abs(this.snapAngleMultiple),180);var n=Math.min(Math.abs(this.snapAngleEpsilon),e/2);return!this.diagram.lastInput.shift&&0<e&&0<n&&(t%e<n?t=Math.floor(t/e)*e:t%e>e-n&&(t=(Math.floor(t/e)+1)*e)),360<=t?t-=360:0>t&&(t+=360),t},Dt.Object.defineProperties(Ri.prototype,{handleArchetype:{get:function(){return this.o},set:function(t){this.o=t}},handle:{get:function(){return this.j},set:function(t){if(null!==t&&!(t.part instanceof At))throw Error("new handle is not in an Adornment: "+t);this.j=t}},adornedObject:{get:function(){return this.ie},set:function(t){if(null!==t&&t.part instanceof At)throw Error("new handle must not be in an Adornment: "+t);this.ie=t}},snapAngleMultiple:{get:function(){return this.Ha},set:function(t){this.Ha=t}},snapAngleEpsilon:{get:function(){return this.Ga},set:function(t){this.Ga=t}},originalAngle:{get:function(){return this.ex}},rotationPoint:{get:function(){return this.Xr},set:function(t){this.Xr=t.copy()}},handleAngle:{get:function(){return this.C},set:function(t){this.C=t}},handleDistance:{get:function(){return this.M},set:function(t){this.M=t}}}),Ri.className="RotatingTool",co("rotatingTool",function(){return this.findTool("Rotating")},function(t){this.Za("Rotating",t,this.mouseDownTools)}),Ft(Za,Ut),Za.prototype.canStart=function(){return!(!this.isEnabled||this.isBeyondDragSize())},Za.prototype.doMouseUp=function(){this.isActive&&(this.standardMouseSelect(),!this.standardMouseClick()&&this.diagram.lastInput.isTouchEvent&&this.diagram.toolManager.doToolTip()),this.stopTool()},Za.className="ClickSelectingTool",Ft(ts,Ut),ts.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram,e=t.lastInput,n=t.Wb(e.documentPoint,function(i){for(;null!==i.panel&&!i.isActionable;)i=i.panel;return i});return!(null===n||!n.isActionable||(this.Dk=n,t.Tk=t.Wb(e.documentPoint,null,null),0))},ts.prototype.doMouseDown=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.Dk;null!==e&&(t.targetObject=e,null!==e.actionDown&&e.actionDown(t,e))}else this.canStart()&&this.doActivate()},ts.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.Dk;null!==e&&(t.targetObject=e,null!==e.actionMove&&e.actionMove(t,e))}},ts.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.Dk;if(null===e)return;t.targetObject=e,null!==e.actionUp&&e.actionUp(t,e),this.standardMouseClick(function(n){for(;null!==n.panel&&(!n.isActionable||n!==e);)n=n.panel;return n},function(n){return n===e})}this.stopTool()},ts.prototype.doCancel=function(){var t=this.diagram.lastInput,e=this.Dk;null!==e&&(t.targetObject=e,null!==e.actionCancel&&e.actionCancel(t,e),this.stopTool())},ts.prototype.doStop=function(){this.Dk=null},ts.className="ActionTool",Ft(Ja,Ut),Ja.prototype.canStart=function(){if(!this.isEnabled||null===this.archetypeNodeData)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.lastInput.left||this.isBeyondDragSize())return!1;if(this.isDoubleClick){if(1===t.lastInput.clickCount&&(this.Nw=t.lastInput.viewPoint.copy()),2!==t.lastInput.clickCount||this.isBeyondDragSize(this.Nw))return!1}else if(1!==t.lastInput.clickCount)return!1;return!(t.currentTool!==this&&null!==t.im(t.lastInput.documentPoint,!0))},Ja.prototype.doMouseUp=function(){this.isActive&&this.insertPart(this.diagram.lastInput.documentPoint),this.stopTool()},Ja.prototype.insertPart=function(t){var e=this.diagram,n=this.archetypeNodeData;if(null===n)return null;var i=null;try{if(e.S("ChangingSelection",e.selection),this.wa(this.name),n instanceof ht)n.Jc()&&(Gr(n),null!==(i=n.copy())&&e.add(i));else if(null!==n){var a=e.model.copyNodeData(n);Et(a)&&(e.model.nf(a),i=e.vc(a))}if(null!==i){var u=N.allocAt(t.x,t.y);this.isGridSnapEnabled&&ky(this.diagram,i,t,u),i.location=u,e.allowSelect&&(e.clearSelection(!0),i.isSelected=!0),N.free(u)}e.Pa(),this.transactionResult=this.name,e.S("PartCreated",i)}finally{this.stopTransaction(),e.S("ChangedSelection",e.selection)}return i},Dt.Object.defineProperties(Ja.prototype,{archetypeNodeData:{get:function(){return this.mj},set:function(t){this.mj=t}},isDoubleClick:{get:function(){return this.o},set:function(t){this.o=t}},isGridSnapEnabled:{get:function(){return this.j},set:function(t){this.j=t}}}),Ja.className="ClickCreatingTool",Ft(es,Ut),es.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(!t.allowSelect)return!1;var e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.timestamp-t.firstInput.timestamp<this.delay||null!==t.im(e.documentPoint,!0)))},es.prototype.doActivate=function(){var t=this.diagram;this.isActive=!0,t.isMouseCaptured=!0,t.skipsUndoManager=!0,t.add(this.box),this.doMouseMove()},es.prototype.doDeactivate=function(){var t=this.diagram;t.og(),t.remove(this.box),t.skipsUndoManager=!1,this.isActive=t.isMouseCaptured=!1},es.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive&&null!==this.box){var e=this.computeBoxBounds(),n=this.box.Ya("SHAPE");null===n&&(n=this.box.nb());var i=mt.alloc().h(e.width,e.height);n.desiredSize=i,this.box.Gm(e.x,e.y,!1),mt.free(i),(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.zs(t.lastInput.viewPoint)}},es.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;t.remove(this.box);try{t.currentCursor="wait",t.S("ChangingSelection",t.selection),this.selectInRect(this.computeBoxBounds()),t.S("ChangedSelection",t.selection)}finally{t.currentCursor=""}}this.stopTool()},es.prototype.computeBoxBounds=function(){var t=this.diagram;return new B(t.firstInput.documentPoint,t.lastInput.documentPoint)},es.prototype.selectInRect=function(t){var e=this.diagram,n=e.lastInput;if(t=e.Vx(t,this.isPartialInclusion),Ss?n.meta:n.control)if(n.shift)for(t=t.iterator;t.next();)(e=t.value).isSelected&&(e.isSelected=!1);else for(t=t.iterator;t.next();)(e=t.value).isSelected=!e.isSelected;else if(n.shift)for(t=t.iterator;t.next();)(e=t.value).isSelected||(e.isSelected=!0);else{for(n=new et,e=e.selection.iterator;e.next();){var i=e.value;t.contains(i)||n.add(i)}for(e=n.iterator;e.next();)e.value.isSelected=!1;for(t=t.iterator;t.next();)(e=t.value).isSelected||(e.isSelected=!0)}},Dt.Object.defineProperties(es.prototype,{delay:{get:function(){return this.Zk},set:function(t){this.Zk=t}},isPartialInclusion:{get:function(){return this.o},set:function(t){this.o=t}},box:{get:function(){return this.j},set:function(t){this.j=t}}}),es.className="DragSelectingTool",Ft(qi,Ut),qi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(!t.allowHorizontalScroll&&!t.allowVerticalScroll||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())},qi.prototype.doActivate=function(){var t=this.diagram;this.sg?(t.lastInput.bubbles=!0,t.addEventListener(dt.document,"scroll",this.nx,!1)):(t.currentCursor="move",t.isMouseCaptured=!0,this.vu.assign(t.position)),this.isActive=!0},qi.prototype.doDeactivate=function(){var t=this.diagram;t.currentCursor="",this.isActive=t.isMouseCaptured=!1},qi.prototype.doCancel=function(){var t=this.diagram;t.position=this.vu,t.isMouseCaptured=!1,this.stopTool()},qi.prototype.doMouseMove=function(){this.move()},qi.prototype.doMouseUp=function(){this.move(),this.stopTool()},qi.prototype.move=function(){var t=this.diagram;if(this.isActive&&t)if(this.sg)t.lastInput.bubbles=!0;else{var e=t.position,n=t.firstInput.documentPoint,i=t.lastInput.documentPoint,a=e.x+n.x-i.x;n=e.y+n.y-i.y,t.allowHorizontalScroll||(a=e.x),t.allowVerticalScroll||(n=e.y),t.position=this.bz.h(a,n)}},Dt.Object.defineProperties(qi.prototype,{bubbles:{get:function(){return this.sg},set:function(t){this.sg=t}},originalPosition:{get:function(){return this.vu}}}),qi.className="PanningTool",co("clickCreatingTool",function(){return this.findTool("ClickCreating")},function(t){this.Za("ClickCreating",t,this.mouseUpTools)}),co("clickSelectingTool",function(){return this.findTool("ClickSelecting")},function(t){this.Za("ClickSelecting",t,this.mouseUpTools)}),co("panningTool",function(){return this.findTool("Panning")},function(t){this.Za("Panning",t,this.mouseMoveTools)}),co("dragSelectingTool",function(){return this.findTool("DragSelecting")},function(t){this.Za("DragSelecting",t,this.mouseMoveTools)}),co("actionTool",function(){return this.findTool("Action")},function(t){this.Za("Action",t,this.mouseDownTools)}),Dt.Object.defineProperties(mo.prototype,{mainElement:{get:function(){return this.C},set:function(t){this.C=t}},show:{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t)}},hide:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}},valueFunction:{get:function(){return this.M},set:function(t){this.M=t}}}),mo.className="HTMLInfo",yo.className="ContextMenuButtonInfo",Ft(ur,Ut),ur.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(this.isBeyondDragSize()||!t.lastInput.right||1<t.lastInput.clickCount||!(t.lastInput.isTouchEvent&&null!==this.defaultTouchContextMenu||null!==this.findObjectWithContextMenu()))},ur.prototype.doStart=function(){this.Zw.set(this.diagram.firstInput.documentPoint)},ur.prototype.doStop=function(){this.hideContextMenu(),this.currentObject=null},ur.prototype.findObjectWithContextMenu=function(t){void 0===t&&(t=null);var e=this.diagram,i=null;if(t instanceof j||(i=t instanceof ut?t:e.Wb(e.lastInput.documentPoint,null,function(a){return!a.layer.isTemporary})),null!==i){for(t=i;null!==t;){if(null!==t.contextMenu)return t;t=t.panel}if(e.lastInput.isTouchEvent&&this.defaultTouchContextMenu)return i.part}else if(null!==e.contextMenu)return e;return null},ur.prototype.doActivate=function(){},ur.prototype.doMouseDown=function(){if(Ut.prototype.doMouseDown.call(this),this.isActive&&this.currentContextMenu instanceof At){var t=this.diagram.toolManager.findTool("Action");null!==t&&t.canStart()&&(t.doActivate(),t.doMouseDown(),t.doDeactivate())}this.diagram.toolManager.mouseDownTools.contains(this)&&Px(this)},ur.prototype.doMouseUp=function(){if(this.isActive&&this.currentContextMenu instanceof At){var t=this.diagram.toolManager.findTool("Action");null!==t&&t.canStart()&&(t.doActivate(),t.doCancel(),t.doDeactivate())}Px(this)},ur.prototype.doMouseMove=function(){var t=this.diagram.toolManager.findTool("Action");null!==t&&t.doMouseMove(),this.isActive&&this.diagram.toolManager.doMouseMove()},ur.prototype.showContextMenu=function(t,e){var n=this.diagram;if(t!==this.currentContextMenu&&this.hideContextMenu(),t instanceof At){t.layerName="Tool",t.selectable=!1,t.scale=1/n.scale,t.category=this.name,null!==t.placeholder&&(t.placeholder.scale=n.scale);var i=t.diagram;null!==i&&i!==n&&i.remove(t),n.add(t),null!==e?t.adornedObject=e:t.data=n.model,t.Sa(),this.positionContextMenu(t,e)}else t instanceof mo&&t.show(e,n,this);this.currentContextMenu=t},ur.prototype.positionContextMenu=function(t){if(null===t.placeholder){var e=this.diagram,n=e.lastInput.documentPoint.copy(),i=t.measuredBounds,a=e.viewportBounds;e.lastInput.isTouchEvent&&(n.x-=i.width),n.x+i.width>a.right&&(n.x-=i.width+5/e.scale),n.x<a.x&&(n.x=a.x),n.y+i.height>a.bottom&&(n.y-=i.height+5/e.scale),n.y<a.y&&(n.y=a.y),t.position=n}},ur.prototype.hideContextMenu=function(){var t=this.diagram,e=this.currentContextMenu;null!==e&&(e instanceof At?(t.remove(e),null!==this.Ct&&this.Ct.Cf(e.category),e.data=null,e.adornedObject=null):e instanceof mo&&(null!==e.hide?e.hide(t,this):null!==e.mainElement&&(e.mainElement.style.display="none")),this.currentContextMenu=null,this.standardMouseOver())},ur.prototype.showDefaultContextMenu=function(){var t=this.diagram;null===this.Et&&(this.Et=function QD(t){var e=new et;return e.add(new yo("Copy",function(n){n.commandHandler.copySelection()},function(n){return n.commandHandler.canCopySelection()})),e.add(new yo("Cut",function(n){n.commandHandler.cutSelection()},function(n){return n.commandHandler.canCutSelection()})),e.add(new yo("Delete",function(n){n.commandHandler.deleteSelection()},function(n){return n.commandHandler.canDeleteSelection()})),e.add(new yo("Paste",function(n){n.commandHandler.pasteSelection(t.mouseDownPoint)},function(n){return n.commandHandler.canPasteSelection(t.mouseDownPoint)})),e.add(new yo("Select All",function(n){n.commandHandler.selectAll()},function(n){return n.commandHandler.canSelectAll()})),e.add(new yo("Undo",function(n){n.commandHandler.undo()},function(n){return n.commandHandler.canUndo()})),e.add(new yo("Redo",function(n){n.commandHandler.redo()},function(n){return n.commandHandler.canRedo()})),e.add(new yo("Scroll To Part",function(n){n.commandHandler.scrollToPart()},function(n){return n.commandHandler.canScrollToPart()})),e.add(new yo("Zoom To Fit",function(n){n.commandHandler.zoomToFit()},function(n){return n.commandHandler.canZoomToFit()})),e.add(new yo("Reset Zoom",function(n){n.commandHandler.resetZoom()},function(n){return n.commandHandler.canResetZoom()})),e.add(new yo("Group Selection",function(n){n.commandHandler.groupSelection()},function(n){return n.commandHandler.canGroupSelection()})),e.add(new yo("Ungroup Selection",function(n){n.commandHandler.ungroupSelection()},function(n){return n.commandHandler.canUngroupSelection()})),e.add(new yo("Edit Text",function(n){n.commandHandler.editTextBlock()},function(n){return n.commandHandler.canEditTextBlock()})),e}(this)),Fu.innerHTML="",ic.addEventListener("pointerdown",this.Su,!1);var e=this,n=Bn("ul");n.className="goCXul",Fu.appendChild(n),n.innerHTML="";for(var i=this.Et.iterator;i.next();){var a=i.value,u=a.visible;if("function"==typeof a.Jx&&("function"!=typeof u||u(t))){(u=Bn("li")).className="goCXli";var h=Bn("a");h.className="goCXa",h.href="#",h.Py=a.Jx,h.addEventListener("pointerdown",function(d){return this.Py(t),e.stopTool(),d.preventDefault(),!1},!1),h.textContent=a.text,u.appendChild(h),n.appendChild(u)}}Fu.style.display="block",ic.style.display="block"},ur.prototype.hideDefaultContextMenu=function(){if(null!==this.currentContextMenu&&this.currentContextMenu===Vd){Fu.style.display="none",ic.style.display="none";var t=this.diagram;null!==t&&t.removeEventListener(ic,"pointerdown",this.Su,!1),this.currentContextMenu=null}},Dt.Object.defineProperties(ur.prototype,{currentContextMenu:{get:function(){return this.j},set:function(t){this.j=t,this.Ct=t instanceof At?t.adornedPart:null}},defaultTouchContextMenu:{get:function(){return!1===nc&&null===Vd&&Ur&&function Rd(t){var e=new mo;e.show=function(a,u,h){h.showDefaultContextMenu()},e.hide=function(a,u){u.hideDefaultContextMenu()},Vd=e,t.Su=function(){t.stopTool()},e=Bn("div");var n=Bn("div");e.style.cssText="top: 0px;z-index:10002;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",n.style.cssText="z-index:10001;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;";var i=Bn("style");dt.document.getElementsByTagName("head")[0].appendChild(i),i.sheet.insertRule(".goCXul { list-style: none; }",0),i.sheet.insertRule(".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),i.sheet.insertRule(".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0),null!==(i=t.diagram)&&(i.addEventListener(e,"contextmenu",jd,!1),i.addEventListener(e,"selectstart",jd,!1),i.addEventListener(n,"contextmenu",jd,!1)),e.className="goCXforeground",n.className="goCXbackground",dt.document.body&&(dt.document.body.appendChild(e),dt.document.body.appendChild(n)),Fu=e,ic=n,nc=!0}(this),Vd},set:function(t){null===t&&(nc=!0),Vd=t}},currentObject:{get:function(){return this.o},set:function(t){this.o=t}},mouseDownPoint:{get:function(){return this.Zw}}});var Vd=null,nc=!1,ic=null,Fu=null;function se(){Ut.call(this),this.name="TextEditing",this.mh=new Zt,this.Ha=null,this.Ga=bx,this.vi=null,this.ja=oc,this.C=1,this.M=!0,this.o=null,this.j=new mo,this.Ft=null,function Ix(t,e){if(Ur){var n=Bn("textarea");t.Ft=n,n.addEventListener("input",function(){if(null!==t.textBlock){var i=t.py(this.value);this.style.width=20+i.measuredBounds.width*this.ZA+"px",this.rows=i.lineCount}},!1),n.addEventListener("keydown",function(i){if(null!==t.textBlock){var a=i.key;"Enter"===a?(!1===t.textBlock.isMultiline&&i.preventDefault(),t.acceptText(rc)):"Tab"===a?(t.acceptText(Fl),i.preventDefault()):"Escape"===a&&(t.doCancel(),null!==t.diagram&&t.diagram.doFocus())}},!1),n.addEventListener("focus",function(){if(null!==t.currentTextEditor&&t.state!==oc){var i=t.Ft;t.ja===Bd&&(t.ja=Vp),"function"==typeof i.select&&t.selectsTextOnActivate&&(i.select(),i.setSelectionRange(0,9999))}},!1),n.addEventListener("blur",function(){if(null!==t.currentTextEditor&&t.state!==oc){var i=t.Ft;"function"==typeof i.focus&&i.focus(),"function"==typeof i.select&&t.selectsTextOnActivate&&(i.select(),i.setSelectionRange(0,9999))}},!1),e.valueFunction=function(){return n.value},e.mainElement=n,e.show=function(i,a,u){if(i instanceof Zt&&u instanceof se)if(u.state===ju)n.style.border="3px solid red",n.focus();else{var h=i.da(Wt),d=a.position,f=a.scale,g=i.wf()*f;g<u.minimumEditorScale&&(g=u.minimumEditorScale);var m=i.naturalBounds.width*g+6,y=i.naturalBounds.height*g+2,x=(h.x-d.x)*f;h=(h.y-d.y)*f,y=(d=i.verticalAlignment).y*y-d.y*(f=(i.lineHeight+i.spacingAbove+i.spacingBelow)*i.lineCount*g)+d.offsetY-(.5*y-.5*f)-f/2,n.value=i.text,a.div.style.font=i.font,n.style.position="absolute",n.style.zIndex="100",n.style.font="inherit",n.style.fontSize=100*g+"%",n.style.lineHeight="normal",n.style.width=m+"px",n.style.left=(x-m/2|0)-1+"px",n.style.top=(h+y|0)-1+"px",n.style.textAlign=i.textAlign,n.style.margin="0",n.style.padding="1px",n.style.border="0",n.style.outline="none",n.style.whiteSpace="pre-wrap",n.style.overflow="hidden",n.rows=i.lineCount,n.ZA=g,n.className="goTXarea",a.div.appendChild(n),n.focus(),u.selectsTextOnActivate&&(n.select(),n.setSelectionRange(0,9999))}},e.hide=function(i){i.div.removeChild(n)}}}(this,this.j)}function vy(t){var e=t.textBlock,n=t.diagram,i=t.currentTextEditor;if(null!==e&&null!==i){var a=e.text,u="";null!==i.valueFunction&&(u=i.valueFunction()),t.isValidText(e,a,u)?(t.wa(t.name),t.ja=Ud,t.transactionResult=t.name,e.text=u,t.doSuccess(a,u),null!==n&&n.S("TextEdited",e,a),t.stopTransaction(),t.stopTool(),null!==n&&n.doFocus()):(t.ja=ju,t.doError(a,u))}}ur.className="ContextMenuTool",co("contextMenuTool",function(){return this.findTool("ContextMenu")},function(t){this.Za("ContextMenu",t,this.mouseUpTools)}),Ft(se,Ut),se.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(null===t||t.isReadOnly||pa&&pa!==this&&(pa.acceptText(Rp),pa&&pa!==this)||!t.lastInput.left||this.isBeyondDragSize())return!1;var e=t.Wb(t.lastInput.documentPoint);return!!(null!==e&&e instanceof Zt&&e.editable&&e.part.canEdit())&&!(null===(e=e.part)||this.starting===bx&&!e.isSelected||this.starting===xy&&2>t.lastInput.clickCount)},se.prototype.doStart=function(){pa=this,null!==this.textBlock&&this.doActivate()},se.prototype.doActivate=function(){if(!this.isActive){var t=this.diagram;if(null!==t){var e=this.textBlock;if(null===e&&(e=t.Wb(t.lastInput.documentPoint)),null!==e&&e instanceof Zt&&(this.textBlock=e,null!==e.part)){t.animationManager.nc(),this.isActive=!0,this.ja=Bd;var n=this.defaultTextEditor;null!==e.textEditor&&(n=e.textEditor),this.mh=this.textBlock.copy();var i=new B(this.textBlock.da(zn),this.textBlock.da(ks));t.Vv(i),n.show(e,t,this),this.currentTextEditor=n}}}},se.prototype.doCancel=function(){this.stopTool()},se.prototype.doMouseUp=function(){this.canStart()&&this.doActivate()},se.prototype.doMouseDown=function(){this.isActive&&this.acceptText(Rp)},se.prototype.acceptText=function(t){switch(t){case Rp:this.ja===Ud?this.currentTextEditor instanceof HTMLElement&&this.currentTextEditor.focus():(this.ja===Bd||this.ja===ju||this.ja===Vp)&&(this.ja=Ru,vy(this));break;case Lu:case rc:case Fl:(rc!==t||!0!==this.textBlock.isMultiline)&&(this.ja===Bd||this.ja===ju||this.ja===Vp)&&(this.ja=Ru,vy(this))}},se.prototype.doError=function(t,e){var n=this.textBlock;null!==n.errorFunction&&n.errorFunction(this,t,e),(t=this.currentTextEditor)&&t.show(n,this.diagram,this)},se.prototype.doSuccess=function(t,e){var n=this.textBlock;null!==n.textEdited&&n.textEdited(n,t,e)},se.prototype.doDeactivate=function(){var t=this.diagram;null!==t&&(this.ja=oc,null!==this.currentTextEditor&&this.currentTextEditor.hide(t,this),this.textBlock=null,this.isActive=!1)},se.prototype.doStop=function(){pa=null},se.prototype.isValidText=function(t,e,n){var i=this.textValidation;return!(null!==i&&!i(t,e,n)||null!==(i=t.textValidation)&&!i(t,e,n))},se.prototype.py=function(t){var e=this.mh;return e.text=t,e.measure(this.textBlock.di,1/0),e},Dt.Object.defineProperties(se.prototype,{textBlock:{get:function(){return this.Ha},set:function(t){this.Ha=t}},currentTextEditor:{get:function(){return this.o},set:function(t){this.o=t}},defaultTextEditor:{get:function(){return this.j},set:function(t){this.j=t}},starting:{get:function(){return this.Ga},set:function(t){this.Ga=t}},textValidation:{get:function(){return this.vi},set:function(t){this.vi=t}},minimumEditorScale:{get:function(){return this.C},set:function(t){this.C=t}},selectsTextOnActivate:{get:function(){return this.M},set:function(t){this.M=t}},state:{get:function(){return this.ja},set:function(t){this.ja!==t&&(this.ja=t)}}}),se.prototype.measureTemporaryTextBlock=se.prototype.py;var Lu=new J(se,"LostFocus",0),Rp=new J(se,"MouseDown",1),Fl=new J(se,"Tab",2),rc=new J(se,"Enter",3),jp=new J(se,"SingleClick",0),bx=new J(se,"SingleClickSelected",1),xy=new J(se,"DoubleClick",2),oc=new J(se,"StateNone",0),Bd=new J(se,"StateActive",1),Vp=new J(se,"StateEditing",2),Ru=new J(se,"StateValidating",3),ju=new J(se,"StateInvalid",4),Ud=new J(se,"StateValidated",5),pa=null;function ji(t){Vi||(My(),Vi=!0),this.F=zd,this.gl=this.rb=this.Dr=this.hc=!1,this.ux=!0,this.hl=lc,this.dn=!1,this.Zh=this.td=!0,this.Fg=600,this.Dw=this.sx=!1,this.Md=new K,this.Pd=new wn,this.Pd.Ld=this,this.$i=new K,this.Ou=new K,this.qs=new K,this.Il=new K,t&&Object.assign(this,t)}function ga(t,e){t.td&&t.canStart(e)&&(t.Md.add(e),t.defaultAnimation.isAnimating&&t.nc(),gi(t.F),t.rb=!0)}function Bp(t){if(t.td&&t.rb){var e=t.Pd,n=t.F,i=t.Md.contains("Model");i&&(t.gl=!0,t.hl===lc?(e.isViewportUnconstrained=!0,e.jc.clear(),e.add(n,"position",n.position.copy().offset(0,-200),n.position),e.add(n,"opacity",0,1)):t.hl===Vu&&e.jc.clear(),t.ux=!(t.hl!==uc||!n.Cu.A(n.ka)),n.S("InitialAnimationStarting",t)),i&&!t.Zh||0===e.jc.count?(t.Md.clear(),t.rb=!1,e.jc.clear(),tl(e,n),t.gl=!1,n.N()):(t.Md.clear(),n.eg=!1,i=e.jc.get(n),n.autoScale!==oi&&null!==i&&(delete i.start.scale,delete i.end.scale),dt.requestAnimationFrame(function(){!1===t.rb||e.hc||(n.Fe("temporaryPixelRatio")&&Rl(n),Hp(n),t.rb=!1,e.start(),sc(t),n.Pa(),VM(e,0),Is(n,!0),Qa(t),n.S("AnimationStarting",t))}))}}function Hd(t){return t.Md.contains("Trigger")&&1===t.Md.count}function wy(t,e,n,i){t.isTicking||Hd(t)||e instanceof X&&(null!==e.fromNode||null!==e.toNode)||t.Pd.add(e,"position",n,i,!1)}function sc(t){if(!t.Dr){var e=t.F;t.sx=e.skipsUndoManager,t.Dw=e.skipsModelSourceBindings,e.skipsUndoManager=!0,e.skipsModelSourceBindings=!0,t.Dr=!0}}function Qa(t){var e=t.F;e.skipsUndoManager=t.sx,e.skipsModelSourceBindings=t.Dw,t.Dr=!1}function ac(t,e,n){!t.rb||e.A(n)||Hd(t)||(t.F.Pi||(e=n.copy()),Up(t.Pd,t.F,"position",e,n))}function Fx(t,e){for(e=e.findLinksConnected();e.next();){var n=e.value;n.cf=n.points.copy(),t.Il.add(n)}}function Gd(t,e,n,i,a){null===t&&(t=[0,0,0,0]),null===e&&(e=[0,0,0,0]);var u=t[0],h=t[1],d=t[2];t=t[3];var f=e[0],g=e[1],m=e[2];return e=e[3],0===d||100===d?(u=f,h=g):(0===m||100===m)&&(f=u,g=h),180<Math.abs(f-u)&&(f>u?u+=360:f+=360),"hsla("+(u=a(n,u,f-u,i)%360)+", "+(h=a(n,h,g-h,i))+"%, "+(d=a(n,d,m-d,i))+"%, "+(n=a(n,t,e-t,i))+")"}function My(){function t(n,i,a,u,h,d){n.position=new N(u(h,i.x,a.x-i.x,d),u(h,i.y,a.y-i.y,d))}var e=new xt;e.add("position:diagram",t),e.add("position",t),e.add("position:part",function(n,i,a,u,h,d){h<d?n.Gm(u(h,i.x,a.x-i.x,d),u(h,i.y,a.y-i.y,d),!1):n.position=new N(u(h,i.x,a.x-i.x,d),u(h,i.y,a.y-i.y,d))}),e.add("location",function(n,i,a,u,h,d){h<d?n.Gm(u(h,i.x,a.x-i.x,d),u(h,i.y,a.y-i.y,d),!0):n.location=new N(u(h,i.x,a.x-i.x,d),u(h,i.y,a.y-i.y,d))}),e.add("position:placeholder",function(n,i,a,u,h,d){h<d?n.Gm(u(h,i.x,a.x-i.x,d),u(h,i.y,a.y-i.y,d),!1):n.position=new N(u(h,i.x,a.x-i.x,d),u(h,i.y,a.y-i.y,d))}),e.add("position:nodeCollapse",function(n,i,a,u,h,d){var f=n.actualBounds,g=a.actualBounds;a=g.x+g.width/2-f.width/2,f=g.y+g.height/2-f.height/2,h<d?n.Gm(u(h,i.x,a-i.x,d),u(h,i.y,f-i.y,d),!1):n.position=new N(u(h,i.x,a-i.x,d),u(h,i.y,f-i.y,d))}),e.add("desiredSize",function(n,i,a,u,h,d){n.desiredSize=new B(u(h,i.width,a.width-i.width,d),u(h,i.height,a.height-i.height,d))}),e.add("width",function(n,i,a,u,h,d){n.width=u(h,i,a-i,d)}),e.add("height",function(n,i,a,u,h,d){n.height=u(h,i,a-i,d)}),e.add("fill",function(n,i,a,u,h,d){n.fill=Gd(i,a,h,d,u)}),e.add("stroke",function(n,i,a,u,h,d){n.stroke=Gd(i,a,h,d,u)}),e.add("strokeWidth",function(n,i,a,u,h,d){n.strokeWidth=u(h,i,a-i,d)}),e.add("strokeDashOffset",function(n,i,a,u,h,d){n.strokeDashOffset=u(h,i,a-i,d)}),e.add("background",function(n,i,a,u,h,d){n.background=Gd(i,a,h,d,u)}),e.add("areaBackground",function(n,i,a,u,h,d){n.areaBackground=Gd(i,a,h,d,u)}),e.add("opacity",function(n,i,a,u,h,d){n.opacity=u(h,i,a-i,d)}),e.add("scale",function(n,i,a,u,h,d){n.scale=u(h,i,a-i,d)}),e.add("angle",function(n,i,a,u,h,d){n.angle=u(h,i,a-i,d)}),qa=e}se.className="TextEditingTool",se.LostFocus=Lu,se.MouseDown=Rp,se.Tab=Fl,se.Enter=rc,se.SingleClick=jp,se.SingleClickSelected=bx,se.DoubleClick=xy,se.StateNone=oc,se.StateActive=Bd,se.StateEditing=Vp,se.StateValidating=Ru,se.StateInvalid=ju,se.StateValidated=Ud,co("textEditingTool",function(){return this.findTool("TextEditing")},function(t){this.Za("TextEditing",t,this.mouseUpTools)}),ji.prototype.Ke=function(t){this.F=t},ji.prototype.canStart=function(){return!0},(D=ji.prototype).Ys=function(t){return this.Pd.Ys(t)},D.Cv=function(t){return this.Pd.Cv(t)},D.nc=function(t){var e=this.Pd;if(!0===this.rb&&(this.gl=this.rb=!1,this.Md.clear(),0<e.jc.count&&this.F.Fb()),this.hc){if(e.gm(!0),e.jc.clear(),tl(e,null),!0===t)for(t=this.$i.xa(),e=0;e<t.length;e++)t[e].gm(!0)}else e.jc.clear(),tl(e,this.F)},D.gm=function(t){t===this.defaultAnimation&&this.defaultAnimation.jc.clear(),this.$i.remove(t),0===this.$i.count&&(this.hc=!1,this.F.Fb()),t===this.defaultAnimation&&(this.defaultAnimation.jc.clear(),this.F.S("AnimationFinished",this))},D.Yj=function(t,e){this.rb&&(this.Md.contains("Expand Tree")||this.Md.contains("Expand SubGraph"))&&(this.Pd.Yj(t,e),Fx(this,t))},D.Wj=function(t,e){this.rb&&(this.Md.contains("Collapse Tree")||this.Md.contains("Collapse SubGraph"))&&(this.Pd.Wj(t,e),Up(this.Pd,e,"position",e.position,e.position),Fx(this,t))},Dt.Object.defineProperties(ji.prototype,{animationReasons:{get:function(){return this.Md}},isEnabled:{get:function(){return this.td},set:function(t){(this.td=t)&&this.$i.each(function(e){e.isAnimating||e.runCount!==1/0||e.start()})}},duration:{get:function(){return this.Fg},set:function(t){1>t&&me(t,">= 1",ji,"duration"),this.Fg=t}},isAnimating:{get:function(){return this.hc}},isTicking:{get:function(){return this.Dr}},isInitial:{get:function(){return this.Zh},set:function(t){this.Zh=t}},defaultAnimation:{get:function(){return this.Pd}},activeAnimations:{get:function(){return this.$i}},initialAnimationStyle:{get:function(){return this.hl},set:function(t){this.hl=t}}}),ji.prototype.stopAnimation=ji.prototype.nc;var qa=null,Vi=!1,lc=new J(ji,"Default",1),uc=new J(ji,"AnimateLocations",2),Vu=new J(ji,"None",3);function wn(t){this.Uu=this.qx=this.Ld=this.F=null,this.ol=this.hc=this.j=!1,this.In=this.zd=0,this.ar=this.Kt=Lx,this.nl=this.jp=!1,this.Bu=1,this.zu=0,this.sd=this.Fg=NaN,this.Hw=0,this.Jn=null,this.o=ha,this.jc=new xt,this.ru=new xt,this.Zl=new K,this.su=new K,this.Ew=Yl,t&&Object.assign(this,t)}function tl(t,e){if(t.ru.clear(),t.nl=!1,t.zu=0,t.sd=NaN,0<t.Zl.count&&t.Zl.clear(),0<t.su.count&&t.su.clear(),null!==e)for(t=e.links;t.next();)t.value.cf=null}function Up(t,e,n,i,a,u){var h=t.jc;if(e instanceof j&&"position"===n&&(n="position:diagram"),("fill"===n||"stroke"===n||"background"===n||"areaBackground"===n)&&(Ls(i),zy(),i=[mi.j,mi.C,mi.o,mi.M],Ls(a),zy(),a=[mi.j,mi.C,mi.o,mi.M]),h.contains(e)){var d=h.H(e),f=d.start,g=d.end;void 0===f[n]&&(f[n]=Ll(i)),g[n]=Ll(a)}else g={},(f={})[n]=Ll(i),g[n]=Ll(a),d=f.position,e instanceof ut&&d instanceof N&&!d.u()&&e.diagram.animationManager.Md.contains("Expand SubGraph")&&d.assign(g.position),d=new BM(f,g,u),h.add(e,d);(h=f[n])instanceof N&&!h.u()&&h.assign(t.o),u&&0===n.indexOf("position:")&&e instanceof ht?d.nv.location=Ll(e.location):u&&(d.nv[n]=Ll(i))}function Ll(t){return t instanceof N||t instanceof mt?t.copy():t}function Bu(t,e){if(!t.ol||e){var n=t.Ld;if(!1!==t.hc){var i=+new Date,a=i>t.In?t.sd:i-t.zd;e&&((a=t.Hw)<t.sd?(t.zd=+new Date-a,t.In=t.zd+t.sd):a=t.sd),sc(n),VM(t,a),Is(t.F,!0),Qa(n),i>t.In&&(t.jp&&!t.nl?(t.zd=+new Date,t.In=t.zd+t.sd,t.nl=!0):t.gm(!1))}}}function VM(t,e){for(var n=t.sd,i=t.jc.iterator,a=t.nl;i.next();){var u=i.key;if(!(u instanceof ut&&null===u.diagram)){var h=i.value,d=a?h.end:h.start;h=a?h.start:h.end;var g,f=qa;for(g in h)"position"===g&&(h["position:placeholder"]||h["position:nodeCollapse"])||null===f.get(g)||f.get(g)(u,d[g],h[g],t.ar,e,n,t)}}}function Lx(t,e,n,i){return 1>(t/=i/2)?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}function qt(t,e,n,i){return t===i?e+n:n*(1-Math.pow(2,-10*t/i))+e}function BM(t,e,n){this.start=t,this.end=e,this.nv={},this.hv=n,this.Pv=!1}function Ps(t,e,n){this.md=null,this.bf=t,this.Hp=n||UM,this.Ik=null,void 0!==e&&(this.Ik=e,void 0===n&&(this.Hp=Rx))}ji.className="AnimationManager",ji.defineAnimationEffect=function(t,e){Vi||(My(),Vi=!0),qa.add(t,e)},ji.Default=lc,ji.AnimateLocations=uc,ji.None=Vu,wn.prototype.suspend=function(){this.ol=!0},wn.prototype.advanceTo=function(t,e){e&&(this.ol=!1),this.jp&&t>=this.sd&&(this.nl=!0,t-=this.sd),this.Hw=t,Bu(this,!0),sc(this.Ld),Is(this.F),Qa(this.Ld),this.F.redraw()},(D=wn.prototype).start=function(){if(0===this.jc.count||this.hc)return this;for(var t=this.F,e=this.jc.iterator;e.next();){var n=e.value.end,i=e.key;if(n["position:placeholder"]){var a=i.findVisibleNode();if(a instanceof vt&&null!==a.placeholder){var u=a.placeholder;(a=u.da(zn)).x+=(u=u.padding).left,a.y+=u.top,n["position:placeholder"]=a}}null===t&&(i instanceof j?t=i:i instanceof ut&&(t=i.diagram))}return null===t||(this.F=t,this.Ld=t.animationManager,!1===(e=this.Ld).isEnabled||(this.sd=isNaN(this.Fg)?e.duration:this.Fg,this.ar=this.Kt,e.gl&&e.hl===lc&&this===e.defaultAnimation&&(this.ar=qt,this.sd=isNaN(this.Fg)?600===e.duration?900:e.duration:this.Fg),this.Ew=t.scrollMode,this.isViewportUnconstrained&&(t.Sj=Ry),sc(e),this.Zl.each(function(h){h.data=null,t.add(h)}),Qa(e),this.hc=!0,this.zd=+new Date,this.In=this.zd+this.sd,function Ox(t,e){function n(){if(0<a.qs.count&&(i.addAll(a.qs),a.qs.clear(),a.hc=!0),!1!==a.hc&&0!==i.count){a.Ou.addAll(i);for(var u=a.Ou.iterator;u.next();){var h=u.value;if(!1!==h.hc){t:if(0<h.Zl.count)var d=!0;else{for(d=h.jc.iterator;d.next();){var f=d.key;if(f instanceof ut&&null!==f.diagram||f instanceof j){d=!0;break t}}d=!1}d?Bu(h,!1):h.ol=!0}}a.Ou.clear(),sc(a),Is(a.F),Qa(a),dt.requestAnimationFrame(n)}}var i=t.$i,a=t;t.hc?t.qs.add(e):(t.hc=!0,i.add(e),dt.requestAnimationFrame(function(){n()}))}(e,this))),this},D.kz=function(t,e){return t.Jc()?(this.Zl.add(t),this.F=e,this):this},D.add=function(t,e,n,i,a){if("position"===e&&n.A(i))return this;if(null===this.F&&(t instanceof j?this.F=t:t instanceof ut&&null!==t.diagram&&(this.F=t.diagram)),t instanceof ht){if(!t.isAnimated)return this;"position"===e&&(e="position:part")}return Up(this,t,e,n,i,a),this},D.Ys=function(t){return!!this.hc&&null!==(t=this.jc.H(t))&&t.Pv},D.Cv=function(t){return!!this.hc&&null!==(t=this.jc.H(t))&&(t.start.position||t.start.location)},D.stop=function(){return this.hc?(this.gm(!0),this):this},D.gm=function(t){if(null!==this.Uu&&this.Uu.qp.remove(this.qx),this.hc){var e=this.F,n=this.Ld;this.ol=this.hc=n.gl=!1,sc(n);for(var i=this.jc,a=this.Zl.iterator;a.next();)e.remove(a.value);for(a=this.su.iterator;a.next();)a.value.s();a=this.jp,i=i.iterator;for(var u=qa;i.next();){var y,h=i.key,d=i.value,f=a?d.end:d.start,g=a?d.start:d.end,m=d.nv;for(y in g)if(null!==u.get(y)){var x=y;!d.hv||"position:nodeCollapse"!==x&&"position:placeholder"!==x||(x="position"),u.get(x)(h,f[y],void 0!==m[y]?m[y]:d.hv?f[y]:g[y],this.ar,this.sd,this.sd,this)}d.hv&&void 0!==m.location&&h instanceof ht&&(h.location=m.location),d.Pv&&h instanceof ht&&h.Nb(!1)}if(e.Ts.clear(),jl(e,!1),e.Pa(),e.N(),Is(e,!0),n.defaultAnimation===this){for(y=n.Il.iterator;y.next();)null!==(a=y.value).cf&&(a.points=a.cf,a.cf=null);n.Il.clear()}this.isViewportUnconstrained&&(e.scrollMode=this.Ew),Qa(n),this.zu++,!t&&this.Bu>this.zu?(this.nl=!1,this.start()):(this.Jn&&this.Jn(this),tl(this,null),n.gm(this),e.Fb())}},D.Yj=function(t,e){var n=e.actualBounds,i=null;if(e instanceof vt&&(i=e.placeholder),null!==i?((n=i.da(zn)).x+=(i=i.padding).left,n.y+=i.top,this.add(t,"position",n,t.position,!1)):this.add(t,"position",new N(n.x+n.width/2,n.y+n.height/2),t.position,!1),this.add(t,"scale",.01,t.scale,!1),t instanceof vt)for(t=t.memberParts;t.next();)(i=t.value)instanceof Q&&this.Yj(i,e)},D.Wj=function(t,e){if(t.isVisible()){var n=null;if(e instanceof vt&&(n=e.placeholder),null!==n?this.add(t,"position:placeholder",t.position,n,!0):this.add(t,"position:nodeCollapse",t.position,e,!0),this.add(t,"scale",t.scale,.01,!0),(n=this.jc).contains(t)&&(n.H(t).Pv=!0),t instanceof vt)for(t=t.memberParts;t.next();)(n=t.value)instanceof Q&&this.Wj(n,e)}},D.iA=function(t){var e=this.ru.get(t);return null===e&&this.ru.add(t,e={}),e},Dt.Object.defineProperties(wn.prototype,{duration:{get:function(){return this.Fg},set:function(t){1>t&&me(t,">= 1",wn,"duration"),this.Fg=t}},reversible:{get:function(){return this.jp},set:function(t){this.jp=t}},runCount:{get:function(){return this.Bu},set:function(t){0<t?this.Bu=t:z("Animation.runCount value must be a positive integer.")}},finished:{get:function(){return this.Jn},set:function(t){this.Jn!==t&&(this.Jn=t)}},easing:{get:function(){return this.Kt},set:function(t){this.Kt=t}},isViewportUnconstrained:{get:function(){return this.j},set:function(t){this.j=t}},isAnimating:{get:function(){return this.hc}}}),wn.prototype.getTemporaryState=wn.prototype.iA,wn.prototype.stop=wn.prototype.stop,wn.prototype.add=wn.prototype.add,wn.prototype.addTemporaryPart=wn.prototype.kz,wn.className="Animation",wn.EaseLinear=function(t,e,n,i){return n*t/i+e},wn.EaseInOutQuad=Lx,wn.EaseInQuad=function(t,e,n,i){return n*(t/=i)*t+e},wn.EaseOutQuad=function(t,e,n,i){return-n*(t/=i)*(t-2)+e},wn.EaseInExpo=function(t,e,n,i){return 0===t?e:n*Math.pow(2,10*(t/i-1))+e},wn.EaseOutExpo=qt,BM.className="AnimationState",Ps.prototype.copy=function(){var t=new Ps(this.bf);t.Hp=this.Hp;var e=this.Ik;if(null!==e){var n={};void 0!==e.duration&&(n.duration=e.duration),void 0!==e.finished&&(n.finished=e.finished),void 0!==e.easing&&(n.easing=e.easing),t.Ik=n}return t},Dt.Object.defineProperties(Ps.prototype,{propertyName:{get:function(){return this.bf},set:function(t){this.bf=t}},animationSettings:{get:function(){return this.Ik},set:function(t){this.Ik=t}},startCondition:{get:function(){return this.Hp},set:function(t){this.Hp=t}}});var hc,zd,UM=new J(Ps,"Default",1),Rx=new J(Ps,"Immediate",2),HM=new J(Ps,"Bundled",3);function pi(t){xn(this),this.F=null,this.Fa=new et,this.na="",this.lb=1,this.o=!1,this.j=this.oi=this.C=this.jj=this.ij=this.hj=this.gj=this.ej=this.fj=this.dj=this.lj=this.cj=this.kj=this.bj=this.aj=!0,this.Vo=[],t&&Object.assign(this,t)}function ma(t,e){var n=1;return 1!==t.lb&&(e.globalAlpha=(n=e.globalAlpha)*t.lb),n}function _y(t,e,n){if(e=function tr(t,e,n){var i=n.zOrder;if(isNaN(i))return e;var a=(t=t.Fa).count;if(1>=a)return e;if(0>e&&(e=t.indexOf(n)),0>e)return-1;for(var u=e-1,h=NaN;0<=u&&(h=t.J(u).zOrder,isNaN(h));)u--;for(var d=e+1,f=NaN;d<a&&(f=t.J(d).zOrder,isNaN(f));)d++;if(!isNaN(h)&&h>i)for(;;){if(-1===u||h<=i){if(++u===e)break;return t.eb(e),t.ub(u,n),u}for(h=NaN;0<=--u&&(h=t.J(u).zOrder,isNaN(h)););}else if(!isNaN(f)&&f<i)for(;;){if(d===a||f>=i){if(--d===e)break;return t.eb(e),t.ub(d,n),d}for(f=NaN;++d<a&&(f=t.J(d).zOrder,isNaN(f)););}return e}(t,e,n),n instanceof vt&&null!==n&&isNaN(n.zOrder)){if(0!==n.memberParts.count){for(var i=-1,a=t.Fa.m,u=a.length,h=0;h<u;h++){var d=a[h];if(d===n&&(e=h,0<=i)||0>i&&d.containingGroup===n&&(i=h,0<=e))break}!(0>i)&&i<e&&((a=t.Fa).eb(e),a.ub(i,n))}null!==(n=n.containingGroup)&&_y(t,-1,n)}}function j(t,e){if(Qx||(function iS(){if(Ur){var t=dt.document.createElement("canvas"),e=t.getContext("2d"),n=$t("7ca11abfd022028846");e[n]=$t("398c3597c01238");for(var i=["5da73c80a36455d6038e4972187c3cae51fd22",$h.Dx+"4ae6247590da4bb21c324ba3a84e385776",St.xF+"fb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387",R.za],a=1;5>a;a++)e[$t("7ca11abfd7330390")]($t(i[a-1]),10,15*a);for(e[n]=$t("39f046ebb36e4b"),n=1;5>n;n++)e[$t("7ca11abfd7330390")]($t(i[n-1]),10,15*n);(4!==i.length||"5"!==i[0][0]||"7"!==i[3][0])&&(St.prototype.Ed=St.prototype.Fx),Jx=t}}(),Qx=!0),xn(this),zd=this,this.ob=!0,this.Ea=null,this.ta=this.ua=0,this.Aa=null,Ur){var n=this,i=function(){n.removeEventListener(dt.document,"DOMContentLoaded",i,!1),n.setRTL()};null!==dt.document.body?this.setRTL():n.addEventListener(dt.document,"DOMContentLoaded",i,!1)}this.Hl=null,Yu.add("Model",jt);var a=this;return this.Kd=function(u){var h=a.partManager;if(u.model===h.diagram.model&&h.diagram.Z){h.diagram.Z=!1;try{""===u.modelChange&&u.change===ve&&h.updateDataBindings(u.object,u.propertyName)}finally{h.diagram.Z=!0}}},this.Ih=function(u){a.partManager.doModelChanged(u)},this.Gu=this.Ju=null,jx(this),this.model=Bv(),this.gh=!0,Bx(this),this.layout=new Rt,this.gh=!1,this.yk=this.zk=this.xk=this.wk=this.EA=this.tk=this.lw=null,this.Aq=function(){},this.preventDefault=null,this.fo=!1,this.Yh=new qx,void 0!==t&&("string"==typeof t||dt.Element&&t instanceof Element?qp(this,t):e=t),this.ob=!1,e&&this.Hm(e),this}function jx(t){t.Ld=new ji,t.Ld.Ke(t),t.sb=17,t.jx=!1,t.io=!1,t.Au="default",t.Na=new et,t.Xy=new xt,t.zy(),t.yy(),t.lb=1,t.ka=new N(NaN,NaN).freeze(),t.Cu=new N(NaN,NaN),t.sa=1,t.er=1,t.Vt=new N(NaN,NaN).freeze(),t.Wt=NaN,t.mu=1e-4,t.iu=100,t.tb=new St,t.Yu=new N(NaN,NaN).freeze(),t.Qt=new B(NaN,NaN,NaN,NaN).freeze(),t.Rj=new Lt(0,0,0,0).freeze(),t.Sj=Yl,t.Mu=!1,t.xu=null,t.Eu=null,t.Oh=oi,t.Qk=Fi,t.Lg=oi,t.vr=Fi,t.Ut=zn,t.Xt=zn,t.Uc=!0,t.bo=!1,t.qe=new K,t.Wh=new xt,t.Bn=!0,t.Oq=250,t.Jk=-1,t.Qq=new Lt(16,16,16,16).freeze(),t.eg=!1,t.$k=!1,t.Ln=!0,t.pr=new Qi,t.pr.diagram=t,t.bh=new Qi,t.bh.diagram=t,t.Dj=new Qi,t.Dj.diagram=t,t.ug=null,t.$e=null,t.Pu=!1,function YM(t){function e(a){var u=a.toLowerCase(),h=new et;n.add(a,h),n.add(u,h),i.add(a,a),i.add(u,a)}var n=new xt,i=new xt;e("InitialAnimationStarting"),e("AnimationStarting"),e("AnimationFinished"),e("BackgroundSingleClicked"),e("BackgroundDoubleClicked"),e("BackgroundContextClicked"),e("ClipboardChanged"),e("ClipboardPasted"),e("DocumentBoundsChanged"),e("ExternalObjectsDropped"),e("GainedFocus"),e("InitialLayoutCompleted"),e("LayoutCompleted"),e("LinkDrawn"),e("LinkRelinked"),e("LinkReshaped"),e("LostFocus"),e("Modified"),e("ObjectSingleClicked"),e("ObjectDoubleClicked"),e("ObjectContextClicked"),e("PartCreated"),e("PartResized"),e("PartRotated"),e("SelectionMoved"),e("SelectionCopied"),e("SelectionDeleting"),e("SelectionDeleted"),e("SelectionGrouped"),e("SelectionUngrouped"),e("ChangingSelection"),e("ChangedSelection"),e("SubGraphCollapsed"),e("SubGraphExpanded"),e("TextEdited"),e("TreeCollapsed"),e("TreeExpanded"),e("ViewportBoundsChanged"),e("InvalidateDraw"),t.Jw=n,t.Iw=i}(t),t.xi=new K,t.du=!0,t.Tu=$u,t.Rw=!1,t.Vu=Fy,t.Dt="auto",t.dr="auto",t.vg=null,t.Dg=null,t.xg=null,t.Wg=null,t.Ug=null,t.Tg=null,t.ou=null,t.Rg=null,t.Tt=!1,t.Sg=null,t.Vg=null,t.qh=null,t.yg=null,t.pu=!1,t.wu={},t.El=[null,null],t.gh=!1,t.lx=!1,t.Nu=!1,t.Gt=!1,t.Tw=!0,t.Vc=!1,t.zj=!1,t.wx=!0,t.pe=-2,t.$g=new xt,t.$o=new et,t.Mg=!1,t.td=!0,t.pt=!0,t.aj=!0,t.bj=!0,t.qt=!1,t.rt=!0,t.kj=!0,t.cj=!0,t.lj=!0,t.tt=!0,t.dj=!0,t.fj=!0,t.ej=!0,t.gj=!0,t.hj=!0,t.ij=!0,t.jj=!0,t.ut=!0,t.wt=!0,t.Sw=!1,t.ml=!1,t.Yn=!0,t.Zn=!0,t.st=!0,t.vt=!0,t.Hu=16,t.Lu=16,t.$r=!1,t.Fu=!1,t.Ku=0,t.Iu=0,t.mb=new Lt(5).freeze(),t.kx=(new K).freeze(),t.ju=999999999,t.Pw=(new K).freeze(),t.vj=!0,t.wj=!0,t.xj=!0,t.Ue=!1,t.Of=!1,t.Nh=!0,t.Qf=!1,t.Wy=new K,t.Qw=new K,t.si=null,t.Bw=new mt(8,8),t.Cw=999,t.bx=1,t.mx=0,t.bd={scale:1,position:new N,bounds:new B,Gx:new mt,qy:new mt,ky:!1},t.vx=new B(NaN,NaN,NaN,NaN).freeze(),t.Rp=new mt(NaN,NaN).freeze(),t.gr=new B(NaN,NaN,NaN,NaN).freeze(),t.eu=!1,t.Yg=new xt;var e=new Q,n=new Zt;n.bind(new Fe("text","",sr)),e.add(n),t.Sy=e,t.Yg.add("",e),e=new Q,(n=new Zt).stroke="brown",n.bind(new Fe("text","",sr)),e.add(n),t.Yg.add("Comment",e),(e=new Q).selectable=!1,e.avoidable=!1,(n=new wt).figure="Ellipse",n.fill="black",n.stroke=null,n.desiredSize=new mt(3,3).ca(),e.add(n),t.Yg.add("LinkLabel",e),t.uj=new xt,(e=new vt).selectionObjectName="GROUPPANEL",e.type=Y.Vertical,(n=new Zt).font="bold 12pt sans-serif",n.bind(new Fe("text","",sr)),e.add(n),(n=new Y(Y.Auto)).name="GROUPPANEL";var i=new wt;i.figure="Rectangle",i.fill="rgba(128,128,128,0.2)",i.stroke="black",n.add(i),(i=new yi).padding=new Lt(5,5,5,5).ca(),n.add(i),e.add(n),t.Qy=e,t.uj.add("",e),t.hi=new xt,e=new X,(n=new wt).isPanelMain=!0,e.add(n),(n=new wt).toArrow="Standard",n.fill="black",n.stroke=null,n.strokeWidth=0,e.add(n),t.Ry=e,t.hi.add("",e),e=new X,(n=new wt).isPanelMain=!0,n.stroke="brown",e.add(n),t.hi.add("Comment",e),(e=new At).type=Y.Auto,(n=new wt).fill=null,n.stroke="dodgerblue",n.strokeWidth=3,e.add(n),(n=new yi).margin=new Lt(1.5,1.5,1.5,1.5).ca(),e.add(n),t.qu=e,t.St=e,(e=new At).type=Y.Link,(n=new wt).isPanelMain=!0,n.fill=null,n.stroke="dodgerblue",n.strokeWidth=3,e.add(n),t.gu=e,t.Vd=null,t.tr=!1,t.Tk=null,t.partManager=new jt,t.toolManager=new Ee,t.toolManager.initializeStandardTools(),t.defaultTool=t.toolManager,t.currentTool=t.defaultTool,t.It=null,t.zn=new Wu,t.tu=null,t.uu=null,t.ms=!1,t.commandHandler=As(),t.ns=!1,t.rr=null,t.sr=Lr,t.tx=!1,t.ac=1,t.ti=null,t.Jr=1,t.Mr=0,t.$w=[0,0,0,0,0],t.Nr=0,t.Er=1,t.Vw=0,t.Ww=new N,t.dz=500,t.Pq=new N,t.cu=!1}function bo(t,e){t.animationManager.nc(!0),t.kx=(new K).freeze(),t.Pw=(new K).freeze();var n=t.skipsUndoManager,i=null!=t.Tb;i&&(t.skipsUndoManager=!0);var a=null;null!==t.Vd&&null!==(a=t.Vd.part)&&t.remove(a);var u=[],h=t.Na.length;if(e){for(e=0;e<h;e++)for(var d=t.Na.m[e].parts;d.next();){var f=d.value;f!==a&&null===f.data&&u.push(f)}for(e=0;e<u.length;e++)t.remove(u[e])}for(e=0;e<h;e++)t.Na.m[e].clear();return t.partManager.clear(),t.qe.clear(),t.Wh.clear(),t.xi.clear(),t.Tk=null,t.$o.clear(),gf(),t.$g.clear(),la=[],null!==a&&(t.add(a),t.partManager.parts.remove(a)),i&&(t.skipsUndoManager=n),u}function As(){return null}function Rl(t){30<t.Mr&&(t.ti=1)}function jl(t,e){null!==t.ti&&(t.ti=null,e&&t.Aq(),ey&&ey.Qx||(t.Mr=0,t.$w=[0,0,0,0,0],t.Nr=0))}function Hp(t){if(null!==t.Aa){var e=t.Ea;if(null!==e&&0!==e.clientWidth&&0!==e.clientHeight){t.jx||t.setScrollWidth();var n=t.Of?t.sb:0,i=t.Ue?t.sb:0,a=t.ac;t.ac=t.computePixelRatio(),t.ac!==a&&(t.bo=!0,t.Fb()),(e.clientWidth!==t.ua+n||e.clientHeight!==t.ta+i)&&(t.wj=!0,t.Uc=!0,null!==(e=t.layout)&&e.isViewportSized&&t.autoScale===oi&&(t.$k=!0,e.B()),t.Vc||t.Fb())}}}function Bx(t){var e=new pi;e.name="Background",t.bm(e),(e=new pi).name="",t.bm(e),(e=new pi).name="Foreground",t.bm(e),(e=new pi).name="Adornment",e.isTemporary=!0,e.isInDocumentBounds=!1,t.bm(e),(e=new pi).name="Tool",e.isTemporary=!0,e.isInDocumentBounds=!0,t.bm(e),(e=new pi).name="Grid",e.allowSelect=!1,e.pickable=!1,e.isTemporary=!0,e.isInDocumentBounds=!1,t.zx(e,t.ik("Background"))}function Ux(t){var e=new Y(Y.Grid);e.name="GRID";var n=new wt;return n.figure="LineH",n.stroke="lightgray",n.strokeWidth=.5,n.interval=1,e.add(n),(n=new wt).figure="LineH",n.stroke="gray",n.strokeWidth=.5,n.interval=5,e.add(n),(n=new wt).figure="LineH",n.stroke="gray",n.strokeWidth=1,n.interval=10,e.add(n),(n=new wt).figure="LineV",n.stroke="lightgray",n.strokeWidth=.5,n.interval=1,e.add(n),(n=new wt).figure="LineV",n.stroke="gray",n.strokeWidth=.5,n.interval=5,e.add(n),(n=new wt).figure="LineV",n.stroke="gray",n.strokeWidth=1,n.interval=10,e.add(n),(n=new ht).add(e),n.layerName="Grid",n.zOrder=0,n.isInDocumentBounds=!1,n.isAnimated=!1,n.pickable=!1,n.locationObjectName="GRID",t.add(n),t.partManager.parts.remove(n),e.visible=!1,e}function tS(){this.F.Fu?this.F.Fu=!1:this.F.isEnabled?this.F.Mx(this):Xp(this.F)}function eS(t){this.F.isEnabled?(this.F.Ku=t.target.scrollTop,this.F.Iu=t.target.scrollLeft):Xp(this.F)}function Cy(t,e){if(t.fixedBounds.u())return e.assign(t.fixedBounds),e.Xp(t.mb),e;for(var n=!0,i=t.Na.m,a=i.length,u=0;u<a;u++){var h=i[u];if(h.visible&&h.isInDocumentBounds)for(var d=(h=h.Fa.m).length,f=0;f<d;f++){var g=h[f];g.isInDocumentBounds&&g.isVisible()&&(g=g.actualBounds).u()&&(n?(n=!1,e.assign(g)):e.Nc(g))}}return n&&e.h(0,0,0,0),e.Xp(t.mb),e}function Fn(t,e){if((e||t.Qf)&&!t.ob&&null!==t.Aa&&t.documentBounds.u()){if(e){var n=t.initialPosition;if(n.u())return void(t.position=n);(n=N.alloc()).Ui(t.documentBounds,t.initialDocumentSpot);var i=t.viewportBounds;i=B.allocAt(0,0,i.width,i.height);var a=N.alloc();a.Ui(i,t.initialViewportSpot),a.h(n.x-a.x,n.y-a.y),t.position=a,B.free(i),N.free(a),N.free(n)}t.ob=!0,n=t.Oh,e&&t.Lg!==oi&&(n=t.Lg);var u=n!==oi?Vl(t,n):t.scale;n=t.ka.x,i=t.ka.y,a=t.ua/u;var h=t.ta/u,d=t.Qk,f=t.vr;e&&!d.hb()&&(f.hb()||f.Lb())&&(d=f.Lb()?Wt:f),Bl(t,t.documentBounds,a,h,d,e),e=t.scale,t.scale=u,t.ob=!1,Oo(t),ya(t,!0,!1),R.w((u=t.viewportBounds).x,n)&&R.w(u.y,i)&&R.w(u.width,a)&&R.w(u.height,h)||t.onViewportBoundsChanged(new B(n,i,a,h),u,e,!1)}}function Vl(t,e){var n=t.er;if(null===t.Aa)return n;t.Sa();var i=t.documentBounds;if(!i.u())return n;var a=i.width,u=t.ua+(t.Of?t.sb:0),h=t.ta+(t.Ue?t.sb:0),d=u/a,f=h/(i=i.height);return e===pc?((e=Math.min(f,d))>n&&(e=n),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):e===Jp?((e=f>d?(h-t.sb)/i:(u-t.sb)/a)>n&&(e=n),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):t.scale}function Bl(t,e,n,i,a,u){var h=N.allocAt(t.ka.x,t.ka.y),d=h.x,f=h.y;if(null!==t.rr){var g=N.alloc();d=(g=t.rr.da(zn,g)).x-t.sr.x/t.scale,f=g.y-t.sr.y/t.scale,a=An,N.free(g)}(u||t.scrollMode===Yl)&&(a.hb()&&(n>e.width&&(d=e.x+(a.x*e.width+a.offsetX)-(a.x*n-a.offsetX)),i>e.height&&(f=e.y+(a.y*e.height+a.offsetY)-(a.y*i-a.offsetY))),u=n-e.width,n<e.width+(a=t.Rj).left+a.right?(d=Math.min(d+n/2,e.right+Math.max(u,a.right)-n/2),d=Math.max(d,e.left-Math.max(u,a.left)+n/2),d-=n/2):d>e.left?d=e.left:d<e.right-n&&(d=e.right-n),n=i-e.height,i<e.height+a.top+a.bottom?(f=Math.min(f+i/2,e.bottom+Math.max(n,a.bottom)-i/2),f=Math.max(f,e.top-Math.max(n,a.top)+i/2),f-=i/2):f>e.top?f=e.top:f<e.bottom-i&&(f=e.bottom-i)),h.x=isFinite(d)?d:-t.mb.left,h.y=isFinite(f)?f:-t.mb.top,null!==t.positionComputation&&(e=t.positionComputation(t,h),h.x=e.x,h.y=e.y),ac(t.Ld,t.ka,h),t.ka.h(h.x,h.y),xa(t),N.free(h)}function Hx(t,e,n,i){for(void 0===n&&(n=null),void 0===i&&(i=null),gi(t),t=t.Na.iteratorBackwards;t.next();){var a=t.value;if(a.visible&&!a.isTemporary&&null!==(a=a.Wb(e,n,i)))return a}return null}function Uu(t,e,n){var i=t.bh;return t.bh=t.Dj,t.Dj=i,i.diagram=t,i.event=e,n?Hu(t,e,i):(i.viewPoint=t.bh.viewPoint,i.documentPoint=t.bh.documentPoint),t=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),i.modifiers=t,i.button=e.button,void 0!==e.buttons&&(i.buttons=e.buttons),Ss&&0===e.button&&e.ctrlKey&&(i.button=2),i.down=!1,i.up=!1,i.clickCount=1,i.delta=0,i.handled=!1,i.bubbles=!1,i.timestamp=e.timeStamp,i.isMultiTouch=!1,i.targetDiagram=Dy(e,e.target),i.targetObject=null,i}function Dy(t,e){return null===e?null:(e=e.F)?e:((e=t.path)||"function"!=typeof t.composedPath||(e=t.composedPath()),e&&e[0]&&e[0].F?e[0].F:null)}function Sy(t,e,n,i,a,u){var h=t.bh;return t.bh=t.Dj,t.Dj=h,h.diagram=t,h.clickCount=1,t=h.delta=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),h.modifiers=t,h.event=e,h.timestamp=e.timeStamp,h.button=e.button,h.buttons=e.buttons,Ss&&0===e.button&&e.ctrlKey&&(h.button=2),h.down=n,h.up=i,h.handled=!1,h.bubbles=a,h.isMultiTouch=u,h}function el(t,e){return!!t.bubbles||(void 0!==e.stopPropagation&&e.stopPropagation(),!1!==e.cancelable&&e.preventDefault(),e.cancelBubble=!0,!1)}function Hu(t,e,n){var i=t.Aa,a=t.ua,u=t.ta,h=0,d=0;null!==i&&(i=i.getBoundingClientRect(),h=e.clientX-a/i.width*i.left,d=e.clientY-u/i.height*i.top),n.viewPoint.h(h,d),null!==t.tb?(e=N.allocAt(h,d),t.tb.Ed(e),n.documentPoint.assign(e),N.free(e)):n.documentPoint.h(h,d)}function Yd(t,e,n,i){if(void 0!==e.targetTouches){if(2>e.targetTouches.length)return;e=e.targetTouches[n]}else{if(null===t.El[0])return;e=t.El[n]}null!==(n=t.Aa)&&(n=n.getBoundingClientRect(),i.h(e.clientX-t.ua/n.width*n.left,e.clientY-t.ta/n.height*n.top))}function ya(t,e,n){t.animationManager.defaultAnimation.isAnimating||t.ob||!t.wj||Xp(t)||(e&&gi(t),n&&Fn(t,!1))}function Is(t,e){if(!t.Vc&&(t.eg=!1,null!==t.Ea||t.Rp.u())){t.Vc=!0;var n=t.animationManager,i=t.$o;if(!n.isAnimating&&0!==i.length){for(var a=i.m,u=a.length,h=0;h<u;h++){var d=a[h];Di(d,!1),d.s()}i.clear()}0<(i=t.Qw).count&&(i.each(function(f){f.kw()}),i.clear()),a=i=!1,n.defaultAnimation.isAnimating&&(a=!0,i=t.skipsUndoManager,t.skipsUndoManager=!0),n.rb||Hp(t),ya(t,!1,!0),null!==t.Vd&&(t.Vd.visible&&!t.tr&&(va(t),t.tr=!0),!t.Vd.visible&&t.tr&&(t.tr=!1)),gi(t),u=!1,(!t.Qf||t.Nh)&&(t.Qf?Yx(t,!t.$k):(t.wa("Initial Layout"),!1===n.isEnabled&&n.nc(),Yx(t,!1)),u=!0),t.$k=!1,gi(t),t.Nu||function nS(t){t.Vc||gi(t),t.Sa()}(t),ya(t,!0,!1),h=!1,u?((n=B.alloc()).assign(t.viewportBounds),t.Qf||(h=t.Qf=!0,t.skipsUndoManager||(t.undoManager.isPendingClear=!0),t.undoManager.isPendingUnmodified=!0,function Gp(t){var e=t.sa;if(t.Lg!==oi)t.scale=Vl(t,t.Lg);else if(t.Oh!==oi)t.scale=Vl(t,t.Oh);else{var n=t.initialScale;isFinite(n)&&0<n&&(t.scale=n)}t.sa!==e&&(Oo(t),ya(t,!0,!1)),Fn(t,!0),t.Jd(e=t.Na.m,e.length,t,t.viewportBounds),t.S("InitialLayoutCompleted"),t.Cu.assign(t.ka),va(t)}(t)),t.S("LayoutCompleted"),n.A(t.viewportBounds)||ya(t,!0,!1),B.free(n)):n.gl&&n.ux&&(t.Lg!==oi?t.scale=Vl(t,t.Lg):t.Oh!==oi?t.scale=Vl(t,t.Oh):(n=t.initialScale,isFinite(n)&&0<n&&(t.scale=n)),Fn(t,!0)),gi(t),u&&h&&t.Xa("Initial Layout"),t.fv(),e||t.lc(t.Sb),a&&(t.skipsUndoManager=i),t.Vc=!1}}function gi(t){if(0!==t.qe.count&&(t.Vc||!t.animationManager.isTicking)){for(var e=0;23>e;e++){var n=t.qe.iterator;if(null===n||0===t.qe.count)break;t.qe=new K,t.kw(n,t.qe)}t.nodes.each(function(i){i instanceof vt&&0!=(65536&i.R)&&(i.R=65536^i.R)})}}function Ey(t,e){for(var n=ye(),i=ye(),a=e.memberParts;a.next();){var u=a.value;u.isVisible()&&(u instanceof vt?(Rn(u)||fr(u)||Ea(u))&&Ey(t,u):u instanceof X?u.fromNode===e||u.toNode===e?i.push(u):n.push(u):(u.measure(1/0,1/0),u.arrange()))}for(t=n.length,a=0;a<t;a++)(u=n[a]).measure(1/0,1/0),u.arrange();for(oe(n),e.measure(1/0,1/0),e.arrange(),t=i.length,e=0;e<t;e++)(n=i[e]).measure(1/0,1/0),n.arrange();oe(i)}function zp(t,e,n,i,a,u,h,d,f,g){if(null!==t.Ea){null===t.Aa&&z("No canvas specified"),void 0===h&&(h=null),void 0===d&&(d=null),void 0===f&&(f=!1),void 0===g&&(g=!1),$d(t),t.Sb.Ec(!0),nl(t),t.zj=!0;var m=t.sa;t.sa=a;var y=t.Na.m,x=y.length;try{var _=new B(u.x,u.y,i.width/a,i.height/a),M=_.copy();M.Xp(n),va(t,M),gi(t),t.Jd(y,x,t,_),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,i.width,i.height),null!==d&&""!==d&&(e.fillStyle=d,e.fillRect(0,0,i.width,i.height));var S=t.ac;e.scale(S,S);var T=St.alloc();T.reset(),T.translate(n.left,n.top),T.scale(a),0===u.x&&0===u.y||T.translate(-u.x,-u.y),e.setTransform(T.m11,T.m12,T.m21,T.m22,T.dx,T.dy),St.free(T),Yp(t,e),e.globalAlpha=t.lb;var k=t.ik("Grid");if(h){var b=new K,I=h.iterator;for(I.reset();I.next();){var O=I.value;O instanceof ht&&(g||O.layer!==k)&&b.add(O)}for(g=0;g<x;g++){var F=y[g];k=e;var H=t;if(F.visible&&0!==F.lb&&(f||!F.isTemporary)){var W=F.Fa.m,it=W.length;if(0!==it){var nt=ma(F,k),tt=F.Vo;tt.length=0;var G=H.scale,Mt=B.alloc();for(n=0;n<it;n++){var gt=W[n];b.contains(gt)&&F.Ei(k,gt,H,tt,G,Mt,!1)}B.free(Mt),k.globalAlpha=nt}}}}else for(b=0;b<x;b++)(H=y[b])===k?g&&H.lc(e,t,!0):H.lc(e,t,f);t.zj=!1,t.Yh&&il(t.Yh,t)&&t.Jt()}finally{t.sa=m,t.Sb.Ec(!0),nl(t),t.Jd(y,x,t,t.viewportBounds),va(t)}}}function Yp(t,e){null!==(t=t.dh)&&(void 0!==t.imageSmoothingEnabled&&e.Cy(!!t.imageSmoothingEnabled),null!=(t=t.defaultFont)&&(e.font=t))}function Xd(t,e){var a,n=t instanceof Y,i=t instanceof j;for(a in e){""===a&&z("Setting properties requires non-empty property names");var u=t,h=a;if(n||i){var d=a.indexOf(".");if(0<d){var f=a.substring(0,d);n?u=t.Ya(f):null==(u=t[f])&&(u=t.toolManager[f]),Et(u)?h=a.substr(d+1):z("Unable to find object named: "+f+" in "+t.toString()+" when trying to set property: "+a)}}if("_"!==h[0]&&!Sp(u,h)){if(i&&"ModelChanged"===h){t.Bx(e[h]);continue}if(i&&"Changed"===h){t.uh(e[h]);continue}if(i&&Sp(t.toolManager,h))u=t.toolManager;else{if(i&&XM(t,h)){t.Xj(h,e[h]);continue}if(t instanceof at&&"Changed"===h){t.uh(e[h]);continue}z('Trying to set undefined property "'+h+'" on object: '+u.toString())}}u[h]=e[a],"_"===h[0]&&u instanceof ut&&u.yx(h)}}function Oo(t){!1===t.wj&&(t.wj=!0)}function nl(t){!1===t.xj&&(t.xj=!0)}function $d(t){!1!==t.bo&&(t.bo=!1,Xt(t,t.ua,t.ta))}function Xt(t,e,n){xa(t);var i=t.ac;t.Aa.resize(e*i,n*i,e,n)&&(t.Uc=!0,t.Sb.Ec(!0))}function Xp(t){var e=t.Aa;if(null===e||t.Rp.u())return!0;var n=t.ua,i=t.ta,a=t.viewportBounds;if(!t.viewportBounds.u())return!0;var u=a.x,h=a.y,d=a.width,f=a.height,g=t.Ju,m=t.Gu,y=t.Ea,x=!1,_=t.Of?t.sb:0,M=t.Ue?t.sb:0,S=y.clientWidth||n+_,T=y.clientHeight||i+M;if((S!==n+_||T!==i+M)&&(t.Of=!1,t.Ue=!1,M=_=0,t.ua=S,t.ta=T,x=t.bo=!0,xa(t)),!(x||t.Of||t.Ue||t.Yn||t.Zn))return!0;t.wj=!1;var k=t.documentBounds,b=0,I=0,O=0,F=0;y=a.width;var H=a.height,W=t.Rj;t.contentAlignment.hb()?(k.width>y&&(b=W.left,I=W.right),k.height>H&&(O=W.top,F=W.bottom)):(b=W.left,I=W.right,O=W.top,F=W.bottom),W=k.width+b+I;var it=k.height+O+F;b=k.x-b;var nt=a.x;I=k.right+I;var tt=a.right+_;O=k.y-O;var G=a.y;k=k.bottom+F,F=a.bottom+M;var Mt="1px",gt="1px";if(S=W>S/(a=t.scale),T=it>T/a,t.scrollMode===Yl&&(S||T)&&(S&&t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(S=1,b+1<nt&&(S=Math.max((nt-b)*a+t.ua,S)),I>tt+1&&(S=Math.max((I-tt)*a+t.ua,S)),y+_+1<W&&(S=Math.max((W-y)*a+t.ua,S)),Mt=S.toString()+"px"),T&&t.hasVerticalScrollbar&&t.allowVerticalScroll&&(S=1,O+1<G&&(S=Math.max((G-O)*a+t.ta,S)),k>F+1&&(S=Math.max((k-F)*a+t.ta,S)),H+M+1<it&&(S=Math.max((it-H)*a+t.ta,S)),gt=S.toString()+"px")),T="1px"!==gt,(S="1px"!==Mt)&&T||!S&&!T||(T&&(tt-=t.sb),S&&(F-=t.sb),W<y+_||!t.hasHorizontalScrollbar||!t.allowHorizontalScroll||(_=1,b+1<nt&&(_=Math.max((nt-b)*a+t.ua,_)),I>tt+1&&(_=Math.max((I-tt)*a+t.ua,_)),y+1<W&&(_=Math.max((W-y)*a+t.ua,_)),Mt=_.toString()+"px"),_=t.ta,(S="1px"!==Mt)!==t.Ue&&(_=S?t.ta-t.sb:t.ta+t.sb),it<H+M||!t.hasVerticalScrollbar||!t.allowVerticalScroll||(M=1,O+1<G&&(M=Math.max((G-O)*a+_,M)),k>F+1&&(M=Math.max((k-F)*a+_,M)),H+1<it&&(M=Math.max((it-H)*a+_,M)),gt=M.toString()+"px"),T="1px"!==gt),t.$r&&S===t.Ue&&T===t.Of)return n===t.ua&&i===t.ta||t.ed(),!1;if(S!==t.Ue&&(t.ta="1px"===Mt?t.ta+t.sb:Math.max(t.ta-t.sb,1),x=!0),t.Ue=S,m.style.width=Mt,T!==t.Of&&(t.ua="1px"===gt?t.ua+t.sb:Math.max(t.ua-t.sb,1),x=!0,t.io&&(M=N.alloc(),T?(e.style.left=t.sb+"px",t.position=M.h(t.ka.x+t.sb/t.scale,t.ka.y)):(e.style.left="0px",t.position=M.h(t.ka.x-t.sb/t.scale,t.ka.y)),N.free(M))),x&&xa(t),t.Of=T,m.style.height=gt,t.Fu=!0,x&&(t.bo=!0),e=g.scrollLeft,t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(y+1<W?e=(t.position.x-b)*a:b+1<nt?e=g.scrollWidth-g.clientWidth:I>tt+1&&(e=t.position.x*a)),t.io)switch(t.Au){case"negative":e=-(g.scrollWidth-e-g.clientWidth);break;case"reverse":e=g.scrollWidth-e-g.clientWidth}return g.scrollLeft=e,t.hasVerticalScrollbar&&t.allowVerticalScroll&&(H+1<it?g.scrollTop=(t.position.y-O)*a:O+1<G?g.scrollTop=g.scrollHeight-g.clientHeight:k>F+1&&(g.scrollTop=t.position.y*a)),T=t.ta,g.style.width=(S=t.ua)+(t.Of?t.sb:0)+"px",g.style.height=T+(t.Ue?t.sb:0)+"px",n===S&&i===T&&!t.animationManager.rb||(n=B.allocAt(u,h,d,f),t.onViewportBoundsChanged(n,t.viewportBounds,a,x),B.free(n),!1)}function cc(t,e,n){var i=e.layer;null!==i&&i.diagram===t&&(e.isSelected=!1,e.isHighlighted=!1,e.B(2),n&&e.fk(),0<=(n=i.bc(-1,e,!1))&&t.Va(sn,"parts",i,e,null,n,null),null!==(t=e.layerChanged)&&t(e,i,null))}function ns(t,e,n,i,a,u){if(!e.contains(n)&&(void 0===u&&(u=!1),!i||u||n.canMove()||n.canCopy()))if(void 0===a&&(a=Ty(t)),n instanceof Q){if(e.add(n,t.yd(a,n,n.location)),n instanceof vt&&(null!==n.placeholder||a.dragsMembers))for(u=n.memberParts;u.next();)ns(t,e,u.value,i,a,a.groupsAlwaysMove);for(u=n.linksConnected;u.next();){var h=u.value;if(!e.contains(h)){var d=h.fromNode,f=h.toNode;null!==d&&e.contains(d)&&null!==f&&e.contains(f)&&ns(t,e,h,i,a)}}if(a.dragsTree)for(n=n.tv();n.next();)ns(t,e,n.value,i,a)}else if(n instanceof X)for(e.add(n,t.yd(a,n)),n=n.labelNodes;n.next();)ns(t,e,n.value,i,a);else n instanceof At||e.add(n,t.yd(a,n,n.location))}function Gu(t,e,n,i,a){if(null!==e&&0!==e.count){var u=N.alloc(),h=N.alloc();h.assign(n),isNaN(h.x)&&(h.x=0),isNaN(h.y)&&(h.y=0),(n=t.ms)||$p(t,e);for(var d=ye(),f=ye(),g=e.iterator,m=N.alloc();g.next();){var y=g.key,x=g.value;if(y.Jc()){var _=Ul(t,y,e);null!==_?d.push(new By(y,x,_)):(!a||y.canMove())&&(u.assign(_=x.point),t.computeMove(y,u.add(h),i,m),y.location=m,void 0===x.shifted&&(x.shifted=new N),x.shifted.assign(m.ge(_)))}else g.key instanceof X&&f.push(g.la)}for(N.free(m),a=d.length,g=0;g<a;g++)u.assign((y=d[g]).info.point),void 0===y.xv.shifted&&(y.xv.shifted=new N),y.node.location=u.add(y.xv.shifted);for(a=N.alloc(),g=N.alloc(),y=f.length,x=0;x<y;x++){var M=f[x];if((_=M.key)instanceof X)if(_.suspendsRouting){_.cf=null,m=_.fromNode;var S=_.toNode;if(null!==t.draggedLink&&i.dragsLink)if(S=M.value.point,null===_.dragComputation)e.add(_,t.yd(i,_,h)),Ta(_,h.x-S.x,h.y-S.y);else{M=N.allocAt(0,0),(m=_.i(0))&&m.u()&&M.assign(m);var T=m=N.alloc().assign(M).add(h);i.isGridSnapEnabled&&(i.isGridSnapRealtime||t.lastInput.up)&&ky(t,_,m,T=N.alloc(),i),m.assign(_.dragComputation(_,m,T)).ge(M),e.add(_,t.yd(i,_,m)),Ta(_,m.x-S.x,m.y-S.y),N.free(M),N.free(m),T!==m&&N.free(T)}else null!==m&&(a.assign(m.location),null!==(T=e.H(m))&&a.ge(T.point)),null!==S&&(g.assign(S.location),null!==(T=e.H(S))&&g.ge(T.point)),null!==m&&null!==S?a.Ta(g)?(m=M.value.point,(S=u).assign(a),S.ge(m),e.add(_,t.yd(i,_,a)),Ta(_,S.x,S.y)):(_.suspendsRouting=!1,_.Ua()):(M=M.value.point,e.add(_,t.yd(i,_,m=null!==m?a:null!==S?g:h)),Ta(_,m.x-M.x,m.y-M.y))}else(null===_.fromNode||null===_.toNode)&&(m=M.value.point,e.add(_,t.yd(i,_,h)),Ta(_,h.x-m.x,h.y-m.y))}N.free(u),N.free(h),N.free(a),N.free(g),oe(d),oe(f),n||(gi(t),zu(t,e))}}function Ty(t){var e=t.toolManager.findTool("Dragging");return null!==e?e.dragOptions:t.zn}function ky(t,e,n,i,a){if(void 0===a&&(a=Ty(t)),i.assign(n),null!==e){var u=t.grid;t=(e=a.gridSnapCellSize).width,e=e.height;var h=a.gridSnapOrigin,d=h.x;if(h=h.y,a=a.gridSnapCellSpot,null!==u){var f=u.gridCellSize;isNaN(t)&&(t=f.width),isNaN(e)&&(e=f.height),u=u.gridOrigin,isNaN(d)&&(d=u.x),isNaN(h)&&(h=u.y)}(u=N.allocAt(0,0)).Vi(0,0,t,e,a),R.jq(n.x,n.y,d+u.x,h+u.y,t,e,i),N.free(u)}}function $p(t,e){if(null!==e)for(t.ms=!0,t=e.iterator;t.next();)(e=t.key)instanceof X&&(e.suspendsRouting=!0)}function zu(t,e){if(null!==e){for(e=e.iterator;e.next();){var n=e.key;n instanceof X&&(n.suspendsRouting=!1,yf(n)&&n.Ua())}t.ms=!1}}function Ul(t,e,n){return null===(e=e.containingGroup)||null===(t=Ul(t,e,n))&&null===(t=n.H(e))?null:t}function Wp(t,e,n){if(null!==e.diagram&&e.diagram!==t&&z("Cannot share a Layer with another Diagram: "+e+" of "+e.diagram),null===n?null!==e.diagram&&z("Cannot add an existing Layer to this Diagram again: "+e):(n.diagram!==t&&z("Existing Layer must be in this Diagram: "+n+" not in "+n.diagram),e===n&&z("Cannot move a Layer before or after itself: "+e)),e.diagram!==t){e=e.name,n=(t=t.Na).count;for(var i=0;i<n;i++)t.J(i).name===e&&z("Cannot add Layer with the name '"+e+"'; a Layer with the same name is already present in this Diagram.")}}function dc(t,e,n){var i=t.animationManager;if(t.ob||t.Vc)t.sa=n,xa(t),i.rb&&(Hd(i)||i.Pd.add(i.F,"scale",e,t.sa));else if(null===t.Aa)t.sa=n,xa(t);else{t.ob=!0;var a=t.viewportBounds.copy(),u=t.ua,h=t.ta;a.width=t.ua/e,a.height=t.ta/e;var d=t.zoomPoint.x,f=t.zoomPoint.y,g=t.contentAlignment;isNaN(d)&&(g.Kc()?g.zf(Pd)?d=0:g.zf(Ad)&&(d=u-1):d=g.hb()?g.x*(u-1):u/2),isNaN(f)&&(g.Kc()?g.zf(Nd)?f=0:g.zf(Id)&&(f=h-1):f=g.hb()?g.y*(h-1):h/2),null===t.scaleComputation||t.animationManager.defaultAnimation.isAnimating||(n=t.scaleComputation(t,n)),n<t.minScale&&(n=t.minScale),n>t.maxScale&&(n=t.maxScale),u=N.allocAt(t.ka.x+d/e-d/n,t.ka.y+f/e-f/n),t.position=u,N.free(u),t.sa=n,xa(t),t.onViewportBoundsChanged(a,t.viewportBounds,e,!1),t.ob=!1,Fn(t,!1),i.rb&&(Hd(i)||i.Pd.add(i.F,"scale",e,t.sa)),t.N(),Oo(t)}}function va(t,e){var n=t.Vd;if(null!==n&&n.visible){for(var i=mt.alloc(),a=1,u=1,h=n.T.m,d=h.length,f=0;f<d;f++){var g=h[f],m=Math.abs(g.interval);2>m||(Jy(g.figure)?u=u*m/R.Wx(u,m):a=a*m/R.Wx(a,m))}if(i.h(u*(h=n.gridCellSize).width,a*h.height),void 0!==e)a=e.width,u=e.height,t=e.x,h=e.y;else{if((e=B.alloc()).h((t=t.viewportBounds).x,t.y,t.width,t.height),!e.u())return void B.free(e);a=e.width,u=e.height,t=e.x,h=e.y,B.free(e)}n.width=a+2*i.width,n.height=u+2*i.height,e=N.alloc(),R.jq(t,h,0,0,i.width,i.height,e),e.offset(-i.width,-i.height),mt.free(i),n.part.location=e,N.free(e)}}function Ny(t){var e=t.isModified;t.wx!==e&&(t.wx=e,t.S("Modified"))}function Wd(t,e){for(var n=(e=e.T.m).length,i=0;i<n;i++)Kp(t,e[i])}function Kp(t,e){if(e instanceof er){var n=e.element;if(null!==n&&n instanceof HTMLImageElement){n.Cg instanceof K&&n.Cg.add(t);var i=e.Gg;if(null!==i&&!0===i.zr&&null!==e.diagram&&e.diagram.$o.add(e),n.Qn)if(n=n.getAttribute("src")||"",null===(i=t.$g.H(n)))(i=[]).push(e),t.$g.add(n,i);else{for(t=0;t<i.length;t++)if(i[t]===e)return;i.push(e)}}}}function Ay(t,e){if(e instanceof er){var n=e.element;if(null!==n&&n instanceof HTMLImageElement&&(n.Cg instanceof K&&n.Cg.remove(t),o_(n),n.Qn)){n=n.getAttribute("src")||"";var i=t.$g.H(n);if(null!==i)for(var a=0;a<i.length;a++)if(i[a]===e){i.splice(a,1),0===i.length&&(t.$g.remove(n),gf(n));break}}}}function xa(t){var e=t.ka,n=t.sa;t.vx.h(e.x,e.y,Math.max(t.ua,0)/n,Math.max(t.ta,0)/n)}function Hl(t,e){t.vj=!1;var n=t.gr;n.A(e)||(n=n.copy(),t.gr.assign(e),Fn(t,!1),t.S("DocumentBoundsChanged",void 0,n),Oo(t))}function Gl(t,e){for(var n=t.xi.iterator;n.next();)zx(t,n.value,e);t.layout&&(e?t.layout.isValidLayout=!1:t.layout.B())}function zx(t,e,n){if(null!==e){for(var i=e.zl.iterator;i.next();)zx(t,i.value,n);null!==e.layout&&(n?e.layout.isValidLayout=!1:e.layout.B())}}function Yx(t,e){if(t.Nh&&!t.Gt){var n=t.Z;t.Z=!0;var i=t.undoManager.transactionLevel,a=t.layout,u=t.animationManager;try{0===i&&(t.undoManager.isInternalTransaction=!0,t.wa("Layout")),1>=i&&!u.defaultAnimation.isAnimating&&!u.rb&&(e||ga(u,"Layout")),t.Nh=!1;for(var h=t.xi.iterator;h.next();)Iy(t,h.value,e,i);a.isValidLayout||(!e||a.isRealtime||null===a.isRealtime||0===i?(a.doLayout(t),gi(t),a.isValidLayout=!0):t.Nh=!0)}finally{e=t.undoManager.isInternalTransaction,0===i&&(t.Xa("Layout"),t.undoManager.isInternalTransaction=!1),!e||0!==i&&1!==i||Bp(u),t.Z=n}}}function Iy(t,e,n,i){if(null!==e){for(var a=e.zl.iterator;a.next();)Iy(t,a.value,n,i);null===(a=e.layout)||a.isValidLayout||(!n||a.isRealtime||0===i?(e.Fh=!e.location.u(),a.doLayout(e),e.B(32),Ey(t,e),a.isValidLayout=!0):t.Nh=!0)}}function XM(t,e){var n=t.Iw.H(e);return null!==n?n:t.Iw.H(e.toLowerCase())}function by(t,e){var n=t.Jw.H(e);if(null!==n||null!==(n=t.Jw.H(e.toLowerCase())))return n;z("Unknown DiagramEvent name: "+e)}function Xx(t){if(t.animationManager.isTicking)return!1;var e=t.currentTool;return e!==t.toolManager.findTool("Dragging")||!t.ms||e.isComplexRoutingRealtime}function Oy(t,e,n,i){var a=t.si;if(null===a&&(t.si=a=new Pa(t.avoidanceCellSize)),a.Ms||a.group!==n||a.Fy!==i){if(a.ly=Math.max(a.it+1,Math.floor(t.avoidanceLimit/t.avoidanceCellSize.width)),a.my=Math.max(a.it+1,Math.floor(t.avoidanceLimit/t.avoidanceCellSize.height)),null!==n&&(n=Kd(t,n)),null===n){e=B.alloc(),t.computeOccupiedArea(e),e.Gc(100,100),a.initialize(e);for(var u=t.nodes;u.next();){var h=u.value,d=h.layer;null!==d&&d.visible&&!d.isTemporary&&Zd(t,h,i,e)}B.free(e)}else{for(0<n.memberParts.count&&((e=t.computePartsBounds(n.memberParts,!1)).Gc(20,20),a.initialize(e)),e=B.alloc(),u=n.memberParts;u.next();)(h=u.value)instanceof Q&&Zd(t,h,i,e);B.free(e)}a.group=n,a.Fy=i,a.Ms=!1}else e&&Dw(a);return a}function Kd(t,e){return e.avoidable&&!e.isLinkLabel?e:null!==e.containingGroup?Kd(t,e.containingGroup):null}function Zd(t,e,n,i){if(e!==n&&e.isVisible())if(e.avoidable&&!e.isLinkLabel){var a=(e=e.getAvoidableRect(i)).x,u=e.y;if(uh(t=t.si,a,u))for(n=(u-t.xd)/t.ec|0,i=Math.min((a+e.width-t.wd)/t.dc|0,t.zi),e=Math.min((u+e.height-t.xd)/t.ec|0,t.Ai),a=(a-t.wd)/t.dc|0;a<=i;a++)if((u=t.Qb[a]).fill)u.fill(Ti,n,e+1);else for(var h=n;h<=e;h++)u[h]=Ti}else if(e instanceof vt)for(e=e.memberParts;e.next();)(a=e.value)instanceof Q&&Zd(t,a,n,i)}function zl(t,e){null===t.si||t.si.Ms||void 0!==e&&(!e.avoidable||e.isLinkLabel)||(t.si.Ms=!0)}function $x(t){-1===t.Jk&&(t.Jk=Pu(function(){if(-1!==t.Jk&&(t.og(),null!==t.lastInput.event)){var e=t.computeAutoScrollPosition(t.Pq);e.Ta(t.position)||(t.position=e,t.lastInput.documentPoint=t.kt(t.Pq),t.doMouseMove(),t.vj=!0,e=B.alloc(),t.computeBounds(e),e.Nc(t.documentBounds),Hl(t,e),B.free(e),t.Uc=!0,t.ed(),$x(t))}},t.Oq))}function Wx(t,e,n){function i(){var m=+new Date;for(u=!0,h.reset();h.next();)if(!h.value[0].ul){u=!1;break}u||m-g>f?e(n,a,d):dt.requestAnimationFrame(i)}for(var a=n.callback,u=!0,h=t.$g.iterator;h.next();)if(!h.value[0].ul){u=!1;break}if("function"!=typeof a||u)return e(n,a,t);var d=t,f=n.callbackTimeout||300,g=+new Date;return dt.requestAnimationFrame(function(){i()}),null}function $M(t,e,n,i){if(t.animationManager.nc(),t.ed(),null===t.Aa)return null;"object"!=typeof e&&z("properties argument must be an Object.");var a=e.size||null,u=e.scale||null;void 0!==e.scale&&isNaN(e.scale)&&(u="NaN");var h=e.maxSize;void 0===e.maxSize&&(h="SVG"===n?new mt(1/0,1/0):new mt(2e3,2e3));var d=e.position||null,f=e.parts||null,g=void 0===e.padding?1:e.padding,m=e.background||null,y=e.omitTemporary;void 0===y&&(y=!0);var x=e.document||document,_=e.elementFinished||null,M=e.showTemporary;void 0===M&&(M=!y),void 0===(e=e.showGrid)&&(e=M),null!==a&&isNaN(a.width)&&isNaN(a.height)&&(a=null),"number"==typeof g?g=new Lt(g):g instanceof Lt||z("MakeImage padding must be a Margin or a number."),g.left=Math.max(g.left,0),g.right=Math.max(g.right,0),g.top=Math.max(g.top,0),g.bottom=Math.max(g.bottom,0),t.Sb.Ec(!0);var S=(y=new Hr(null,x)).context;if(!(a||u||f||d))return y.width=t.ua+Math.ceil(g.left+g.right),y.height=t.ta+Math.ceil(g.top+g.bottom),"SVG"===n?null===i?null:(i.resize(y.width,y.height,y.width,y.height),i.ownerDocument=x,i.gq=_,zp(t,i.context,g,new mt(y.width,y.height),t.sa,t.ka,f,m,M,e),i.context):(t.Bn=!1,zp(t,S,g,new mt(y.width,y.height),t.sa,t.ka,f,m,M,e),t.Bn=!0,y.context);var T=t.er,k=t.documentBounds.copy();if(k.cw(t.mb),M)for(var b=t.Na.m,I=b.length,O=0;O<I;O++){var F=b[O];if(F.visible&&F.isTemporary)for(var H=(F=F.Fa.m).length,W=0;W<H;W++){var it=F[W];it.isInDocumentBounds&&it.isVisible()&&(it=it.actualBounds).u()&&k.Nc(it)}}if(b=new N(k.x,k.y),null!==f){for(I=new B(0,0,0,0),O=!0,(F=f.iterator).reset();F.next();)(H=F.value)instanceof ht&&(null!==(W=H.layer)&&!W.visible||null!==W&&!M&&W.isTemporary||!H.isVisible()||(H=H.actualBounds).u()&&(O?(O=!1,I.assign(H)):I.Nc(H)));k.width=I.width,k.height=I.height,b.x=I.x,b.y=I.y}return null!==d&&d.u()&&(b=d,u||(u=T)),I=d=0,null!==g&&(d=g.left+g.right,I=g.top+g.bottom),O=F=0,null!==a&&(F=a.width,O=a.height,isFinite(F)&&(F=Math.max(0,F-d)),isFinite(O)&&(O=Math.max(0,O-I))),null!==a&&null!==u?("NaN"===u&&(u=T),a.u()?(a=F,k=O):isNaN(O)?(a=F,k=k.height*u):(a=k.width*u,k=O)):null!==a?a.u()?(u=Math.min(F/k.width,O/k.height),a=F,k=O):isNaN(O)?(a=F,k=k.height*(u=F/k.width)):(a=k.width*(u=O/k.height),k=O):null!==u?"NaN"===u&&h.u()?(u=Math.min((h.width-d)/k.width,(h.height-I)/k.height))>T?(u=T,a=k.width,k=k.height):(a=h.width,k=h.height):(a=k.width*u,k=k.height*u):(u=T,a=k.width,k=k.height),null!==g?(a+=d,k+=I):g=new Lt(0),null!==h&&(T=h.width,h=h.height,isNaN(T)&&(T=2e3),isNaN(h)&&(h=2e3),isFinite(T)&&(a=Math.min(a,T)),isFinite(h)&&(k=Math.min(k,h))),y.width=Math.ceil(a),y.height=Math.ceil(k),"SVG"===n?null===i?null:(i.resize(y.width,y.height,y.width,y.height),i.ownerDocument=x,i.gq=_,zp(t,i.context,g,new mt(Math.ceil(a),Math.ceil(k)),u,b,f,m,M,e),i.context):(t.Bn=!1,zp(t,S,g,new mt(Math.ceil(a),Math.ceil(k)),u,b,f,m,M,e),t.Bn=!0,y.context)}Ps.className="AnimationTrigger",Ps.Default=UM,Ps.Immediate=Rx,Ps.Bundled=HM,(D=pi.prototype).clear=function(){this.Fa.clear(),this.Vo.length=0},D.Ke=function(t){this.F=t},D.toString=function(t){void 0===t&&(t=0);var e='Layer "'+this.name+'"';if(0>=t)return e;for(var n=0,i=0,a=0,u=0,h=0,d=this.Fa.iterator;d.next();){var f=d.value;f instanceof vt?a++:f instanceof Q?i++:f instanceof X?u++:f instanceof At?h++:n++}if(d="",0<n&&(d+=n+" Parts "),0<i&&(d+=i+" Nodes "),0<a&&(d+=a+" Groups "),0<u&&(d+=u+" Links "),0<h&&(d+=h+" Adornments "),1<t)for(t=this.Fa.iterator;t.next();)d+="\n    "+(n=t.value).toString(),null!==(i=n.data)&&Jt(i)&&(d+=" #"+Jt(i)),n instanceof Q?d+=" "+sr(i):n instanceof X&&(d+=" "+sr(n.fromNode)+" "+sr(n.toNode));return e+" "+this.Fa.count+": "+d},D.Wb=function(t,e,n){if(void 0===e&&(e=null),void 0===n&&(n=null),!1===this.oi)return null;var i=!1;null!==this.diagram&&this.diagram.viewportBounds.$(t)&&(i=!0);for(var a=N.alloc(),u=this.Fa.m,h=u.length;h--;){var d=u[h];if((!0!==i||!1!==Bs(d))&&d.isVisible()&&(a.assign(t),He(a,d.de),null!==(d=d.Wb(a,e,n))&&(null!==e&&(d=e(d)),null!==d&&(null===n||n(d)))))return N.free(a),d}return N.free(a),null},D.Ii=function(t,e,n,i){if(void 0===e&&(e=null),void 0===n&&(n=null),i instanceof et||i instanceof K||(i=new K),!1===this.oi)return i;var a=!1;null!==this.diagram&&this.diagram.viewportBounds.$(t)&&(a=!0);for(var u=N.alloc(),h=this.Fa.m,d=h.length;d--;){var f=h[d];if((!0!==a||!1!==Bs(f))&&f.isVisible()){u.assign(t),He(u,f.de);var g=f;f.Ii(u,e,n,i)&&(null!==e&&(g=e(g)),null===g||null!==n&&!n(g)||i.add(g))}}return N.free(u),i},D.vf=function(t,e,n,i,a){if(void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=!1),a instanceof et||a instanceof K||(a=new K),!1===this.oi)return a;var u=!1;null!==this.diagram&&this.diagram.viewportBounds.De(t)&&(u=!0);for(var h=this.Fa.m,d=h.length;d--;){var f=h[d];if((!0!==u||!1!==Bs(f))&&f.isVisible()){var g=f;f.vf(t,e,n,i,a)&&(null!==e&&(g=e(g)),null===g||null!==n&&!n(g)||a.add(g))}}return a},D.sv=function(t,e,n,i,a,u,h){if(!1===this.oi)return a;for(var d=this.Fa.m,f=d.length;f--;){var g=d[f];if((!0!==h||!1!==Bs(g))&&u(g)&&g.isVisible()){var m=g;g.vf(t,e,n,i,a)&&(null!==e&&(m=e(m)),null===m||null!==n&&!n(m)||a.add(m))}}return a},D.kg=function(t,e,n,i,a,u){if(void 0===n&&(n=null),void 0===i&&(i=null),void 0===a&&(a=!0),!1!==a&&!0!==a&&((a instanceof et||a instanceof K)&&(u=a),a=!0),u instanceof et||u instanceof K||(u=new K),!1===this.oi)return u;var h=!1;null!==this.diagram&&this.diagram.viewportBounds.$(t)&&(h=!0);for(var d=N.alloc(),f=N.alloc(),g=this.Fa.m,m=g.length;m--;){var y=g[m];if((!0!==h||!1!==Bs(y))&&y.isVisible()){d.assign(t),He(d,y.de),f.h(t.x+e,t.y),He(f,y.de);var x=y;y.kg(d,f,n,i,a,u)&&(null!==n&&(x=n(x)),null===x||null!==i&&!i(x)||u.add(x))}}return N.free(d),N.free(f),u},D.Jd=function(t,e){if(this.visible){var n=this.Fa.m,i=n.length;if(0!==i){t=ye();for(var a=ye(),u=0;u<i;u++){var h=n[u];if(h.Xw=u,h instanceof X){if(!1===h.rd)continue}else if(h instanceof At&&null!==h.adornedPart)continue;var d=h.actualBounds;h.isVisible()&&Se(d,e)?(h.Jd(!0),t.push(h)):(h.Jd(!1),null!==h.adornments&&0<h.adornments.count&&a.push(h))}for(e=0;e<t.length;e++)for(cv(n=t[e]),n=n.adornments;n.next();)(i=n.value).measure(1/0,1/0),i.arrange(),i.Jd(!0);for(e=0;e<a.length;e++)cv(a[e]);oe(t),oe(a)}}},D.lc=function(t,e,n){if(this.visible&&0!==this.lb&&(void 0===n&&(n=!0),n||!this.isTemporary)){var i=(n=this.Fa.m).length;if(0!==i){var a=ma(this,t),u=this.Vo;u.length=0;for(var h=e.scale,d=B.alloc(),f=0;f<i;f++)this.Ei(t,n[f],e,u,h,d,!0);B.free(d),t.globalAlpha=a}}},D.Ei=function(t,e,n,i,a,u,h){if(!h||Bs(e)){if(null!==i&&e instanceof X&&(e.isOrthogonal&&i.push(e),!1===e.rd))return;for(h=!1,i=e.containingGroup;null!==i;)h?null!==i.$a&&u.hy(i.$a):null!==i.$a&&(h=!0,u.assign(i.$a)),i=i.containingGroup;var d=e.actualBounds;if(i=!1,h&&e.isVisible()){if(!u.Ic(d))return;i=!u.De(d)}i&&(t.save(),t.beginPath(),t.rect(u.x,u.y,u.width,u.height),t.clip()),d.width*a>n.Jr||d.height*a>n.Jr?e.lc(t,n):(u=e.naturalBounds,0===(a=e.actualBounds).width||0===a.height||isNaN(a.x)||isNaN(a.y)||!e.isVisible()||(n=e.transform,null!==e.areaBackground&&(dr(e,t,e.areaBackground,!0,!0,u,a),t.fillRect(a.x,a.y,a.width,a.height)),null===e.areaBackground&&null===e.background&&(dr(e,t,"rgba(0,0,0,0.3)",!0,!1,u,a),t.fillRect(a.x,a.y,a.width,a.height)),null!==e.background&&(t.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),dr(e,t,e.background,!0,!1,u,a),t.fillRect(0,0,u.width/2,u.height/2),n.Os()||t.transform(n.m22*(e=1/(n.m11*n.m22-n.m12*n.m21)),-n.m12*e,-n.m21*e,n.m11*e,e*(n.m21*n.dy-n.m22*n.dx),e*(n.m12*n.dx-n.m11*n.dy))))),i&&(t.restore(),t.Ec(!0))}},D.g=function(t,e,n,i,a){var u=this.diagram;null!==u&&u.Va(ve,t,this,e,n,i,a)},D.Oi=function(t,e,n){var i=this.Fa;if(e.ei=this,t>=i.count)t=i.count;else if(i.J(t)===e)return-1;return i.ub(t,e),e.pq(n),null!==(i=this.diagram)&&(n?i.N():i.Oi(e)),_y(this,t,e),t},D.bc=function(t,e,n){if(!n&&e.layer!==this&&null!==e.layer)return e.layer.bc(t,e,n);var i=this.Fa;if(0>t||t>=i.length){if(0>(t=i.indexOf(e)))return-1}else if(i.J(t)!==e&&0>(t=i.indexOf(e)))return-1;return e.qq(n),i.eb(t),null!==(i=this.diagram)&&(n?i.N():i.bc(e)),e.ei=null,t},Dt.Object.defineProperties(pi.prototype,{parts:{get:function(){return this.Fa.iterator}},partsBackwards:{get:function(){return this.Fa.iteratorBackwards}},diagram:{get:function(){return this.F}},name:{get:function(){return this.na},set:function(t){var e=this.na;if(e!==t){var n=this.diagram;if(null!==n)for(""===e&&z("Cannot rename default Layer to: "+t),n=n.layers;n.next();)n.value.name===t&&z("Layer.name is already present in this diagram: "+t);for(this.na=t,this.g("name",e,t),t=this.Fa.iterator;t.next();)t.value.layerName=this.na}}},opacity:{get:function(){return this.lb},set:function(t){var e=this.lb;e!==t&&((0>t||1<t)&&me(t,"0 <= value <= 1",pi,"opacity"),this.lb=t,this.g("opacity",e,t),null!==(t=this.diagram)&&t.N())}},isTemporary:{get:function(){return this.o},set:function(t){var e=this.o;e!==t&&((this.o=t)&&(this.isInDocumentBounds=!1),this.g("isTemporary",e,t))}},visible:{get:function(){return this.C},set:function(t){var e=this.C;if(e!==t){for(this.C=t,this.g("visible",e,t),e=this.Fa.iterator;e.next();)e.value.Nb(t);null!==(t=this.diagram)&&t.N()}}},pickable:{get:function(){return this.oi},set:function(t){var e=this.oi;e!==t&&(this.oi=t,this.g("pickable",e,t))}},isInDocumentBounds:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,null!==this.diagram&&this.diagram.Pa())}},allowCopy:{get:function(){return this.aj},set:function(t){var e=this.aj;e!==t&&(this.aj=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.bj},set:function(t){var e=this.bj;e!==t&&(this.bj=t,this.g("allowDelete",e,t))}},allowTextEdit:{get:function(){return this.kj},set:function(t){var e=this.kj;e!==t&&(this.kj=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.cj},set:function(t){var e=this.cj;e!==t&&(this.cj=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.lj},set:function(t){var e=this.lj;e!==t&&(this.lj=t,this.g("allowUngroup",e,t))}},allowLink:{get:function(){return this.dj},set:function(t){var e=this.dj;e!==t&&(this.dj=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.fj},set:function(t){var e=this.fj;e!==t&&(this.fj=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.ej},set:function(t){var e=this.ej;e!==t&&(this.ej=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.gj},set:function(t){var e=this.gj;e!==t&&(this.gj=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.hj},set:function(t){var e=this.hj;e!==t&&(this.hj=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.ij},set:function(t){var e=this.ij;e!==t&&(this.ij=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.jj},set:function(t){var e=this.jj;e!==t&&(this.jj=t,this.g("allowSelect",e,t))}}}),pi.prototype.findObjectsNear=pi.prototype.kg,pi.prototype.findObjectsIn=pi.prototype.vf,pi.prototype.findObjectsAt=pi.prototype.Ii,pi.prototype.findObjectAt=pi.prototype.Wb,pi.className="Layer",j.prototype.clear=function(){this.animationManager.nc(),this.model.clear(),Xu=null,fc="",bo(this,!1),this.$o.clear(),gf(),this.$g.clear(),this.si=null,this.Pa(),this.Sa(),this.N()},j.prototype.reset=function(){this.clear(),this.ob=!0,jx(this),xa(this),this.gh=!0,Bx(this),this.layout=new Rt,this.gh=!1,this.model=Bv(),this.model.undoManager=new be,this.ob=this.fo=!1,this.N()},j.prototype.setRTL=function(t){null===(t=void 0===t?this.div:t)&&(t=dt.document.body);var e=Bn("div");e.dir="rtl",e.style.cssText="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;",e.textContent="A",t.appendChild(e);var n="reverse";0<e.scrollLeft?n="default":(e.scrollLeft=1,0===e.scrollLeft&&(n="negative")),t.removeChild(e),this.Au=n},j.prototype.setScrollWidth=function(t){null===(t=void 0===t?this.div:t)&&(t=dt.document.body);var e=0;if(Ur){var n=Zp;e=hc,null===n&&((n=Zp=Bn("p")).style.width="100%",n.style.height="200px",n.style.boxSizing="content-box",(e=hc=Bn("div")).style.position="absolute",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.boxSizing="content-box",e.appendChild(n)),e.style.overflow="hidden",t.appendChild(e);var i=n.offsetWidth;e.style.overflow="scroll",i===(n=n.offsetWidth)&&(n=e.clientWidth),t.removeChild(e),0!=(e=i-n)||Ss||(e=11)}this.sb=e,this.jx=!0},j.prototype.gb=function(t){t.classType===j&&(this.autoScale=t)},j.prototype.toString=function(t){void 0===t&&(t=0);var e="";if(this.div&&this.div.id&&(e=this.div.id),e='Diagram "'+e+'"',0>=t)return e;for(var n=this.Na.iterator;n.next();)e+="\n  "+n.value.toString(t-1);return e},j.prototype.addEventListener=function(t,e,n,i){t.addEventListener(e,n,{capture:i,passive:!1})},j.prototype.removeEventListener=function(t,e,n,i){t.removeEventListener(e,n,{capture:i})},j.prototype.computePixelRatio=function(){return null!==this.ti?this.ti:dt.devicePixelRatio||1},j.prototype.doMouseMove=function(){this.currentTool.doMouseMove()},j.prototype.doMouseDown=function(){this.currentTool.doMouseDown()},j.prototype.doMouseUp=function(){this.currentTool.doMouseUp()},j.prototype.doMouseWheel=function(){this.currentTool.doMouseWheel()},j.prototype.doKeyDown=function(){this.currentTool.doKeyDown()},j.prototype.doKeyUp=function(){this.currentTool.doKeyUp()},j.prototype.doFocus=function(){this.focus()},j.prototype.focus=function(){if(this.Aa)if(this.scrollsPageOnFocus)this.Aa.focus();else{var t=dt.scrollX||dt.pageXOffset,e=dt.scrollY||dt.pageYOffset;this.Aa.focus(),dt.scrollTo(t,e)}},j.prototype.sz=function(){this.F.S("GainedFocus")},j.prototype.rz=function(){this.F.S("LostFocus")},j.prototype.Mx=function(t){if(null!==this.Aa){var e=this.Ju,n=this.Gu;this.$r=!0;var i=this.documentBounds,a=this.viewportBounds,u=this.Rj,h=i.x-u.left,d=i.y-u.top,f=i.width+u.left+u.right,g=i.height+u.top+u.bottom,m=i.right+u.right;u=i.bottom+u.bottom;var y=a.x;i=a.y;var x=a.width,_=a.height,M=a.right,S=a.bottom;a=this.scale;var T=t.scrollLeft;if(this.io)switch(this.Au){case"negative":T=T+t.scrollWidth-t.clientWidth;break;case"reverse":T=t.scrollWidth-T-t.clientWidth}var k=T;x<f||_<g?(T=N.allocAt(this.position.x,this.position.y),this.allowHorizontalScroll&&this.Iu!==k&&(T.x=k/a+h,this.Iu=k),this.allowVerticalScroll&&this.Ku!==t.scrollTop&&(T.y=t.scrollTop/a+d,this.Ku=t.scrollTop),this.position=T,N.free(T),this.wj=this.$r=!1):(T=N.alloc(),t.Zy&&this.allowHorizontalScroll&&(h<y&&(this.position=T.h(k+h,this.position.y)),m>M&&(this.position=T.h(-(e.scrollWidth-this.ua)+k-this.ua/a+m,this.position.y))),t.$y&&this.allowVerticalScroll&&(d<i&&(this.position=T.h(this.position.x,t.scrollTop+d)),u>S&&(this.position=T.h(this.position.x,-(e.scrollHeight-this.ta)+t.scrollTop-this.ta/a+u))),N.free(T),nl(this),this.wj=this.$r=!1,m=(i=this.documentBounds).right,M=(a=this.viewportBounds).right,u=i.bottom,S=a.bottom,h=i.x,y=a.x,d=i.y,i=a.y,x>=f&&h>=y&&m<=M&&(n.style.width="1px"),_>=g&&d>=i&&u<=S&&(n.style.height="1px"))}},j.prototype.computeBounds=function(t){return void 0===t&&(t=new B),gi(this),Cy(this,t)},j.prototype.computePartsBounds=function(t,e){void 0===e&&(e=!1);var n=null;if(_n(t))for(var i=0;i<t.length;i++){var a=t[i];!e&&a instanceof X||(a.Sa(),null===n?n=a.actualBounds.copy():n.Nc(a.actualBounds))}else for(t=t.iterator;t.next();)i=t.value,!e&&i instanceof X||(i.Sa(),null===n?n=i.actualBounds.copy():n.Nc(i.actualBounds));return null===n?new B(NaN,NaN,0,0):n},j.prototype.zoomToFit=function(){var t=this.Sj;this.Sj=Yl,this.scale=Vl(this,pc),t!==Yl&&(Fn(this,!1),Bl(this,this.documentBounds,this.ua/this.sa,this.ta/this.sa,this.Qk,!1)),this.Sj=t},(D=j.prototype).gB=function(t,e){void 0===e&&(e=pc);var n=t.width,i=t.height;if(!(0===n||0===i||isNaN(n)&&isNaN(i))){var a=1;if(e===pc||e===Jp)if(isNaN(n))a=this.viewportBounds.height*this.scale/i;else if(isNaN(i))a=this.viewportBounds.width*this.scale/n;else{a=this.ua;var u=this.ta;a=e===Jp?u/i>a/n?(u-(this.Ue?this.sb:0))/i:(a-(this.Of?this.sb:0))/n:Math.min(u/i,a/n)}this.scale=a,this.position=new N(t.x,t.y)}},D.lz=function(t,e){this.Sa();var n=this.documentBounds,i=this.viewportBounds;this.position=new N(n.x+(t.x*n.width+t.offsetX)-(e.x*i.width-e.offsetX),n.y+(t.y*n.height+t.offsetY)-(e.y*i.height-e.offsetY))},D.dA=function(t){if(t instanceof ut){this.rr=t;var e=N.alloc();this.sr=this.Iq(t.da(zn,e)),N.free(e)}else this.rr=null,this.sr=Lr},D.im=function(t,e){if(void 0===e&&(e=!0),e){if((t=Hx(this,t,function(n){return n.part},function(n){return n.canSelect()}))instanceof ht)return t}else if((t=Hx(this,t,function(n){return n.part}))instanceof ht)return t;return null},D.Wb=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null),gi(this);for(var i=this.Na.iteratorBackwards;i.next();){var a=i.value;if(a.visible&&null!==(a=a.Wb(t,e,n)))return a}return null},D.Rz=function(t,e,n){return void 0===e&&(e=!0),function Gx(t,e,n,i,a){for(void 0===n&&(n=null),void 0===i&&(i=null),a instanceof et||a instanceof K||(a=new K),gi(t),t=t.Na.iteratorBackwards;t.next();){var u=t.value;u.visible&&!u.isTemporary&&u.Ii(e,n,i,a)}return a}(this,t,function(i){return i.part},e?function(i){return i instanceof ht&&i.canSelect()}:null,n)},D.Ii=function(t,e,n,i){void 0===e&&(e=null),void 0===n&&(n=null),i instanceof et||i instanceof K||(i=new K),gi(this);for(var a=this.Na.iteratorBackwards;a.next();){var u=a.value;u.visible&&u.Ii(t,e,n,i)}return i},D.Vx=function(t,e,n,i){return void 0===e&&(e=!1),void 0===n&&(n=!0),function GM(t,e,n,i,a){var u=null;for(void 0===u&&(u=null),void 0===n&&(n=null),void 0===i&&(i=!1),a instanceof et||a instanceof K||(a=new K),gi(t),t=t.Na.iteratorBackwards;t.next();){var h=t.value;h.visible&&!h.isTemporary&&h.vf(e,u,n,i,a)}return a}(this,t,function(a){return a instanceof ht&&(!n||a.canSelect())},e,i)},D.vf=function(t,e,n,i,a){void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=!1),a instanceof et||a instanceof K||(a=new K),gi(this);for(var u=this.Na.iteratorBackwards;u.next();){var h=u.value;h.visible&&h.vf(t,e,n,i,a)}return a},D.sv=function(t,e,n,i,a,u){var h=new K;gi(this);for(var d=this.Na.iteratorBackwards;d.next();){var f=d.value;f.visible&&f.sv(t,e,n,i,h,a,u)}return h},D.Sz=function(t,e,n,i,a){return void 0===n&&(n=!0),void 0===i&&(i=!0),function zM(t,e,n,i,a,u){var h=null;for(void 0===h&&(h=null),void 0===i&&(i=null),void 0===a&&(a=!0),!1!==a&&!0!==a&&((a instanceof et||a instanceof K)&&(u=a),a=!0),u instanceof et||u instanceof K||(u=new K),gi(t),t=t.Na.iteratorBackwards;t.next();){var d=t.value;d.visible&&!d.isTemporary&&d.kg(e,n,h,i,a,u)}return u}(this,t,e,function(u){return u instanceof ht&&(!i||u.canSelect())},n,a)},D.kg=function(t,e,n,i,a,u){void 0===n&&(n=null),void 0===i&&(i=null),void 0===a&&(a=!0),!1!==a&&!0!==a&&((a instanceof et||a instanceof K)&&(u=a),a=!0),u instanceof et||u instanceof K||(u=new K),gi(this);for(var h=this.Na.iteratorBackwards;h.next();){var d=h.value;d.visible&&d.kg(t,e,n,i,a,u)}return u},j.prototype.acceptEvent=function(t){return Uu(this,t,t instanceof MouseEvent)},j.prototype.uA=function(t){var e=this.F;if(!this.F.isEnabled)return!1;var n=Uu(e,t,!1);switch(n.key=String.fromCharCode(t.which),n.down=!0,t.which){case 8:n.key="Backspace";break;case 33:n.key="PageUp";break;case 34:n.key="PageDown";break;case 35:n.key="End";break;case 36:n.key="Home";break;case 37:n.key="Left";break;case 38:n.key="Up";break;case 39:n.key="Right";break;case 40:n.key="Down";break;case 45:n.key="Insert";break;case 46:n.key="Del";break;case 48:n.key="0";break;case 187:case 61:case 107:n.key="Add";break;case 189:case 173:case 109:n.key="Subtract";break;case 27:n.key="Esc"}return e.doKeyDown(),el(n,t)},j.prototype.vA=function(t){var e=this.F;if(!e.isEnabled)return!1;var n=Uu(e,t,!1);switch(n.key=String.fromCharCode(t.which),n.up=!0,t.which){case 8:n.key="Backspace";break;case 33:n.key="PageUp";break;case 34:n.key="PageDown";break;case 35:n.key="End";break;case 36:n.key="Home";break;case 37:n.key="Left";break;case 38:n.key="Up";break;case 39:n.key="Right";break;case 40:n.key="Down";break;case 45:n.key="Insert";break;case 46:n.key="Del"}return e.doKeyUp(),el(n,t)},j.prototype.Gz=function(t){var e=this.F;if(!e.isEnabled)return!1;var n=Uu(e,t,!0);return null!==e.mouseEnter&&e.mouseEnter(n),el(n,t)},j.prototype.Hz=function(t){var e=this.F;if(!e.isEnabled)return!1;var n=Uu(e,t,!0);return null!==e.mouseLeave&&e.mouseLeave(n),el(n,t)},j.prototype.getMouse=function(t){var e=this.Aa;if(null===e)return new N(0,0);var n=e.getBoundingClientRect();return e=t.clientX-this.ua/n.width*n.left,t=t.clientY-this.ta/n.height*n.top,null!==this.tb?He(new N(e,t),this.tb):new N(e,t)},j.prototype.Pa=function(){this.vj||(this.vj=!0,this.Fb(!0))},j.prototype.redraw=function(){this.ob||this.Vc||(this.N(),Oo(this),this.ed())},(D=j.prototype).tA=function(){return this.eg},D.Bz=function(t){void 0===t&&(t=null);var e=this.animationManager,n=e.isEnabled;e.nc(),e.isEnabled=!1,Is(this),this.Qf=!1,this.Cu=new N(NaN,NaN),e.isEnabled=n,this.Vc=!0;var i=this;null!==t&&Pu(function(){i.Vc=!1,ga(e,"Model"),t(i)},1)},D.Fb=function(t){if(void 0===t&&(t=!1),!0!==this.eg&&!(this.ob||!1===t&&this.Vc)){this.eg=!0;var e=this;dt.requestAnimationFrame(function(){e.eg&&e.ed()})}},D.ed=function(){(!this.Ln||this.eg)&&(this.Ln&&(this.Ln=!1),Is(this))},D.kw=function(t,e){for(t.reset();t.next();){var n=t.value;!n.Jc()||n instanceof vt||(n.Si()?(n.measure(1/0,1/0),n.arrange()):e.add(n))}for(t.reset();t.next();)(n=t.value)instanceof vt&&n.isVisible()&&Ey(this,n);for(t.reset();t.next();)(n=t.value)instanceof X&&n.isVisible()&&(n.Si()?(n.measure(1/0,1/0),n.arrange()):e.add(n));for(t.reset();t.next();)(n=t.value)instanceof At&&n.isVisible()&&(n.Si()?(n.measure(1/0,1/0),n.arrange()):e.add(n))},D.Jd=function(t,e,n,i){if(this.xj||this.animationManager.isAnimating)for(var a=0;a<e;a++)t[a].Jd(n,i)},D.lc=function(t,e){if(null!==this.Ea){null===this.Aa&&z("No canvas specified");var n=this.animationManager;if(!n.rb&&(!n.isAnimating||n.isTicking)){var i=new Date;if($d(this),"0"!==this.Ea.style.opacity){var a=t!==this.Sb,u=this.Na.m,h=u.length,d=this;if(this.Jd(u,h,d,d.viewportBounds),a)t.Ec(!0),nl(this);else if(!this.Uc&&void 0===e&&!n.isAnimating)return;h=this.ka;var f=this.sa,g=Math.round(h.x*f)/f,m=Math.round(h.y*f)/f;for((n=this.tb).reset(),1!==f&&n.scale(f),0===h.x&&0===h.y||n.translate(-g,-m),t.setTransform(f=this.ac,0,0,f,0,0),t.clearRect(0,0,this.ua,this.ta),1!==this.lb&&(t.globalAlpha=this.lb),Yp(this,t),g=void 0!==e?function(y){if(y.visible&&0!==y.lb){var x=y.Fa.m,_=x.length;if(0!==_){var M=ma(y,t),S=y.Vo;S.length=0;for(var T=d.scale,k=B.alloc(),b=0;b<_;b++){var I=x[b];e.contains(I)||y.Ei(t,I,d,S,T,k,!0)}B.free(k),t.globalAlpha=M}}}:function(y){y.lc(t,d)},h=u.length,m=0;m<h;m++)t.setTransform(f,0,0,f,0,0),t.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),g(u[m]);if(u=!1,this.Yh?il(this.Yh,this)&&(u=this.Jt()):u=!0,u&&(St.prototype.Ed=St.prototype.Fx),a?(this.Sb.Ec(!0),nl(this)):this.Uc=this.xj=!1,u=+new Date-+i,i=this.$w,(a=ey&&ey.Qx)||null===this.ti){for(i[this.Nr]=u,this.Nr=(this.Nr+1)%i.length,n=u=0;n<i.length;n++)u+=i[n];this.Mr=u/i.length}if(1!==this.lb&&(t.globalAlpha=1),a)for(t.setTransform(1,0,0,1,0,0),a=0;a<i.length;a++)t.fillText(i[a].toString(),20,150+20*a)}}}},D.Fe=function(t){return this.dh[t]},D.Dy=function(t,e){"minDrawingLength"===t&&(this.Jr=e),this.dh[t]=e,this.redraw()},D.zy=function(){this.dh=new Nn,this.dh.drawShadows=!0,this.dh.textGreeking=!0,this.dh.viewportOptimizations=!(Ss||_e),this.dh.temporaryPixelRatio=!0,this.dh.pictureRatioOptimization=!0,this.Jr=this.dh.minDrawingLength=1},D.km=function(t){return this.ao[t]},D.VA=function(t,e){this.ao[t]=e},D.yy=function(){this.ao=new Nn,this.ao.extraTouchArea=10,this.ao.extraTouchThreshold=10,this.ao.hasGestureZoom=!0},D.set=function(t){return Object.assign(this,t),this},D.dv=function(t){return this.Hm(t)},D.Hm=function(t){return Xd(this,t),this},D.fv=function(){if(0===this.undoManager.transactionLevel&&0!==this.Wh.count){for(;0<this.Wh.count;){var t=this.Wh;for(this.Wh=new xt,t=t.iterator;t.next();){var e=t.key;e.rq(t.value),e.cc(!1)}}this.N()}},D.N=function(t){if(void 0===t)this.Uc=!0,this.Fb();else{var e=this.viewportBounds;t.u()&&e.Ic(t)&&(this.Uc=!0,this.Fb())}this.S("InvalidateDraw")},j.prototype.invalidateViewport=function(t,e){if(!0!==this.Uc){this.Uc=!0;var n=!0===this.Fe("temporaryPixelRatio");if(!0===this.Fe("viewportOptimizations")&&this.scrollMode!==Ry&&this.Rj.Gi(0,0,0,0)&&e.width===t.width&&e.height===t.height){var i=this.scale,a=Math.max(t.x,e.x),u=Math.max(t.y,e.y);if(i=B.allocAt(a,u,Math.max(0,Math.min(t.x+t.width,e.x+e.width)-a)*i,Math.max(0,Math.min(t.y+t.height,e.y+e.height)-u)*i),!this.ns&&0<i.width&&0<i.height){if(!(this.Vc||(this.eg=!1,null===this.Ea||(this.Vc=!0,this.fv(),this.documentBounds.u()||(a=B.alloc(),Hl(this,this.computeBounds(a)),B.free(a)),a=this.Aa,null===a||a instanceof Os)))){var h=this.ac;u=this.ua*h;var d=this.ta*h,f=this.scale*h,g=Math.round(Math.round(e.x*f)-Math.round(t.x*f));e=Math.round(Math.round(e.y*f)-Math.round(t.y*f)),t=this.Ty,(f=this.Kw).width!==u&&(f.width=u),f.height!==d&&(f.height=d),t.clearRect(0,0,u,d),f=190*h;var m=70*h,y=Math.max(g,0),x=Math.max(e,0),_=Math.floor(u-y),M=Math.floor(d-x);t.drawImage(a.La,y,x,_,M,0,0,_,M),il(this.Yh,this)&&t.clearRect(0,0,f,m),a=ye(),t=ye(),M=Math.abs(g),_=Math.abs(e);var S=0===y?0:u-M;y=N.allocAt(S,0),M=N.allocAt(M+S,d),t.push(new B(Math.min(y.x,M.x),Math.min(y.y,M.y),Math.abs(y.x-M.x),Math.abs(y.y-M.y)));var T=this.tb;if(T.reset(),T.scale(h,h),1!==this.sa&&T.scale(this.sa),(0!==(h=this.ka).x||0!==h.y)&&isFinite(h.x)&&isFinite(h.y)&&T.translate(-h.x,-h.y),He(y,T),He(M,T),a.push(new B(Math.min(y.x,M.x),Math.min(y.y,M.y),Math.abs(y.x-M.x),Math.abs(y.y-M.y))),y.h(0,S=0===x?0:d-_),M.h(u,_+S),t.push(new B(Math.min(y.x,M.x),Math.min(y.y,M.y),Math.abs(y.x-M.x),Math.abs(y.y-M.y))),He(y,T),He(M,T),a.push(new B(Math.min(y.x,M.x),Math.min(y.y,M.y),Math.abs(y.x-M.x),Math.abs(y.y-M.y))),il(this.Yh,this)&&(y.h(u=0<g?0:-g,d=0<e?0:-e),M.h(f+u,m+d),t.push(new B(Math.min(y.x,M.x),Math.min(y.y,M.y),Math.abs(y.x-M.x),Math.abs(y.y-M.y))),He(y,T),He(M,T),a.push(new B(Math.min(y.x,M.x),Math.min(y.y,M.y),Math.abs(y.x-M.x),Math.abs(y.y-M.y)))),N.free(y),N.free(M),ya(this,!1,!0),null===this.Ea&&z("No div specified"),null===this.Aa&&z("No canvas specified"),!this.animationManager.rb&&(u=this.Sb,this.Uc)){for($d(this),d=this.ac,u.setTransform(1,0,0,1,0,0),u.clearRect(0,0,this.ua*d,this.ta*d),u.drawImage(this.Kw.La,0<g?0:Math.round(-g),0<e?0:Math.round(-e)),g=this.ka,h=this.sa,f=Math.round(g.x*h)/h,m=Math.round(g.y*h)/h,(e=this.tb).reset(),1!==h&&e.scale(h),0===g.x&&0===g.y||e.translate(-f,-m),u.save(),u.beginPath(),g=t.length,h=0;h<g;h++)0!==(f=t[h]).width&&0!==f.height&&u.rect(Math.floor(f.x),Math.floor(f.y),Math.ceil(f.width),Math.ceil(f.height));for(u.clip(),u.setTransform(1,0,0,1,0,0),u.scale(d,d),u.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),this.Jd(e=this.Na.m,g=e.length,this,this.viewportBounds),Yp(this,u),u.globalAlpha=this.lb,d=0;d<g;d++)if(f=a,(h=e[d]).visible&&0!==h.lb){m=ma(h,u),(x=h.Vo).length=0,y=this.scale,_=B.alloc(),T=(M=h.Fa.m).length,S=f.length;for(var k=0;k<T;k++){var b=M[k],I=nh(b,b.actualBounds);t:{for(var O=2/y,F=4/y,H=0;H<S;H++){var W=f[H];if(0!==W.width&&0!==W.height&&I.Av(W.x-O,W.y-O,W.width+F,W.height+F)){I=!0;break t}}I=!1}I&&h.Ei(u,b,this,x,y,_,!0)}B.free(_),u.globalAlpha=m}u.restore(),u.Ec(!0),this.Yh&&il(this.Yh,this)&&this.Jt(),this.Uc=this.xj=!1,this.Aq()}oe(a),oe(t),this.Vc=!1}}else this.ed();B.free(i),n&&(Rl(this),this.ed(),jl(this,!0))}else n?(Rl(this),this.ed(),jl(this,!0)):this.ed()}},(D=j.prototype).add=function(t){var e=t.diagram;if(e!==this&&(null!==e&&z("Cannot add part "+t.toString()+" to "+this.toString()+". It is already a part of "+e.toString()),null===(e=this.ik(t.layerName))&&(e=this.ik("")),null===e&&z('Cannot add a Part when unable find a Layer named "'+t.layerName+'" and there is no default Layer'),t.layer!==e)){var n=e.Oi(99999999,t,t.diagram===this);0<=n&&this.Va(Pt,"parts",e,null,t,null,n),e.isTemporary||this.Pa(),t.B(1),null!==(n=t.layerChanged)&&n(t,null,e)}},D.Oi=function(t){this.partManager.Oi(t);var e=this;al(t,function(n){Wd(e,n)}),(t instanceof At||t instanceof vt&&null!==t.placeholder)&&t.s(),null!==t.data&&al(t,function(n){fh(e.partManager,n)}),!0!==fr(t)&&!0!==Ea(t)||this.qe.add(t),Rc(t,!0,this),gv(t)?(t.actualBounds.u()&&this.N(nh(t,t.actualBounds)),this.Pa()):t.isVisible()&&t.actualBounds.u()&&this.N(nh(t,t.actualBounds)),this.Fb()},D.bc=function(t){t.$j(),this.partManager.bc(t);var e=this;null!==t.data&&al(t,function(n){pr(e.partManager,n,e)}),this.qe.remove(t),gv(t)?(t.actualBounds.u()&&this.N(nh(t,t.actualBounds)),this.Pa()):t.isVisible()&&t.actualBounds.u()&&this.N(nh(t,t.actualBounds)),this.Fb()},D.remove=function(t){cc(this,t,!0)},D.bt=function(t,e){if(void 0===e&&(e=!1),_n(t))for(var n=t.length,i=0;i<n;i++){var a=t[i];e&&!a.canDelete()||this.remove(a)}else for((n=new K).addAll(t),t=n.iterator;t.next();)n=t.value,e&&!n.canDelete()||this.remove(n)},D.ek=function(t,e,n){return void 0===n&&(n=!1),this.partManager.ek(t,e,n)},j.prototype.moveParts=function(t,e,n,i){if(void 0===n&&(n=!1),void 0===i&&(i=Ty(this)),null!==this.toolManager){var a=new xt;if(null!==t)if(_n(t))for(var u=0;u<t.length;u++)ns(this,a,t[u],n,i);else for(t=t.iterator;t.next();)ns(this,a,t.value,n,i);else{for(t=this.parts;t.next();)ns(this,a,t.value,n,i);for(t=this.nodes;t.next();)ns(this,a,t.value,n,i);for(t=this.links;t.next();)ns(this,a,t.value,n,i)}Gu(this,a,e,i,n)}},j.prototype.computeMove=function(t,e,n,i){if(void 0===i&&(i=new N),i.assign(e),null===t)return i;var a=e,u=n.isGridSnapEnabled;u&&(n.isGridSnapRealtime||this.lastInput.up)&&ky(this,t,e,a=N.alloc(),n),n=null!==t.dragComputation?t.dragComputation(t,e,a):a;var h=t.minLocation,d=h.x;isNaN(d)&&(d=u?Math.round(1e3*t.location.x)/1e3:t.location.x),h=h.y,isNaN(h)&&(h=u?Math.round(1e3*t.location.y)/1e3:t.location.y);var f=t.maxLocation,g=f.x;return isNaN(g)&&(g=u?Math.round(1e3*t.location.x)/1e3:t.location.x),f=f.y,isNaN(f)&&(f=u?Math.round(1e3*t.location.y)/1e3:t.location.y),i.h(Math.max(d,Math.min(n.x,g)),Math.max(h,Math.min(n.y,f))),a!==e&&N.free(a),i},(D=j.prototype).yd=function(t,e,n){if(void 0===n)return new hr(ha);var i=t.isGridSnapEnabled;return t.groupsSnapMembers||null===e.containingGroup||(i=!1),new hr(i?new N(Math.round(1e3*n.x)/1e3,Math.round(1e3*n.y)/1e3):n.copy())},D.bm=function(t){Wp(this,t,null),t.Ke(this);var e=this.Na,n=e.count-1;if(!t.isTemporary)for(;0<=n&&e.J(n).isTemporary;)n--;return e.ub(n+1,t),null!==this.Tb&&this.Va(Pt,"layers",this,null,t,null,n+1),this.N(),this.Pa(),this},D.zx=function(t,e){Wp(this,t,e),t.Ke(this);var n=this.Na,i=n.indexOf(t);0<=i&&(n.remove(t),null!==this.Tb&&this.Va(sn,"layers",this,t,null,i,null));var u,a=n.count;for(u=0;u<a;u++)if(n.J(u)===e){n.ub(u,t);break}return null!==this.Tb&&this.Va(Pt,"layers",this,null,t,null,u),this.N(),0>i&&this.Pa(),this},D.fz=function(t,e){Wp(this,t,e),t.Ke(this);var n=this.Na,i=n.indexOf(t);0<=i&&(n.remove(t),null!==this.Tb&&this.Va(sn,"layers",this,t,null,i,null));var u,a=n.count;for(u=0;u<a;u++)if(n.J(u)===e){n.ub(u+1,t);break}return null!==this.Tb&&this.Va(Pt,"layers",this,null,t,null,u+1),this.N(),0>i&&this.Pa(),this},D.NA=function(t){if(t.diagram!==this&&z("Cannot remove a Layer from another Diagram: "+t+" of "+t.diagram),""!==t.name){var e=this.Na,n=e.indexOf(t);if(e.remove(t)){for(e=t.Fa.copy().iterator;e.next();){var i=e.value,a=i.layerName;i.layerName=a!==t.name?a:""}null!==this.Tb&&this.Va(sn,"layers",this,t,null,n,null),this.N(),this.Pa()}}},D.ik=function(t){for(var e=this.layers;e.next();){var n=e.value;if(n.name===t)return n}return null},D.Bx=function(t){return null===this.$e&&(this.$e=new et),this.$e.add(t),this.model.uh(t),this},D.PA=function(t){null!==this.$e&&(this.$e.remove(t),0===this.$e.count&&(this.$e=null)),this.model.Bk(t)},D.uh=function(t){return null===this.ug&&(this.ug=new et),this.ug.add(t),this},D.Bk=function(t){null!==this.ug&&(this.ug.remove(t),0===this.ug.count&&(this.ug=null))},D.ws=function(t){if(this.skipsUndoManager||this.model.skipsUndoManager||this.model.undoManager.yv(t),t.change!==qr&&(this.isModified=!0),null!==this.ug)for(var e=this.ug,n=e.length,i=0;i<n;i++)e.J(i)(t)},D.Va=function(t,e,n,i,a,u,h){void 0===u&&(u=null),void 0===h&&(h=null);var d=new le;d.diagram=this,d.change=t,d.propertyName=e,d.object=n,d.oldValue=i,d.oldParam=u,d.newValue=a,d.newParam=h,this.ws(d)},D.g=function(t,e,n,i,a){this.Va(ve,t,this,e,n,i,a)},j.prototype.changeState=function(t,e){if(null!==t&&t.diagram===this){var n=this.skipsModelSourceBindings;try{this.skipsModelSourceBindings=!0;var i=t.change;if(i===ve){var a=t.object;if(ce(a,t.propertyName,t.H(e)),a instanceof ut){var u=a.part;null!==u&&u.Kb()}this.isModified=!0}else if(i===Pt){var h=t.object,d=t.newParam,f=t.newValue;if(h instanceof Y)if("number"==typeof d&&f instanceof ut){e?h.bc(d):h.ub(d,f);var g=h.part;null!==g&&g.Kb()}else"number"==typeof d&&f instanceof en&&(f.isRow?Nc(h,d,e?void 0:f):aw(h,d,e?void 0:f));else if(h instanceof pi){var m=!0===t.oldParam;"number"==typeof d&&f instanceof ht&&(e?(f.isSelected=!1,f.isHighlighted=!1,f.Kb(),h.bc(m?d:-1,f,m)):h.Oi(d,f,m))}else h instanceof j?"number"==typeof d&&f instanceof pi&&(e?this.Na.eb(d):(f.Ke(this),this.Na.ub(d,f))):z("unknown ChangedEvent.Insert object: "+t.toString());this.isModified=!0}else if(i===sn){var y=t.object,x=t.oldParam,_=t.oldValue;if(y instanceof Y)"number"==typeof x&&_ instanceof ut?e?y.ub(x,_):y.bc(x):"number"==typeof x&&_ instanceof en&&(_.isRow?Nc(y,x,e?_:void 0):aw(y,x,e?_:void 0));else if(y instanceof pi){var M=!0===t.newParam;"number"==typeof x&&_ instanceof ht&&(e?0>y.Fa.indexOf(_)&&y.Oi(x,_,M):(_.isSelected=!1,_.isHighlighted=!1,_.Kb(),y.bc(M?x:-1,_,M)))}else y instanceof j?"number"==typeof x&&_ instanceof pi&&(e?(_.Ke(this),this.Na.ub(x,_)):this.Na.eb(x)):z("unknown ChangedEvent.Remove object: "+t.toString());this.isModified=!0}else i!==qr&&z("unknown ChangedEvent: "+t.toString())}finally{this.skipsModelSourceBindings=n}}},j.prototype.wa=function(t){return this.undoManager.wa(t)},j.prototype.Xa=function(t){return this.undoManager.Xa(t)},j.prototype.Df=function(){return this.undoManager.Df()},j.prototype.commit=function(t,e){void 0===e&&(e="");var n=this.skipsUndoManager;null===e&&(this.skipsUndoManager=!0,e=""),this.undoManager.wa(e);var i=!1;try{t(this),i=!0}finally{i?this.undoManager.Xa(e):this.undoManager.Df(),this.skipsUndoManager=n}},j.prototype.updateAllTargetBindings=function(t){this.partManager.updateAllTargetBindings(t)},j.prototype.Lq=function(){this.partManager.Lq()},j.prototype.onViewportBoundsChanged=function(t,e,n,i){if(!t.A(e)){void 0===i&&(i=!1),i||Oo(this),nl(this);var a=this.layout;null===a||!a.isViewportSized||this.autoScale!==oi||i||t.width===e.width&&t.height===e.height||a.B(),a=this.currentTool,!0===this.ml&&a instanceof Ee&&(this.lastInput.documentPoint=this.kt(this.lastInput.viewPoint),Mx(a,this)),this.ob||this.invalidateViewport(t,e),va(this),this.bd.scale=n,this.bd.position.x=t.x,this.bd.position.y=t.y,this.bd.bounds.assign(t),this.bd.Gx.width=Math.round(t.width*n),this.bd.Gx.height=Math.round(t.height*n),this.bd.qy.width=this.ua,this.bd.qy.height=this.ta,this.bd.ky=i,this.S("ViewportBoundsChanged",this.bd,t),this.isVirtualized&&this.links.each(function(u){u.isAvoiding&&u.actualBounds.Ic(e)&&u.Ua()})}},j.prototype.clearSelection=function(t){void 0===t&&(t=!1);var e=this.selection;if(0!==e.count){t||this.S("ChangingSelection",e);for(var n=e.xa(),i=n.length,a=0;a<i;a++)n[a].isSelected=!1;e.ea(),e.clear(),e.freeze(),t||this.S("ChangedSelection",e)}},j.prototype.select=function(t){null!==t&&t.diagram===this&&(!t.isSelected||1<this.selection.count)&&(this.S("ChangingSelection",this.selection),this.clearSelection(!0),t.isSelected=!0,this.S("ChangedSelection",this.selection))},j.prototype.UA=function(t){if(this.S("ChangingSelection",this.selection),this.clearSelection(!0),_n(t))for(var e=t.length,n=0;n<e;n++){var i=t[n];i instanceof ht||z("Diagram.selectCollection given something that is not a Part: "+i),i.isSelected=!0}else for(t=t.iterator;t.next();)(e=t.value)instanceof ht||z("Diagram.selectCollection given something that is not a Part: "+e),e.isSelected=!0;this.S("ChangedSelection",this.selection)},j.prototype.clearHighlighteds=function(){var t=this.highlighteds;if(0<t.count){for(var e=t.xa(),n=e.length,i=0;i<n;i++)e[i].isHighlighted=!1;t.ea(),t.clear(),t.freeze()}},(D=j.prototype).nA=function(t){null!==t&&t.diagram===this&&(!t.isHighlighted||1<this.highlighteds.count)&&(this.clearHighlighteds(),t.isHighlighted=!0)},D.oA=function(t){t=(new K).addAll(t);for(var e=this.highlighteds.copy().Bq(t).iterator;e.next();)e.value.isHighlighted=!1;for(t=t.iterator;t.next();)(e=t.value)instanceof ht||z("Diagram.highlightCollection given something that is not a Part: "+e),e.isHighlighted=!0},D.scroll=function(t,e,n){void 0===n&&(n=1);var i="up"===e||"down"===e,a=0;if("pixel"===t)a=n;else if("line"===t)a=n*(i?this.scrollVerticalLineChange:this.scrollHorizontalLineChange);else if("page"===t)t=i?this.viewportBounds.height:this.viewportBounds.width,0!=(t*=this.scale)&&(a=n*Math.max(t-(i?this.scrollVerticalLineChange:this.scrollHorizontalLineChange),0));else{if("document"===t)return a=this.documentBounds,n=this.viewportBounds,i=N.alloc(),"up"===e?this.position=i.h(n.x,a.y):"left"===e?this.position=i.h(a.x,n.y):"down"===e?this.position=i.h(n.x,a.bottom-n.height):"right"===e&&(this.position=i.h(a.right-n.width,n.y)),void N.free(i);z("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: "+t)}a/=this.scale,n=this.position.copy(),"up"===e?n.y=this.position.y-a:"down"===e?n.y=this.position.y+a:"left"===e?n.x=this.position.x-a:"right"===e?n.x=this.position.x+a:z("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+e),this.position=n},D.Vv=function(t){var e=this.viewportBounds;e.De(t)||((t=t.center).x-=e.width/2,t.y-=e.height/2,this.position=t)},D.xs=function(t){var e=this.viewportBounds;(t=t.center).x-=e.width/2,t.y-=e.height/2,this.position=t},D.Iq=function(t){var e=this.tb;e.reset(),1!==this.sa&&e.scale(this.sa);var n=this.ka;return(0!==n.x||0!==n.y)&&isFinite(n.x)&&isFinite(n.y)&&e.translate(-n.x,-n.y),t.copy().transform(this.tb)},D.cB=function(t){var e=this.tb,n=t.x,i=t.y,a=n+t.width,u=i+t.height,h=e.m11,d=e.m12,f=e.m21,g=e.m22,m=e.dx,y=e.dy,x=n*h+i*f+m;e=n*d+i*g+y;var _=a*h+i*f+m;return t=a*d+i*g+y,i=n*h+u*f+m,n=n*d+u*g+y,h=a*h+u*f+m,a=a*d+u*g+y,u=Math.min(x,_),x=Math.max(x,_),_=Math.min(e,t),e=Math.max(e,t),u=Math.min(u,i),x=Math.max(x,i),_=Math.min(_,n),e=Math.max(e,n),u=Math.min(u,h),x=Math.max(x,h),new B(u,_=Math.min(_,a),x-u,(e=Math.max(e,a))-_)},D.kt=function(t){var e=this.tb;e.reset(),1!==this.sa&&e.scale(this.sa);var n=this.ka;return(0!==n.x||0!==n.y)&&isFinite(n.x)&&isFinite(n.y)&&e.translate(-n.x,-n.y),He(t.copy(),this.tb)},j.prototype.doModelChanged=function(t){var e=this;if(t.model===this.model){var n=t.change,i=t.propertyName;if(n===qr&&"S"===i[0])if("StartingFirstTransaction"===i){var a=this;(t=this.toolManager).mouseDownTools.each(function(f){f.diagram=a}),t.mouseMoveTools.each(function(f){f.diagram=a}),t.mouseUpTools.each(function(f){f.diagram=a}),this.Vc||this.Qf||(this.$k=!0,this.Ln&&(this.eg=!0))}else"StartingUndo"===i||"StartingRedo"===i?((t=this.animationManager).defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.nc(),this.S("ChangingSelection",this.selection)):"StartedTransaction"===i&&(t=this.animationManager).defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.nc();else if(this.Z){this.Z=!1;try{if(""===t.modelChange&&n===qr){("FinishedUndo"===i||"FinishedRedo"===i)&&(this.S("ChangedSelection",this.selection),gi(this));var u=this.animationManager;"RolledBackTransaction"===i&&u.nc(),this.$k=!0,this.ed(),0!==this.undoManager.transactionLevel&&1!==this.undoManager.transactionLevel||Bp(u),"CommittedTransaction"===i&&this.undoManager.isJustDiscarded&&(this.pe=Math.min(this.pe,this.undoManager.historyIndex-1)),"CommittedTransaction"!==i&&"RolledBackTransaction"!==i||!this.undoManager.isPendingUnmodified||setTimeout(function(){e.isModified=!1},1);var h=t.isTransactionFinished;if(h&&(Ny(this),this.Ts.clear(),function jM(t){for(t=t.$i.iterator;t.next();)t.value.ol=!1}(this.animationManager)),!this.pu&&h&&this.lastInput.targetDiagram){this.pu=!0;var d=this;Pu(function(){d.currentTool.standardMouseOver(),d.pu=!1},10)}}}finally{this.Z=!0}}}},j.prototype.Hd=function(){this.partManager.Hd()},j.prototype.Wj=function(t,e){this.Ld.Wj(t,e)},j.prototype.Yj=function(t,e){this.Ld.Yj(t,e)},j.prototype.findPartForKey=function(t){return this.partManager.findPartForKey(t)},j.prototype.Eb=function(t){return this.partManager.Eb(t)},j.prototype.findLinkForKey=function(t){return this.partManager.findLinkForKey(t)},(D=j.prototype).vc=function(t){return this.partManager.vc(t)},D.Hi=function(t){return this.partManager.Hi(t)},D.uc=function(t){return this.partManager.uc(t)},D.Ds=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n]=arguments[n];return this.partManager.Ds.apply(this.partManager,e instanceof Array?e:bM(rx(e)))},D.Cs=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n]=arguments[n];return this.partManager.Cs.apply(this.partManager,e instanceof Array?e:bM(rx(e)))},D.Sa=function(){if(this.vj){var t=B.alloc();Hl(this,this.computeBounds(t)),B.free(t)}},D.Xz=function(){for(var t=new K,e=this.nodes;e.next();){var n=e.value;n.isTopLevel&&t.add(n)}for(e=this.links;e.next();)(n=e.value).isTopLevel&&t.add(n);return t.iterator},D.Wz=function(){return this.xi.iterator},D.xA=function(t){gi(this),t&&Gl(this,!0),this.Vc?Yx(this,!1):(this.$k=!0,Is(this))},D.cA=function(){for(var t=new et,e=this.nodes;e.next();){var n=e.value;n.isTopLevel&&null===n.Ji()&&t.add(n)}return t.iterator},D.Xj=function(t,e){return null!==(t=by(this,t))&&t.add(e),this},D.um=function(t,e){null!==(t=by(this,t))&&t.remove(e)},D.S=function(t,e,n){var i=by(this,t),a=new bu;if(a.diagram=this,null!==(t=XM(this,t))&&(a.name=t),void 0!==e&&(a.subject=e),void 0!==n&&(a.parameter=n),1===(e=i.length))i.J(0)(a);else if(0!==e)for(i=i.xa(),n=0;n<e;n++)(0,i[n])(a)},D.qk=function(t,e){return Oy(this,!1,null,e||null).qk(t.x,t.y,t.width,t.height)},j.prototype.computeOccupiedArea=function(t){return this.isVirtualized?this.viewportBounds.copy():this.vj?Cy(this,t):t.assign(this.documentBounds)},j.prototype.zs=function(t){this.Pq.assign(t),this.computeAutoScrollPosition(this.Pq).Ta(this.position)?this.og():$x(this)},j.prototype.og=function(){-1!==this.Jk&&(dt.clearTimeout(this.Jk),this.Jk=-1)},j.prototype.computeAutoScrollPosition=function(t){var e=this.position,n=this.Qq;if(0>=n.top&&0>=n.left&&0>=n.right&&0>=n.bottom)return e;var i=this.viewportBounds,a=this.scale;i=B.allocAt(0,0,i.width*a,i.height*a);var u=N.allocAt(0,0);if(t.x>=i.x&&t.x<i.x+n.left&&this.allowHorizontalScroll){var h=Math.max(this.scrollHorizontalLineChange,1);u.x-=h|=0,t.x<i.x+n.left/2&&(u.x-=h),t.x<i.x+n.left/4&&(u.x-=4*h)}else t.x<=i.x+i.width&&t.x>i.x+i.width-n.right&&this.allowHorizontalScroll&&(h=Math.max(this.scrollHorizontalLineChange,1),u.x+=h|=0,t.x>i.x+i.width-n.right/2&&(u.x+=h),t.x>i.x+i.width-n.right/4&&(u.x+=4*h));return t.y>=i.y&&t.y<i.y+n.top&&this.allowVerticalScroll?(h=Math.max(this.scrollVerticalLineChange,1),u.y-=h|=0,t.y<i.y+n.top/2&&(u.y-=h),t.y<i.y+n.top/4&&(u.y-=4*h)):t.y<=i.y+i.height&&t.y>i.y+i.height-n.bottom&&this.allowVerticalScroll&&(h=Math.max(this.scrollVerticalLineChange,1),u.y+=h|=0,t.y>i.y+i.height-n.bottom/2&&(u.y+=h),t.y>i.y+i.height-n.bottom/4&&(u.y+=4*h)),u.Ta(ha)||(e=new N(e.x+u.x/a,e.y+u.y/a)),B.free(i),N.free(u),e},(D=j.prototype).Vs=function(){return null},D.Gv=function(){return null},D.jz=function(t,e){this.Xy.add(t,e)},D.ev=function(t){(this.tx=t)||this.nodes.each(function(e){e instanceof vt&&(e.mr=null)})},D.zA=function(t){return Ur?(void 0===t&&(t={}),t.returnType="Image",this.ny(t)):null},D.ny=function(t){return void 0===t&&(t={}),Wx(this,this.AA,t)},D.AA=function(t,e,n){var i=$M(n,t,"canvas",null);if(null===i)return null;var a=null;if(null!==(n=i.Y.canvas))switch(a=t.returnType,a=void 0===a?"string":a.toLowerCase(),a){case gc+"data":a=i.getImageData(0,0,n.width,n.height);break;case gc:(i=(t.document||document).createElement("img")).src=n.toDataURL(t.type,t.details),a=i;break;case"blob":return"function"!=typeof e&&z('Error: Diagram.makeImageData called with "returnType: toBlob", but no required "callback" function property defined.'),"function"==typeof n.toBlob?(n.toBlob(e,t.type,t.details),"toBlob"):"function"==typeof n.msToBlob?(e(n.msToBlob()),"msToBlob"):(e(null),null);default:a=n.toDataURL(t.type,t.details)}return"function"==typeof e?(e(a),null):a},Dt.Object.defineProperties(j.prototype,{div:{get:function(){return this.Ea},set:function(t){if(this.Ea!==t){var e=this.Ea;null!==e?(e.F=void 0,e.goDiagram=void 0,e.go=void 0,e.innerHTML="",null!==this.Aa&&(this.removeEventListener(e=this.Aa.La,"pointermove",this.xk,!1),this.removeEventListener(e,"pointerdown",this.wk,!1),this.removeEventListener(e,"pointerup",this.zk,!1),this.removeEventListener(e,"pointerout",this.yk,!1),this.Aa.Ox()),this.Hl&&(this.Hl.disconnect(),this.Hl=null),null!==(e=this.toolManager)&&(e.mouseDownTools.each(function(n){n.cancelWaitAfter()}),e.mouseMoveTools.each(function(n){n.cancelWaitAfter()}),e.mouseUpTools.each(function(n){n.cancelWaitAfter()})),e.cancelWaitAfter(),this.currentTool.doCancel(),this.Aa=null,this.removeEventListener(dt,"resize",this.lw,!1),this.removeEventListener(dt,"wheel",this.tk,!0),zd===this&&(zd=null)):this.Qf=!1,this.Ea=null,null!==t&&((e=t.F)&&(e.div=null),qp(this,t),this.redraw())}}},Ex:{get:function(){return this.Mr}},Pi:{get:function(){return this.Qf}},draggedLink:{get:function(){return this.It},set:function(t){this.It!==t&&(this.It=t,null!==t&&(this.tu=t.fromPort,this.uu=t.toPort))}},sy:{get:function(){return this.tu},set:function(t){this.tu=t}},ty:{get:function(){return this.uu},set:function(t){this.uu=t}},animationManager:{get:function(){return this.Ld}},undoManager:{get:function(){return this.Tb.undoManager}},skipsUndoManager:{get:function(){return this.gh},set:function(t){this.gh=t,this.Tb.skipsUndoManager=t}},delaysLayout:{get:function(){return this.Gt},set:function(t){this.Gt=t}},opacity:{get:function(){return this.lb},set:function(t){var e=this.lb;e!==t&&((0>t||1<t)&&me(t,"0 <= value <= 1",j,"opacity"),this.lb=t,this.g("opacity",e,t),this.N())}},validCycle:{get:function(){return this.Vu},set:function(t){var e=this.Vu;e!==t&&(this.Vu=t,this.g("validCycle",e,t))}},layers:{get:function(){return this.Na.iterator}},isModelReadOnly:{get:function(){var t=this.Tb;return null!==t&&t.isReadOnly},set:function(t){var e=this.Tb;null!==e&&(e.isReadOnly=t)}},isReadOnly:{get:function(){return this.Mg},set:function(t){var e=this.Mg;e!==t&&(this.Mg=t,this.g("isReadOnly",e,t))}},isEnabled:{get:function(){return this.td},set:function(t){var e=this.td;e!==t&&(this.td=t,this.g("isEnabled",e,t))}},allowClipboard:{get:function(){return this.pt},set:function(t){var e=this.pt;e!==t&&(this.pt=t,this.g("allowClipboard",e,t))}},allowCopy:{get:function(){return this.aj},set:function(t){var e=this.aj;e!==t&&(this.aj=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.bj},set:function(t){var e=this.bj;e!==t&&(this.bj=t,this.g("allowDelete",e,t))}},allowDragOut:{get:function(){return this.qt},set:function(t){var e=this.qt;e!==t&&(this.qt=t,this.g("allowDragOut",e,t))}},allowDrop:{get:function(){return this.rt},set:function(t){var e=this.rt;e!==t&&(this.rt=t,this.g("allowDrop",e,t))}},allowTextEdit:{get:function(){return this.kj},set:function(t){var e=this.kj;e!==t&&(this.kj=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.cj},set:function(t){var e=this.cj;e!==t&&(this.cj=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.lj},set:function(t){var e=this.lj;e!==t&&(this.lj=t,this.g("allowUngroup",e,t))}},allowInsert:{get:function(){return this.tt},set:function(t){var e=this.tt;e!==t&&(this.tt=t,this.g("allowInsert",e,t))}},allowLink:{get:function(){return this.dj},set:function(t){var e=this.dj;e!==t&&(this.dj=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.fj},set:function(t){var e=this.fj;e!==t&&(this.fj=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.ej},set:function(t){var e=this.ej;e!==t&&(this.ej=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.gj},set:function(t){var e=this.gj;e!==t&&(this.gj=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.hj},set:function(t){var e=this.hj;e!==t&&(this.hj=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.ij},set:function(t){var e=this.ij;e!==t&&(this.ij=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.jj},set:function(t){var e=this.jj;e!==t&&(this.jj=t,this.g("allowSelect",e,t))}},allowUndo:{get:function(){return this.ut},set:function(t){var e=this.ut;e!==t&&(this.ut=t,this.g("allowUndo",e,t))}},allowZoom:{get:function(){return this.wt},set:function(t){var e=this.wt;e!==t&&(this.wt=t,this.g("allowZoom",e,t))}},hasVerticalScrollbar:{get:function(){return this.Zn},set:function(t){var e=this.Zn;e!==t&&(this.Zn=t,Oo(this),this.N(),this.g("hasVerticalScrollbar",e,t),Fn(this,!1))}},hasHorizontalScrollbar:{get:function(){return this.Yn},set:function(t){var e=this.Yn;e!==t&&(this.Yn=t,Oo(this),this.N(),this.g("hasHorizontalScrollbar",e,t),Fn(this,!1))}},allowHorizontalScroll:{get:function(){return this.st},set:function(t){var e=this.st;e!==t&&(this.st=t,this.g("allowHorizontalScroll",e,t),Fn(this,!1))}},allowVerticalScroll:{get:function(){return this.vt},set:function(t){var e=this.vt;e!==t&&(this.vt=t,this.g("allowVerticalScroll",e,t),Fn(this,!1))}},scrollHorizontalLineChange:{get:function(){return this.Hu},set:function(t){var e=this.Hu;e!==t&&(0>t&&me(t,">= 0",j,"scrollHorizontalLineChange"),this.Hu=t,this.g("scrollHorizontalLineChange",e,t))}},scrollVerticalLineChange:{get:function(){return this.Lu},set:function(t){var e=this.Lu;e!==t&&(0>t&&me(t,">= 0",j,"scrollVerticalLineChange"),this.Lu=t,this.g("scrollVerticalLineChange",e,t))}},lastInput:{get:function(){return this.Dj},set:function(t){this.Dj=t}},previousInput:{get:function(){return this.bh},set:function(t){this.bh=t}},firstInput:{get:function(){return this.pr},set:function(t){this.pr=t}},currentCursor:{get:function(){return this.Dt},set:function(t){if(""===t&&(t=this.dr),this.Dt!==t){var e=this.Aa,n=this.Ea;if(null!==e&&null!==n){this.Dt=t;var i=e.style.cursor;e.style.cursor=t,n.style.cursor=t,e.style.cursor===i&&(e.style.cursor="-webkit-"+t,n.style.cursor="-webkit-"+t,e.style.cursor===i&&(e.style.cursor="-moz-"+t,n.style.cursor="-moz-"+t,e.style.cursor===i&&(e.style.cursor=t,n.style.cursor=t)))}}}},defaultCursor:{get:function(){return this.dr},set:function(t){""===t&&(t="auto");var e=this.dr;e!==t&&(this.dr=t,this.g("defaultCursor",e,t))}},click:{get:function(){return this.vg},set:function(t){var e=this.vg;e!==t&&(this.vg=t,this.g("click",e,t))}},doubleClick:{get:function(){return this.Dg},set:function(t){var e=this.Dg;e!==t&&(this.Dg=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return this.xg},set:function(t){var e=this.xg;e!==t&&(this.xg=t,this.g("contextClick",e,t))}},mouseOver:{get:function(){return this.Wg},set:function(t){var e=this.Wg;e!==t&&(this.Wg=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return this.Ug},set:function(t){var e=this.Ug;e!==t&&(this.Ug=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return this.Tg},set:function(t){var e=this.Tg;e!==t&&(this.Tg=t,this.g("mouseHold",e,t))}},mouseDragOver:{get:function(){return this.ou},set:function(t){var e=this.ou;e!==t&&(this.ou=t,this.g("mouseDragOver",e,t))}},mouseDrop:{get:function(){return this.Rg},set:function(t){var e=this.Rg;e!==t&&(this.Rg=t,this.g("mouseDrop",e,t))}},handlesDragDropForTopLevelParts:{get:function(){return this.Tt},set:function(t){var e=this.Tt;e!==t&&(this.Tt=t,this.g("handlesDragDropForTopLevelParts",e,t))}},mouseEnter:{get:function(){return this.Sg},set:function(t){var e=this.Sg;e!==t&&(this.Sg=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return this.Vg},set:function(t){var e=this.Vg;e!==t&&(this.Vg=t,this.g("mouseLeave",e,t))}},toolTip:{get:function(){return this.qh},set:function(t){var e=this.qh;e!==t&&(this.qh=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return this.yg},set:function(t){var e=this.yg;e!==t&&(this.yg=t,this.g("contextMenu",e,t))}},commandHandler:{get:function(){return this.Oc},set:function(t){this.Oc!==t&&(this.Oc=t,t.Ke(this))}},toolManager:{get:function(){return this.Zi},set:function(t){this.Zi!==t&&(this.Zi=t,t.diagram=this)}},defaultTool:{get:function(){return this.Pc},set:function(t){var e=this.Pc;e!==t&&(this.Pc=t,t.diagram=this,this.currentTool===e&&(this.currentTool=t))}},currentTool:{get:function(){return this.yc},set:function(t){var e=this.yc;e&&(e.isActive&&e.doDeactivate(),e.cancelWaitAfter(),e.doStop()),null===t&&(t=this.defaultTool),null!==t&&(this.yc=t,t.diagram=this,t.doStart())}},selection:{get:function(){return this.kx}},maxSelectionCount:{get:function(){return this.ju},set:function(t){var e=this.ju;if(e!==t)if(0<=t&&!isNaN(t)){if(this.ju=t,this.g("maxSelectionCount",e,t),!this.undoManager.isUndoingRedoing&&0<(t=this.selection.count-t)){this.S("ChangingSelection",this.selection),e=this.selection.xa();for(var n=0;n<t;n++)e[n].isSelected=!1;this.S("ChangedSelection",this.selection)}}else me(t,">= 0",j,"maxSelectionCount")}},nodeSelectionAdornmentTemplate:{get:function(){return this.qu},set:function(t){var e=this.qu;e!==t&&(this.qu=t,this.g("nodeSelectionAdornmentTemplate",e,t))}},groupSelectionAdornmentTemplate:{get:function(){return this.St},set:function(t){var e=this.St;e!==t&&(this.St=t,this.g("groupSelectionAdornmentTemplate",e,t))}},linkSelectionAdornmentTemplate:{get:function(){return this.gu},set:function(t){var e=this.gu;e!==t&&(this.gu=t,this.g("linkSelectionAdornmentTemplate",e,t))}},highlighteds:{get:function(){return this.Pw}},isModified:{get:function(){var t=this.undoManager;return t.isEnabled?null!==t.currentTransaction||this.fo&&this.pe!==t.historyIndex:this.fo},set:function(t){if(this.fo!==t){this.fo=t;var e=this.undoManager;!t&&e.isEnabled&&(this.pe=e.historyIndex),t||Ny(this)}}},model:{get:function(){return this.Tb},set:function(t){var e=this.Tb;if(e!==t){this.currentTool.doCancel(),e&&e.undoManager!==t.undoManager&&e.undoManager.isInTransaction&&z("Do not replace a Diagram.model while a transaction is in progress."),this.animationManager.nc(!0);var n=bo(this,!0);this.Qf=!1,this.Ln=!0,this.pe=-2,this.eg=!1;var i=this.ob;this.ob=!0,ga(this.animationManager,"Model"),e&&(null!==this.$e&&this.$e.each(function(u){e.Bk(u)}),e.Bk(this.Ih)),this.Tb=t,this.partManager=function Py(t){return null!==(t=Yu.get(t))?new t:new jt}(this.Tb.type);for(var a=0;a<n.length;a++)this.add(n[a]);t.uh(this.Kd),this.partManager.addAllModeledParts(),t.Bk(this.Kd),t.uh(this.Ih),null!==this.$e&&this.$e.each(function(u){t.uh(u)}),this.ob=i,this.Pa(),this.ob||this.N(),e&&t.undoManager.copyProperties(e.undoManager)}}},Z:{get:function(){return this.Tw},set:function(t){this.Tw=t}},Ts:{get:function(){return this.Wy}},skipsModelSourceBindings:{get:function(){return this.lx},set:function(t){this.lx=t}},ht:{get:function(){return this.Nu},set:function(t){this.Nu=t}},nodeTemplate:{get:function(){return this.Yg.H("")},set:function(t){var e=this.Yg.H("");e!==t&&(this.Yg.add("",t),this.g("nodeTemplate",e,t),this.undoManager.isUndoingRedoing||this.Hd())}},nodeTemplateMap:{get:function(){return this.Yg},set:function(t){var e=this.Yg;e!==t&&(this.Yg=t,this.g("nodeTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Hd())}},groupTemplate:{get:function(){return this.uj.H("")},set:function(t){var e=this.uj.H("");e!==t&&(this.uj.add("",t),this.g("groupTemplate",e,t),this.undoManager.isUndoingRedoing||this.Hd())}},groupTemplateMap:{get:function(){return this.uj},set:function(t){var e=this.uj;e!==t&&(this.uj=t,this.g("groupTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Hd())}},linkTemplate:{get:function(){return this.hi.H("")},set:function(t){var e=this.hi.H("");e!==t&&(this.hi.add("",t),this.g("linkTemplate",e,t),this.undoManager.isUndoingRedoing||this.Hd())}},linkTemplateMap:{get:function(){return this.hi},set:function(t){var e=this.hi;e!==t&&(this.hi=t,this.g("linkTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Hd())}},isMouseCaptured:{get:function(){return this.Sw},set:function(t){var e=this.Aa;null!==e&&((e=e.La)instanceof SVGElement||(t?(this.lastInput.bubbles=!1,this.removeEventListener(e,"pointermove",this.xk,!1),this.removeEventListener(e,"pointerdown",this.wk,!1),this.removeEventListener(e,"pointerup",this.zk,!1),this.removeEventListener(e,"pointerout",this.yk,!1),this.addEventListener(dt,"pointermove",this.xk,!0),this.addEventListener(dt,"pointerdown",this.wk,!0),this.addEventListener(dt,"pointerup",this.zk,!0),this.addEventListener(dt,"pointerout",this.yk,!0),this.removeEventListener(e,"wheel",this.tk,!1),this.addEventListener(dt,"wheel",this.tk,!0),this.addEventListener(dt,"selectstart",this.preventDefault,!1)):(this.removeEventListener(dt,"pointermove",this.xk,!0),this.removeEventListener(dt,"pointerdown",this.wk,!0),this.removeEventListener(dt,"pointerup",this.zk,!0),this.removeEventListener(dt,"pointerout",this.yk,!0),this.addEventListener(e,"pointermove",this.xk,!1),this.addEventListener(e,"pointerdown",this.wk,!1),this.addEventListener(e,"pointerup",this.zk,!1),this.addEventListener(e,"pointerout",this.yk,!1),this.removeEventListener(dt,"wheel",this.tk,!0),this.removeEventListener(dt,"selectstart",this.preventDefault,!1),this.addEventListener(e,"wheel",this.tk,!1)),this.Sw=t))}},position:{get:function(){return this.ka},set:function(t){var e=N.alloc().assign(this.ka);if(!e.A(t)){var n=this.viewportBounds.copy();this.ka.assign(t),ac(this.animationManager,e,this.ka),this.ob||null===this.Aa&&!this.Rp.u()?xa(this):(this.ob=!0,Bl(this,this.gr,this.ua/(t=this.scale),this.ta/t,this.Qk,!1),this.ob=!1),this.ob||this.onViewportBoundsChanged(n,this.viewportBounds,this.sa,!1)}N.free(e)}},initialPosition:{get:function(){return this.Vt},set:function(t){this.Vt.A(t)||(this.Vt=t.I())}},initialScale:{get:function(){return this.Wt},set:function(t){this.Wt!==t&&(this.Wt=t)}},grid:{get:function(){return null===this.Vd&&(this.Vd=Ux(this)),this.Vd},set:function(t){var e=this.Vd;if(e!==t){null===e&&(e=this.Vd=Ux(this)),t.type!==Y.Grid&&z("Diagram.grid must be a Panel of type Panel.Grid");var n=e.panel;null!==n&&n.remove(e),this.Vd=t,t.name="GRID",null!==n&&n.add(t),va(this),this.N(),this.g("grid",e,t)}}},viewportBounds:{get:function(){return this.vx}},viewSize:{get:function(){return this.Rp},set:function(t){var e=this.viewSize;e.A(t)||(this.Rp=t=t.I(),this.ta=this.ua=0,t.u()?(this.ua=t.width,this.ta=t.height):null!==this.Ea&&(this.ua=this.Ea.clientWidth||1,this.ta=this.Ea.clientHeight||1),xa(this),this.Pa(),this.g("viewSize",e,t),this.redraw())}},fixedBounds:{get:function(){return this.Qt},set:function(t){var e=this.Qt;e.A(t)||(t.width!==-1/0&&t.height!==1/0&&t.height!==-1/0||z("fixedBounds width/height must not be Infinity"),this.Qt=t=t.I(),this.Pa(),this.g("fixedBounds",e,t))}},scrollMargin:{get:function(){return this.Rj},set:function(t){"number"==typeof t&&(t=new Lt(t));var e=this.Rj;e.A(t)||(this.Rj=t=t.I(),this.g("scrollMargin",e,t),this.Aq())}},scrollMode:{get:function(){return this.Sj},set:function(t){var e=this.Sj;e!==t&&(this.Sj=t,t===Yl&&Fn(this,!1),this.g("scrollMode",e,t),this.N())}},scrollsPageOnFocus:{get:function(){return this.Mu},set:function(t){var e=this.Mu;e!==t&&(this.Mu=t,this.g("scrollsPageOnFocus",e,t))}},positionComputation:{get:function(){return this.xu},set:function(t){var e=this.xu;e!==t&&(this.xu=t,Fn(this,!1),this.g("positionComputation",e,t))}},scaleComputation:{get:function(){return this.Eu},set:function(t){var e=this.Eu;e!==t&&(this.Eu=t,dc(this,this.scale,this.scale),this.g("scaleComputation",e,t))}},documentBounds:{get:function(){return this.gr}},isVirtualized:{get:function(){return this.eu},set:function(t){var e=this.eu;e!==t&&(this.eu=t,this.g("isVirtualized",e,t))}},scale:{get:function(){return this.sa},set:function(t){var e=this.sa;e!==t&&dc(this,e,t)}},defaultScale:{get:function(){return this.er},set:function(t){this.er=t}},autoScale:{get:function(){return this.Oh},set:function(t){var e=this.Oh;e!==t&&(this.Oh=t,this.g("autoScale",e,t),t!==oi&&Fn(this,!1))}},initialAutoScale:{get:function(){return this.Lg},set:function(t){var e=this.Lg;e!==t&&(this.Lg=t,this.g("initialAutoScale",e,t))}},initialViewportSpot:{get:function(){return this.Xt},set:function(t){var e=this.Xt;e!==t&&(t.hb()||z("initialViewportSpot must be a specific Spot: "+t),this.Xt=t,this.g("initialViewportSpot",e,t))}},initialDocumentSpot:{get:function(){return this.Ut},set:function(t){var e=this.Ut;e!==t&&(t.hb()||z("initialViewportSpot must be a specific Spot: "+t),this.Ut=t,this.g("initialDocumentSpot",e,t))}},minScale:{get:function(){return this.mu},set:function(t){var e=this.mu;e!==t&&(0<t?(this.mu=t,this.g("minScale",e,t),t>this.scale&&(this.scale=t)):me(t,"> 0",j,"minScale"))}},maxScale:{get:function(){return this.iu},set:function(t){var e=this.iu;e!==t&&(0<t?(this.iu=t,this.g("maxScale",e,t),t<this.scale&&(this.scale=t)):me(t,"> 0",j,"maxScale"))}},zoomPoint:{get:function(){return this.Yu},set:function(t){this.Yu.A(t)||(this.Yu=t=t.I())}},contentAlignment:{get:function(){return this.Qk},set:function(t){var e=this.Qk;e.A(t)||(this.Qk=t=t.I(),this.g("contentAlignment",e,t),Fn(this,!1))}},initialContentAlignment:{get:function(){return this.vr},set:function(t){var e=this.vr;e.A(t)||(this.vr=t=t.I(),this.g("initialContentAlignment",e,t))}},padding:{get:function(){return this.mb},set:function(t){"number"==typeof t&&(t=new Lt(t));var e=this.mb;e.A(t)||(this.mb=t=t.I(),this.Pa(),this.g("padding",e,t))}},partManager:{get:function(){return this.Jh},set:function(t){var e=this.Jh;e!==t&&(null!==t.diagram&&z("Cannot share PartManagers between Diagrams: "+t.toString()),e&&e.Ke(null),this.Jh=t,t.Ke(this))}},nodes:{get:function(){return this.partManager.nodes.iterator}},links:{get:function(){return this.partManager.links.iterator}},parts:{get:function(){return this.partManager.parts.iterator}},layout:{get:function(){return this.Ac},set:function(t){var e=this.Ac;e!==t&&(this.Ac=t,t.diagram=this,t.group=null,this.Nh=!0,this.g("layout",e,t),this.Fb())}},isTreePathToChildren:{get:function(){return this.du},set:function(t){var e=this.du;if(e!==t&&(this.du=t,this.g("isTreePathToChildren",e,t),!this.undoManager.isUndoingRedoing))for(t=this.nodes;t.next();)Og(t.value)}},treeCollapsePolicy:{get:function(){return this.Tu},set:function(t){var e=this.Tu;e!==t&&(t!==$u&&t!==jy&&t!==Vy&&z("Unknown Diagram.treeCollapsePolicy: "+t),this.Tu=t,this.g("treeCollapsePolicy",e,t))}},He:{get:function(){return this.Rw},set:function(t){this.Rw=t}},avoidanceCellSize:{get:function(){return this.Bw},set:function(t){this.si=null,this.Bw=new mt(Math.max(1,t.width),Math.max(1,t.height))}},avoidanceLimit:{get:function(){return this.Cw},set:function(t){this.Cw=Math.max(1,t)}},autoScrollInterval:{get:function(){return this.Oq},set:function(t){var e=this.Oq;e!==t&&(this.Oq=t,this.g("autoScrollInterval",e,t))}},autoScrollRegion:{get:function(){return this.Qq},set:function(t){"number"==typeof t&&(t=new Lt(t));var e=this.Qq;e.A(t)||(this.Qq=t=t.I(),this.Pa(),this.g("autoScrollRegion",e,t))}}}),Dt.Object.defineProperties(j,{licenseKey:{get:function(){return Qp.Xb()},set:function(t){Qp.add(t.replace(/\s/g,""))}},version:{get:function(){return WM}}}),j.prototype.makeImageData=j.prototype.ny,j.prototype.makeImage=j.prototype.zA,j.prototype.cacheGroupExternalLinks=j.prototype.ev,j.prototype.addRenderer=j.prototype.jz,j.prototype.makeSVG=j.prototype.Gv,j.prototype.makeSvg=j.prototype.Vs,j.prototype.stopAutoScroll=j.prototype.og,j.prototype.doAutoScroll=j.prototype.zs,j.prototype.isUnoccupied=j.prototype.qk,j.prototype.raiseDiagramEvent=j.prototype.S,j.prototype.removeDiagramListener=j.prototype.um,j.prototype.addDiagramListener=j.prototype.Xj,j.prototype.findTreeRoots=j.prototype.cA,j.prototype.layoutDiagram=j.prototype.xA,j.prototype.findTopLevelGroups=j.prototype.Wz,j.prototype.findTopLevelNodesAndLinks=j.prototype.Xz,j.prototype.ensureBounds=j.prototype.Sa,j.prototype.findLinksByExample=j.prototype.Cs,j.prototype.findNodesByExample=j.prototype.Ds,j.prototype.findLinkForData=j.prototype.uc,j.prototype.findNodeForData=j.prototype.Hi,j.prototype.findPartForData=j.prototype.vc,j.prototype.findLinkForKey=j.prototype.findLinkForKey,j.prototype.findNodeForKey=j.prototype.Eb,j.prototype.findPartForKey=j.prototype.findPartForKey,j.prototype.rebuildParts=j.prototype.Hd,j.prototype.transformViewToDoc=j.prototype.kt,j.prototype.transformRectDocToView=j.prototype.cB,j.prototype.transformDocToView=j.prototype.Iq,j.prototype.centerRect=j.prototype.xs,j.prototype.scrollToRect=j.prototype.Vv,j.prototype.scroll=j.prototype.scroll,j.prototype.highlightCollection=j.prototype.oA,j.prototype.highlight=j.prototype.nA,j.prototype.selectCollection=j.prototype.UA,j.prototype.select=j.prototype.select,j.prototype.updateAllRelationshipsFromData=j.prototype.Lq,j.prototype.updateAllTargetBindings=j.prototype.updateAllTargetBindings,j.prototype.commit=j.prototype.commit,j.prototype.rollbackTransaction=j.prototype.Df,j.prototype.commitTransaction=j.prototype.Xa,j.prototype.startTransaction=j.prototype.wa,j.prototype.raiseChanged=j.prototype.g,j.prototype.raiseChangedEvent=j.prototype.Va,j.prototype.removeChangedListener=j.prototype.Bk,j.prototype.addChangedListener=j.prototype.uh,j.prototype.removeModelChangedListener=j.prototype.PA,j.prototype.addModelChangedListener=j.prototype.Bx,j.prototype.findLayer=j.prototype.ik,j.prototype.removeLayer=j.prototype.NA,j.prototype.addLayerAfter=j.prototype.fz,j.prototype.addLayerBefore=j.prototype.zx,j.prototype.addLayer=j.prototype.bm,j.prototype.moveParts=j.prototype.moveParts,j.prototype.copyParts=j.prototype.ek,j.prototype.removeParts=j.prototype.bt,j.prototype.remove=j.prototype.remove,j.prototype.add=j.prototype.add,j.prototype.clearDelayedGeometries=j.prototype.fv,j.prototype.setProperties=j.prototype.Hm,j.prototype.attach=j.prototype.dv,j.prototype.set=j.prototype.set,j.prototype.resetInputOptions=j.prototype.yy,j.prototype.setInputOption=j.prototype.VA,j.prototype.getInputOption=j.prototype.km,j.prototype.resetRenderingHints=j.prototype.zy,j.prototype.setRenderingHint=j.prototype.Dy,j.prototype.getRenderingHint=j.prototype.Fe,j.prototype.maybeUpdate=j.prototype.ed,j.prototype.requestUpdate=j.prototype.Fb,j.prototype.delayInitialization=j.prototype.Bz,j.prototype.isUpdateRequested=j.prototype.tA,j.prototype.invalidateDocumentBounds=j.prototype.Pa,j.prototype.findObjectsNear=j.prototype.kg,j.prototype.findPartsNear=j.prototype.Sz,j.prototype.findObjectsIn=j.prototype.vf,j.prototype.findPartsIn=j.prototype.Vx,j.prototype.findObjectsAt=j.prototype.Ii,j.prototype.findPartsAt=j.prototype.Rz,j.prototype.findObjectAt=j.prototype.Wb,j.prototype.findPartAt=j.prototype.im,j.prototype.focusObject=j.prototype.dA,j.prototype.alignDocument=j.prototype.lz,j.prototype.zoomToRect=j.prototype.gB,j.prototype.zoomToFit=j.prototype.zoomToFit,j.prototype.diagramScroll=j.prototype.Mx,j.prototype.focus=j.prototype.focus;var Yu=new xt,Zp=null,Ur=void 0!==dt.document,Xu=null,fc="",oi=new J(j,"None",0),pc=new J(j,"Uniform",1),Jp=new J(j,"UniformToFill",2),Fy=new J(j,"CycleAll",10),Kx=new J(j,"CycleNotDirected",11),Zx=new J(j,"CycleNotDirectedFast",12),vo=new J(j,"CycleNotUndirected",13),bs=new J(j,"CycleDestinationTree",14),Ly=new J(j,"CycleSourceTree",15),Yl=new J(j,"DocumentScroll",1),Ry=new J(j,"InfiniteScroll",2),$u=new J(j,"TreeParentCollapsed",21),jy=new J(j,"AllParentsCollapsed",22),Vy=new J(j,"AnyParentsCollapsed",23),Qp=new et,WM="2.2.9",gc="image",Jx=null,Qx=!1;function qx(){this.az=null,this.j="zz@orderNum",this.hd="63ad05bbe23a1786468a4c741b6d2"===this._tk?this.j=!0:null}function il(t,e){if(e.Sb.setTransform(e.ac,0,0,e.ac,0,0),e.Sb.Bd(),null===t.hd)t:{e="f";var n=dt[$t("76a715b2f73f148a")][$t("72ba13b5")];if(t.hd=!0,Ur){var i=j[$t("76a115b6ed251eaf4692")];if(i)for(var a=Qp.iterator;a.next()&&!(6>(i=$t(i=a.value).split($t("39e9"))).length);){var u=$t(i[1]).split(".");if("7da71ca0"!==i[4])break;var h=$t($h[$t("6cae19")]).split(".");if(u[0]>h[0]||u[0]===h[0]&&u[1]>=h[1]){var d=dt[$t("74a900bae4370f8b51")][$t("6fbb13a1c2311e8a57")].toLowerCase();if(h=d[$t("73a612b6fb191d")]($t("3aad1ab6e022098b4dc4")),u=$t(i[2]),-1<h&&(d=d[$t("73a612b6fb191d")](u.toLowerCase()+"/"),t.hd=!(-1<d&&d<h),!t.hd))break;for(h=n[$t("76ad18b4f73e")],d=n[$t("73a612b6fb191d")]($t("35e7"))+2;d<h;d++)e+=n[d];if(0>(h=e[$t("73a612b6fb191d")](u))&&u!==$t("7da71ca0ad381e90")&&(h=e[$t("73a612b6fb191d")]($t("76a715b2ef3e149757"))),0>h&&(h=e[$t("73a612b6fb191d")]($t("76a715b2ef3e149757"))),0>h&&(h=n[$t("73a612b6fb191d")]($t("7baa19a6f76c1988428554"))),t.hd=!(0<=h&&h<e[$t("73a612b6fb191d")]($t("35"))||-1===e[$t("73a612b6fb191d")]($t("35"))),!t.hd||n[$t("73a612b6fb191d")]($t("7fb002b6ed25128b4da25b2e"))&&n[$t("73a612b6fb191d")]($t("75ba1beee63a1e875799507d"))&&(t.hd=!(-1<n[$t("73a612b6fb191d")](u)),!t.hd))break;if("#"===u[0]){h=dt.document.createElement("div");for(var f=i[0].replace(/[A-Za-z]/g,"");4>f.length;)f+="9";if(d=f,f=f.substr(f.length-4),i="",i+=["gsh","gsf"][parseInt(f.substr(0,1),10)%2],i+=["Header","Background","Display","Feedback"][parseInt(f.substr(0,1),10)%4],h[$t("79a417a0f0181a8946")]=i,dt.document[$t("78a712aa")]){dt.document[$t("78a712aa")][$t("7bb806b6ed32388c4a875b")](h),f=dt.getComputedStyle(h).getPropertyValue($t("78a704b7e62456904c9b12701b6532a8"));var g=dt.getComputedStyle(h).getPropertyValue($t("75b817b0ea2202"));if(dt.document[$t("78a712aa")][$t("68ad1bbcf533388c4a875b")](h),f){if(h=dt[$t("77a902b0eb1b1e804a8a")],g==="0."+parseInt(d,10)%100||-1!==f.indexOf(parseInt(u[1]+u[2],16))&&-1!==f.indexOf(parseInt(u[3]+u[4],16))){t.hd=!1;break}if(h&&h($t("32ae19a1e0331fc94084537c067a67fa59f1386b89d006")).matches)for(i="."+i,u=0;u<document.styleSheets.length;u++)for(var m in h=document.styleSheets[u].rules||document.styleSheets[u].cssRules)if(i===h[m].selectorText){t.hd=!1;break t}}}else t.hd=null,t.hd=!1}}}else{for(m=n[$t("76ad18b4f73e")],a=n[$t("73a612b6fb191d")]($t("35e7"))+2;a<m;a++)e+=n[a];n=e[$t("73a612b6fb191d")]($t("7da71ca0ad381e90")),t.hd=!(0<=n&&n<e[$t("73a612b6fb191d")]($t("35")))}}}return 0<t.hd&&t!==t.az}function qp(t,e){if(Ur){if(null!=e||z("Diagram setup requires an argument DIV."),null!==t.Ea&&z("Diagram has already completed setup."),"string"==typeof e?t.Ea=dt.document.getElementById(e):e instanceof HTMLDivElement?t.Ea=e:z("No DIV or DIV id supplied: "+e),null===t.Ea&&z("Invalid DIV id; could not get element with id: "+e),void 0!==t.Ea.F&&z("Invalid div id; div already has a Diagram associated with it."),!t.Hl&&dt.ResizeObserver){var n=qm(function(){t.Fb()},250);t.Hl=new dt.ResizeObserver(function(){n()}),t.Hl.observe(t.Ea)}"static"===dt.getComputedStyle(t.Ea,null).position&&(t.Ea.style.position="relative");var i="rgba(2"+(e=5)+"5, 255, 255, 0)";e--,t.Ea.style["-webkit-tap-highlight-color"]=i,t.Ea.innerHTML="",t.Ea.F=t,t.Ea.goDiagram=t,t.Ea.go=dt.go;var a=t.ns?new Os(t):new Hr(t);if(void 0!==a.style&&(a.style.position="absolute",a.style.top="0px",a.style.left="0px","rtl"===dt.getComputedStyle(t.Ea,null).getPropertyValue("direction")&&(t.io=!0),a.style.zIndex="2",a.style.userSelect="none",a.style.MozUserSelect="none",a.style.touchAction="none"),t.Aa=a,t.Sb=a.context,i=t.Sb,t.ac=t.computePixelRatio(),t.viewSize.u()||(t.ua=t.Ea.clientWidth||1,t.ta=t.Ea.clientHeight||1),Xt(t,t.ua,t.ta),t.Ea.insertBefore(a.La,t.Ea.firstChild),(a=new Hr(null)).width=1,a.height=1,t.Kw=a,t.Ty=a.context,Ur){a=Bn("div");var u=Bn("div");a.style.position="absolute",a.style.overflow="auto",a.style.width=t.ua+"px",a.style.height=t.ta+"px",a.style.zIndex="1",u.style.position="absolute",u.style.width="1px",u.style.height="1px",t.Ea.appendChild(a),a.appendChild(u),a.onscroll=tS,a.addEventListener("pointerdown",eS),a.F=t,a.Zy=!0,a.$y=!0,t.Ju=a,t.Gu=u}t.Aq=qm(function(){t.ti=null,t.N()},300),t.lw=qm(function(){Hp(t)},250),t.preventDefault=function(h){return h.preventDefault(),!1},t.tk=function(h){if(t.isEnabled){var d=Uu(t,h,!0);d.bubbles=!0;var f=0,g=0;d.delta=0,void 0!==h.deltaX?(0!==h.deltaX&&(f=0<h.deltaX?1:-1),0!==h.deltaY&&(g=0<h.deltaY?1:-1),d.delta=Math.abs(h.deltaX)>Math.abs(h.deltaY)?-f:-g):void 0!==h.wheelDeltaX?(0!==h.wheelDeltaX&&(f=0<h.wheelDeltaX?-1:1),0!==h.wheelDeltaY&&(g=0<h.wheelDeltaY?-1:1),d.delta=Math.abs(h.wheelDeltaX)>Math.abs(h.wheelDeltaY)?-f:-g):void 0!==h.wheelDelta&&0!==h.wheelDelta&&(d.delta=0<h.wheelDelta?1:-1),t.doMouseWheel(),el(d,h)}},t.EA=function(h){t.isEnabled&&(t.ml=!1,Uu(t,h,!0),(h=t.currentTool).cancelWaitAfter(),h.standardMouseOver())},t.wk=function(h){if(t.isEnabled){t.ml=!0;var d=t.wu;void 0===d[h.pointerId]&&(d[h.pointerId]=h);var f=!1;if(null!==(d=t.El)[0]&&d[0].pointerId===h.pointerId)d[0]=h;else if(null!==d[1]&&d[1].pointerId===h.pointerId)d[1]=h,f=!0;else if(null===d[0])d[0]=h;else{if(null!==d[1])return void h.preventDefault();d[1]=h,f=!0}(d="touch"===h.pointerType||"pen"===h.pointerType)&&(t.Pu=!1,t.cu=!0);var g=f;f=Sy(t,h,!0,!1,!0,g),Hu(t,h,f),f.targetDiagram=Dy(h,h.target),f.targetObject=null,g||f.clone(t.pr),g=t.Ww,d=d?25:10,h.timeStamp-t.Vw<t.dz&&!(Math.abs(g.x-h.screenX)>d||Math.abs(g.y-h.screenY)>d)?t.Er++:t.Er=1,f.clickCount=t.Er,t.Vw=h.timeStamp,t.Ww.ng(h.screenX,h.screenY),t.doMouseDown(),1===h.button?h.preventDefault():el(f,h)}},t.xk=function(h){if(t.isEnabled){t.ml=!0;var d=t.El;if(null!==d[0]&&d[0].pointerId===h.pointerId)d[0]=h;else{if(null!==d[1]&&d[1].pointerId===h.pointerId)return void(d[1]=h);if(null!==d[0])return;d[0]=h}if(d[0].pointerId===h.pointerId){d=Sy(t,h,!1,!1,!1,null!==d[1]);var f=dt.document.elementFromPoint(h.clientX,h.clientY);null!==f&&null!=f.shadowRoot&&(f=f.shadowRoot.elementFromPoint(h.clientX,h.clientY));var g=t,m=h;f&&f.F&&(m=h,g=f.F),d.targetDiagram=g,Hu(t,m,d),d.targetObject=null,t.doMouseMove(),el(d,h)}}},t.zk=function(h){if(t.isEnabled){t.ml=!0;var d="touch"===h.pointerType||"pen"===h.pointerType,f=t.wu;if(d&&t.Pu)delete f[h.pointerId],h.preventDefault();else if(null!==(f=t.El)[0]&&f[0].pointerId===h.pointerId){f[0]=null,f=Sy(t,h,!1,!0,!0,!1);var g=dt.document.elementFromPoint(h.clientX,h.clientY);null!==g&&null!=g.shadowRoot&&(g=g.shadowRoot.elementFromPoint(h.clientX,h.clientY)),null!==g&&g.F instanceof j&&g.F!==t&&Hu(g.F,h,f),null===g&&(g=h.target),Hu(t,h,f),f.clickCount=t.Er,f.targetDiagram=Dy(h,g),f.targetObject=null,t.doMouseUp(),el(f,h),d&&(t.cu=!1)}else null!==f[1]&&f[1].pointerId===h.pointerId&&(f[1]=null)}},t.yk=function(h){if(t.isEnabled){t.ml=!1;var d=t.wu;d[h.pointerId]&&delete d[h.pointerId],null!==(d=t.El)[0]&&d[0].pointerId===h.pointerId&&(d[0]=null),null!==d[1]&&d[1].pointerId===h.pointerId&&(d[1]=null),"touch"!==h.pointerType&&"pen"!==h.pointerType&&((h=t.currentTool).cancelWaitAfter(),h.standardMouseOver())}},t.Jt=i.Y["d"+mc[1]+mc[2]+"wI"+gc.slice(1,5)]["b"+sS.slice(1,e)](i.Y,Jx,e,e),i.Ec(!0),function Vx(t){var e=t.Aa.La;e instanceof HTMLCanvasElement&&(t.addEventListener(e,"pointerdown",t.wk,!1),t.addEventListener(e,"pointermove",t.xk,!1),t.addEventListener(e,"pointerup",t.zk,!1),t.addEventListener(e,"pointerout",t.yk,!1),t.addEventListener(e,"pointerenter",t.Gz,!1),t.addEventListener(e,"pointerleave",t.Hz,!1),t.addEventListener(e,"wheel",t.tk,!1),t.addEventListener(e,"keydown",t.uA,!1),t.addEventListener(e,"keyup",t.vA,!1),t.addEventListener(e,"blur",t.rz,!1),t.addEventListener(e,"focus",t.sz,!1),t.addEventListener(e,"selectstart",function(n){return n.preventDefault(),!1},!1),t.addEventListener(e,"contextmenu",function(n){return n.preventDefault(),!1},!1),t.addEventListener(dt,"resize",t.lw,!1),Ss&&t.addEventListener(e,"touchstart",function(n){n.preventDefault()},!1))}(t)}}function hr(t){this.j=void 0===t?new N:t,this.o=new N}j.className="Diagram",j.fromDiv=function(t){var e=t;return"string"==typeof t&&(e=dt.document.getElementById(t)),e instanceof HTMLDivElement&&e.F instanceof j?e.F:null},j.inherit=function(t,e){function n(){}if(Object.getPrototypeOf(t).prototype)throw Error("Used go.Diagram.inherit defining already defined class \n"+t);n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},j.useDOM=function(t){Ur=!!t&&void 0!==dt.document},j.isUsingDOM=function(){return Ur},j.None=oi,j.Uniform=pc,j.UniformToFill=Jp,j.CycleAll=Fy,j.CycleNotDirected=Kx,j.CycleNotDirectedFast=Zx,j.CycleNotUndirected=vo,j.CycleDestinationTree=bs,j.CycleSourceTree=Ly,j.DocumentScroll=Yl,j.InfiniteScroll=Ry,j.TreeParentCollapsed=$u,j.AllParentsCollapsed=jy,j.AnyParentsCollapsed=Vy,qx.className="DiagramHelper",Dt.Object.defineProperties(hr.prototype,{point:{get:function(){return this.j},set:function(t){this.j=t}},shifted:{get:function(){return this.o},set:function(t){this.o=t}}});var Ve,ze,Fo,Lo,Ln,En,vc,Zu,Qd,Ye,mc="DraggingInfo";function By(t,e,n){this.node=t,this.info=e,this.xv=n}function Wu(){this.reset()}function Jd(t,e){if("string"==typeof t||dt.Element&&t instanceof Element)var n=j.call(this,t)||this;else n=j.call(this)||this,e=t;return KM(n),e&&n.Hm(e),n}function KM(t){t.allowDragOut=!0,t.allowMove=!1,t.isReadOnly=!0,t.contentAlignment=go,t.layout=new dn}function wa(t,e){if("string"==typeof t||dt.Element&&t instanceof Element)var n=j.call(this,t)||this;else n=j.call(this)||this,e=t;var i=n;n.animationManager.isEnabled=!1,n.ob=!0,n.Ga=null,n.Yn=!1,n.Zn=!1,n.M=!0,n.C=!0,n.Ha=0,n.o=!1,n.Ol=null,n.Dy("drawShadows",!1),t=new ht;var a=new wt;return a.stroke="magenta",a.strokeWidth=2,a.fill="transparent",a.name="BOXSHAPE",t.selectable=!0,t.selectionAdorned=!1,t.selectionObjectName="BOXSHAPE",t.locationObjectName="BOXSHAPE",t.resizeObjectName="BOXSHAPE",t.cursor="move",t.add(a),n.j=t,n.allowCopy=!1,n.allowDelete=!1,n.allowSelect=!0,n.autoScrollRegion=new Lt(0,0,0,0),n.ka.h(0,0),n.toolManager.Za("Dragging",new rl,n.toolManager.mouseMoveTools),n.click=function(){var u=i.observed;if(null!==u){var h=u.viewportBounds,d=i.lastInput.documentPoint;u.position=new N(d.x-h.width/2,d.y-h.height/2)}},n.Tm=function(){i.Pa(),Ku(i)},n.Sm=function(){null!==i.observed&&(i.Pa(),i.N())},n.Wa=function(){1>i.updateDelay?i.N():i.o||(i.o=!0,setTimeout(function(){return i.redraw()},i.updateDelay))},n.Kh=function(){null!==i.observed&&Ku(i)},n.autoScale=pc,n.ob=!1,e&&Object.assign(n,e),n}function ZM(t){var e=t.observed;if(null!==e){var n=t.drawsTemporaryLayers,i=t.drawsGrid&&n,a=e.grid;i&&null!==a&&a.visible&&!isNaN(a.width)&&!isNaN(a.height)&&(va(e,a=B.alloc().assign(t.viewportBounds).Nc(e.viewportBounds)),B.free(a),gi(e));var u=t.tb;u.reset(),1!==t.scale&&u.scale(t.scale),0===t.position.x&&0===t.position.y||u.translate(-t.position.x,-t.position.y),(a=t.Sb).scale(t.ac,t.ac),a.transform(u.m11,u.m12,u.m21,u.m22,u.dx,u.dy),u=(e=e.Na.m).length;for(var h=0;h<u;h++){var d=e[h],f=t;if(d.visible&&0!==d.opacity){var g=d.diagram.grid.part;if(!n&&d.isTemporary)i&&g.layer===d&&(d=ma(d,a),g.lc(a,f),a.globalAlpha=d);else{for(var m=ma(d,a),y=f.scale,x=B.alloc(),_=d.Fa.m,M=_.length,S=0;S<M;S++){var T=_[S];(i||T!==g)&&d.Ei(a,T,f,null,y,x,!1)}B.free(x),a.globalAlpha=m}}}}}function Ku(t){var e=t.box;if(null!==e){var n=t.observed;if(null!==n){t.Uc=!0,n=n.viewportBounds;var i=e.selectionObject,a=mt.alloc();a.h(n.width,n.height),i.desiredSize=a,mt.free(a),t=2/t.scale,i instanceof wt&&(i.strokeWidth=t),e.location=new N(n.x-t/2,n.y-t/2),e.isSelected=!0}}}function rl(){ne.call(this),this.j=null}function Kt(){xn(this),this.F=zd,this.Wa=this.C=this.o=!0,this.M=this.Ga=this.Oc=this.Ha=!1,this.ki=this.j=null,this.Kd=1.05,this.fu=NaN,this.Uw=null,this.Zu=NaN,this.Xu=$a,this.yc=!0,this.Zf=null,this.Pc=200}function yc(t,e,n){if(e.isVisible())return n;if(e instanceof At)yc(t,e.adornedPart,n);else if(e instanceof X){var i=e.fromNode;null!==i&&yc(t,i,n),null!==(e=e.toNode)&&yc(t,e,n)}else e instanceof Q&&(null!==(i=e.labeledLink)&&yc(t,i,n),null!==(i=e.lg())&&(i.isTreeExpanded||i.wasTreeExpanded||n.push(i),yc(t,i,n))),null!==(e=e.containingGroup)&&(e.isSubGraphExpanded||e.wasSubGraphExpanded||n.push(e),yc(t,e,n));return n}function tw(t){var e=ye();for(t=t.iterator;t.next();){var n=t.value;n instanceof X||e.push(n)}t=new K,n=e.length;for(var i=0;i<n;i++){for(var a=e[i],u=!0,h=0;h<n;h++)if(a.Fd(e[h])){u=!1;break}u&&t.add(a)}return oe(e),t}function ut(){xn(this),this.G=4225027,this.lb=1,this.Xf=null,this.na="",this.fd=this.Rb=null,this.ka=new N(NaN,NaN).freeze(),this.Sc=po,this.Uf=Nl,this.Tf=ax,this.tb=new St,this.Mh=new St,this.Ab=null,this.sa=this.al=1,this.xb=0,this.Be=Lo,this.Pg=Kh,this.ic=new B(NaN,NaN,NaN,NaN).freeze(),this.vb=new B(NaN,NaN,NaN,NaN).freeze(),this.qc=new B(0,0,NaN,NaN).freeze(),this.P=this.ap=this.bp=null,this.Gk=this.wb=Fi,this.np=0,this.op=1,this.wg=0,this.jn=1,this.Fp=null,this.sp=-1/0,this.Jl=0,this.Kl=ha,this.Ll=pn,this.Sh="",this.fb=this.O=null,this.Mk=-1,this.Nl=this.$a=this.Rh=this.Rl=null,this.Wr=ze,this.qp=this.rg=this.Nj=null}function cr(t){null===t.O&&(t.O=new rg)}function Xl(t,e,n){var i=t.yh();if(null!==i)for(var a=t.fb.iterator;a.next();){var u=a.value,h=null;if(null!==u.sourceName){if(null===(h=Rw(u,i,t)))continue;u.Mq(t,h,n,null)}else if(u.isToModel){var d=e.diagram;null===d||d.skipsModelSourceBindings||u.Mq(t,d.model.modelData,n,i)}else{if(null===(d=i.data))continue;var f=e.diagram;null===f||f.skipsModelSourceBindings||u.Mq(t,d,n,i)}h===t&&null!==(d=i.Bs(u.Yi))&&u.iw(d,h,n)}}function Uy(t,e,n,i){return!1!==t.pickable&&(i.multiply(t.transform),n?t.Ic(e,i):t.wh(e,i))}function tg(t,e,n,i,a){if(t.vb.h(e,n,i,a),!t.desiredSize.u()){var u=t.ic,h=(n=t.Pg).top+n.bottom;switch(n=u.width+(e=n.right+n.left),u=u.height+h,i+=e,a+=h,e=xo(t,!0),n===i&&u===a&&(e=ze),e){case ze:(n>i||u>a)&&(Di(t,!0),t.measure(n>i?i:n,u>a?a:u,0,0));break;case Ve:Di(t,!0),t.measure(i,a,0,0);break;case Ln:Di(t,!0),t.measure(i,u,0,0);break;case En:Di(t,!0),t.measure(n,a,0,0)}}}function ew(t,e,n,i){var a=t.naturalBounds,u=0,h=0,d=a.width;a=a.height;var f=t.Ow();t instanceof wt&&(u=(a=t.ma.bounds).x,h=a.y,d=a.width,a=a.height),dr(t,e,t.Rb,!0,!1,n,i),t.Rb instanceof Bt&&t.Rb.type===Tr?(e.beginPath(),e.rect(u-f/2,h-f/2,d+f,a+f),e.uf(t.Rb)):e.fillRect(u-f/2,h-f/2,d+f,a+f)}function dr(t,e,n,i,a,u,h){if(null!==n){var d=1,f=1;if("string"==typeof n)i?e.fillStyle=n:e.strokeStyle=n;else if(n.type===rs)i?e.fillStyle=n.color:e.strokeStyle=n.color;else{var g=0;if(t instanceof wt&&(g=t.strokeWidth),d=u.width,f=u.height,a?(d=h.width,f=h.height):i||(d+=g,f+=g),(u=e instanceof Zl)&&n.ke&&(n.type===Rs||n.Pk===d&&n.At===f))var m=n.ke;else{var y=0,x=0,_=0,M=0,S=0,T=0;if(T=S=0,a?(S=h.x,T=h.y):i||(S-=g/2,T-=g/2),y=n.start.x*d+n.start.offsetX,x=n.start.y*f+n.start.offsetY,_=n.end.x*d+n.end.offsetX,M=n.end.y*f+n.end.offsetY,y+=S,_+=S,x+=T,M+=T,n.type===os)m=e.createLinearGradient(y,x,_,M);else if(n.type===Tr)T=isNaN(n.endRadius)?Math.max(d,f)/2:n.endRadius,isNaN(n.startRadius)?(S=0,T=Math.max(d,f)/2):S=n.startRadius,m=e.createRadialGradient(y,x,S,_,M,T);else if(n.type===Rs)try{m=e.createPattern(n.pattern,"repeat")}catch(b){m=null}if(n.type!==Rs&&null!==(a=n.colorStops))for(a=a.iterator;a.next();)m.addColorStop(a.key,a.value);if(u&&(n.ke=m,null!==m&&(n.Pk=d,n.At=f),null===m&&n.type===Rs&&-1!==n.Pk)){n.Pk=-1;var k=t.diagram;null!==k&&-1===n.Pk&&Pu(function(){k.redraw()},600)}}i?e.fillStyle=m:e.strokeStyle=m}}}function eg(t){if(0!=(2048&t.G)){var e=t.tb;if(e.reset(),!t.vb.u()||!t.ic.u())return void Ju(t,!1);if(e.translate(t.vb.x-t.ic.x,t.vb.y-t.ic.y),1!==t.scale||0!==t.angle){var n=t.naturalBounds;t.zp(e,n.x,n.y,n.width,n.height)}Ju(t,!1),_a(t,!0)}0!=(4096&t.G)&&(null===(e=t.panel)?(t.Mh.set(t.tb),t.al=t.scale,_a(t,!1)):null!==e.de&&((n=t.Mh).reset(),e.he()?n.multiply(e.Mh):null!==e.panel&&n.multiply(e.panel.Mh),n.multiply(t.tb),t.al=t.scale*e.al,_a(t,!1)))}function xc(t){if(!fr(t)){var e=t.panel;null!==e?e.s():t.Ri()&&null!==(e=t.diagram)&&(e.qe.add(t),t instanceof Q&&t.pd(),e.Fb()),Wl(t,!0)}}function xo(t,e){var n=t.stretch,i=t.panel;return null!==i&&i.type===Y.Table?ng(t,i.getRowDefinition(t.row),i.getColumnDefinition(t.column),e):null!==i&&i.type===Y.Auto&&i.nb()===t?Ma(t,Ve,e):n===Lo?null!==i?i.type===Y.Spot&&i.nb()===t?Ma(t,Ve,e):Ma(t,(n=i.defaultStretch)===Lo?ze:n,e):Ma(t,ze,e):Ma(t,n,e)}function ng(t,e,n,i){var a=t.stretch;if(a!==Lo)return Ma(t,a,i);var u=a=null;switch(e.stretch){case En:case Ve:u=!0}switch(n.stretch){case Ln:case Ve:a=!0}return e=t.panel.defaultStretch,null===a&&(a=e===Ln||e===Ve),null===u&&(u=e===En||e===Ve),Ma(t,!0===a&&!0===u?Ve:!0===a?Ln:!0===u?En:ze,i)}function Ma(t,e,n){if(n)return e;if(e===ze||(n=t.desiredSize).u())return ze;if(t=t.angle,!isNaN(n.width))if(90!==t&&270!==t){if(e===Ln)return ze;if(e===Ve)return En}else{if(e===En)return ze;if(e===Ve)return Ln}if(!isNaN(n.height))if(90!==t&&270!==t){if(e===En)return ze;if(e===Ve)return Ln}else{if(e===Ln)return ze;if(e===Ve)return En}return e}function $l(t,e){t.G=e?512|t.G:-513&t.G}function Ci(t){return 0!=(1024&t.G)}function qd(t,e){t.G=e?1024|t.G:-1025&t.G}function Ju(t,e){t.G=e?2048|t.G:-2049&t.G}function _a(t,e){t.G=e?4096|t.G:-4097&t.G}function Rn(t){return 0!=(8192&t.G)}function Di(t,e){t.G=e?8192|t.G:-8193&t.G}function fr(t){return 0!=(16384&t.G)}function Wl(t,e){t.G=e?16384|t.G:-16385&t.G}function Kl(t){var e=t.part;if(e instanceof Q&&(null!==t.portId||t===e.port)){var n=e.diagram;null===n||n.undoManager.isUndoingRedoing||gw(e,t)}}function Hy(t){var e=t.diagram;null===e||e.undoManager.isUndoingRedoing||(t instanceof Y?t instanceof Q?t.pd():t.Mm(t,function(n){Kl(n)}):Kl(t))}function Sr(t,e){for(var n=1;n<arguments.length;++n);n=arguments;var i=null,a=null;if("function"==typeof t)a=t;else if("string"==typeof t){var u=wc.H(t);"function"==typeof u?Et(i=u(n=Xi(arguments)))||z('GraphObject.make invoked object builder "'+t+'", but it did not return an Object'):a=dt.go[t]}if(null===i&&(null!=a&&a.constructor||z("GraphObject.make requires a class function or GoJS class name or name of an object builder, not: "+t),i=new a),a=1,i instanceof j&&1<n.length){u=i;var h=n[1];("string"==typeof h||h instanceof HTMLDivElement)&&(qp(u,h),a++)}for(;a<n.length;a++)void 0===(u=n[a])?z("Undefined value at argument "+a+" for object being constructed by GraphObject.make: "+i):ig(i,u);return i}function ig(t,e){if("string"==typeof e)if(t instanceof Zt)t.text=e;else if(t instanceof wt)t.figure=e;else if(t instanceof er)t.source=e;else if(t instanceof Y)null!==(e=no.H(e))&&(t.type=e);else if(t instanceof Bt){var n=ua(Bt,e);null!==n?t.type=n:z("Unknown Brush type as an argument to GraphObject.make: "+e)}else t instanceof q?null!==(e=ua(q,e))&&(t.type=e):t instanceof Yt&&null!==(e=ua(Yt,e))&&(t.type=e);else if(e instanceof ut)t instanceof Y||z("A GraphObject can only be added to a Panel, not to: "+t),t.add(e);else if(e instanceof en){var i;e.isRow&&"function"==typeof t.getRowDefinition?i=t.getRowDefinition(e.index):e.isRow||"function"!=typeof t.getColumnDefinition||(i=t.getColumnDefinition(e.index)),i instanceof en?(t=i,e.isRow?t.height=e.height:t.width=e.width,t.minimum=e.minimum,t.maximum=e.maximum,t.alignment=e.alignment,t.stretch=e.stretch,t.sizing=e.sizing,t.$f=null===e.separatorPadding?null:e.separatorPadding.I(),t.separatorStroke=e.separatorStroke,t.separatorStrokeWidth=e.separatorStrokeWidth,t.Tj=null,e.separatorDashArray&&(t.Tj=Xi(e.separatorDashArray)),t.background=e.background,t.coversSeparators=e.coversSeparators,t.fb=e.fb):z("A RowColumnDefinition can only be added to an object that implements getRowDefinition/getColumnDefinition, not to: "+t)}else if(e instanceof J)"function"==typeof t.gb&&t.gb(e);else if(e instanceof tn)t.type=e;else if(e instanceof Fe)t instanceof ut||t instanceof en?t.bind(e):z("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+t);else if(e instanceof Ps)t instanceof ut?t.fw(e):z("An AnimationTrigger can only be applied to a GraphObject, not to: "+t);else if(e instanceof De)t instanceof q?t.figures.add(e):z("A PathFigure can only be added to a Geometry, not to: "+t);else if(e instanceof Yt)t instanceof De?t.segments.add(e):z("A PathSegment can only be added to a PathFigure, not to: "+t);else if(e instanceof Rt)t instanceof j||t instanceof vt?t.layout=e:z("A Layout can only be assigned to a Diagram or a Group, not to: "+t);else if(Array.isArray(e))for(n=0;n<e.length;n++)ig(t,e[n]);else if("object"==typeof e&&null!==e)if(t instanceof Bt){for(var a in n=new Nn,e)i=parseFloat(a),isNaN(i)?n[a]=e[a]:t.addColorStop(i,e[a]);Xd(t,n)}else if(t instanceof en){for(n in void 0!==e.row?((null==(a=e.row)||a===1/0||isNaN(a)||0>a)&&z("Must specify non-negative integer row for RowColumnDefinition "+e+", not: "+a),t.isRow=!0,t.index=a):void 0!==e.column&&((null==(a=e.column)||a===1/0||isNaN(a)||0>a)&&z("Must specify non-negative integer column for RowColumnDefinition "+e+", not: "+a),t.isRow=!1,t.index=a),a=new Nn,e)"row"!==n&&"column"!==n&&(a[n]=e[n]);Xd(t,a)}else Xd(t,e);else z('Unknown initializer "'+e+'" for object being constructed by GraphObject.make: '+t)}function Ca(t,e){wc.add(t,e)}function tf(t,e,n){void 0===n&&(n=null);var i=t[1];if("function"==typeof n?n(i):"string"==typeof i)return t.splice(1,1),i;if(void 0===e)throw Error("no "+("function"==typeof n?"satisfactory":"string")+" argument for GraphObject builder "+t[0]);return e}hr.className="DraggingInfo",By.className="DraggingNodeInfoPair",Wu.prototype.reset=function(){this.isGridSnapEnabled=!1,this.isGridSnapRealtime=!0,this.gridSnapCellSize=new mt(NaN,NaN).freeze(),this.gridSnapCellSpot=zn,this.gridSnapOrigin=new N(NaN,NaN).freeze(),this.groupsSnapMembers=this.dragsTree=this.dragsLink=!1,this.dragsMembers=this.groupsAlwaysMove=!0},Wu.className="DraggingOptions",Ft(Jd,j),Jd.prototype.reset=function(){j.prototype.reset.call(this),KM(this)},Jd.className="Palette",Ft(wa,j),wa.prototype.computePixelRatio=function(){return 1},wa.prototype.redraw=function(){if(this.o&&1<=this.updateDelay){this.o=!1;var t=this.Aa,e=this.Sb;if(null!==t&&null!==e){if($d(this),null===this.Ol){var n=new Hr(null);n.width=t.width,n.height=t.height,this.Ol=n}try{this.Aa=this.Ol,this.Sb=this.Aa.context,this.Sb.Ec(!0),this.Sb.setTransform(1,0,0,1,0,0),this.Sb.clearRect(0,0,this.Aa.width,this.Aa.height),ZM(this)}finally{this.Aa=t,this.Sb=e}}}j.prototype.redraw.call(this)},wa.prototype.lc=function(){if(null===this.Ea&&z("No div specified"),null===this.Aa&&z("No canvas specified"),!(this.Aa instanceof Os)&&(cv(this.box),this.Uc)){var t=this.observed;if(null!==t&&!t.animationManager.defaultAnimation.isAnimating&&t.Pi){$d(this);var e=this.Aa;(t=this.Sb).Ec(!0),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),1>this.updateDelay?ZM(this):null!==this.Ol&&(t.drawImage(this.Ol.La,0,0),(e=this.tb).reset(),1!==this.scale&&e.scale(this.scale),0===this.position.x&&0===this.position.y||e.translate(-this.position.x,-this.position.y),t.scale(this.ac,this.ac),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy));for(var n=(e=this.Na.m).length,i=0;i<n;i++)e[i].lc(t,this);this.Uc=this.xj=!1}}},wa.prototype.computeBounds=function(){var t=this.observed;if(null===t)return $a;var e=t.documentBounds.copy();return e.Nc(t.viewportBounds),e},wa.prototype.invalidateViewport=function(){!0!==this.Uc&&(this.Uc=!0,this.Fb())},wa.prototype.onViewportBoundsChanged=function(t,e,n,i){this.ob||(nl(this),this.N(),Oo(this),this.Pa(),Ku(this),this.bd.scale=n,this.bd.position.x=t.x,this.bd.position.y=t.y,this.bd.bounds.assign(t),this.bd.ky=i,this.S("ViewportBoundsChanged",this.bd,t))},Dt.Object.defineProperties(wa.prototype,{observed:{get:function(){return this.Ga},set:function(t){var e=this.Ga;if(t instanceof wa&&z("Overview.observed Diagram may not be an Overview itself: "+t),e!==t){if(null!==e&&(this.remove(this.box),e.um("ViewportBoundsChanged",this.Tm),e.um("DocumentBoundsChanged",this.Sm),e.um("InvalidateDraw",this.Wa),e.um("AnimationFinished",this.Kh)),this.Ga=t,null!==t&&(t.Xj("ViewportBoundsChanged",this.Tm),t.Xj("DocumentBoundsChanged",this.Sm),t.Xj("InvalidateDraw",this.Wa),t.Xj("AnimationFinished",this.Kh),this.add(this.box)),this.Pa(),null===t){this.Ol=null;var n=this.Aa,i=this.Sb;n&&i&&(i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,n.width,n.height))}else this.Wa(null),Ku(this),this.N();this.g("observed",e,t)}}},box:{get:function(){return this.j},set:function(t){var e=this.j;e!==t&&(this.j=t,this.remove(e),this.add(this.j),Ku(this),this.g("box",e,t))}},drawsTemporaryLayers:{get:function(){return this.M},set:function(t){this.M!==t&&(this.M=t,this.redraw())}},drawsGrid:{get:function(){return this.C},set:function(t){this.C!==t&&(this.C=t,this.redraw())}},updateDelay:{get:function(){return this.Ha},set:function(t){0>t&&(t=0),this.Ha!==t&&(this.Ha=t)}}}),wa.className="Overview",Ft(rl,ne),rl.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(null===t||!t.allowMove||!t.allowSelect)return!1;var e=t.observed;if(null===e)return!1;var n=t.lastInput;return!(!n.left||t.currentTool!==this&&(!this.isBeyondDragSize()||n.isTouchEvent&&n.timestamp-t.firstInput.timestamp<this.delay)||(null===this.findDraggablePart()&&(this.j=new N((n=e.viewportBounds).width/2,n.height/2),e.position=new N((t=t.firstInput.documentPoint).x-this.j.x,t.y-this.j.y)),0))},rl.prototype.doActivate=function(){this.j=null,ne.prototype.doActivate.call(this)},rl.prototype.doUpdateCursor=function(){var t=this.diagram,e=t.box;null!==e&&e.cursor&&(t.currentCursor=e.cursor)},rl.prototype.moveParts=function(){var t=this.diagram,e=t.observed;if(null!==e){var n=t.box;if(null!==n){if(null===this.j){var i=t.firstInput.documentPoint;this.j=new N(i.x-(n=n.location).x,i.y-n.y)}e.position=new N((t=t.lastInput.documentPoint).x-this.j.x,t.y-this.j.y)}}},rl.className="OverviewDraggingTool",Kt.prototype.toString=function(){return"CommandHandler"},Kt.prototype.Ke=function(t){this.F=t},Kt.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput,n=Ss?e.meta:e.control,i=e.shift,a=e.alt,u=e.key;!n||"C"!==u&&"Insert"!==u?n&&"X"===u||i&&"Del"===u?this.canCutSelection()&&this.cutSelection():n&&"V"===u||i&&"Insert"===u?this.canPasteSelection()&&this.pasteSelection():n&&"Y"===u||a&&i&&"Backspace"===u?this.canRedo()&&this.redo():n&&"Z"===u||a&&"Backspace"===u?this.canUndo()&&this.undo():"Del"===u||"Backspace"===u?this.canDeleteSelection()&&this.deleteSelection():n&&"A"===u?this.canSelectAll()&&this.selectAll():"Esc"===u?this.canStopCommand()&&this.stopCommand():"Up"===u?t.allowVerticalScroll&&t.scroll(n?"pixel":"line","up"):"Down"===u?t.allowVerticalScroll&&t.scroll(n?"pixel":"line","down"):"Left"===u?t.allowHorizontalScroll&&t.scroll(n?"pixel":"line","left"):"Right"===u?t.allowHorizontalScroll&&t.scroll(n?"pixel":"line","right"):"PageUp"===u?i&&t.allowHorizontalScroll?t.scroll("page","left"):t.allowVerticalScroll&&t.scroll("page","up"):"PageDown"===u?i&&t.allowHorizontalScroll?t.scroll("page","right"):t.allowVerticalScroll&&t.scroll("page","down"):"Home"===u?n&&t.allowVerticalScroll?t.scroll("document","up"):!n&&t.allowHorizontalScroll&&t.scroll("document","left"):"End"===u?n&&t.allowVerticalScroll?t.scroll("document","down"):!n&&t.allowHorizontalScroll&&t.scroll("document","right"):" "===u?this.canScrollToPart()&&this.scrollToPart():"Subtract"===u?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===u?this.canIncreaseZoom()&&this.increaseZoom():n&&"0"===u?this.canResetZoom()&&this.resetZoom():i&&"Z"===u?this.canZoomToFit()&&this.zoomToFit():n&&!i&&"G"===u?this.canGroupSelection()&&this.groupSelection():n&&i&&"G"===u?this.canUngroupSelection()&&this.ungroupSelection():"F2"===u||e.event&&"F2"===e.event.key?this.canEditTextBlock()&&this.editTextBlock():"ContextMenu"===u||e.event&&"ContextMenu"===e.event.key?this.canShowContextMenu()&&this.showContextMenu():e.bubbles=!0:this.canCopySelection()&&this.copySelection()},Kt.prototype.doKeyUp=function(){this.diagram.lastInput.bubbles=!0},Kt.prototype.stopCommand=function(){var t=this.diagram,e=t.currentTool;e instanceof Ee&&t.allowSelect&&t.clearSelection(),null!==e&&e.doCancel()},Kt.prototype.canStopCommand=function(){return!0},Kt.prototype.selectAll=function(){var t=this.diagram;t.N();try{t.currentCursor="wait",t.S("ChangingSelection",t.selection);for(var e=t.parts;e.next();)e.value.isSelected=!0;for(var n=t.nodes;n.next();)n.value.isSelected=!0;for(var i=t.links;i.next();)i.value.isSelected=!0}finally{t.S("ChangedSelection",t.selection),t.currentCursor=""}},Kt.prototype.canSelectAll=function(){return this.diagram.allowSelect},Kt.prototype.deleteSelection=function(){var t=this.diagram;try{t.currentCursor="wait",t.S("ChangingSelection",t.selection),t.wa("Delete"),t.S("SelectionDeleting",t.selection);for(var e=new K,n=t.selection.iterator;n.next();)ou(e,n.value,!0,this.deletesTree?1/0:0,!!this.deletesConnectedLinks&&null,function(i){return i.canDelete()});t.bt(e,!0),t.S("SelectionDeleted",e)}finally{t.Xa("Delete"),t.S("ChangedSelection",t.selection),t.currentCursor=""}},Kt.prototype.canDeleteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowDelete||0===t.selection.count)},Kt.prototype.copySelection=function(){var t=this.diagram,e=new K;for(t=t.selection.iterator;t.next();)ou(e,t.value,!0,this.copiesTree?1/0:0,this.copiesConnectedLinks,function(n){return n.canCopy()});this.copyToClipboard(e)},Kt.prototype.canCopySelection=function(){var t=this.diagram;return!(!t.allowCopy||!t.allowClipboard||0===t.selection.count)},Kt.prototype.cutSelection=function(){this.copySelection(),this.deleteSelection()},Kt.prototype.canCutSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowCopy||!t.allowDelete||!t.allowClipboard||0===t.selection.count)},Kt.prototype.copyToClipboard=function(t){var e=this.diagram,n=null;if(null===t)Xu=null,fc="";else{n=e.model;var i=!1,a=!1,u=null;try{n.nm()&&(i=n.dk,n.dk=this.copiesParentKey),n.nk()&&(a=n.ck,n.ck=this.copiesGroupKey),u=e.ek(t,null,!0)}finally{n.nm()&&(n.dk=i),n.nk()&&(n.ck=a),(n=new et).addAll(u),Xu=n,fc=e.model.dataFormat}}e.S("ClipboardChanged",n)},Kt.prototype.pasteFromClipboard=function(){var t=new K,e=Xu;if(null===e)return t;var n=this.diagram;if(fc!==n.model.dataFormat)return t;var i=n.model,a=!1,u=!1,h=null;try{i.nm()&&(a=i.dk,i.dk=this.copiesParentKey),i.nk()&&(u=i.ck,i.ck=this.copiesGroupKey),h=n.ek(e,n,!1)}finally{for(i.nm()&&(i.dk=a),i.nk()&&(i.ck=u),e=h.iterator;e.next();)i=e.key,(n=e.value).location.u()||(i.location.u()?n.location=i.location:!n.position.u()&&i.position.u()&&(n.position=i.position)),t.add(n)}return t},Kt.prototype.pasteSelection=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.currentCursor="wait",e.S("ChangingSelection",e.selection),e.wa("Paste");var n=this.pasteFromClipboard();0<n.count&&e.clearSelection(!0);for(var i=n.iterator;i.next();)i.value.isSelected=!0;if(null!==t){var a=e.computePartsBounds(e.selection);a.u()&&Gu(e,this.computeEffectiveCollection(e.selection,e.zn),new N(t.x-a.centerX,t.y-a.centerY),e.zn,!1)}e.S("ClipboardPasted",n)}finally{e.Xa("Paste"),e.S("ChangedSelection",e.selection),e.currentCursor=""}},Kt.prototype.canPasteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowClipboard||null===Xu||0===Xu.count||fc!==t.model.dataFormat)},Kt.prototype.undo=function(){this.diagram.undoManager.undo()},Kt.prototype.canUndo=function(){var t=this.diagram;return!t.isReadOnly&&!t.isModelReadOnly&&t.allowUndo&&t.undoManager.canUndo()},Kt.prototype.redo=function(){this.diagram.undoManager.redo()},Kt.prototype.canRedo=function(){var t=this.diagram;return!t.isReadOnly&&!t.isModelReadOnly&&t.allowUndo&&t.undoManager.canRedo()},Kt.prototype.decreaseZoom=function(t){void 0===t&&(t=1/this.zoomFactor);var e=this.diagram;e.autoScale===oi&&((t*=e.scale)<e.minScale||t>e.maxScale||(e.scale=t))},Kt.prototype.canDecreaseZoom=function(t){void 0===t&&(t=1/this.zoomFactor);var e=this.diagram;return e.autoScale===oi&&!((t*=e.scale)<e.minScale||t>e.maxScale)&&e.allowZoom},Kt.prototype.increaseZoom=function(t){void 0===t&&(t=this.zoomFactor);var e=this.diagram;e.autoScale===oi&&((t*=e.scale)<e.minScale||t>e.maxScale||(e.scale=t))},Kt.prototype.canIncreaseZoom=function(t){void 0===t&&(t=this.zoomFactor);var e=this.diagram;return e.autoScale===oi&&!((t*=e.scale)<e.minScale||t>e.maxScale)&&e.allowZoom},Kt.prototype.resetZoom=function(t){void 0===t&&(t=this.defaultScale);var e=this.diagram;t<e.minScale||t>e.maxScale||(e.scale=t)},Kt.prototype.canResetZoom=function(t){void 0===t&&(t=this.defaultScale);var e=this.diagram;return!(t<e.minScale||t>e.maxScale)&&e.allowZoom},Kt.prototype.zoomToFit=function(){var t=this.diagram,e=t.animationManager;e.nc(),t.redraw();var n=t.position,i=t.scale;ga(e,"Zoom To Fit"),this.isZoomToFitRestoreEnabled&&i===this.Zu&&!isNaN(this.fu)&&t.documentBounds.A(this.Xu)?(t.scale=this.fu,t.position=this.Uw,this.Zu=NaN,this.Xu=$a):(this.fu=i,this.Uw=n.copy(),t.zoomToFit(),this.Zu=t.scale,this.Xu=t.documentBounds.copy()),Bp(e)},Kt.prototype.canZoomToFit=function(){return this.diagram.allowZoom},Kt.prototype.scrollToPart=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.Sa(),null===t){try{null!==this.Zf&&(this.Zf.next()?t=this.Zf.value:this.Zf=null)}catch(f){this.Zf=null}null===t&&(0<e.highlighteds.count?this.Zf=e.highlighteds.iterator:0<e.selection.count&&(this.Zf=e.selection.iterator),null!==this.Zf&&this.Zf.next()&&(t=this.Zf.value))}if(null!==t){var n=e.animationManager;ga(n,"Scroll To Part");var i=this.scrollToPartPause;if(0<i){var a=yc(this,t,[t]);if(1===a.length)e.wa(),e.xs(t.actualBounds),e.Xa("Scroll To Part");else{var u=function(){e.wa();for(var f=a.pop();0<a.length&&f instanceof Q&&f.isTreeExpanded&&(!(f instanceof vt)||f.isSubGraphExpanded);)f=a.pop();0<a.length?(f instanceof ht&&e.Vv(f.actualBounds),f instanceof Q&&!f.isTreeExpanded&&(f.isTreeExpanded=!0),f instanceof vt&&!f.isSubGraphExpanded&&(f.isSubGraphExpanded=!0)):(f instanceof ht&&e.xs(f.actualBounds),e.um("LayoutCompleted",h)),e.Xa("Scroll To Part")},h=function(){Pu(u,(n.isEnabled?n.duration:0)+i)};e.Xj("LayoutCompleted",h),u()}}else{var d=e.position.copy();e.xs(t.actualBounds),d.Ta(e.position)&&n.nc()}}},Kt.prototype.canScrollToPart=function(t){return void 0===t&&(t=null),(null===t||t instanceof ht)&&(0!==(t=this.diagram).selection.count||0!==t.highlighteds.count)&&t.allowHorizontalScroll&&t.allowVerticalScroll},Kt.prototype.collapseTree=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.wa("Collapse Tree"),ga(e.animationManager,"Collapse Tree");var n=new et;if(null!==t&&t.isTreeExpanded)t.collapseTree(),n.add(t);else if(null===t)for(var i=e.selection.iterator;i.next();){var a=i.value;a instanceof Q&&a.isTreeExpanded&&(a.collapseTree(),n.add(a))}e.S("TreeCollapsed",n)}finally{e.Xa("Collapse Tree")}},Kt.prototype.canCollapseTree=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t){if(!(t instanceof Q&&t.isTreeExpanded))return!1;if(0<t.kq().count)return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof Q&&e.isTreeExpanded&&0<e.kq().count)return!0;return!1},Kt.prototype.expandTree=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.wa("Expand Tree"),ga(e.animationManager,"Expand Tree");var n=new et;if(null===t||t.isTreeExpanded){if(null===t)for(var i=e.selection.iterator;i.next();){var a=i.value;a instanceof Q&&!a.isTreeExpanded&&(a.expandTree(),n.add(a))}}else t.expandTree(),n.add(t);e.S("TreeExpanded",n)}finally{e.Xa("Expand Tree")}},Kt.prototype.canExpandTree=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t){if(!(t instanceof Q)||t.isTreeExpanded)return!1;if(0<t.kq().count)return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof Q&&!e.isTreeExpanded&&0<e.kq().count)return!0;return!1},Kt.prototype.groupSelection=function(){var t=this.diagram,e=t.model;if(e.pk()){var n=this.archetypeGroupData;if(null!==n){var i=null;try{t.currentCursor="wait",t.S("ChangingSelection",t.selection),t.wa("Group");for(var a=new et,u=t.selection.iterator;u.next();){var h=u.value;h.Jc()&&h.canGroup()&&a.add(h)}for(var d=new et,f=a.iterator;f.next();){var g=f.value;u=!1;for(var m=a.iterator;m.next();)if(g.Fd(m.value)){u=!0;break}u||d.add(g)}if(0<d.count){var y=d.first().containingGroup;if(null!==y)for(;null!==y;){a=!1;for(var x=d.iterator;x.next();)if(!x.value.Fd(y)){a=!0;break}if(!a)break;y=y.containingGroup}if(n instanceof vt)Gr(n),null!==(i=n.copy())&&t.add(i);else if(e.Dv(n)){var _=e.copyNodeData(n);Et(_)&&(e.nf(_),i=t.Hi(_))}if(null!==i){null!==y&&this.isValidMember(y,i)&&(i.containingGroup=y);for(var M=d.iterator;M.next();){var S=M.value;this.isValidMember(i,S)&&(S.containingGroup=i)}t.clearSelection(!0),i.isSelected=!0}}t.S("SelectionGrouped",i)}finally{t.Xa("Group"),t.S("ChangedSelection",t.selection),t.currentCursor=""}}}},Kt.prototype.canGroupSelection=function(){var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowGroup||!t.model.pk()||null===this.archetypeGroupData)return!1;for(t=t.selection.iterator;t.next();){var e=t.value;if(e.Jc()&&e.canGroup())return!0}return!1},Kt.prototype.isValidMember=function(t,e){if(null===e||t===e||e instanceof X)return!1;if(null!==t){if(t===e||t.Fd(e))return!1;var n=t.memberValidation;if(null!==n&&!n(t,e)||null===t.data&&null!==e.data||null!==t.data&&null===e.data)return!1}return null===(n=this.memberValidation)||n(t,e)},Kt.prototype.ungroupSelection=function(t){void 0===t&&(t=null);var e=this.diagram,n=e.model;if(n.pk())try{e.currentCursor="wait",e.S("ChangingSelection",e.selection),e.wa("Ungroup");var i=new et;if(null!==t)i.add(t);else for(var a=e.selection.iterator;a.next();){var u=a.value;u instanceof vt&&u.canUngroup()&&i.add(u)}var h=new et;if(0<i.count){e.clearSelection(!0);for(var d=i.iterator;d.next();){var f=d.value;f.expandSubGraph();var g=f.containingGroup,m=null!==g&&null!==g.data?n.pa(g.data):void 0;h.addAll(f.memberParts);for(var y=h.iterator;y.next();){var x=y.value;if(x.isSelected=!0,!(x instanceof X)){var _=x.data;null!==_?n.Gq(_,m):x.containingGroup=g}}e.remove(f)}}e.S("SelectionUngrouped",i,h)}finally{e.Xa("Ungroup"),e.S("ChangedSelection",e.selection),e.currentCursor=""}},Kt.prototype.canUngroupSelection=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowDelete||!e.allowUngroup||!e.model.pk())return!1;if(null!==t){if(!(t instanceof vt))return!1;if(t.canUngroup())return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof vt&&e.canUngroup())return!0;return!1},Kt.prototype.addTopLevelParts=function(t,e){var n=!0;for(t=tw(t).iterator;t.next();){var i=t.value;null!==i.containingGroup&&(!e||this.isValidMember(null,i)?i.containingGroup=null:n=!1)}return n},Kt.prototype.collapseSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.wa("Collapse SubGraph"),ga(e.animationManager,"Collapse SubGraph");var n=new et;if(null!==t&&t.isSubGraphExpanded)t.collapseSubGraph(),n.add(t);else if(null===t)for(var i=e.selection.iterator;i.next();){var a=i.value;a instanceof vt&&a.isSubGraphExpanded&&(a.collapseSubGraph(),n.add(a))}e.S("SubGraphCollapsed",n)}finally{e.Xa("Collapse SubGraph")}},Kt.prototype.canCollapseSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t)return!!(t instanceof vt&&t.isSubGraphExpanded);for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof vt&&e.isSubGraphExpanded)return!0;return!1},Kt.prototype.expandSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.wa("Expand SubGraph"),ga(e.animationManager,"Expand SubGraph");var n=new et;if(null===t||t.isSubGraphExpanded){if(null===t)for(var i=e.selection.iterator;i.next();){var a=i.value;a instanceof vt&&!a.isSubGraphExpanded&&(a.expandSubGraph(),n.add(a))}}else t.expandSubGraph(),n.add(t);e.S("SubGraphExpanded",n)}finally{e.Xa("Expand SubGraph")}},Kt.prototype.canExpandSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t)return t instanceof vt&&!t.isSubGraphExpanded;for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof vt&&!e.isSubGraphExpanded)return!0;return!1},Kt.prototype.editTextBlock=function(t){void 0===t&&(t=null);var e=this.diagram,n=e.toolManager.findTool("TextEditing");if(null!==n){if(null===t){t=null;for(var i=e.selection.iterator;i.next();){var a=i.value;if(a.canEdit()){t=a;break}}if(null===t)return;t=t.hm(function(u){return u instanceof Zt&&u.editable})}null!==t&&(e.currentTool=null,n.textBlock=t,e.currentTool=n)}},Kt.prototype.canEditTextBlock=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowTextEdit||null===e.toolManager.findTool("TextEditing"))return!1;if(null!==t){if(!(t instanceof Zt))return!1;if(null!==(t=t.part)&&t.canEdit())return!0}else for(e=e.selection.iterator;e.next();)if((t=e.value).canEdit()&&null!==(t=t.hm(function(n){return n instanceof Zt&&n.editable})))return!0;return!1},Kt.prototype.showContextMenu=function(t){var e=this.diagram,n=e.toolManager.findTool("ContextMenu");if(null!==n&&(void 0===t&&(t=0<e.selection.count?e.selection.first():e),null!==(t=n.findObjectWithContextMenu(t)))){var i=e.lastInput,a=null;t instanceof ut?a=t.da(Wt):e.viewportBounds.$(i.documentPoint)||(a=new N((a=e.viewportBounds).x+a.width/2,a.y+a.height/2)),null!==a&&(i.viewPoint=e.Iq(a),i.documentPoint=a,i.left=!1,i.right=!0,i.up=!0),e.currentTool=n,Ax(n,!1,t)}},Kt.prototype.canShowContextMenu=function(t){var e=this.diagram,n=e.toolManager.findTool("ContextMenu");return null!==n&&(void 0===t&&(t=0<e.selection.count?e.selection.first():e),null!==n.findObjectWithContextMenu(t))},Kt.prototype.computeEffectiveCollection=function(t,e){var n=this.diagram,i=n.toolManager.findTool("Dragging"),a=n.currentTool===i;if(void 0===e&&(e=a?i.dragOptions:n.zn),i=new xt,null===t)return i;for(var u=t.iterator;u.next();)ns(n,i,u.value,a,e);if(null!==n.draggedLink&&e.dragsLink)return i;for(u=t.iterator;u.next();)(t=u.value)instanceof X&&((null===(e=t.fromNode)||i.contains(e))&&(null===(e=t.toNode)||i.contains(e))||i.remove(t));return i},Dt.Object.defineProperties(Kt.prototype,{diagram:{get:function(){return this.F}},copiesClipboardData:{get:function(){return this.o},set:function(t){this.o=t}},copiesConnectedLinks:{get:function(){return this.C},set:function(t){this.C=t}},deletesConnectedLinks:{get:function(){return this.Wa},set:function(t){this.Wa=t}},copiesTree:{get:function(){return this.Ha},set:function(t){this.Ha=t}},deletesTree:{get:function(){return this.Oc},set:function(t){this.Oc=t}},copiesParentKey:{get:function(){return this.Ga},set:function(t){this.Ga=t}},copiesGroupKey:{get:function(){return this.M},set:function(t){this.M=t}},archetypeGroupData:{get:function(){return this.j},set:function(t){this.j=t}},memberValidation:{get:function(){return this.ki},set:function(t){this.ki=t}},defaultScale:{get:function(){return this.diagram.defaultScale},set:function(t){this.diagram.defaultScale=t}},zoomFactor:{get:function(){return this.Kd},set:function(t){1<t||z("zoomFactor must be larger than 1.0, not: "+t),this.Kd=t}},isZoomToFitRestoreEnabled:{get:function(){return this.yc},set:function(t){this.yc=t}},scrollToPartPause:{get:function(){return this.Pc},set:function(t){this.Pc=t}}}),Kt.className="CommandHandler",As=function(){return new Kt},ut.prototype.cloneProtected=function(t){t.G=6144|this.G,t.lb=this.lb,t.na=this.na,t.Rb=this.Rb,t.fd=this.fd,t.rg=this.rg,t.ka.assign(this.ka),t.Sc=this.Sc.I(),t.Uf=this.Uf.I(),t.Tf=this.Tf.I(),t.Ab=null!==this.Ab?this.Ab.copy():null,t.sa=this.sa,t.xb=this.xb,t.Be=this.Be,t.Pg=this.Pg.I(),t.ic.assign(this.ic),t.vb.assign(this.vb),t.qc.assign(this.qc),t.ap=this.ap,null!==this.P&&(t.P=this.P.copy()),t.wb=this.wb.I(),t.Gk=this.Gk.I(),t.np=this.np,t.op=this.op,t.wg=this.wg,t.jn=this.jn,t.Fp=this.Fp,t.sp=this.sp,t.Jl=this.Jl,t.Kl=this.Kl.I(),t.Ll=this.Ll,t.Sh=this.Sh,null!==this.O&&(t.O=this.O.copy()),t.fb=this.fb,t.Mk=this.Mk,null!==this.Rh&&(t.Rh=Xi(this.Rh)),null!==this.$a&&(t.$a=this.$a.copy()),t.Nl=this.Nl},ut.prototype.yx=function(t){var e=this.Rh;if(_n(e)){for(var n=0;n<e.length;n++)if(e[n]===t)return}else this.Rh=e=[];e.push(t)},ut.prototype.sf=function(t){t.bp=null,t.Nj=null,t.s()},ut.prototype.clone=function(){var t=new this.constructor;if(this.cloneProtected(t),null!==this.Rh)for(var e=0;e<this.Rh.length;e++){var n=this.Rh[e];t[n]=this[n]}return t},ut.prototype.copy=function(){return this.clone()},(D=ut.prototype).gb=function(t){t.classType===X?0===t.name.indexOf("Orient")?this.segmentOrientation=t:z("Unknown Link enum value for GraphObject.segmentOrientation property: "+t):t.classType===ut&&(this.stretch=t)},D.toString=function(){return aa(this.constructor)+"#"+Jt(this)},D.Hc=function(){if(null===this.P){var t=new Sf;t.Jg=An,t.ph=An,t.Hg=10,t.nh=10,t.Ig=0,t.oh=0,this.P=t}},D.Va=function(t,e,n,i,a,u,h){var d=this.part;if(null!==d&&(d.Ak(t,e,n,i,a,u,h),n===this&&t===ve&&Ci(this)&&Xl(this,d,e),u=this.diagram,null===this.rg||null===u||!u.Pi||u.undoManager.isUndoingRedoing||u.animationManager.dn||null!==(t=this.rg.get(e))&&u.animationManager.isEnabled&&!u.animationManager.isTicking&&(null===this.qp&&(this.qp=new xt),h=0===u.undoManager.transactionLevel,t.startCondition===Rx?h=!0:t.startCondition===HM&&(h=!1),h?(function qD(t,e){null!==(t=t.Ik)&&(t.duration&&(e.duration=t.duration),t.finished&&(e.finished=t.finished),t.easing&&(e.easing=t.easing))}(t,u=new wn),null!==(h=this.qp.get(t))&&h.stop(),this.qp.add(t,u),u.Uu=this,u.qx=t,u.add(this,e,i,a),u.start()):(ga(u.animationManager,"Trigger"),u.animationManager.defaultAnimation.add(this,e,i,a))),this instanceof Y&&n===d&&0!=(16777216&d.G)&&null!==d.data))for(i=(n=this.T.m).length,a=0;a<i;a++)(d=n[a])instanceof Y&&al(d,function(f){null!==f.data&&0!=(16777216&f.G)&&f.Da(e)})},D.Bs=function(t){return this.Mk===t?this:null},D.g=function(t,e,n){this.Va(ve,t,this,e,n)},D.ue=function(t,e,n,i){var a=this.ic;if(a.h(t,e,n,i),1!==this.sa||0!==this.xb){null===this.Ab&&(this.Ab=new St);var u=this.Ab;u.reset(),this.zp(u,t,e,n,i),u.Jq(a)}},D.Ux=function(t,e,n){if(!1===this.pickable)return!1;var i=this.naturalBounds;return e=t.tf(e),n?Re(t.x,t.y,0,0,0,i.height)<=e||Re(t.x,t.y,0,i.height,i.width,i.height)<=e||Re(t.x,t.y,i.width,i.height,i.width,0)<=e||Re(t.x,t.y,i.width,0,0,0)<=e:t.nd(0,0)<=e&&t.nd(0,i.height)<=e&&t.nd(i.width,0)<=e&&t.nd(i.width,i.height)<=e},D.he=function(){return!0},D.$=function(t){var e=N.alloc();e.assign(t),this.transform.ya(e);var n=this.actualBounds;if(!n.u())return N.free(e),!1;var i=this.diagram;if(null!==i&&i.cu){var a=i.km("extraTouchThreshold"),u=i.km("extraTouchArea"),h=u/2,d=this.naturalBounds,f=1/(i=this.wf()*i.scale);if(d.width*i<a&&d.height*i<a)return t=Wi(n.x-h*f,n.y-h*f,n.width+u*f,n.height+u*f,e.x,e.y),N.free(e),t}return a=!1,(this instanceof At||this instanceof wt?Wi(n.x-5,n.y-5,n.width+10,n.height+10,e.x,e.y):n.$(e))&&(a=!(this.$a&&!this.$a.$(e))&&(!!(null!==this.fd&&n.$(e)||null!==this.Rb&&this.qc.$(t))||this.xh(t))),N.free(e),a},D.xh=function(t){var e=this.naturalBounds;return Wi(0,0,e.width,e.height,t.x,t.y)},D.De=function(t){if(0===this.angle)return this.actualBounds.De(t);var e=this.naturalBounds;e=B.allocAt(0,0,e.width,e.height);var n=this.transform,i=!1,a=N.allocAt(t.x,t.y);return e.$(n.Ed(a))&&(a.h(t.x,t.bottom),e.$(n.Ed(a))&&(a.h(t.right,t.bottom),e.$(n.Ed(a))&&(a.h(t.right,t.y),e.$(n.Ed(a))&&(i=!0)))),N.free(a),B.free(e),i},D.wh=function(t,e){if(void 0===e)return t.De(this.actualBounds);var n=this.naturalBounds,i=!1,a=N.allocAt(0,0);return t.$(e.ya(a))&&(a.h(0,n.height),t.$(e.ya(a))&&(a.h(n.width,n.height),t.$(e.ya(a))&&(a.h(n.width,0),t.$(e.ya(a))&&(i=!0)))),N.free(a),i},D.Ic=function(t,e){if(void 0===e&&(e=this.transform,0===this.angle))return t.Ic(this.actualBounds);var n=this.naturalBounds,i=N.allocAt(0,0),a=N.allocAt(0,n.height),u=N.allocAt(n.width,n.height),h=N.allocAt(n.width,0),d=!1;if(t.$(e.ya(i))||t.$(e.ya(a))||t.$(e.ya(u))||t.$(e.ya(h)))d=!0;else{n=B.allocAt(0,0,n.width,n.height);var f=N.allocAt(t.x,t.y);n.$(e.Ed(f))?d=!0:(f.h(t.x,t.bottom),n.$(e.Ed(f))?d=!0:(f.h(t.right,t.bottom),n.$(e.Ed(f))?d=!0:(f.h(t.right,t.y),n.$(e.Ed(f))&&(d=!0)))),N.free(f),B.free(n),!d&&(R.Ls(t,i,a)||R.Ls(t,a,u)||R.Ls(t,u,h)||R.Ls(t,h,i))&&(d=!0)}return N.free(i),N.free(a),N.free(u),N.free(h),d},D.da=function(t,e){if(void 0===e&&(e=new N),t instanceof ct){var n=this.naturalBounds;e.h(t.x*n.width+t.offsetX,t.y*n.height+t.offsetY)}else e.set(t);return this.de.ya(e),e},D.Mi=function(t){void 0===t&&(t=new B);var e=this.naturalBounds,n=this.de,i=N.allocAt(0,0).transform(n);return t.h(i.x,i.y,0,0),i.h(e.width,0).transform(n),hn(t,i.x,i.y,0,0),i.h(e.width,e.height).transform(n),hn(t,i.x,i.y,0,0),i.h(0,e.height).transform(n),hn(t,i.x,i.y,0,0),N.free(i),t},D.Li=function(){var t=this.de;return 1===t.m11&&0===t.m12?t=0:0>(t=180*Math.atan2(t.m12,t.m11)/Math.PI)&&(t+=360),t},D.wf=function(){if(0==(4096&this.G))return this.al;var t=this.sa;return null!==this.panel?t*this.panel.wf():t},D.Hs=function(t,e){return void 0===e&&(e=new N),e.assign(t),this.de.Ed(e),e},D.Is=function(t,e,n){return this.kk(t.x,t.y,e.x,e.y,n)},D.kk=function(t,e,n,i,a){var u=this.transform,h=1/(u.m11*u.m22-u.m12*u.m21),d=u.m22*h,f=-u.m12*h,g=-u.m21*h,m=u.m11*h,y=h*(u.m21*u.dy-u.m22*u.dx),x=h*(u.m12*u.dx-u.m11*u.dy);return null!==this.areaBackground?R.yf((u=this.actualBounds).left,u.top,u.right,u.bottom,t,e,n,i,a):(h=t*d+e*g+y,t=t*f+e*m+x,e=n*d+i*g+y,n=n*f+i*m+x,a.h(0,0),n=R.yf(0,0,(i=this.naturalBounds).width,i.height,h,t,e,n,a),a.transform(u),n)},ut.prototype.measure=function(t,e,n,i){if(!1!==Rn(this)){var a=this.Pg,u=a.right+a.left;a=a.top+a.bottom,t=Math.max(t-u,0),e=Math.max(e-a,0),n=Math.max((n||0)-u,0),i=Math.max((i||0)-a,0),a=this.desiredSize;var h=0;this instanceof wt&&(h=this.strokeWidth),90===(u=this.angle)||270===u?(t=isFinite(a.height)?a.height+h:t,e=isFinite(a.width)?a.width+h:e):(t=isFinite(a.width)?a.width+h:t,e=isFinite(a.height)?a.height+h:e),a=n||0,h=i||0;var d=this instanceof Y;switch(xo(this,!0)){case ze:h=a=0,d&&(e=t=1/0);break;case Ve:isFinite(t)&&t>n&&(a=t),isFinite(e)&&e>i&&(h=e);break;case Ln:isFinite(t)&&t>n&&(a=t),h=0,d&&(e=1/0);break;case En:isFinite(e)&&e>i&&(h=e),a=0,d&&(t=1/0)}var f=this.minSize;a>(d=this.maxSize).width&&f.width<d.width&&(a=d.width),h>d.height&&f.height<d.height&&(h=d.height),n=Math.max(a/this.scale,f.width),i=Math.max(h/this.scale,f.height),d.width<n&&(n=Math.min(f.width,n)),d.height<i&&(i=Math.min(f.height,i)),t=Math.min(d.width,t),e=Math.min(d.height,e),t=Math.max(n,t),e=Math.max(i,e),(90===u||270===u)&&(u=t,t=e,e=u,u=n,n=i,i=u),this.ic.ea(),this.qm(t,e,n,i),this.ic.freeze(),this.ic.u()||z("Non-real measuredBounds has been set. Object "+this+", measuredBounds: "+this.ic.toString()),Di(this,!1)}},ut.prototype.qm=function(){},ut.prototype.Ri=function(){return!1},ut.prototype.arrange=function(t,e,n,i,a){this.ll();var u=B.alloc();u.assign(this.vb),this.vb.ea(),!1===fr(this)?this.vb.h(t,e,n,i):this.vh(t,e,n,i),this.vb.freeze(),this.$a=void 0===a?null:a,n=!1,void 0!==a?n=!0:(null===(a=this.panel)||a.type!==Y.TableRow&&a.type!==Y.TableColumn||(a=a.panel),null!==a&&(a=a.qc,i=this.measuredBounds,null!==this.areaBackground&&(i=this.vb),n=e+i.height,i=t+i.width,n=!(0<=t+.05&&i<=a.width+.05&&0<=e+.05&&n<=a.height+.05),this instanceof Zt&&(this.Ir>(t=this.naturalBounds).height||this.qb>t.width))&&(n=!0)),this.G=n?256|this.G:-257&this.G,this.vb.u()||z("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.vb.toString()),this.rm(u,this.vb),Wl(this,!1),B.free(u)},(D=ut.prototype).vh=function(){},D.rm=function(t,e){var n=this.part;null!==n&&null!==n.diagram&&(n.selectionObject!==this&&n.resizeObject!==this&&n.rotateObject!==this||Ag(n,!0),this.N(),ti(t,e)||(n.Ch(),this.Qo(n)))},D.Qo=function(t){null!==this.portId&&(Ag(t,!0),t instanceof Q&&gw(t,this))},D.lc=function(t,e){if(this.visible){var n=this.opacity;if(0!==n){var i=this instanceof Y&&(this.type===Y.TableRow||this.type===Y.TableColumn),a=this.vb;if(i||0!==a.width&&0!==a.height&&!isNaN(a.x)&&!isNaN(a.y)){var u=1;if(1!==n&&(t.globalAlpha=(u=t.globalAlpha)*n),i){a=this.vb,i=this.qc;var h=this.fd,d=this.Rb;null===h&&null===d||t.Bd(),null!==h&&(dr(this,t,h,!0,!0,i,a),h instanceof Bt&&h.type===Tr?(t.beginPath(),t.rect(a.x,a.y,a.width,a.height),t.uf(h)):t.fillRect(a.x,a.y,a.width,a.height)),null!==d&&(dr(this,t,d,!0,!1,i,a),d instanceof Bt&&d.type===Tr?(t.beginPath(),t.rect(a.x,a.y,a.width,a.height),t.uf(d)):t.fillRect(a.x,a.y,a.width,a.height)),this.Fi(t,e)}else if(!this.Px(t,e)){this instanceof X&&this.sk(!1),i=this.transform,h=this.panel,0!=(4096&this.G)&&eg(this);var f=this.part;d=!1;var y,g=0;if(f&&e.Fe("drawShadows")&&(d=f.isShadowed)){var m=f.shadowOffset;g=Math.max(m.y,m.x)*e.scale*e.ac}if(m=this.Ri(),!(y=e.zj||!m)){var I,x=this.naturalBounds,_=(y=this.Mh).m11,M=y.m21,S=y.dx,T=y.m12,k=y.m22,b=y.dy,O=I=0;y=I*_+O*M+S;var F=I*T+O*k+b,H=(I=x.width+g)*_+(O=0)*M+S;I=I*T+O*k+b,O=Math.min(y,H);var W=Math.min(F,I),it=Math.max(y+0,H)-O,nt=Math.max(F+0,I)-W;y=O,F=W,H=(I=x.width+g)*_+(O=x.height+g)*M+S,I=I*T+O*k+b,O=Math.min(y,H),W=Math.min(F,I),it=Math.max(y+it,H)-O,nt=Math.max(F+nt,I)-W,y=O,F=W,H=(I=0)*_+(O=x.height+g)*M+S,I=I*T+O*k+b,O=Math.min(y,H),W=Math.min(F,I),it=Math.max(y+it,H)-O,nt=Math.max(F+nt,I)-W,F=W,_=(g=e.viewportBounds).y,y=!((y=O)>g.width+(x=g.x)||x>it+y||F>g.height+_||_>nt+F)}if(y){if(y=0!=(256&this.G),t.clipInsteadOfFill&&(y=!1),this instanceof Zt&&(t.font=this.font),y){if(F=h.he()?h.naturalBounds:h.actualBounds,null!==this.$a?(it=(x=this.$a).x,nt=x.y,g=x.width,x=x.height):(it=Math.max(a.x,F.x),nt=Math.max(a.y,F.y),g=Math.min(a.right,F.right)-it,x=Math.min(a.bottom,F.bottom)-nt),it>a.width+a.x||a.x>F.width+F.x)return void(1!==n&&(t.globalAlpha=u));t.save(),t.beginPath(),t.rect(it,nt,g,x),t.clip()}if(m){if(!f.isVisible())return void(1!==n&&(t.globalAlpha=u));d&&(t.bw((F=f.shadowOffset).x*e.scale*e.ac,F.y*e.scale*e.ac,f.shadowBlur),Da(t),t.shadowColor=f.shadowColor)}d&&!0===this.shadowVisible?Da(t):d&&!1===this.shadowVisible&&Fs(t),f=this.naturalBounds,null!==this.fd&&(t.Bd(),dr(this,t,this.fd,!0,!0,f,a),this.fd instanceof Bt&&this.fd.type===Tr?(t.beginPath(),t.rect(a.x,a.y,a.width,a.height),t.uf(this.fd)):t.fillRect(a.x,a.y,a.width,a.height)),t.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),d&&(null!==h&&0!=(512&h.G)||null!==h&&(h.type===Y.Auto||h.type===Y.Spot)&&h.nb()!==this)&&null===this.shadowVisible&&Fs(t),null!==this.Rb&&(t.Bd(),ew(this,t,f,a)),d&&(null!==this.Rb||null!==this.fd||null!==h&&0!=(512&h.G)||null!==h&&(h.type===Y.Auto||h.type===Y.Spot)&&h.nb()!==this)?($l(this,!0),null===this.shadowVisible&&Fs(t)):$l(this,!1),this.Fi(t,e),d&&0!=(512&this.G)&&Da(t),m&&d&&Fs(t),y&&(t.restore(),t.Ec(this instanceof Y)),i.Os()||t.transform(i.m22*(e=1/(i.m11*i.m22-i.m12*i.m21)),-i.m12*e,-i.m21*e,i.m11*e,e*(i.m21*i.dy-i.m22*i.dx),e*(i.m12*i.dx-i.m11*i.dy))}}1!==n&&(t.globalAlpha=u)}}}},D.Px=function(){return!1},D.Fi=function(){},D.mg=function(t){if(t instanceof Y)t:{if(this!==t&&null!==t)for(var e=this.panel;null!==e;){if(e===t){t=!0;break t}e=e.panel}t=!1}else t=!1;return t},D.Bf=function(){if(!this.visible)return!1;var t=this.panel;return null===t||t.Bf()},D.Af=function(){for(var t=this instanceof Y?this:this.panel;null!==t&&t.isEnabled;)t=t.panel;return null===t},D.zp=function(t,e,n,i,a){if(1!==this.sa&&t.scale(this.sa),0!==this.xb){var u=N.alloc();u.Vi(e,n,i,a,Wt),t.rotate(this.xb,u.x,u.y),N.free(u)}},D.s=function(t){if(!Rn(this)){void 0===t&&(t=!1),Di(this,!0),Wl(this,!0);var e=this.panel;null===e||t||e.s()}},D.mk=function(){Rn(this)||(Di(this,!0),Wl(this,!0))},D.ll=function(){0==(2048&this.G)&&(Ju(this,!0),_a(this,!0))},D.Bv=function(){_a(this,!0)},D.N=function(){var t=this.part;null!==t&&t.N()},D.Ti=function(t){this.Xf=t},D.gt=function(){},D.Zv=function(t){return this.ka=t,xc(this),!0},D.Gm=function(t,e){(this.ka.x!==t||this.ka.y!==e)&&(this.ka.h(t,e),this.ll())},D.Ow=function(){return 0},D.bind=function(t,e,n,i){var a=null;return(a="string"==typeof t?new Fe(t,e,n,i):t).md=this,null!==(t=this.yh())&&ev(t)&&z("Cannot add a Binding to a template that has already been copied: "+a),null===this.fb&&(this.fb=new et),this.fb.add(a),this},D.set=function(t){return Object.assign(this,t),this},D.dv=function(t){return ig(this,t),this},D.apply=function(t){return t(this),this},D.Hm=function(t){return Xd(this,t),this},D.Vz=function(){return this.yh()},D.yh=function(){for(var t=this instanceof Y?this:this.panel;null!==t;){if(null!==t.Ph)return t;t=t.panel}return null},D.fw=function(t){return t.md=this,null===this.rg&&(this.rg=new xt),this.rg.add(t.propertyName,t),this},Dt.Object.defineProperties(ut.prototype,{shadowVisible:{get:function(){return this.Nl},set:function(t){var e=this.Nl;e!==t&&(this.Nl=t,this.N(),this.g("shadowVisible",e,t))}},enabledChanged:{get:function(){return null!==this.O?this.O.Fn:null},set:function(t){cr(this);var e=this.O.Fn;e!==t&&(this.O.Fn=t,this.g("enabledChanged",e,t))}},segmentOrientation:{get:function(){return this.Ll},set:function(t){var e=this.Ll;e!==t&&(this.Ll=t,this.s(),this.g("segmentOrientation",e,t),t===pn&&(this.angle=0))}},segmentIndex:{get:function(){return this.sp},set:function(t){t=Math.round(t);var e=this.sp;e!==t&&(this.sp=t,this.s(),this.g("segmentIndex",e,t))}},segmentFraction:{get:function(){return this.Jl},set:function(t){isNaN(t)||0>t?t=0:1<t&&(t=1);var e=this.Jl;e!==t&&(this.Jl=t,this.s(),this.g("segmentFraction",e,t))}},segmentOffset:{get:function(){return this.Kl},set:function(t){var e=this.Kl;e.A(t)||(this.Kl=t=t.I(),this.s(),this.g("segmentOffset",e,t))}},stretch:{get:function(){return this.Be},set:function(t){var e=this.Be;e!==t&&(this.Be=t,this.s(),this.g("stretch",e,t))}},name:{get:function(){return this.na},set:function(t){var e=this.na;e!==t&&(this.na=t,null!==this.part&&(this.part.li=null),this.g("name",e,t))}},opacity:{get:function(){return this.lb},set:function(t){var e=this.lb;e!==t&&((0>t||1<t)&&me(t,"0 <= value <= 1",ut,"opacity"),this.lb=t,this.g("opacity",e,t),e=this.part,null!==(t=this.diagram)&&null!==e&&t.N(nh(e,e.actualBounds)))}},visible:{get:function(){return 0!=(1&this.G)},set:function(t){var e=0!=(1&this.G);e!==t&&(this.G^=1,this.g("visible",e,t),null!==(e=this.panel)?e.s():this.Ri()&&this.Nb(t),this.N(),Hy(this))}},pickable:{get:function(){return 0!=(2&this.G)},set:function(t){var e=0!=(2&this.G);e!==t&&(this.G^=2,this.g("pickable",e,t))}},fromLinkableDuplicates:{get:function(){return 0!=(4&this.G)},set:function(t){var e=0!=(4&this.G);e!==t&&(this.G^=4,this.g("fromLinkableDuplicates",e,t))}},fromLinkableSelfNode:{get:function(){return 0!=(8&this.G)},set:function(t){var e=0!=(8&this.G);e!==t&&(this.G^=8,this.g("fromLinkableSelfNode",e,t))}},toLinkableDuplicates:{get:function(){return 0!=(16&this.G)},set:function(t){var e=0!=(16&this.G);e!==t&&(this.G^=16,this.g("toLinkableDuplicates",e,t))}},toLinkableSelfNode:{get:function(){return 0!=(32&this.G)},set:function(t){var e=0!=(32&this.G);e!==t&&(this.G^=32,this.g("toLinkableSelfNode",e,t))}},isPanelMain:{get:function(){return 0!=(64&this.G)},set:function(t){var e=0!=(64&this.G);e!==t&&(this.G^=64,this.s(),this.g("isPanelMain",e,t))}},isActionable:{get:function(){return 0!=(128&this.G)},set:function(t){var e=0!=(128&this.G);e!==t&&(this.G^=128,this.g("isActionable",e,t))}},areaBackground:{get:function(){return this.fd},set:function(t){var e=this.fd;e!==t&&(null!==t&&Ql(t,"GraphObject.areaBackground"),t instanceof Bt&&t.freeze(),this.fd=t,this.N(),this.g("areaBackground",e,t))}},background:{get:function(){return this.Rb},set:function(t){var e=this.Rb;e!==t&&(null!==t&&Ql(t,"GraphObject.background"),t instanceof Bt&&t.freeze(),this.Rb=t,this.N(),this.g("background",e,t))}},part:{get:function(){if(this.Ri())return this;if(null!==this.Nj)return this.Nj;var t;for(t=this.panel;t;){if(t instanceof ht)return this.Nj=t;t=t.panel}return null}},svg:{get:function(){return this.ns},set:function(t){this.ns=t}},panel:{get:function(){return this.Xf}},layer:{get:function(){var t=this.part;return null!==t?t.layer:null}},diagram:{get:function(){var t=this.part;return null!==t?t.diagram:null}},position:{get:function(){return this.ka},set:function(t){var e=t.x,n=t.y,i=this.ka,a=i.x;i=i.y,(a===e||isNaN(a)&&isNaN(e))&&(i===n||isNaN(i)&&isNaN(n))?this.gt():(t=t.copy(),this.Zv(t,a,i)&&this.g("position",new N(a,i),t))}},actualBounds:{get:function(){return this.vb}},scale:{get:function(){return this.sa},set:function(t){var e=this.sa;e!==t&&(0>=t&&z("GraphObject.scale for "+this+" must be greater than zero, not: "+t),this.sa=t,this.s(),this.g("scale",e,t))}},angle:{get:function(){return this.xb},set:function(t){var e=this.xb;e!==t&&(0>(t%=360)&&(t+=360),e!==t&&(this.xb=t,Hy(this),this.s(),this.g("angle",e,t)))}},desiredSize:{get:function(){return this.Sc},set:function(t){var e=t.width,n=t.height,i=this.Sc,a=i.width,u=i.height;(a===e||isNaN(a)&&isNaN(e))&&(u===n||isNaN(u)&&isNaN(n))||(this.Sc=t=t.I(),this.s(),this instanceof wt&&this.cc(),this.g("desiredSize",i,t),Ci(this)&&null!==(t=this.part)&&(Xl(this,t,"width"),Xl(this,t,"height")))}},width:{get:function(){return this.Sc.width},set:function(t){var e=this.Sc.width;e===t||isNaN(e)&&isNaN(t)||(e=this.Sc,this.Sc=t=new mt(t,this.Sc.height).freeze(),this.s(),this instanceof wt&&this.cc(),this.g("desiredSize",e,t),Ci(this)&&null!==(t=this.part)&&Xl(this,t,"width"))}},height:{get:function(){return this.Sc.height},set:function(t){var e=this.Sc.height;e===t||isNaN(e)&&isNaN(t)||(e=this.Sc,this.Sc=t=new mt(this.Sc.width,t).freeze(),this.s(),this instanceof wt&&this.cc(),this.g("desiredSize",e,t),Ci(this)&&null!==(t=this.part)&&Xl(this,t,"height"))}},minSize:{get:function(){return this.Uf},set:function(t){var e=this.Uf;e.A(t)||(t=t.copy(),isNaN(t.width)&&(t.width=0),isNaN(t.height)&&(t.height=0),t.freeze(),this.Uf=t,this.s(),this.g("minSize",e,t))}},maxSize:{get:function(){return this.Tf},set:function(t){var e=this.Tf;e.A(t)||(t=t.copy(),isNaN(t.width)&&(t.width=1/0),isNaN(t.height)&&(t.height=1/0),t.freeze(),this.Tf=t,this.s(),this.g("maxSize",e,t))}},measuredBounds:{get:function(){return this.ic}},naturalBounds:{get:function(){return this.qc}},margin:{get:function(){return this.Pg},set:function(t){"number"==typeof t&&(t=new Lt(t));var e=this.Pg;e.A(t)||(this.Pg=t=t.I(),this.s(),this.g("margin",e,t))}},transform:{get:function(){return 0!=(2048&this.G)&&eg(this),this.tb}},de:{get:function(){return 0!=(4096&this.G)&&eg(this),this.Mh}},alignment:{get:function(){return this.wb},set:function(t){var e=this.wb;e.A(t)||(t.wc()&&!t.Lb()&&z("GraphObject.alignment for "+this+" must be a real Spot or Spot.Default, not: "+t),this.wb=t=t.I(),xc(this),this.g("alignment",e,t))}},column:{get:function(){return this.wg},set:function(t){t=Math.round(t);var e=this.wg;e!==t&&(0>t&&me(t,">= 0",ut,"column"),this.wg=t,this.s(),this.g("column",e,t))}},columnSpan:{get:function(){return this.jn},set:function(t){t=Math.round(t);var e=this.jn;e!==t&&(1>t&&me(t,">= 1",ut,"columnSpan"),this.jn=t,this.s(),this.g("columnSpan",e,t))}},row:{get:function(){return this.np},set:function(t){t=Math.round(t);var e=this.np;e!==t&&(0>t&&me(t,">= 0",ut,"row"),this.np=t,this.s(),this.g("row",e,t))}},rowSpan:{get:function(){return this.op},set:function(t){t=Math.round(t);var e=this.op;e!==t&&(1>t&&me(t,">= 1",ut,"rowSpan"),this.op=t,this.s(),this.g("rowSpan",e,t))}},spanAllocation:{get:function(){return this.Fp},set:function(t){var e=this.Fp;e!==t&&(this.Fp=t,this.s(),this.g("spanAllocation",e,t))}},alignmentFocus:{get:function(){return this.Gk},set:function(t){var e=this.Gk;e.A(t)||(this.Gk=t=t.I(),this.s(),this.g("alignmentFocus",e,t))}},portId:{get:function(){return this.ap},set:function(t){var e=this.ap;if(e!==t){var n=this.part;null===n||n instanceof Q||z("Cannot set portID on a Link: "+t),null!==e&&null!==n&&wv(n,this),this.ap=t,null!==t&&null!==n&&(n.Ge=!0,h_(n,this)),this.g("portId",e,t)}}},toSpot:{get:function(){return null!==this.P?this.P.ph:An},set:function(t){this.Hc();var e=this.P.ph;e.A(t)||(t=t.I(),this.P.ph=t,this.g("toSpot",e,t),Kl(this))}},toEndSegmentLength:{get:function(){return null!==this.P?this.P.nh:10},set:function(t){this.Hc();var e=this.P.nh;e!==t&&(0>t&&me(t,">= 0",ut,"toEndSegmentLength"),this.P.nh=t,this.g("toEndSegmentLength",e,t),Kl(this))}},toShortLength:{get:function(){return null!==this.P?this.P.oh:0},set:function(t){this.Hc();var e=this.P.oh;e!==t&&(this.P.oh=t,this.g("toShortLength",e,t),Kl(this))}},toLinkable:{get:function(){return null!==this.P?this.P.Mp:null},set:function(t){this.Hc();var e=this.P.Mp;e!==t&&(this.P.Mp=t,this.g("toLinkable",e,t))}},toMaxLinks:{get:function(){return null!==this.P?this.P.Np:1/0},set:function(t){this.Hc();var e=this.P.Np;e!==t&&(0>t&&me(t,">= 0",ut,"toMaxLinks"),this.P.Np=t,this.g("toMaxLinks",e,t))}},fromSpot:{get:function(){return null!==this.P?this.P.Jg:An},set:function(t){this.Hc();var e=this.P.Jg;e.A(t)||(t=t.I(),this.P.Jg=t,this.g("fromSpot",e,t),Kl(this))}},fromEndSegmentLength:{get:function(){return null!==this.P?this.P.Hg:10},set:function(t){this.Hc();var e=this.P.Hg;e!==t&&(0>t&&me(t,">= 0",ut,"fromEndSegmentLength"),this.P.Hg=t,this.g("fromEndSegmentLength",e,t),Kl(this))}},fromShortLength:{get:function(){return null!==this.P?this.P.Ig:0},set:function(t){this.Hc();var e=this.P.Ig;e!==t&&(this.P.Ig=t,this.g("fromShortLength",e,t),Kl(this))}},fromLinkable:{get:function(){return null!==this.P?this.P.Mn:null},set:function(t){this.Hc();var e=this.P.Mn;e!==t&&(this.P.Mn=t,this.g("fromLinkable",e,t))}},fromMaxLinks:{get:function(){return null!==this.P?this.P.Nn:1/0},set:function(t){this.Hc();var e=this.P.Nn;e!==t&&(0>t&&me(t,">= 0",ut,"fromMaxLinks"),this.P.Nn=t,this.g("fromMaxLinks",e,t))}},cursor:{get:function(){return this.Sh},set:function(t){var e=this.Sh;e!==t&&(this.Sh=t,this.g("cursor",e,t))}},click:{get:function(){return null!==this.O?this.O.vg:null},set:function(t){cr(this);var e=this.O.vg;e!==t&&(this.O.vg=t,this.g("click",e,t))}},doubleClick:{get:function(){return null!==this.O?this.O.Dg:null},set:function(t){cr(this);var e=this.O.Dg;e!==t&&(this.O.Dg=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return null!==this.O?this.O.xg:null},set:function(t){cr(this);var e=this.O.xg;e!==t&&(this.O.xg=t,this.g("contextClick",e,t))}},mouseEnter:{get:function(){return null!==this.O?this.O.Sg:null},set:function(t){cr(this);var e=this.O.Sg;e!==t&&(this.O.Sg=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return null!==this.O?this.O.Vg:null},set:function(t){cr(this);var e=this.O.Vg;e!==t&&(this.O.Vg=t,this.g("mouseLeave",e,t))}},mouseOver:{get:function(){return null!==this.O?this.O.Wg:null},set:function(t){cr(this);var e=this.O.Wg;e!==t&&(this.O.Wg=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return null!==this.O?this.O.Ug:null},set:function(t){cr(this);var e=this.O.Ug;e!==t&&(this.O.Ug=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return null!==this.O?this.O.Tg:null},set:function(t){cr(this);var e=this.O.Tg;e!==t&&(this.O.Tg=t,this.g("mouseHold",e,t))}},mouseDragEnter:{get:function(){return null!==this.O?this.O.Ho:null},set:function(t){cr(this);var e=this.O.Ho;e!==t&&(this.O.Ho=t,this.g("mouseDragEnter",e,t))}},mouseDragLeave:{get:function(){return null!==this.O?this.O.Io:null},set:function(t){cr(this);var e=this.O.Io;e!==t&&(this.O.Io=t,this.g("mouseDragLeave",e,t))}},mouseDrop:{get:function(){return null!==this.O?this.O.Rg:null},set:function(t){cr(this);var e=this.O.Rg;e!==t&&(this.O.Rg=t,this.g("mouseDrop",e,t))}},actionDown:{get:function(){return null!==this.O?this.O.Vm:null},set:function(t){cr(this);var e=this.O.Vm;e!==t&&(this.O.Vm=t,this.g("actionDown",e,t))}},actionMove:{get:function(){return null!==this.O?this.O.Wm:null},set:function(t){cr(this);var e=this.O.Wm;e!==t&&(this.O.Wm=t,this.g("actionMove",e,t))}},actionUp:{get:function(){return null!==this.O?this.O.Xm:null},set:function(t){cr(this);var e=this.O.Xm;e!==t&&(this.O.Xm=t,this.g("actionUp",e,t))}},actionCancel:{get:function(){return null!==this.O?this.O.Um:null},set:function(t){cr(this);var e=this.O.Um;e!==t&&(this.O.Um=t,this.g("actionCancel",e,t))}},toolTip:{get:function(){return null!==this.O?this.O.qh:null},set:function(t){cr(this);var e=this.O.qh;e!==t&&(this.O.qh=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return null!==this.O?this.O.yg:null},set:function(t){cr(this);var e=this.O.yg;e!==t&&(this.O.yg=t,this.g("contextMenu",e,t))}}}),ut.prototype.trigger=ut.prototype.fw,ut.prototype.findBindingPanel=ut.prototype.yh,ut.prototype.findTemplateBinder=ut.prototype.Vz,ut.prototype.setProperties=ut.prototype.Hm,ut.prototype.apply=ut.prototype.apply,ut.prototype.attach=ut.prototype.dv,ut.prototype.set=ut.prototype.set,ut.prototype.isEnabledObject=ut.prototype.Af,ut.prototype.isVisibleObject=ut.prototype.Bf,ut.prototype.isContainedBy=ut.prototype.mg,ut.prototype.getNearestIntersectionPoint=ut.prototype.Is,ut.prototype.getLocalPoint=ut.prototype.Hs,ut.prototype.getDocumentScale=ut.prototype.wf,ut.prototype.getDocumentAngle=ut.prototype.Li,ut.prototype.getDocumentBounds=ut.prototype.Mi,ut.prototype.getDocumentPoint=ut.prototype.da,ut.prototype.intersectsRect=ut.prototype.Ic,ut.prototype.containedInRect=ut.prototype.wh,ut.prototype.containsRect=ut.prototype.De,ut.prototype.containsPoint=ut.prototype.$,ut.prototype.raiseChanged=ut.prototype.g,ut.prototype.raiseChangedEvent=ut.prototype.Va,ut.prototype.addCopyProperty=ut.prototype.yx;var wc=null;function rg(){this.Fn=this.yg=this.qh=this.Um=this.Xm=this.Wm=this.Vm=this.Rg=this.Io=this.Ho=this.Tg=this.Ug=this.Wg=this.Vg=this.Sg=this.xg=this.Dg=this.vg=null}function ol(){this.Ma=[1,0,0,1,0,0]}function Mc(t){this.type=t,this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0,this.Ix=[],this.pattern=null}function Os(t,e){this.ownerDocument=t=void 0===e?dt.document:e,this.FA="http://www.w3.org/2000/svg",void 0!==t&&(this.La=this.Ob("svg",{width:"1px",height:"1px",viewBox:"0 0 1 1"}),this.La.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),this.La.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink")),this.gq=null,this.context=new sl(this)}function sl(t){this.jt=t,this.svg=t.La,this.stack=[],this.dd=[],this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.lineDashOffset=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.strokeStyle="#000000",this.textAlign="start",this.clipInsteadOfFill=!1,this.bg=this.fs=this.es=0,this.Rs=null,this.path=[],this.Yt=!1,this.ih=null,this.jh=0,this.Ee=new ol,Er(this,1,0,0,1,0,0);var e=Jo++,n=this.Ob("clipPath",{id:"mainClip"+e});n.appendChild(this.Ob("rect",{x:0,y:0,width:t.width,height:t.height})),this.Yw=n,this.jt.La.appendChild(n),this.dd[0].setAttributeNS(null,"clip-path","url(#mainClip"+e+")"),this.HA={}}function ef(t,e,n,i,a){1!==t.globalAlpha&&(n.opacity=t.globalAlpha),"fill"===e?(t.fillStyle instanceof Mc?n.fill=nw(t,t.fillStyle):/^rgba\(/.test(t.fillStyle)?(t=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.fillStyle),n.fill="rgb("+t[1]+","+t[2]+","+t[3]+")",n["fill-opacity"]=t[4]):n.fill=t.fillStyle,n.stroke="none"):"stroke"===e&&(n.fill="none",t.strokeStyle instanceof Mc?n.stroke=nw(t,t.strokeStyle):/^rgba\(/.test(t.strokeStyle)?(e=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.strokeStyle),n.stroke="rgb("+e[1]+","+e[2]+","+e[3]+")",n["stroke-opacity"]=e[4]):n.stroke=t.strokeStyle,n["stroke-width"]=t.lineWidth,n["stroke-linecap"]=t.lineCap,n["stroke-linejoin"]=t.lineJoin,n["stroke-miterlimit"]=t.miterLimit),i="matrix("+(i=i.Ma)[0]+", "+i[1]+", "+i[2]+", "+i[3]+", "+i[4]+", "+i[5]+")",void 0!==a&&(i+=a),n.transform=i}function nw(t,e){var n="GRAD"+Jo++;if("linear"===e.type)var i=t.Ob("linearGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,id:n,gradientUnits:"userSpaceOnUse"});else{if("radial"!==e.type)throw Error("invalid gradient");i=t.Ob("radialGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,r1:e.r1,r2:e.r2,id:n})}var a=e.Ix;e=a.length;for(var u=[],h=0;h<e;h++){var d=a[h],f=d.color;d={offset:d.offset,"stop-color":f},/^rgba\(/.test(f)&&(f=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(f),d["stop-color"]="rgb("+f[1]+","+f[2]+","+f[3]+")",d["stop-opacity"]=f[4]),u.push(d)}for(u.sort(function(g,m){return g.offset>m.offset?1:-1}),a=0;a<e;a++)i.appendChild(t.Ob("stop",u[a]));return t.svg.appendChild(i),"url(#"+n+")"}function Er(t,e,n,i,a,u,h){var d=new ol;d.Ma=[e,n,i,a,u,h],ef(t,"g",e={},d),d=t.addElement("g",e),t.dd.push(d)}function Fs(t){t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0}function Da(t){t.shadowOffsetX=t.es,t.shadowOffsetY=t.fs,t.shadowBlur=t.bg}function Hr(t,e){this.ownerDocument=e=void 0===e?dt.document:e,this.gq=null,(e=e.createElement("canvas")).tabIndex=0,this.La=e,this.La.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.",this.context=new Zl(e),e.F=t}function Zl(t){t.getContext&&t.getContext("2d")||z("Browser does not support HTML Canvas Element"),this.Y=t.getContext("2d"),this.xt=this.zt=this.yt="",this.hn=!1,this.bg=this.fs=this.es=0,this.dm=new St}ut.className="GraphObject",wc=new xt,Ca("Button",function(){function t(n,i){return null!==n.diagram.Wb(n.documentPoint,function(a){for(;null!==a.panel&&!a.isActionable;)a=a.panel;return a},function(a){return a===i})}var e=Sr(Y,Y.Auto,{isActionable:!0,enabledChanged:function(n,i){if(n instanceof Y){var a=n.Ya("ButtonBorder");null!==a&&(a.fill=i?n._buttonFillNormal:n._buttonFillDisabled)}},cursor:"pointer",_buttonFillNormal:"#F5F5F5",_buttonStrokeNormal:"#BDBDBD",_buttonFillOver:"#E0E0E0",_buttonStrokeOver:"#9E9E9E",_buttonFillPressed:"#BDBDBD",_buttonStrokePressed:"#9E9E9E",_buttonFillDisabled:"#E5E5E5"},Sr(wt,{name:"ButtonBorder",figure:"RoundedRectangle",spot1:new ct(0,0,2.76142374915397,2.761423749153969),spot2:new ct(1,1,-2.76142374915397,-2.761423749153969),parameter1:2,parameter2:2,fill:"#F5F5F5",stroke:"#BDBDBD"}));return e.mouseEnter=function(n,i){if(i.Af()&&i instanceof Y&&(n=i.Ya("ButtonBorder"))instanceof wt){var a=i._buttonFillOver;i._buttonFillNormal=n.fill,n.fill=a,a=i._buttonStrokeOver,i._buttonStrokeNormal=n.stroke,n.stroke=a}},e.mouseLeave=function(n,i){i.Af()&&i instanceof Y&&(n=i.Ya("ButtonBorder"))instanceof wt&&(n.fill=i._buttonFillNormal,n.stroke=i._buttonStrokeNormal)},e.actionDown=function(n,i){if(i.Af()&&i instanceof Y&&null!==i._buttonFillPressed&&0===n.button){var a=i.Ya("ButtonBorder");if(a instanceof wt){var u=(n=n.diagram).skipsUndoManager;n.skipsUndoManager=!0;var h=i._buttonFillPressed;i._buttonFillOver=a.fill,a.fill=h,h=i._buttonStrokePressed,i._buttonStrokeOver=a.stroke,a.stroke=h,n.skipsUndoManager=u}}},e.actionUp=function(n,i){if(i.Af()&&i instanceof Y&&null!==i._buttonFillPressed&&0===n.button){var a=i.Ya("ButtonBorder");if(a instanceof wt){var u=n.diagram,h=u.skipsUndoManager;u.skipsUndoManager=!0,t(n,i)?(a.fill=i._buttonFillOver,a.stroke=i._buttonStrokeOver):(a.fill=i._buttonFillNormal,a.stroke=i._buttonStrokeNormal),u.skipsUndoManager=h}}},e.actionCancel=function(n,i){if(i.Af()&&i instanceof Y&&null!==i._buttonFillPressed){var a=i.Ya("ButtonBorder");if(a instanceof wt){var u=n.diagram,h=u.skipsUndoManager;u.skipsUndoManager=!0,t(n,i)?(a.fill=i._buttonFillOver,a.stroke=i._buttonStrokeOver):(a.fill=i._buttonFillNormal,a.stroke=i._buttonStrokeNormal),u.skipsUndoManager=h}}},e.actionMove=function(n,i){if(i.Af()&&i instanceof Y&&null!==i._buttonFillPressed){var a=n.diagram;if(0===a.firstInput.button&&(a.currentTool.standardMouseOver(),t(n,i)&&(n=i.Ya("ButtonBorder"))instanceof wt)){var u=a.skipsUndoManager;a.skipsUndoManager=!0;var h=i._buttonFillPressed;n.fill!==h&&(n.fill=h),n.stroke!==(h=i._buttonStrokePressed)&&(n.stroke=h),a.skipsUndoManager=u}}},e}),Ca("TreeExpanderButton",function(){var t=Sr("Button",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},Sr(wt,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:Ao},new Fe("figure","isTreeExpanded",function(e,n){return n=n.panel,e?n._treeExpandedFigure:n._treeCollapsedFigure}).wq()),{visible:!1},new Fe("visible","isTreeLeaf",function(e){return!e}).wq());return t.click=function(e,n){if((n=n.part)instanceof At&&(n=n.adornedPart),n instanceof Q){var i=n.diagram;if(null!==i){if(i=i.commandHandler,n.isTreeExpanded){if(!i.canCollapseTree(n))return}else if(!i.canExpandTree(n))return;e.handled=!0,n.isTreeExpanded?i.collapseTree(n):i.expandTree(n)}}},t}),Ca("SubGraphExpanderButton",function(){var t=Sr("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},Sr(wt,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:Ao},new Fe("figure","isSubGraphExpanded",function(e,n){return n=n.panel,e?n._subGraphExpandedFigure:n._subGraphCollapsedFigure}).wq()));return t.click=function(e,n){if((n=n.part)instanceof At&&(n=n.adornedPart),n instanceof vt){var i=n.diagram;if(null!==i){if(i=i.commandHandler,n.isSubGraphExpanded){if(!i.canCollapseSubGraph(n))return}else if(!i.canExpandSubGraph(n))return;e.handled=!0,n.isSubGraphExpanded?i.collapseSubGraph(n):i.expandSubGraph(n)}}},t}),Ca("ToolTip",function(){return Sr(At,Y.Auto,{isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new N(0,3),shadowBlur:5},Sr(wt,{name:"Border",figure:"RoundedRectangle",parameter1:1,parameter2:1,fill:"#F5F5F5",stroke:"#F0F0F0",spot1:new ct(0,0,4,6),spot2:new ct(1,1,-4,-4)}))}),Ca("ContextMenu",function(){return Sr(At,Y.Vertical,{background:"#F5F5F5",isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new N(0,3),shadowBlur:5},new Fe("background","",function(t){return null!==t.adornedPart&&null!==t.placeholder?null:"#F5F5F5"}))}),Ca("ContextMenuButton",function(){var t=Sr("Button");t.stretch=Ln;var e=t.Ya("ButtonBorder");return e instanceof wt&&(e.figure="Rectangle",e.strokeWidth=0,e.spot1=new ct(0,0,2,3),e.spot2=new ct(1,1,-2,-2)),t}),Ca("PanelExpanderButton",function(t){var e=tf(t,"COLLAPSIBLE"),n=Sr("Button",{_buttonExpandedFigure:"M0 0 M0 6 L4 2 8 6 M8 8",_buttonCollapsedFigure:"M0 0 M0 2 L4 6 8 2 M8 8",_buttonFillNormal:"rgba(0, 0, 0, 0)",_buttonStrokeNormal:null,_buttonFillOver:"rgba(0, 0, 0, .2)",_buttonStrokeOver:null,_buttonFillPressed:"rgba(0, 0, 0, .4)",_buttonStrokePressed:null},Sr(wt,{name:"ButtonIcon",strokeWidth:2},new Fe("geometryString","visible",function(i){return i?n._buttonExpandedFigure:n._buttonCollapsedFigure}).wq(e)));return(t=n.Ya("ButtonBorder"))instanceof wt&&(t.stroke=null,t.fill="rgba(0, 0, 0, 0)"),n.click=function(i,a){var u=a.diagram;if(null!==u&&!u.isReadOnly){var h=a.yh();null===h&&(h=a.part),null!==h&&null!==(a=h.Ya(e))&&(i.handled=!0,u.wa("Collapse/Expand Panel"),a.visible=!a.visible,u.Xa("Collapse/Expand Panel"))}},n}),Ca("CheckBoxButton",function(t){var e=tf(t);return(t=Sr("Button",{desiredSize:new mt(14,14)},Sr(wt,{name:"ButtonIcon",geometryString:"M0 0 M0 8.85 L4.9 13.75 16.2 2.45 M16.2 16.2",strokeWidth:2,stretch:Ve,geometryStretch:Fo,visible:!1},""!==e?new Fe("visible",e).oy():[]))).click=function(n,i){if(i instanceof Y){var a=n.diagram;if(!(null===a||a.isReadOnly||""!==e&&a.model.isReadOnly)){n.handled=!0;var u=i.Ya("ButtonIcon");a.wa("checkbox"),u.visible=!u.visible,"function"==typeof i._doClick&&i._doClick(n,i),a.Xa("checkbox")}}},t}),Ca("CheckBox",function(t){t=Sr("CheckBoxButton",t=tf(t),{name:"Button",isActionable:!1,margin:new Lt(0,1,0,0)});var e=Sr(Y,"Horizontal",t,{isActionable:!0,cursor:t.cursor,margin:1,_buttonFillNormal:t._buttonFillNormal,_buttonStrokeNormal:t._buttonStrokeNormal,_buttonFillOver:t._buttonFillOver,_buttonStrokeOver:t._buttonStrokeOver,_buttonFillPressed:t._buttonFillPressed,_buttonStrokePressed:t._buttonStrokePressed,_buttonFillDisabled:t._buttonFillDisabled,mouseEnter:t.mouseEnter,mouseLeave:t.mouseLeave,actionDown:t.actionDown,actionUp:t.actionUp,actionCancel:t.actionCancel,actionMove:t.actionMove,click:t.click,_buttonClick:t.click});return t.mouseEnter=null,t.mouseLeave=null,t.actionDown=null,t.actionUp=null,t.actionCancel=null,t.actionMove=null,t.click=null,e}),ut.None=ze=new J(ut,"None",0),ut.Default=Lo=new J(ut,"Default",0),ut.Vertical=En=new J(ut,"Vertical",4),ut.Horizontal=Ln=new J(ut,"Horizontal",5),ut.Fill=Ve=new J(ut,"Fill",3),ut.Uniform=Fo=new J(ut,"Uniform",1),ut.UniformToFill=vc=new J(ut,"UniformToFill",2),ut.FlipVertical=Zu=new J(ut,"FlipVertical",1),ut.FlipHorizontal=Qd=new J(ut,"FlipHorizontal",2),ut.FlipBoth=Ye=new J(ut,"FlipBoth",3),ut.make=Sr,ut.getBuilders=function(){var e,t=new xt;for(e in wc)if(e!==e.toLowerCase()){var n=wc.H(e);"function"==typeof n&&t.add(e,n)}return t.freeze(),t},ut.defineBuilder=Ca,ut.build=function(t,e){var n=wc.H(t);if("function"==typeof n&&(n=n(null))instanceof ut)return e&&n.set(e),n;z('GraphObject.build invoked object builder "'+t+'", but it did not return an Object')},ut.takeBuilderArgument=tf,rg.prototype.copy=function(){var t=new rg;return t.vg=this.vg,t.Dg=this.Dg,t.xg=this.xg,t.Sg=this.Sg,t.Vg=this.Vg,t.Wg=this.Wg,t.Ug=this.Ug,t.Tg=this.Tg,t.Ho=this.Ho,t.Io=this.Io,t.Rg=this.Rg,t.Vm=this.Vm,t.Wm=this.Wm,t.Xm=this.Xm,t.Um=this.Um,t.qh=this.qh,t.yg=this.yg,t.Fn=this.Fn,t},rg.className="GraphObjectEventHandlers",ol.prototype.copy=function(){var t=new ol;return t.Ma[0]=this.Ma[0],t.Ma[1]=this.Ma[1],t.Ma[2]=this.Ma[2],t.Ma[3]=this.Ma[3],t.Ma[4]=this.Ma[4],t.Ma[5]=this.Ma[5],t},ol.prototype.translate=function(t,e){this.Ma[4]+=this.Ma[0]*t+this.Ma[2]*e,this.Ma[5]+=this.Ma[1]*t+this.Ma[3]*e},ol.prototype.scale=function(t,e){this.Ma[0]*=t,this.Ma[1]*=t,this.Ma[2]*=e,this.Ma[3]*=e},ol.className="STransform",Mc.prototype.addColorStop=function(t,e){this.Ix.push({offset:t,color:e})},Mc.className="SGradient",Os.prototype.resize=function(t,e,n,i){return(this.width!==t||this.height!==e)&&(this.style.width=n+"px",this.style.height=i+"px",this.La.setAttributeNS(null,"width",n+"px"),this.La.setAttributeNS(null,"height",i+"px"),this.La.setAttributeNS(null,"viewBox","0 0 "+n+" "+i),this.context.Yw.firstElementChild.setAttributeNS(null,"width",n+"px"),this.context.Yw.firstElementChild.setAttributeNS(null,"height",i+"px"),!0)},Os.prototype.Ob=function(t,e,n){if(t=this.ownerDocument.createElementNS(this.FA,t),Et(e))for(var i in e)t.setAttributeNS("href"===i?"http://www.w3.org/1999/xlink":"",i,e[i]);return void 0!==n&&(t.textContent=n),t},Os.prototype.getBoundingClientRect=function(){return this.La.getBoundingClientRect()},Os.prototype.focus=function(){this.La.focus()},Os.prototype.Ox=function(){this.ownerDocument=null},Dt.Object.defineProperties(Os.prototype,{width:{get:function(){return this.La.width.baseVal.value},set:function(t){this.La.width=t}},height:{get:function(){return this.La.height.baseVal.value},set:function(t){this.La.height=t}},style:{get:function(){return this.La.style}}}),Os.className="SVGSurface",(D=sl.prototype).arc=function(t,e,n,i,a,u,h,d){var f=2*Math.PI,g=f-1e-6,m=n*Math.cos(i),y=n*Math.sin(i),x=t+m,_=e+y,M=u?0:1;i=u?i-a:a-i,(1e-6<Math.abs(h-x)||1e-6<Math.abs(d-_))&&this.path.push(["L",x,+_]),0>i&&(i=i%f+f),i>g?(this.path.push(["A",n,n,0,1,M,t-m,e-y]),this.path.push(["A",n,n,0,1,M,x,_])):1e-6<i&&this.path.push(["A",n,n,0,+(i>=Math.PI),M,t+n*Math.cos(a),e+n*Math.sin(a)])},D.beginPath=function(){this.path=[]},D.bezierCurveTo=function(t,e,n,i,a,u){this.path.push(["C",t,e,n,i,a,u])},D.clearRect=function(){},D.clip=function(){this.addPath("clipPath",this.path,this.Ee)},D.closePath=function(){this.path.push(["z"])},D.createLinearGradient=function(t,e,n,i){var a=new Mc("linear");return a.x1=t,a.y1=e,a.x2=n,a.y2=i,a},D.createPattern=function(t){var e="";t instanceof HTMLCanvasElement&&(e=t.toDataURL()),t instanceof HTMLImageElement&&(e=t.getAttribute("src"));var n=this.HA;if(n[e])return"url(#"+n[e]+")";var i="PATTERN"+Jo++,a={x:0,y:0,width:t.width,height:t.height,href:e};return(t=this.Ob("pattern",{width:t.width,height:t.height,id:i,patternUnits:"userSpaceOnUse"})).appendChild(this.Ob(gc,a)),this.svg.appendChild(t),n[e]=i,"url(#"+i+")"},D.createRadialGradient=function(t,e,n,i,a,u){var h=new Mc("radial");return h.x1=t,h.y1=e,h.r1=n,h.x2=i,h.y2=a,h.r2=u,h},D.drawImage=function(t,e,n,i,a,u,h,d,f){var g="";t instanceof HTMLCanvasElement&&(g=t.toDataURL()),t instanceof HTMLImageElement&&(g=t.getAttribute("src"));var m=t instanceof HTMLImageElement?t.naturalWidth:t.width,y=t instanceof HTMLImageElement?t.naturalHeight:t.height;void 0===i&&(u=e,h=n,d=i=m,f=a=y),i=i||0,a=a||0,u=u||0,h=h||0,f=f||0,t={x:0,y:0,width:m||i,height:y||a,href:g},R.aa(i,d=d||0)&&R.aa(a,f)?-1===g.toLowerCase().indexOf(".svg")&&-1===g.toLowerCase().indexOf("data:image/svg")&&(t.preserveAspectRatio="xMidYMid slice"):t.preserveAspectRatio="none",g="",f/=a,(0!==u||0!==h)&&(g+=" translate("+u+", "+h+")"),(1!=(d/=i)||1!==f)&&(g+=" scale("+d+", "+f+")"),(0!==e||0!==n)&&(g+=" translate("+-e+", "+-n+")"),(0!==e||0!==n||i!==m||a!==y)&&(u="CLIP"+Jo++,(h=this.Ob("clipPath",{id:u})).appendChild(this.Ob("rect",{x:e,y:n,width:i,height:a})),this.svg.appendChild(h),t["clip-path"]="url(#"+u+")"),ef(this,gc,t,this.Ee,g),this.addElement(gc,t)},D.fill=function(){this.addPath("fill",this.path,this.Ee)},D.uf=function(){this.clipInsteadOfFill?this.clip():this.fill()},D.fillRect=function(t,e,n,i){ef(this,"fill",t={x:(t=[t,e,n,i])[0],y:t[1],width:t[2],height:t[3]},this.Ee),this.addElement("rect",t)},D.fillText=function(t,e,n){t=[t,e,n],"left"===(e=this.textAlign)?e="start":"right"===e?e="end":"center"===e&&(e="middle"),ef(this,"fill",e={x:t[1],y:t[2],style:"font: "+this.font,"text-anchor":e},this.Ee),this.addElement("text",e,t[0])},D.lineTo=function(t,e){this.path.push(["L",t,e])},D.moveTo=function(t,e){this.path.push(["M",t,e])},D.quadraticCurveTo=function(t,e,n,i){this.path.push(["Q",t,e,n,i])},D.rect=function(t,e,n,i){this.path.push(["M",t,e],["L",t+n,e],["L",t+n,e+i],["L",t,e+i],["z"])},D.restore=function(){this.Ee=this.stack.pop(),this.path=this.stack.pop();var t=this.stack.pop();this.fillStyle=t.fillStyle,this.font=t.font,this.globalAlpha=t.globalAlpha,this.lineCap=t.lineCap,this.lineDashOffset=t.lineDashOffset,this.lineJoin=t.lineJoin,this.lineWidth=t.lineWidth,this.miterLimit=t.miterLimit,this.shadowBlur=t.shadowBlur,this.shadowColor=t.shadowColor,this.shadowOffsetX=t.shadowOffsetX,this.shadowOffsetY=t.shadowOffsetY,this.strokeStyle=t.strokeStyle,this.textAlign=t.textAlign},D.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,lineDashOffset:this.lineDashOffset,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign});for(var t=[],e=0;e<this.path.length;e++)t.push(this.path[e]);this.stack.push(t),this.stack.push(this.Ee.copy())},D.setTransform=function(t,e,n,i,a,u){1===t&&0===e&&0===n&&1===i&&0===a&&0===u||Er(this,t,e,n,i,a,u)},D.scale=function(t,e){this.Ee.scale(t,e)},D.translate=function(t,e){this.Ee.translate(t,e)},D.transform=function(){},D.Bd=function(){},D.stroke=function(){this.addPath("stroke",this.path,this.Ee)},D.Xi=function(){this.clipInsteadOfFill||this.stroke()},D.Ob=function(t,e,n){return this.jt.Ob(t,e,n)},D.addElement=function(t,e,n){return t=this.Ob(t,e,n),0<this.dd.length?this.dd[this.dd.length-1].appendChild(t):this.svg.appendChild(t),this.Rs=t},D.addPath=function(t,e,n){for(var i=[],a=0;a<e.length;a++){var u=Xi(e[a]),h=[u.shift()];if("A"===h[0])h.push(u.shift()+","+u.shift(),u.shift(),u.shift()+","+u.shift(),u.shift()+","+u.shift());else for(;u.length;)h.push(u.shift()+","+u.shift());i.push(h.join(" "))}e={d:i.join(" ")},"stroke"===t&&this.Yt&&(e["stroke-dasharray"]=this.ih.toString(),e["stroke-dashoffset"]=this.jh),ef(this,t,e,n),"clipPath"===t?(t="CLIP"+Jo++,(n=this.Ob("clipPath",{id:t})).appendChild(this.Ob("path",e)),this.svg.appendChild(n),0<this.dd.length&&this.dd[this.dd.length-1].setAttributeNS(null,"clip-path","url(#"+t+")")):this.addElement("path",e)},D.Jm=function(t){if(0!==this.shadowOffsetX||0!==this.shadowOffsetY||0!==this.shadowBlur){var e="SHADOW"+Jo++,n=this.addElement("filter",{id:e,x:"-100%",y:"-100%",width:"300%",height:"300%"},null),i=t.computePixelRatio();t=this.Ob("feGaussianBlur",{in:"SourceAlpha",result:"blur",stdDeviation:this.shadowBlur/2/i});var a=this.Ob("feFlood",{in:"blur",result:"flood","flood-color":this.shadowColor}),u=this.Ob("feComposite",{in:"flood",in2:"blur",operator:"in",result:"comp"});i=this.Ob("feOffset",{in:"comp",result:"offsetBlur",dx:this.shadowOffsetX/i,dy:this.shadowOffsetY/i});var h=this.Ob("feMerge",{});h.appendChild(this.Ob("feMergeNode",{in:"offsetBlur"})),h.appendChild(this.Ob("feMergeNode",{in:"SourceGraphic"})),n.appendChild(t),n.appendChild(a),n.appendChild(u),n.appendChild(i),n.appendChild(h),0<this.dd.length&&this.dd[this.dd.length-1].setAttributeNS(null,"filter","url(#"+e+")")}},D.bw=function(t,e,n){this.es=t,this.fs=e,this.bg=n},D.As=function(t,e){this.Yt=!0,this.ih=t,this.jh=e},D.ys=function(){this.Yt=!1},D.Ec=function(){},D.Cy=function(){},sl.prototype.rotate=function(){},sl.prototype.getImageData=function(){return null},sl.prototype.measureText=function(){return null},sl.className="SVGContext",j.prototype.makeSvg=j.prototype.Vs=function(t){var e=new Os(this,dt.document);void 0===t&&(t=new Nn);var n=this;return Wx(this,function(i,a){return i=null!==(i=$M(n,i,"SVG",e))?i.svg:null,"function"==typeof a?(a(i),null):i},t)},j.prototype.makeSVG=j.prototype.Gv=function(t){return this.Vs(t)},ut.prototype.Px=function(t,e){if(!(t instanceof sl))return!1;var n=null,i=t.Rs,a=this.transform,u=this.panel;0!=(4096&this.G)&&eg(this);var h=this.vb,d=0!=(256&this.G);t.clipInsteadOfFill&&(d=!1);var f=!1;if(this instanceof Zt&&(t.font=this.font),d){if(f=u.he()?u.naturalBounds:u.actualBounds,null!==this.$a){var g=this.$a,m=g.x,y=g.y,x=g.width;g=g.height}else m=Math.max(h.x,f.x),y=Math.max(h.y,f.y),x=Math.min(h.right,f.right)-m,g=Math.min(h.bottom,f.bottom)-y;if(m>h.width+h.x||h.x>f.width+f.x||y>h.height+h.y||h.y>f.height+f.y)return!0;f=!0,Er(t,1,0,0,1,0,0),t.save(),t.beginPath(),t.rect(m,y,x,g),t.clip()}return this.Ri()&&!this.isVisible()||(t.Ee.Ma=[1,0,0,1,0,0],(this instanceof Zt&&1<this.lineCount||this instanceof wt&&1<this.geometry.figures.length)&&Er(t,1,0,0,1,0,0),m=!1,this.Ri()&&this.isShadowed&&e.Fe("drawShadows")&&(t.bw((y=this.shadowOffset).x*e.scale*e.ac,y.y*e.scale*e.ac,this.shadowBlur),Da(t),t.shadowColor=this.shadowColor),y=!1,this.part&&e.Fe("drawShadows")&&(y=this.part.isShadowed),t.clipInsteadOfFill&&(y=!1),!0===this.shadowVisible?(Da(t),!1===m&&y&&(Er(t,1,0,0,1,0,0),t.Jm(e),m=!0)):!1===this.shadowVisible&&Fs(t),x=this.naturalBounds,null!==this.areaBackground&&(dr(this,t,this.areaBackground,!0,!0,x,h),!1===m&&y&&(Er(t,1,0,0,1,0,0),t.Jm(e),m=!0),this.areaBackground instanceof Bt&&this.areaBackground.type===Tr?(t.beginPath(),t.rect(h.x,h.y,h.width,h.height),t.uf(this.areaBackground)):t.fillRect(h.x,h.y,h.width,h.height)),g=!1,this instanceof Y?Er(t,a.m11,a.m12,a.m21,a.m22,a.dx,a.dy):(t.Ee.Ma=[a.m11,a.m12,a.m21,a.m22,a.dx,a.dy],!1===m&&y&&(g=!0)),null!==this.background&&(!1===m&&y&&(Er(t,1,0,0,1,0,0),t.Jm(e),m=!0),ew(this,t,x,h)),y&&(null!==this.background||null!==this.areaBackground||null!==u&&0!=(512&u.G)||null!==u&&(u.type===Y.Auto||u.type===Y.Spot)&&u.nb()!==this)?($l(this,!0),null===this.shadowVisible&&Fs(t),g=!1):$l(this,!1),g&&!1===m&&(Er(t,1,0,0,1,0,0),t.Jm(e),m=!0),this.Fi(t,e),y&&0!=(512&this.G)&&Da(t),this.Ri()&&y&&Fs(t),d&&(t.restore(),f&&t.dd.pop()),this instanceof Y&&(n=t.dd.pop()),!0===m&&t.dd.pop(),(this instanceof Zt&&1<this.lineCount||this instanceof wt&&1<this.geometry.figures.length)&&(n=t.dd.pop()),null!==t.jt.gq&&(null===n&&(i===t.Rs?(Er(t,1,0,0,1,0,0),n=t.dd.pop()):n=t.Rs),t.jt.gq(this,n)),this.svg=n),!0},Hr.prototype.resize=function(t,e,n,i){return(this.width!==t||this.height!==e)&&(this.width=t,this.height=e,this.style.width=n+"px",this.style.height=i+"px",!0)},Hr.prototype.toDataURL=function(t,e){return this.La.toDataURL(t,e)},Hr.prototype.getBoundingClientRect=function(){return this.La.getBoundingClientRect()},Hr.prototype.focus=function(){this.La.focus()},Hr.prototype.Ox=function(){this.ownerDocument=this.La.F=null},Dt.Object.defineProperties(Hr.prototype,{width:{get:function(){return this.La.width},set:function(t){this.La.width=t}},height:{get:function(){return this.La.height},set:function(t){this.La.height=t}},style:{get:function(){return this.La.style}}}),Hr.className="CanvasSurface",(D=Zl.prototype).Cy=function(t){this.Y.imageSmoothingEnabled=t},D.arc=function(t,e,n,i,a,u){this.Y.arc(t,e,n,i,a,u)},D.beginPath=function(){this.Y.beginPath()},D.bezierCurveTo=function(t,e,n,i,a,u){this.Y.bezierCurveTo(t,e,n,i,a,u)},D.clearRect=function(t,e,n,i){this.Bd(),this.Y.clearRect(t,e,n,i)},D.clip=function(){this.Y.clip()},D.closePath=function(){this.Y.closePath()},D.createLinearGradient=function(t,e,n,i){return this.Y.createLinearGradient(t,e,n,i)},D.createPattern=function(t,e){return this.Y.createPattern(t,e)},D.createRadialGradient=function(t,e,n,i,a,u){return this.Y.createRadialGradient(t,e,n,i,a,u)},D.drawImage=function(t,e,n,i,a,u,h,d,f){void 0===i?this.Y.drawImage(t,e,n):this.Y.drawImage(t,e,n,i,a,u,h,d,f)},D.fill=function(){this.Y.fill()},D.fillRect=function(t,e,n,i){this.Y.fillRect(t,e,n,i)},D.fillText=function(t,e,n){this.Y.fillText(t,e,n)},D.getImageData=function(t,e,n,i){return this.Y.getImageData(t,e,n,i)},D.lineTo=function(t,e){this.Y.lineTo(t,e)},D.measureText=function(t){return this.Y.measureText(t)},D.moveTo=function(t,e){this.Y.moveTo(t,e)},D.quadraticCurveTo=function(t,e,n,i){this.Y.quadraticCurveTo(t,e,n,i)},D.rect=function(t,e,n,i){this.Y.rect(t,e,n,i)},D.restore=function(){this.Y.restore()},D.save=function(){this.Bd(),this.Y.save()},Zl.prototype.rotate=function(t){this.dm.rotate(57.2958*t,0,0)},(D=Zl.prototype).setTransform=function(t,e,n,i,a,u){this.dm.setTransform(t,e,n,i,a,u)},D.scale=function(t,e){this.dm.scale(t,e)},D.translate=function(t,e){this.dm.translate(t,e)},D.stroke=function(){this.Y.stroke()},D.transform=function(t,e,n,i,a,u){if(1!==t||0!==e||0!==n||1!==i||0!==a||0!==u){var h=this.dm,d=h.m11*t+h.m21*e;t=h.m12*t+h.m22*e,e=h.m11*n+h.m21*i,n=h.m12*n+h.m22*i,h.dx=h.m11*a+h.m21*u+h.dx,h.dy=h.m12*a+h.m22*u+h.dy,h.m11=d,h.m12=t,h.m21=e,h.m22=n}},D.Bd=function(){var t=this.dm;this.Y.setTransform(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy)},D.uf=function(t){if(t instanceof Bt&&t.type===Tr){var e=t.Pk;(t=t.At)>e?(this.scale(e/t,1),this.translate((t-e)/2,0)):e>t&&(this.scale(1,t/e),this.translate(0,(e-t)/2)),this.hn?this.clip():this.fill(),t>e?(this.translate(-(t-e)/2,0),this.scale(1/(e/t),1)):e>t&&(this.translate(0,-(e-t)/2),this.scale(1,1/(t/e)))}else this.hn?this.clip():this.fill()},D.Xi=function(){this.hn||this.stroke()},D.bw=function(t,e,n){this.es=t,this.fs=e,this.bg=n},D.As=function(t,e){var n=this.Y;void 0!==n.setLineDash&&(n.setLineDash(t),n.lineDashOffset=e)},D.ys=function(){var t=this.Y;void 0!==t.setLineDash&&(t.setLineDash(JM),t.lineDashOffset=0)},D.Ec=function(t){t&&(this.yt=""),this.xt=this.zt=""},Dt.Object.defineProperties(Zl.prototype,{fillStyle:{get:function(){return this.Y.fillStyle},set:function(t){this.xt!==t&&(this.xt=this.Y.fillStyle=t)}},font:{get:function(){return this.Y.font},set:function(t){this.yt!==t&&(this.yt=this.Y.font=t)}},globalAlpha:{get:function(){return this.Y.globalAlpha},set:function(t){this.Y.globalAlpha=t}},lineCap:{get:function(){return this.Y.lineCap},set:function(t){this.Y.lineCap=t}},lineDashOffset:{get:function(){return this.Y.lineDashOffset},set:function(t){this.Y.lineDashOffset=t}},lineJoin:{get:function(){return this.Y.lineJoin},set:function(t){this.Y.lineJoin=t}},lineWidth:{get:function(){return this.Y.lineWidth},set:function(t){this.Y.lineWidth=t}},miterLimit:{get:function(){return this.Y.miterLimit},set:function(t){this.Y.miterLimit=t}},shadowBlur:{get:function(){return this.Y.shadowBlur},set:function(t){this.Y.shadowBlur=t}},shadowColor:{get:function(){return this.Y.shadowColor},set:function(t){this.Y.shadowColor=t}},shadowOffsetX:{get:function(){return this.Y.shadowOffsetX},set:function(t){this.Y.shadowOffsetX=t}},shadowOffsetY:{get:function(){return this.Y.shadowOffsetY},set:function(t){this.Y.shadowOffsetY=t}},strokeStyle:{get:function(){return this.Y.strokeStyle},set:function(t){this.zt!==t&&(this.zt=this.Y.strokeStyle=t)}},textAlign:{get:function(){return this.Y.textAlign},set:function(t){this.Y.textAlign=t}},imageSmoothingEnabled:{get:function(){return this.Y.imageSmoothingEnabled},set:function(t){this.Y.imageSmoothingEnabled=t}},clipInsteadOfFill:{get:function(){return this.hn},set:function(t){this.hn=t}}});var JM=Object.freeze([]);function _c(){this.M=this.o=this.C=this.j=0}function Bt(t,e){tu||(sw(),tu=!0),xn(this),this.v=!1,void 0===t?(this.ia=rs,this.Ok="black"):"string"==typeof t?(this.ia=rs,this.Ok=t):(this.ia=t,this.Ok="black"),(t=this.ia)===os?(this.zd=go,this.bl=Jh):this.bl=this.zd=t===Tr?Wt:An,this.js=0,this.jr=NaN,this.ke=this.Ur=this.je=null,this.At=this.Pk=0,e&&Object.assign(this,e)}function iw(t,e,n){return e=void 0===e||"number"!=typeof e?.2:e,n=void 0===n?eu:n,Ls(t),Dc(e,n)}function rw(t,e,n){return e=void 0===e||"number"!=typeof e?.2:e,n=void 0===n?eu:n,Ls(t),Dc(-e,n)}function Gy(t,e,n){Ls(t),t=Qt.j;var i=Qt.C,a=Qt.o,u=Qt.M;return Ls(e),void 0===n&&(n=.5),"rgba("+Math.round((Qt.j-t)*n+t)+", "+Math.round((Qt.C-i)*n+i)+", "+Math.round((Qt.o-a)*n+a)+", "+Math.round((Qt.M-u)*n+u)+")"}function Cc(t){return!!t&&(t instanceof Bt?t.jy():(Ls(t),128>(299*Qt.j+587*Qt.C+114*Qt.o)/1e3))}function Dc(t,e){switch(e){case eu:e=100*Jl(Qt.j);var n=100*Jl(Qt.C),i=100*Jl(Qt.o);return si.j=.4124564*e+.3575761*n+.1804375*i,si.C=.2126729*e+.7151522*n+.072175*i,si.o=.0193339*e+.119192*n+.9503041*i,si.M=Qt.M,e=ow(si.j/ql[0]),n=ow(si.C/ql[1]),i=ow(si.o/ql[2]),Ro.j=116*n-16,Ro.C=500*(e-n),Ro.o=200*(n-i),Ro.M=si.M,Ro.j=Math.min(100,Math.max(0,Ro.j+100*t)),e=(t=(Ro.j+16)/116)-Ro.o/200,si.j=ql[0]*QM(Ro.C/500+t),si.C=ql[1]*(Ro.j>Sc*eo?Math.pow(t,3):Ro.j/Sc),si.o=ql[2]*QM(e),si.M=Ro.M,t=-.969266*si.j+1.8760108*si.C+.041556*si.o,e=.0556434*si.j+-.2040259*si.C+1.0572252*si.o,Qt.j=255*is((3.2404542*si.j+-1.5371385*si.C+-.4985314*si.o)/100),Qt.C=255*is(t/100),Qt.o=255*is(e/100),Qt.M=si.M,Qt.j=Math.round(Qt.j),255<Qt.j?Qt.j=255:0>Qt.j&&(Qt.j=0),Qt.C=Math.round(Qt.C),255<Qt.C?Qt.C=255:0>Qt.C&&(Qt.C=0),Qt.o=Math.round(Qt.o),255<Qt.o?Qt.o=255:0>Qt.o&&(Qt.o=0),"rgba("+Qt.j+", "+Qt.C+", "+Qt.o+", "+Qt.M+")";case Xy:return zy(),mi.o=Math.min(100,Math.max(0,mi.o+100*t)),"hsla("+mi.j+", "+mi.C+"%, "+mi.o+"%, "+mi.M+")";default:z("Unknown color space: "+e)}}function Ls(t){tu||(sw(),tu=!0);var e=Yy;if(null!==e){e.clearRect(0,0,1,1),e.fillStyle="#000000";var n=e.fillStyle;e.fillStyle=t,e.fillStyle!==n?(e.fillRect(0,0,1,1),t=e.getImageData(0,0,1,1).data,Qt.j=t[0],Qt.C=t[1],Qt.o=t[2],Qt.M=t[3]/255):(e.fillStyle="#FFFFFF",e.fillStyle=t,Qt.j=0,Qt.C=0,Qt.o=0,Qt.M=1)}}function zy(){var t=Qt.j/255,e=Qt.C/255,n=Qt.o/255,i=Math.max(t,e,n),a=Math.min(t,e,n),u=i-a;if(a=(i+a)/2,0===u)var h=t=0;else{switch(i){case t:h=(e-n)/u%6;break;case e:h=(n-t)/u+2;break;case n:h=(t-e)/u+4}0>(h*=60)&&(h+=360),t=u/(1-Math.abs(2*a-1))}mi.j=Math.round(h),mi.C=Math.round(100*t),mi.o=Math.round(100*a),mi.M=Qt.M}function Jl(t){return.04045>=(t/=255)?t/12.92:Math.pow((t+.055)/1.055,2.4)}function is(t){return.0031308>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055}function ow(t){return t>eo?Math.pow(t,1/3):(Sc*t+16)/116}function QM(t){var e=t*t*t;return e>eo?e:(116*t-16)/Sc}function Ql(t,e){"string"!=typeof t&&(t instanceof Bt||z("Value for "+e+" must be a color string or a Brush, not "+t))}function sw(){Yy=Ur?new Hr(null).context:null}Zl.className="CanvasSurfaceContext",_c.className="ColorNumbers",Bt.prototype.copy=function(){var t=new Bt;return t.ia=this.ia,t.Ok=this.Ok,t.zd=this.zd.I(),t.bl=this.bl.I(),t.js=this.js,t.jr=this.jr,null!==this.je&&(t.je=this.je.copy()),t.Ur=this.Ur,t},(D=Bt.prototype).freeze=function(){return this.v=!0,null!==this.je&&this.je.freeze(),this},D.ea=function(){return Object.isFrozen(this)&&z("cannot thaw constant: "+this),this.v=!1,null!==this.je&&this.je.ea(),this},D.gb=function(t){t.classType===Bt&&(this.type=t)},D.toString=function(){var t="Brush(";if(this.type===rs)t+=this.color;else if(t=this.type===os?t+"Linear ":this.type===Tr?t+"Radial ":this.type===Rs?t+"Pattern ":t+"(unknown) ",t+=this.start+" "+this.end,null!==this.colorStops)for(var e=this.colorStops.iterator;e.next();)t+=" "+e.key+":"+e.value;return t+")"},D.addColorStop=function(t,e){return this.v&&bt(this),("number"!=typeof t||!isFinite(t)||1<t||0>t)&&me(t,"0 <= loc <= 1",Bt,"addColorStop:loc"),null===this.je&&(this.je=new xt),this.je.add(t,e),this.ia===rs&&(this.type=os),this.ke=null,this},D.yA=function(t,e){if(this.v&&bt(this),t=void 0===t||"number"!=typeof t?.2:t,e=void 0===e?eu:e,this.type===rs)Ls(this.color),this.color=Dc(t,e);else if((this.type===os||this.type===Tr)&&null!==this.colorStops)for(var n=this.colorStops.iterator;n.next();)Ls(n.value),this.addColorStop(n.key,Dc(t,e));return this},D.Az=function(t,e){if(this.v&&bt(this),t=void 0===t||"number"!=typeof t?.2:t,e=void 0===e?eu:e,this.type===rs)Ls(this.color),this.color=Dc(-t,e);else if((this.type===os||this.type===Tr)&&null!==this.colorStops)for(var n=this.colorStops.iterator;n.next();)Ls(n.value),this.addColorStop(n.key,Dc(-t,e));return this},D.jy=function(){if(this.type===rs)return Cc(this.color);if((this.type===os||this.type===Tr)&&null!==this.colorStops){var t=this.colorStops;if(this.type===Tr)return Cc(t.first().value);if(null!==t.get(.5))return Cc(t.get(.5));if(2===t.count)return Cc(Gy((t=t.xa())[0].value,t[1].value));for(var e=t.iterator,n=-1,i=-1,a=1,u=1;e.next();){var h=e.key,d=Math.abs(.5-e.key);a>u&&d<a?(n=h,a=d):u>=a&&d<u&&(i=h,u=d)}return n>i&&(u=n,n=i,i=u,u=a),a=i-n,Cc(Gy(t.get(n),t.get(i),1-u/a))}return!1},Dt.Object.defineProperties(Bt.prototype,{type:{get:function(){return this.ia},set:function(t){this.v&&bt(this,t),this.ia=t,this.start.wc()&&(t===os?this.start=go:t===Tr&&(this.start=Wt)),this.end.wc()&&(t===os?this.end=Jh:t===Tr&&(this.end=Wt)),this.ke=null}},color:{get:function(){return this.Ok},set:function(t){this.v&&bt(this,t),this.Ok=t,this.ke=null}},start:{get:function(){return this.zd},set:function(t){this.v&&bt(this,t),this.zd=t.I(),this.ke=null}},end:{get:function(){return this.bl},set:function(t){this.v&&bt(this,t),this.bl=t.I(),this.ke=null}},startRadius:{get:function(){return this.js},set:function(t){this.v&&bt(this,t),0>t&&me(t,">= zero",Bt,"startRadius"),this.js=t,this.ke=null}},endRadius:{get:function(){return this.jr},set:function(t){this.v&&bt(this,t),0>t&&me(t,">= zero",Bt,"endRadius"),this.jr=t,this.ke=null}},colorStops:{get:function(){return this.je},set:function(t){this.v&&bt(this,t),this.je=t,this.ke=null}},pattern:{get:function(){return this.Ur},set:function(t){this.v&&bt(this,t),this.Ur=t,this.ke=null}}}),Bt.prototype.isDark=Bt.prototype.jy,Bt.prototype.darkenBy=Bt.prototype.Az,Bt.prototype.lightenBy=Bt.prototype.yA,Bt.prototype.addColorStop=Bt.prototype.addColorStop;var rs,os,Tr,Rs,eu,Xy,eo=216/24389,Sc=24389/27,ql=[95.047,100,108.883],Yy=null,Qt=new _c,mi=new _c,si=new _c,Ro=new _c,tu=!1;function tn(){this.na="Base"}function Ec(){this.na="Base"}function og(){this.na="Base"}function sg(){this.na="Base"}function ag(){this.na="Base"}function $y(t,e,n){var i=null;if(t instanceof Y&&""!==t.Oe&&(i=t.Ya(t.Oe))===t&&(i=null),null!==i)for(n&&t.arrange(0,0,e.width,e.height),e.assign(i.actualBounds),i=i.panel;i!==t;)i.transform.Jq(e),i=i.panel}function lg(){this.na="Base"}function ug(){this.na="Base",this.name="Table"}function nf(){this.na="Base"}function Tc(){this.na="Base"}function rf(){this.na="Base"}function Qu(){this.na="Base"}function hg(t,e,n,i){if(0>e)return t%e===n;if(t%e!==n)return!1;e=i.length;for(var a=0;a<e;a++)if(t%i[a]===n)return!1;return!0}function cg(){this.na="Base"}function Wy(t,e,n,i){if(!1!==Rn(i)){var a=i.strokeWidth;0===a&&t instanceof At&&t.type===Y.Link&&t.adornedObject instanceof wt&&(a=t.adornedObject.strokeWidth),a*=i.sa,t instanceof X&&null!==t.ma?i.ue((t=t.ma.bounds).x-a/2,t.y-a/2,t.width+a,t.height+a):t instanceof At&&null!==t.adornedPart.ma?i.ue((t=t.adornedPart.ma.bounds).x-a/2,t.y-a/2,t.width+a,t.height+a):i.ue(-a/2,-a/2,e+a,n+a),Di(i,!1)}}function kc(){this.na="Base"}function Y(t,e){if(ut.call(this),this.ia=null,void 0===t)this.ia=Y.Position;else if("string"==typeof t){var n=no.H(t);null!==n&&(this.ia=n)}else t instanceof tn?this.ia=t:t&&(this.ia=Y.Position,e=t);null===this.ia&&z("Panel type not specified or PanelLayout not loaded: "+t),this.T=new et,this.mb=Kh,this.ia===Y.Grid&&(this.G|=1048576),this.wn=Fi,this.Kf=Lo,this.ia===Y.Table&&Ky(this),this.Sp=Fo,this.Vn=Mr,this.Wn=ha,this.Sn=0,this.Rn=100,this.Un=10,this.Tn=0,this.Ph=this.ib=this.Nf=this.Kg=this.tj=null,this.oo=NaN,this.se=this.bi=null,this.pl="category",this.Xd=null,this.dg=new B(NaN,NaN,NaN,NaN),this.mh=this.pp=this.lh=null,this.Oe="",e&&Object.assign(this,e)}function Ky(t){t.oj=Kh,t.Bg=1,t.Vh=null,t.Uh=null,t.Ag=1,t.zg=null,t.Th=null,t.Db=[],t.yb=[],t.Pj=ff,t.nj=ff,t.wi=0,t.fi=0}function Zy(t,e,n,i){for(var a=i.length,u=t.actualBounds,h=t.naturalBounds,d=!0,f=0;f<a;f++){var g=i[f];if(void 0!==g)if(d)d=!1;else if(0!==g.actual){if(n){if(g.position>u.height)continue}else if(g.position>u.width)continue;var m=g.separatorStrokeWidth;isNaN(m)&&(m=n?t.Bg:t.Ag);var y=g.separatorStroke;if(null===y&&(y=n?t.Vh:t.zg),0!==m&&null!==y){dr(t,e,y,!1,!1,h,u),y=!1;var x=g.separatorDashArray;null===x&&(x=n?t.Uh:t.Th),null!==x&&(y=!0,e.As(x,0)),e.beginPath(),x=g.position+m,n?x>u.height&&(m-=x-u.height):x>u.width&&(m-=x-u.width),g=g.position+m/2,e.lineWidth=m,m=t.mb,n?(x=u.width-m.right,e.moveTo(m.left,g+=m.top),e.lineTo(x,g)):(x=u.height-m.bottom,e.moveTo(g+=m.left,m.top),e.lineTo(g,x)),e.stroke(),y&&e.ys()}}}}function dg(t,e,n,i,a){for(var u=i.length,h=t.actualBounds,d=t.naturalBounds,f=of(t,!0),g=of(t,!1),m=0;m<u;m++){var y=i[m];if(void 0!==y&&null!==y.background&&y.coversSeparators!==a&&0!==y.actual){var x=n?h.height:h.width;if(!(y.position>x)){var _=y.Fc(),M=y.separatorStrokeWidth;isNaN(M)&&(M=n?t.Bg:t.Ag);var S=y.separatorStroke;null===S&&(S=n?t.Vh:t.zg),(null===S||y.index===(n?f:g))&&(M=0),_-=M,(M=y.position+M)+(_+=y.actual)>x&&(_=x-M),0>=_||(x=t.mb,dr(t,e,y.background,!0,!1,d,h),n?e.fillRect(x.left,M+x.top,h.width-(x.left+x.right),_):e.fillRect(M+x.left,x.top,_,h.height-(x.top+x.bottom)))}}}}function of(t,e){for(var n=e?t.Db.length:t.yb.length,i=0;i<n;i++){var a=e?t.Db[i]:t.yb[i];if(void 0!==a)return a.index}return 0}function Jy(t){return"LineV"===t||"BarV"===t}function ss(t){return null!==t.part?t.part.locationObject:null}function al(t,e){Qy(t,t,e)}function Qy(t,e,n){n(e);for(var i=(e=e.T.m).length,a=0;a<i;a++){var u=e[a];u instanceof Y&&Qy(t,u,n)}}function qy(t,e){tv(t,t,e)}function tv(t,e,n){if(n(e),e instanceof Y)for(var i=(e=e.T.m).length,a=0;a<i;a++)tv(t,e[a],n)}function sf(t,e,n){if(n(e))return e;if(e instanceof Y)for(var i=(e=e.T.m).length,a=0;a<i;a++){var u=sf(t,e[a],n);if(null!==u)return u}return null}function af(t){for(var e=(t=t.T.m).length,n=0,i=0;i<e;i++){var a=t[i];a instanceof Y?n=Math.max(n,af(a)):a instanceof wt&&(n=Math.max(n,a.cg/2*a.Uj*a.wf()))}return n}function fg(t,e,n,i){for(var a=t.T.m,u=a.length;u--;){var h=a[u];if(h.visible){var d=h.actualBounds,f=t.naturalBounds;d.x>f.width||d.y>f.height||0>d.x+d.width||0>d.y+d.height||(h instanceof Y&&fg(h,e,n,i),null!==e&&(h=e(h)),null===h||null!==n&&!n(h)||i.add(h))}}}function lf(t){var e=null;return t instanceof wt&&((e=t.spot1)===Fi&&(e=null),null!==(t=t.geometry)&&null===e&&(e=t.spot1)),null===e&&(e=zn),e}function pg(t){var e=null;return t instanceof wt&&((e=t.spot2)===Fi&&(e=null),null!==(t=t.geometry)&&null===e&&(e=t.spot2)),null===e&&(e=ks),e}function uf(t,e){t.G=e?16777216|t.G:-16777217&t.G}function Nc(t,e,n){var i=t.Db;if(i&&!(0>e)){if(i[e]=n instanceof en?n:void 0,!n)for(e=i.length-1;0<=e&&void 0===i[e--];)i.length--;t.s()}}function aw(t,e,n){var i=t.yb;if(i&&!(0>e)){if(i[e]=n instanceof en?n:void 0,!n)for(e=i.length-1;0<=e&&void 0===i[e--];)i.length--;t.s()}}function ev(t){return null!==(t=t.Ph)&&t.v}function Gr(t){var e=t.Ph;if(null===e)null!==t.data&&z("Template cannot have .data be non-null: "+t),t.Ph=e=new et;else if(e.v)return;var n=new et;uf(t,!1),t.Mm(t,function(g,m){var y=m.fb;if(null!==y)for(qd(m,!1),y=y.iterator;y.next();){var x=y.value;x.mode===sm&&qd(m,!0);var _=x.sourceName;null!==_&&("/"===_&&uf(g,!0),null!==(_=Rw(x,g,m))&&(n.add(_),null===_.Rl&&(_.Rl=new et),_.Rl.add(x))),e.add(x)}if(m instanceof Y&&m.type===Y.Table){if(0<m.Db.length)for(y=(g=m.Db).length,x=0;x<y;x++)if(void 0!==(_=g[x])&&null!==_.fb)for(var M=_.fb.iterator;M.next();){var S=M.value;S.md=_,S.Jp=2,S.Xl=_.index,e.add(S)}if(0<m.yb.length)for(g=(m=m.yb).length,y=0;y<g;y++)if(void 0!==(x=m[y])&&null!==x.fb)for(_=x.fb.iterator;_.next();)(M=_.value).md=x,M.Jp=1,M.Xl=x.index,e.add(M)}});for(var i=n.iterator;i.next();){var a=i.value;if(null!==a.Rl){qd(a,!0);for(var u=a.Rl.iterator;u.next();){var h=u.value;null===a.fb&&(a.fb=new et),a.fb.add(h)}}a.Rl=null}for(i=e.iterator;i.next();)if(null!==(u=(a=i.value).md)){a.md=null;var d=a.targetProperty,f=d.indexOf(".");0<f&&u instanceof Y&&(h=d.substring(0,f),d=d.substr(f+1),null!==(f=u.Ya(h))?(u=f,a.targetProperty=d):Oi('Warning: unable to find GraphObject named "'+h+'" for Binding: '+a.toString())),u instanceof en?(h=Jt(u.panel),a.Yi=void 0===h?-1:h,u.panel.Mk=a.Yi):u instanceof ut?(h=Jt(u),a.Yi=void 0===h?-1:h,u.Mk=a.Yi):z("Unknown type of binding target: "+u)}e.freeze(),t instanceof ht&&t.Jc()&&t.Sa()}function Pc(t){if(t.type===Y.Spot||t.type===Y.Auto)return Math.min(t.T.length,1);if(t.type===Y.Link){for(var e=(t=t.T).length,n=0;n<e;n++){var i=t.J(n);if(!(i instanceof wt&&i.isPanelMain))break}return n}return t.type===Y.Table&&0<t.T.length&&(t=t.T.J(0)).isPanelMain&&t instanceof Y&&(t.type===Y.TableRow||t.type===Y.TableColumn)?1:0}function gg(t,e){var n=Pc(t);if(null===e||0===e.length)for(;t.T.length>n;)t.bc(t.T.length-1,!1);else if(t.T.length<=n){n=e.length;for(var i=0;i<n;i++)hf(t,e[i],i,!0)}else{i=n;for(var a=0;a<e.length;a++,i++){var u=e[a],h=i<t.T.length?t.T.J(i):null;if(h instanceof Y){if(h.data!==u){var d=mg(t,h.data),f=mg(t,u),g=f!==d;g||(d=nv(t,d),g=nv(t,f)!==d),g?(t.bc(i,!1),hf(t,u,a,!1)):h.data=u}}else hf(t,u,a,!1)}for(;i<t.T.length;)t.bc(i,!1);t.lh=null,lw(t,n,0),Rn(t)||t.s(),t.Nf=null,t.Af()||cf(t,t,!1),null!==(e=t.part)&&(e.li=null,e.Sf=NaN,t.Ge&&e instanceof Q&&(e.Ge=!0),e.Ge&&e instanceof Q&&(e.kc=null))}}function hf(t,e,n,i){if(!(null==e||0>n)){var a=mg(t,e);if(null!==(a=nv(t,a))){if(Gr(a),0!=(16777216&(a=a.copy()).G)){var u=t.yh();null!==u&&uf(u,!0)}"object"==typeof e&&(null===t.Xd&&(t.Xd=new xt),t.Xd.add(e,a)),u=n+Pc(t),t.ub(u,a),i&&(a.ib=e,lw(t,u,n),a.ib=null),a.data=e}}}function lw(t,e,n){for(t=t.T;e<t.length;){var i=t.J(e);if(i instanceof Y){var a=e,u=n;i.type===Y.TableRow?i.row=a:i.type===Y.TableColumn&&(i.column=a),i.itemIndex=u}e++,n++}}function mg(t,e){if(null===e)return"";if("function"==typeof(t=t.pl))t=t(e);else{if("string"!=typeof t||"object"!=typeof e)return"";if(""===t)return"";t=je(e,t)}return void 0===t?"":"string"==typeof t?t:void z("Panel.getCategoryForItemData found a non-string category for "+e+": "+t)}function nv(t,e){var n=t.itemTemplateMap,i=null;return null!==n&&(i=n.H(e)),null===i&&(null!==n&&(i=n.H("")),null===i&&(uw||(uw=!0,Oi('No item template Panel found for category "'+e+'" on '+t),Oi("  Using default item template."),t=new Y,(e=new Zt).bind(new Fe("text","",sr)),t.add(e),as=t),i=as)),i}function cf(t,e,n){var i=e.enabledChanged;if(null!==i&&i(e,n),e instanceof Y){i=(e=e.T.m).length;for(var a=0;a<i;a++){var u=e[a];n&&u instanceof Y&&!u.isEnabled||cf(t,u,n)}}}function jo(t,e){e.name=t,no.add(t,e)}Bt.className="Brush",Bt.Solid=rs=new J(Bt,"Solid",0),Bt.Linear=os=new J(Bt,"Linear",1),Bt.Radial=Tr=new J(Bt,"Radial",2),Bt.Pattern=Rs=new J(Bt,"Pattern",4),Bt.Lab=eu=new J(Bt,"Lab",5),Bt.HSL=Xy=new J(Bt,"HSL",6),Bt.randomColor=function(t,e){void 0===t&&(t=128),void 0===e&&(e=Math.max(t,255));var n=Math.abs(e-t);e=Math.floor(t+Math.random()*n).toString(16);var i=Math.floor(t+Math.random()*n).toString(16);return t=Math.floor(t+Math.random()*n).toString(16),2>e.length&&(e="0"+e),2>i.length&&(i="0"+i),2>t.length&&(t="0"+t),"#"+e+i+t},Bt.isValidColor=function(t){if("black"===t)return!0;if(""===t)return!1;tu||(sw(),tu=!0);var e=Yy;if(null===e)return!0;e.fillStyle="#000000";var n=e.fillStyle;return e.fillStyle=t,e.fillStyle!==n||(e.fillStyle="#FFFFFF",n=e.fillStyle,e.fillStyle=t,e.fillStyle!==n)},Bt.lighten=function(t){return iw(t)},Bt.lightenBy=iw,Bt.darken=function(t){return rw(t)},Bt.darkenBy=rw,Bt.mix=Gy,Bt.isDark=Cc,tn.prototype.measure=function(){},tn.prototype.BA=function(t,e,n,i,a){t.measure(e,n,i,a)},tn.prototype.arrange=function(){},tn.prototype.nz=function(t,e,n,i,a,u){t.arrange(e,n,i,a,u)},tn.prototype.LA=function(t){t.mk()},tn.prototype.lc=function(){},Dt.Object.defineProperties(tn.prototype,{name:{get:function(){return this.na},set:function(t){this.na=t}},classType:{get:function(){return Y}}}),tn.prototype.remeasureObject=tn.prototype.LA,tn.prototype.arrangeElement=tn.prototype.nz,tn.prototype.measureElement=tn.prototype.BA,tn.className="PanelLayout",Ft(Ec,tn),Ec.prototype.measure=function(t,e,n,i,a,u,h){var d=i.length;t=ss(t);for(var f=0;f<d;f++){var g=i[f];if(g.visible||g===t){var m=g.margin,y=m.right+m.left;m=m.top+m.bottom,g.measure(e,n,u,h);var x=g.measuredBounds;y=Math.max(x.width+y,0),m=Math.max(x.height+m,0),x=g.position.x;var _=g.position.y;isFinite(x)||(x=0),isFinite(_)||(_=0),g instanceof wt&&g.isGeometryPositioned&&(x-=g=g.strokeWidth/2,_-=g),hn(a,x,_,y,m)}}},Ec.prototype.arrange=function(t,e,n){var i=e.length,a=t.padding;for(t=n.x-a.left,n=n.y-a.top,a=0;a<i;a++){var u=e[a],h=u.measuredBounds,d=u.margin,f=u.position.x,g=u.position.y;if(f=isNaN(f)?-t:f-t,g=isNaN(g)?-n:g-n,u instanceof wt&&u.isGeometryPositioned){var m=u.strokeWidth/2;f-=m,g-=m}u.visible&&u.arrange(f+d.left,g+d.top,h.width,h.height)}},Ft(og,tn),og.prototype.measure=function(t,e,n,i,a,u,h){var d=i.length;e=ye(),u=ss(t);for(var f=0;f<d;f++){var g=i[f];if(g.visible||g===u){var m=xo(g,!1);if(m!==ze&&m!==Ln)e.push(g);else{g.measure(1/0,n,0,h),m=g.margin,g=g.measuredBounds;var y=Math.max(g.height+m.top+m.bottom,0);a.width+=Math.max(g.width+m.right+m.left,0),a.height=Math.max(a.height,y)}}}for(i=e.length,t.desiredSize.height?n=Math.min(t.desiredSize.height,t.maxSize.height):0!==a.height&&(n=Math.min(a.height,t.maxSize.height)),t=0;t<i;t++)((f=e[t]).visible||f===u)&&(d=(m=f.margin).right+m.left,m=m.top+m.bottom,f.measure(1/0,n,0,h),f=f.measuredBounds,m=Math.max(f.height+m,0),a.width+=Math.max(f.width+d,0),a.height=Math.max(a.height,m));oe(e)},og.prototype.arrange=function(t,e,n){for(var i=e.length,a=t.padding,u=a.top,h=t.isOpposite,d=h?n.width:a.left,f=0;f<i;f++){var g=u,m=e[f];if(m.visible){var y=m.measuredBounds,x=m.margin,_=x.top+x.bottom,M=u+a.bottom,S=y.height,T=xo(m,!1);(isNaN(m.desiredSize.height)&&T===Ve||T===En)&&(S=Math.max(n.height-_-M,0)),_=S+_+M,(M=m.alignment).Lb()&&(M=t.defaultAlignment),M.hb()||(M=Wt),h&&(d-=y.width+x.left+x.right),m.arrange(d+M.offsetX+x.left,g+M.offsetY+x.top+(n.height*M.y-_*M.y),y.width,S),h||(d+=y.width+x.left+x.right)}}},Ft(sg,tn),sg.prototype.measure=function(t,e,n,i,a,u){var h=i.length;n=ye();for(var d=ss(t),f=0;f<h;f++){var g=i[f];if(g.visible||g===d){var m=xo(g,!1);if(m!==ze&&m!==En)n.push(g);else{var y=g.margin;m=y.right+y.left,y=y.top+y.bottom,g.measure(e,1/0,u,0),g=g.measuredBounds,_r(a,Math.max(a.width,Math.max(g.width+m,0)),a.height+Math.max(g.height+y,0))}}}if(0!==(i=n.length)){for(t.desiredSize.width?e=Math.min(t.desiredSize.width,t.maxSize.width):0!==a.width&&(e=Math.min(a.width,t.maxSize.width)),t=0;t<i;t++)((f=n[t]).visible||f===d)&&(h=(g=f.margin).right+g.left,g=g.top+g.bottom,f.measure(e,1/0,u,0),f=f.measuredBounds,g=Math.max(f.height+g,0),a.width=Math.max(a.width,Math.max(f.width+h,0)),a.height+=g);oe(n)}},sg.prototype.arrange=function(t,e,n){for(var i=e.length,a=t.padding,u=a.left,h=t.isOpposite,d=h?n.height:a.top,f=0;f<i;f++){var g=u,m=e[f];if(m.visible){var y=m.measuredBounds,x=m.margin,_=x.left+x.right,M=u+a.right,S=y.width,T=xo(m,!1);(isNaN(m.desiredSize.width)&&T===Ve||T===Ln)&&(S=Math.max(n.width-_-M,0)),_=S+_+M,(M=m.alignment).Lb()&&(M=t.defaultAlignment),M.hb()||(M=Wt),h&&(d-=y.height+x.bottom+x.top),m.arrange(g+M.offsetX+x.left+(n.width*M.x-_*M.x),d+M.offsetY+x.top,S,y.height),h||(d+=y.height+x.bottom+x.top)}}},Ft(ag,tn),ag.prototype.measure=function(t,e,n,i,a,u,h){var d=i.length,f=t.nb(),g=f.margin,m=g.right+g.left,y=g.top+g.bottom;f.measure(e,n,u,h);var x=f.measuredBounds;u=x.width,h=x.height;var _=Math.max(u+m,0),M=Math.max(h+y,0),S=t.isClipping,T=B.allocAt(-g.left,-g.top,_,M),k=B.allocAt(0,0,u,h);$y(f,k,!0),u=k.width,h=k.height;for(var b=!0,I=ss(t),O=0;O<d;O++){var F=i[O],H=e,W=n;if(F!==f&&(F.visible||F===I)){switch(_=(g=F.margin).right+g.left,M=g.top+g.bottom,x=xo(F,!1)){case Ve:H=u,W=h;break;case Ln:H=u;break;case En:W=h}F.measure(H,W,0,0),x=F.measuredBounds,_=Math.max(x.width+_,0),M=Math.max(x.height+M,0),(H=F.alignment).Lb()&&(H=t.defaultAlignment),H.hb()||(H=Wt);var it=F.alignmentFocus;it.Lb()&&(it=Wt),W=null,F instanceof Y&&""!==F.Oe&&(W=F.Ya(F.Oe))===F&&(W=null);var nt=k.x,tt=k.y;if(null!==W){for(F.arrange(0,0,x.width,x.height),g=N.allocAt((g=W.actualBounds).x+(it.x*g.width-it.offsetX),g.y+(it.y*g.height-it.offsetY)),W=W.panel;W!==F;)W.transform.ya(g),W=W.panel;nt+=H.x*u+H.offsetX-g.x,tt+=H.y*h+H.offsetY-g.y,N.free(g)}else nt+=H.x*u+H.offsetX-(it.x*x.width+it.offsetX)-g.left,tt+=H.y*h+H.offsetY-(it.y*x.height+it.offsetY)-g.top;b?(b=!1,a.h(nt,tt,_,M)):hn(a,nt,tt,_,M)}}switch(b?a.assign(T):S?a.zv(k.x,k.y,k.width,k.height):hn(a,T.x,T.y,T.width,T.height),B.free(T),B.free(k),(x=f.stretch)===Lo&&(x=xo(f,!1)),x){case ze:return;case Ve:if(!isFinite(e)&&!isFinite(n))return;break;case Ln:if(!isFinite(e))return;break;case En:if(!isFinite(n))return}for(u=(x=f.measuredBounds).width,h=x.height,_=Math.max(u+m,0),M=Math.max(h+y,0),$y(f,k=B.allocAt(-(g=f.margin).left,-g.top,_,M),!0),u=k.width,h=k.height,e=0;e<d;e++)(n=i[e])===f||!n.visible&&n!==I||(_=(g=n.margin).right+g.left,M=g.top+g.bottom,x=n.measuredBounds,_=Math.max(x.width+_,0),M=Math.max(x.height+M,0),(m=n.alignment).Lb()&&(m=t.defaultAlignment),m.hb()||(m=Wt),(n=n.alignmentFocus).Lb()&&(n=Wt),b?(b=!1,a.h(m.x*u+m.offsetX-(n.x*x.width+n.offsetX)-g.left,m.y*h+m.offsetY-(n.y*x.height+n.offsetY)-g.top,_,M)):hn(a,m.x*u+m.offsetX-(n.x*x.width+n.offsetX)-g.left,m.y*h+m.offsetY-(n.y*x.height+n.offsetY)-g.top,_,M));b?a.assign(T):S?a.zv(k.x,k.y,k.width,k.height):hn(a,T.x,T.y,T.width,T.height),B.free(k)},ag.prototype.arrange=function(t,e,n){var i=e.length,a=t.nb(),u=a.measuredBounds,h=u.width,d=u.height,f=t.padding,g=(u=f.left)-n.x,m=(f=f.top)-n.y;for(a.arrange(g,m,h,d),$y(a,h=B.allocAt(0,0,h,d),!1),d=0;d<i;d++){var y=e[d];if(y!==a){var x=(g=y.measuredBounds).width,_=g.height;(m=y.alignment).Lb()&&(m=t.defaultAlignment),m.hb()||(m=Wt);var M=y.alignmentFocus;if(M.Lb()&&(M=Wt),g=null,y instanceof Y&&""!==y.Oe&&(g=y.Ya(y.Oe))===y&&(g=null),null!==g){var S=g.actualBounds;for(M=N.allocAt(S.x+(M.x*S.width-M.offsetX),S.y+(M.y*S.height-M.offsetY)),g=g.panel;g!==y;)g.transform.ya(M),g=g.panel;g=m.x*h.width+m.offsetX-M.x,m=m.y*h.height+m.offsetY-M.y,N.free(M)}else g=m.x*h.width+m.offsetX-(M.x*x+M.offsetX),m=m.y*h.height+m.offsetY-(M.y*_+M.offsetY);g+=h.x-n.x,m+=h.y-n.y,y.visible&&y.arrange(u+g,f+m,x,_)}}B.free(h)},Ft(lg,tn),lg.prototype.measure=function(t,e,n,i,a,u,h){var d=i.length,f=t.nb(),g=f.margin,m=e,y=n,x=g.right+g.left,_=g.top+g.bottom;f.measure(e,n,u,h),g=f.measuredBounds;var M=0,S=null;f instanceof wt&&(M=(S=f).strokeWidth*S.scale);var T=Math.max(g.width+x,0);g=Math.max(g.height+_,0);var k=lf(f),b=k.x*T+k.offsetX;k=k.y*g+k.offsetY;var I=pg(f),O=I.x*T+I.offsetX;for(I=I.y*g+I.offsetY,isFinite(e)&&(m=Math.max(Math.abs(b-O)-M,0)),isFinite(n)&&(y=Math.max(Math.abs(k-I)-M,0)),(M=mt.alloc()).h(0,0),t=ss(t),I=0;I<d;I++)(k=i[I])===f||!k.visible&&k!==t||(T=(g=k.margin).right+g.left,b=g.top+g.bottom,k.measure(m,y,0,0),g=k.measuredBounds,T=Math.max(g.width+T,0),g=Math.max(g.height+b,0),M.h(Math.max(T,M.width),Math.max(g,M.height)));if(1===d)a.width=T,a.height=g,mt.free(M);else{switch(k=lf(f),d=i=0,(I=pg(f)).x!==k.x&&I.y!==k.y&&(i=M.width/Math.abs(I.x-k.x),d=M.height/Math.abs(I.y-k.y)),mt.free(M),M=0,null!==S&&(M=S.strokeWidth*S.scale,rv(S)===Fo&&(i=d=Math.max(i,d))),i+=Math.abs(k.offsetX)+Math.abs(I.offsetX)+M,d+=Math.abs(k.offsetY)+Math.abs(I.offsetY)+M,(S=f.stretch)===Lo&&(S=xo(f,!1)),S){case ze:h=u=0;break;case Ve:isFinite(e)&&(i=e),isFinite(n)&&(d=n);break;case Ln:isFinite(e)&&(i=e),h=0;break;case En:u=0,isFinite(n)&&(d=n)}f.mk(),f.measure(i,d,u,h),a.width=f.measuredBounds.width+x,a.height=f.measuredBounds.height+_}},lg.prototype.arrange=function(t,e){var n=e.length,i=t.nb(),a=i.measuredBounds,u=B.alloc();u.h(0,0,1,1);var h=i.margin,d=h.left,f=t.padding,g=f.left;i.arrange(g+d,(f=f.top)+(h=h.top),a.width,a.height);var m=lf(i),y=pg(i),x=m.y*a.height+m.offsetY,_=y.x*a.width+y.offsetX;for(y=y.y*a.height+y.offsetY,u.x=m.x*a.width+m.offsetX,u.y=x,hn(u,_,y,0,0),u.x+=d+g,u.y+=h+f,a=0;a<n;a++)(d=e[a])!==i&&(g=d.measuredBounds,h=d.margin,f=Math.max(g.width+h.right+h.left,0),m=Math.max(g.height+h.top+h.bottom,0),(x=d.alignment).Lb()&&(x=t.defaultAlignment),x.hb()||(x=Wt),f=u.width*x.x+x.offsetX-f*x.x+h.left+u.x,h=u.height*x.y+x.offsetY-m*x.y+h.top+u.y,d.visible&&(Wi(u.x,u.y,u.width,u.height,f,h,g.width,g.height)?d.arrange(f,h,g.width,g.height):d.arrange(f,h,g.width,g.height,new B(u.x,u.y,u.width,u.height))));B.free(u)},Ft(ug,tn),ug.prototype.measure=function(t,e,n,i,a){for(var u=i.length,h=ye(),d=ye(),f=0;f<u;f++){var g=i[f],m=g instanceof Y?g:null;if(null===m||m.type!==Y.TableRow&&m.type!==Y.TableColumn||!g.visible)h.push(g);else{d.push(m);for(var y=m.T.m,x=y.length,_=0;_<x;_++){var M=y[_];m.type===Y.TableRow?M.row=g.row:m.type===Y.TableColumn&&(M.column=g.column),h.push(M)}}}0===(u=h.length)&&(t.getRowDefinition(0),t.getColumnDefinition(0));for(var S=[],T=0;T<u;T++){var k=h[T];Di(k,!0),Wl(k,!0),S[k.row]||(S[k.row]=[]),S[k.row][k.column]||(S[k.row][k.column]=[]),S[k.row][k.column].push(k)}oe(h);var b=ye(),I=ye(),O=ye(),F={count:0},H={count:0},W=e,it=n,nt=t.Db;u=nt.length;for(var tt=0;tt<u;tt++){var G=nt[tt];void 0!==G&&(G.actual=0)}u=(nt=t.yb).length;for(var Mt=0;Mt<u;Mt++)void 0!==(G=nt[Mt])&&(G.actual=0);for(var gt=S.length,zt=0,de=0;de<gt;de++)S[de]&&(zt=Math.max(zt,S[de].length));var nn=Math.min(t.topIndex,gt-1),$e=Math.min(t.leftIndex,zt-1),Me=0;gt=S.length;for(var Jn=ss(t),ci=0;ci<gt;ci++)if(S[ci]){zt=S[ci].length;var ao=t.getRowDefinition(ci);ao.actual=0;for(var wi=ao.$b=0;wi<zt;wi++)if(S[ci][wi]){var Ui=t.getColumnDefinition(wi);void 0===b[wi]&&(Ui.actual=0,Ui.$b=0,b[wi]=!0);for(var Ir=S[ci][wi],Ws=Ir.length,Go=0;Go<Ws;Go++){var Vn=Ir[Go];if(Vn.visible||Vn===Jn){var ps=1<Vn.rowSpan||1<Vn.columnSpan;ps&&(ci<nn||wi<$e||I.push(Vn));var kh=Vn.margin,Nh=kh.right+kh.left,nd=kh.top+kh.bottom,rn=ng(Vn,ao,Ui,!1),Zf=Vn.desiredSize,id=!isNaN(Zf.height),Ph=!isNaN(Zf.width)&&id;if(ps||rn===ze||Ph||ci<nn||wi<$e||(void 0!==F[wi]||rn!==Ve&&rn!==Ln||(F[wi]=-1,F.count++),void 0!==H[ci]||rn!==Ve&&rn!==En||(H[ci]=-1,H.count++),O.push(Vn)),Vn.measure(1/0,1/0,0,0),!(ci<nn||wi<$e)){var lo=Vn.measuredBounds,Hi=Math.max(lo.width+Nh,0),xu=Math.max(lo.height+nd,0);if(1===Vn.rowSpan&&(rn===ze||rn===Ln)){var gr=(G=t.getRowDefinition(ci)).Fc();(Me=Math.max(xu-G.actual,0))+gr>it&&(Me=Math.max(it-gr,0));var Ah=0===G.ga;G.$b=G.$b+Me,G.actual=G.ga+Me,it=Math.max(it-(Me+(Ah?gr:0)),0)}if(1===Vn.columnSpan&&(rn===ze||rn===En)){var wu=(G=t.getColumnDefinition(wi)).Fc();(Me=Math.max(Hi-G.actual,0))+wu>W&&(Me=Math.max(W-wu,0));var x0=0===G.ga;G.$b=G.$b+Me,G.actual=G.ga+Me,W=Math.max(W-(Me+(x0?wu:0)),0)}ps&&Vn.mk()}}}}}oe(b);var zo=0,Ks=0;u=t.columnCount;for(var Ih=0;Ih<u;Ih++){var xl=t.yb[Ih];void 0!==xl&&(zo+=isNaN(xl.rc)?xl.$b:xl.rc,0!==xl.$b&&(zo+=xl.Fc()))}u=t.rowCount;for(var gs=0;gs<u;gs++){var Yo=t.Db[gs];void 0!==Yo&&(Ks+=isNaN(Yo.rc)?Yo.$b:Yo.rc,0!==Yo.$b&&(Ks+=Yo.Fc()))}W=Math.max(e-zo,0);var Gi=it=Math.max(n-Ks,0),rd=W;u=O.length;for(var od=0;od<u;od++){var ki=O[od],sd=t.getRowDefinition(ki.row),Zs=t.getColumnDefinition(ki.column),wl=ki.measuredBounds,br=ki.margin,Nm=br.top+br.bottom;F[ki.column]=0===Zs.$b&&void 0!==F[ki.column]?Math.max(wl.width+(br.right+br.left),F[ki.column]):null,H[ki.row]=0===sd.$b&&void 0!==H[ki.row]?Math.max(wl.height+Nm,H[ki.row]):null}var Ba,ms=0,Mu=0;for(Ba in H)"count"!==Ba&&(ms+=H[Ba]);for(Ba in F)"count"!==Ba&&(Mu+=F[Ba]);for(var ln=mt.alloc(),$n=0;$n<u;$n++){var di=O[$n];if(di.visible||di===Jn){var nr=t.getRowDefinition(di.row),zi=t.getColumnDefinition(di.column),ys=0;isFinite(zi.width)?ys=zi.width:(ys=isFinite(W)&&null!==F[di.column]?0===Mu?zi.actual+W:F[di.column]/Mu*rd:null!==F[di.column]?W:zi.actual||W,ys=Math.max(0,ys-zi.Fc()));var We=0;switch(isFinite(nr.height)?We=nr.height:(We=isFinite(it)&&null!==H[di.row]?0===ms?nr.actual+it:H[di.row]/ms*Gi:null!==H[di.row]?it:nr.actual||it,We=Math.max(0,We-nr.Fc())),ln.h(Math.max(zi.minimum,Math.min(ys,zi.maximum)),Math.max(nr.minimum,Math.min(We,nr.maximum))),rn=ng(di,nr,zi,!1)){case Ln:ln.height=Math.max(ln.height,nr.actual+it);break;case En:ln.width=Math.max(ln.width,zi.actual+W)}var bh=di.margin,ad=bh.right+bh.left,Qf=bh.top+bh.bottom;di.mk(),di.measure(ln.width,ln.height,zi.minimum,nr.minimum);var ld=di.measuredBounds,ir=Math.max(ld.width+ad,0),Ml=Math.max(ld.height+Qf,0);isFinite(W)&&(ir=Math.min(ir,ln.width)),isFinite(it)&&(Ml=Math.min(Ml,ln.height));var vs=0;vs=nr.actual,nr.actual=Math.max(nr.actual,Ml),nr.$b=Math.max(nr.$b,Ml),Me=nr.actual-vs,it=Math.max(it-Me,0),null===H[di.row]&&(Gi=Math.max(Gi-Me,0)),vs=zi.actual,zi.actual=Math.max(zi.actual,ir),zi.$b=Math.max(zi.$b,ir),Me=zi.actual-vs,W=Math.max(W-Me,0),null===F[di.column]&&(rd=Math.max(rd-Me,0))}}oe(O);var Eo=mt.alloc(),$r=ye(),mn=ye();if(0!==(u=I.length))for(var Js=0;Js<gt;Js++)if(S[Js]){zt=S[Js].length;var w0=t.getRowDefinition(Js);$r[Js]=w0.actual;for(var xs=0;xs<zt;xs++)if(S[Js][xs]){var Ua=t.getColumnDefinition(xs);mn[xs]=Ua.actual}}for(var _u=0;_u<u;_u++){var Te=I[_u];if(Te.visible||Te===Jn){var ws=t.getRowDefinition(Te.row),on=t.getColumnDefinition(Te.column);switch(ln.h(Math.max(on.minimum,Math.min(e,on.maximum)),Math.max(ws.minimum,Math.min(n,ws.maximum))),rn=ng(Te,ws,on,!1)){case Ve:0!==mn[on.index]&&(ln.width=Math.min(ln.width,mn[on.index])),0!==$r[ws.index]&&(ln.height=Math.min(ln.height,$r[ws.index]));break;case Ln:0!==mn[on.index]&&(ln.width=Math.min(ln.width,mn[on.index]));break;case En:0!==$r[ws.index]&&(ln.height=Math.min(ln.height,$r[ws.index]))}isFinite(on.width)&&(ln.width=on.width),isFinite(ws.height)&&(ln.height=ws.height),Eo.h(0,0);for(var ud=on.minimum,To=ws.minimum,Qs=1;Qs<Te.rowSpan&&!(Te.row+Qs>=t.rowCount);Qs++)G=t.getRowDefinition(Te.row+Qs),Me=0,Me=rn===Ve||rn===En?Math.max(G.minimum,0===$r[Te.row+Qs]?G.maximum:Math.min($r[Te.row+Qs],G.maximum)):Math.max(G.minimum,isNaN(G.rc)?G.maximum:Math.min(G.rc,G.maximum)),Eo.height+=Me,To+=G.minimum;for(var mr=1;mr<Te.columnSpan&&!(Te.column+mr>=t.columnCount);mr++)G=t.getColumnDefinition(Te.column+mr),Me=0,Me=rn===Ve||rn===Ln?Math.max(G.minimum,0===mn[Te.column+mr]?G.maximum:Math.min(mn[Te.column+mr],G.maximum)):Math.max(G.minimum,isNaN(G.rc)?G.maximum:Math.min(G.rc,G.maximum)),Eo.width+=Me,ud+=G.minimum;ln.width+=Eo.width,ln.height+=Eo.height;var Cu=Te.margin,hd=Cu.right+Cu.left,Ms=Cu.top+Cu.bottom;Te.measure(ln.width,ln.height,ud,To);for(var Oh=Te.measuredBounds,Du=Math.max(Oh.width+hd,0),Fh=Math.max(Oh.height+Ms,0),_l=0,ko=0;ko<Te.rowSpan&&!(Te.row+ko>=t.rowCount);ko++)_l+=(G=t.getRowDefinition(Te.row+ko)).total||0;if(_l<Fh){var No=Fh-_l,Su=Fh-_l;if(null!==Te.spanAllocation)for(var Xo=Te.spanAllocation,qs=0;qs<Te.rowSpan&&!(0>=No)&&!(Te.row+qs>=t.rowCount);qs++){var yr=(G=t.getRowDefinition(Te.row+qs)).ga||0,M0=Xo(Te,G,Su);G.actual=Math.min(G.maximum,yr+M0),G.ga!==yr&&(No-=G.ga-yr)}for(;0<No;){var ta=G.ga||0;if(isNaN(G.height)&&G.maximum>ta&&(G.actual=Math.min(G.maximum,ta+No),G.ga!==ta&&(No-=G.ga-ta)),0===G.index)break;G=t.getRowDefinition(G.index-1)}}for(var cd=0,qf=0;qf<Te.columnSpan&&!(Te.column+qf>=t.columnCount);qf++)cd+=(G=t.getColumnDefinition(Te.column+qf)).total||0;if(cd<Du){var Wr=Du-cd,Pm=Du-cd;if(null!==Te.spanAllocation)for(var Am=Te.spanAllocation,Eu=0;Eu<Te.columnSpan&&!(0>=Wr)&&!(Te.column+Eu>=t.columnCount);Eu++){var _0=(G=t.getColumnDefinition(Te.column+Eu)).ga||0,C0=Am(Te,G,Pm);G.actual=Math.min(G.maximum,_0+C0),G.ga!==_0&&(Wr-=G.ga-_0)}for(;0<Wr;){var Im=G.ga||0;if(isNaN(G.width)&&G.maximum>Im&&(G.actual=Math.min(G.maximum,Im+Wr),G.ga!==Im&&(Wr-=G.ga-Im)),0===G.index)break;G=t.getColumnDefinition(G.index-1)}}}}oe(I),mt.free(Eo),mt.free(ln),void 0!==$r&&oe($r),void 0!==mn&&oe(mn);var Lh=0,Rh=0,bm=t.desiredSize,n1=t.maxSize;rn=xo(t,!0);var tp=Ks=zo=0,ep=0;u=t.columnCount;for(var Om=0;Om<u;Om++)void 0!==t.yb[Om]&&(G=t.getColumnDefinition(Om),isFinite(G.width)?(tp+=G.width,tp+=G.Fc()):yg(G)===df?(tp+=G.ga,tp+=G.Fc()):0!==G.ga&&(zo+=G.ga,zo+=G.Fc()));Lh=isFinite(bm.width)?Math.min(bm.width,n1.width):rn!==ze&&isFinite(e)?e:zo,Lh=Math.max(Lh,t.minSize.width),Lh=Math.max(Lh-tp,0);for(var np=0===zo?1:Math.max(Lh/zo,1),ip=0;ip<u;ip++)void 0!==t.yb[ip]&&(G=t.getColumnDefinition(ip),isFinite(G.width)||yg(G)===df||(G.actual=G.ga*np),G.position=a.width,0!==G.ga&&(a.width+=G.ga,a.width+=G.Fc()));u=t.rowCount;for(var rp=0;rp<u;rp++)void 0!==t.Db[rp]&&(G=t.getRowDefinition(rp),isFinite(G.height)?(ep+=G.height,ep+=G.Fc()):yg(G)===df?(ep+=G.ga,ep+=G.Fc()):0!==G.ga&&(Ks+=G.ga,0!==G.ga&&(Ks+=G.Fc())));Rh=isFinite(bm.height)?Math.min(bm.height,n1.height):rn!==ze&&isFinite(n)?n:Ks,Rh=Math.max(Rh,t.minSize.height),Rh=Math.max(Rh-ep,0);for(var r1=0===Ks?1:Math.max(Rh/Ks,1),op=0;op<u;op++)void 0!==t.Db[op]&&(G=t.getRowDefinition(op),isFinite(G.height)||yg(G)===df||(G.actual=G.ga*r1),G.position=a.height,0!==G.ga&&(a.height+=G.ga,0!==G.ga&&(a.height+=G.Fc())));u=d.length;for(var Fm=0;Fm<u;Fm++){var sp=d[Fm],D0=0,S0=0;sp.type===Y.TableRow?(D0=a.width,S0=(G=t.getRowDefinition(sp.row)).actual):(D0=(G=t.getColumnDefinition(sp.column)).actual,S0=a.height),sp.measuredBounds.h(0,0,D0,S0),Di(sp,!1)}oe(d),t.pp=S},ug.prototype.arrange=function(t,e,n){var i=e.length,a=t.padding,u=a.left;a=a.top;for(var d,f,h=t.pp,g=h.length,m=0,y=0;y<g;y++)h[y]&&(m=Math.max(m,h[y].length));for(f=t.Db,d=t.yb,y=Math.min(t.topIndex,g-1);y!==g&&(void 0===f[y]||0===f[y].ga);)y++;y=-f[y=Math.max(Math.min(y,g-1),0)].position;for(var x=Math.min(t.leftIndex,m-1);x!==m&&(void 0===d[x]||0===d[x].ga);)x++;x=-d[x=Math.max(Math.min(x,m-1),0)].position;for(var _=0,M=0;_!==g&&void 0===f[_];)_++;for(;M!==g&&void 0===d[M];)M++;m=t.part,t.getRowDefinition(_),t.getColumnDefinition(M);for(var S=0;S<e.length;S++){var T=e[S];if(T instanceof Y&&T.visible&&(T.type===Y.TableRow||T.type===Y.TableColumn)){if(T.type===Y.TableRow){d=t.getRowDefinition(T.row);var k=t.getColumnDefinition(M)}else d=t.getRowDefinition(_),k=t.getColumnDefinition(T.column);f=d.position+y+a,0!==d.ga&&(f+=d.cq(_)),d=k.position+x+u,0!==k.ga&&(d+=k.cq(M)),k=T.measuredBounds,T.ll(),T.actualBounds.ea();var b=T.actualBounds,I=B.allocAt(b.x,b.y,b.width,b.height);b.x=T.type===Y.TableRow?u:d,b.y=T.type===Y.TableColumn?a:f,b.width=k.width,b.height=k.height,T.actualBounds.freeze(),Wl(T,!1),ti(I,b)||null===m||(m.Ch(),T.Qo(m)),B.free(I)}}for(S=mt.alloc(),T=0;T<g;T++)if(h[T])for(m=h[T].length,f=(k=t.getRowDefinition(T)).position+y+a,0!==k.ga&&(f+=k.cq(_)),b=0;b<m;b++)if(h[T][b]){d=(I=t.getColumnDefinition(b)).position+x+u,0!==I.ga&&(d+=I.cq(M));for(var O=h[T][b],F=O.length,H=0;H<F;H++){var W=O[H],it=W.measuredBounds;S.h(0,0);for(var nt=1;nt<W.rowSpan&&!(T+nt>=t.rowCount);nt++){var tt=t.getRowDefinition(T+nt);0!==tt.ga&&(S.height+=tt.total)}for(nt=1;nt<W.columnSpan&&!(b+nt>=t.columnCount);nt++)0!==(tt=t.getColumnDefinition(b+nt)).ga&&(S.width+=tt.total);var G=I.ga+S.width,Mt=k.ga+S.height;nt=d,tt=f;var gt=G,zt=Mt,de=d,nn=f,$e=G,Me=Mt;d+G>n.width&&($e=Math.max(n.width-d,0)),f+Mt>n.height&&(Me=Math.max(n.height-f,0));var Jn=W.alignment;if(Jn.Lb()){(Jn=t.defaultAlignment).hb()||(Jn=Wt);var ci=Jn.x,ao=Jn.y,wi=Jn.offsetX;Jn=Jn.offsetY;var Ui=I.alignment,Ir=k.alignment;Ui.hb()&&(ci=Ui.x,wi=Ui.offsetX),Ir.hb()&&(ao=Ir.y,Jn=Ir.offsetY)}else ci=Jn.x,ao=Jn.y,wi=Jn.offsetX,Jn=Jn.offsetY;(isNaN(ci)||isNaN(ao))&&(ao=ci=.5,Jn=wi=0),Ui=it.width,Ir=it.height;var Ws=W.margin,Go=Ws.left+Ws.right,Vn=Ws.top+Ws.bottom,ps=ng(W,k,I,!1);!isNaN(W.desiredSize.width)||ps!==Ve&&ps!==Ln||(Ui=Math.max(G-Go,0)),!isNaN(W.desiredSize.height)||ps!==Ve&&ps!==En||(Ir=Math.max(Mt-Vn,0)),G=W.maxSize,Mt=W.minSize,Ui=Math.min(G.width,Ui),Ir=Math.min(G.height,Ir),Ui=Math.max(Mt.width,Ui),Ir=Math.max(Mt.height,Ir),nt+=gt*ci-(Ui+Go)*ci+wi+Ws.left,tt+=zt*ao-(G=Ir+Vn)*ao+Jn+Ws.top,W.visible&&(Wi(de,nn,$e,Me,nt,tt,it.width,it.height)?W.arrange(nt,tt,Ui,Ir):W.arrange(nt,tt,Ui,Ir,new B(de,nn,$e,Me)))}}for(mt.free(S),t=0;t<i;t++)null===(u=(n=e[t])instanceof Y?n:null)||u.type!==Y.TableRow&&u.type!==Y.TableColumn||(u=n.actualBounds,n.naturalBounds.ea(),n.naturalBounds.h(0,0,u.width,u.height),n.naturalBounds.freeze())},Ft(nf,tn),nf.prototype.measure=function(){},nf.prototype.arrange=function(){},Ft(Tc,tn),Tc.prototype.measure=function(){},Tc.prototype.arrange=function(){},Ft(rf,tn),rf.prototype.measure=function(t,e,n,i,a,u,h){1<i.length&&z("Viewbox Panel cannot contain more than one GraphObject."),(i=i[0]).sa=1,i.mk(),i.measure(1/0,1/0,u,h);var d=i.measuredBounds,f=i.margin,g=f.right+f.left;if(f=f.top+f.bottom,isFinite(e)||isFinite(n)){var m=i.scale,y=d.width;d=d.height;var x=Math.max(e-g,0),_=Math.max(n-f,0),M=1;t.viewboxStretch===Fo?0!==y&&0!==d&&(M=Math.min(x/y,_/d)):0!==y&&0!==d&&(M=Math.max(x/y,_/d)),0===M&&(M=1e-4),i.sa*=M,m!==i.scale&&(Di(i,!0),i.measure(1/0,1/0,u,h))}d=i.measuredBounds,a.width=isFinite(e)?e:Math.max(d.width+g,0),a.height=isFinite(n)?n:Math.max(d.height+f,0)},rf.prototype.arrange=function(t,e,n){var i=(e=e[0]).measuredBounds,a=e.margin,u=Math.max(i.width+(a.right+a.left),0);a=Math.max(i.height+(a.top+a.bottom),0);var h=e.alignment;h.Lb()&&(h=t.defaultAlignment),h.hb()||(h=Wt),e.arrange(n.width*h.x-u*h.x+h.offsetX,n.height*h.y-a*h.y+h.offsetY,i.width,i.height)},Ft(Qu,tn),Qu.prototype.measure=function(){},Qu.prototype.arrange=function(){},Qu.prototype.lc=function(t,e,n){0>=(n=t.wf()*n.scale)&&(n=1);var i=t.gridCellSize,a=i.width;i=i.height;var u=t.naturalBounds,h=t.actualBounds,d=u.width,f=u.height,g=Math.ceil(d/a),m=Math.ceil(f/i),y=t.gridOrigin,x=y.x;y=y.y,e.save(),e.beginPath(),e.rect(0,0,d,f),e.clip();for(var _=[],M=t.T.m,S=M.length,T=0;T<S;T++){var k=M[T],b=[];if(_.push(b),k.visible){var I=k.interval;if(!(0>I)){k=Jy(k.figure);for(var O=0;O<S;O++)if(O!==T){var F=M[O];F.visible&&Jy(F.figure)===k&&(F=F.interval)>I&&b.push(F)}}}}for(S=(M=t.T.m).length,T=0;T<S;T++){var H=M[T];if(H.visible&&(b=H.interval||1,!(2>a*(k=Math.abs(b))*n))){if(I=H.segmentIndex,(!isFinite(I)||isNaN(I))&&(I=0),0>I&&(I=k-Math.min(-I,k)),I=Math.round(I%k),O=1,1!==(k=H.opacity)){if(0===k)continue;e.globalAlpha=(O=e.globalAlpha)*k}F=_[T];var W=!1,it=H.strokeDashArray;if(null!==it&&(W=!0,e.As(it,H.strokeDashOffset)),"LineV"===H.figure&&null!==H.stroke&&0<H.strokeWidth){for(e.lineWidth=H.strokeWidth,dr(t,e,H.stroke,!1,!1,u,h),e.beginPath(),it=H=Math.floor((x-a)/a);it<=H+g;it++){var nt=it*a+x;0<=nt&&nt<=d&&hg(it,b,I,F)&&(e.moveTo(nt,0),e.lineTo(nt,f))}e.stroke()}else if("LineH"===H.figure&&null!==H.stroke&&0<H.strokeWidth){for(e.lineWidth=H.strokeWidth,dr(t,e,H.stroke,!1,!1,u,h),e.beginPath(),it=H=Math.floor((y-i)/i);it<=H+m;it++)0<=(nt=it*i+y)&&nt<=f&&hg(it,b,I,F)&&(e.moveTo(0,nt),e.lineTo(d,nt));e.stroke()}else if("BarV"===H.figure&&null!==H.fill)for(dr(t,e,H.fill,!0,!1,u,h),H=H.width,isNaN(H)&&(H=a),nt=it=Math.floor((x-a)/a);nt<=it+g;nt++){var tt=nt*a+x;0<=tt+H&&tt<=d&&hg(nt,b,I,F)&&e.fillRect(tt,0,H,f)}else if("BarH"===H.figure&&null!==H.fill)for(dr(t,e,H.fill,!0,!1,u,h),H=H.height,isNaN(H)&&(H=i),nt=it=Math.floor((y-i)/i);nt<=it+m;nt++)0<=(tt=nt*i+y)+H&&tt<=f&&hg(nt,b,I,F)&&e.fillRect(0,tt,d,H);W&&e.ys(),1!==k&&(e.globalAlpha=O)}}e.restore(),e.Ec(!1)},Ft(cg,tn),cg.prototype.measure=function(t,e,n,i,a){if(n=i.length,t instanceof At||t instanceof X){var u=null,h=null;if(t instanceof X&&(u=t),t instanceof At&&(u=(h=t).adornedPart,null===t.j&&(t.j=[])),u instanceof X){var d=u;if(0===n)_r(t.naturalBounds,0,0),t.measuredBounds.h(0,0,0,0);else{var f=t instanceof At?null:u.path,g=u.routeBounds;(e=t.dg).h(0,0,g.width,g.height);var m=d.points,y=u.pointsCount;null!==h?h.sk(!1):null!==u&&u.sk(!1);var x=g.width,_=g.height;t.location.h(g.x,g.y);var M=t.j;M.length=0,null!==f&&(Wy(t,x,_,f),e.Nc(h=f.measuredBounds),M.push(h)),h=St.alloc();for(var S=N.alloc(),T=N.alloc(),k=0;k<n;k++){var b=i[k];if(b!==f)if(b.isPanelMain&&b instanceof wt){Wy(t,x,_,b);var I=b.measuredBounds;e.Nc(I),M.push(I)}else if(2>y)b.measure(1/0,1/0,0,0),e.Nc(I=b.measuredBounds),M.push(I);else{var O=b.segmentIndex,F=b.segmentFraction,H=b.alignmentFocus;H.wc()&&(H=Wt);var W=b.segmentOrientation,it=b.segmentOffset;if(isNaN(O)){var nt=d.ma;I=ye(),nt.vv(F,I);var tt=N.allocAt(I[0],I[1]);if(tt.add(d.i(0)),(nt.type===q.j||null!==(nt=nt.figures.first()))&&tt.offset(-nt.startX,-nt.startY),nt=I[2],W!==pn){var G=d.computeAngle(b,W,nt);b.xb=G}G=tt.x-g.x;var Mt=tt.y-g.y;N.free(tt),oe(I)}else if(O<-y||O>=y)I=N.alloc(),d.pg(),d.computeMidPoint(I),nt=d.midAngle,W!==pn&&(G=d.computeAngle(b,W,nt),b.xb=G),G=I.x-g.x,Mt=I.y-g.y,N.free(I);else{if(G=0,0<=O?(Mt=m.J(O),I=O<y-1?m.J(O+1):Mt):(Mt=m.J(G=y+O),I=0<G?m.J(G-1):Mt),Mt.Ta(I)){0<=O?(nt=0<O?m.J(O-1):Mt,G=O<y-2?m.J(O+2):I):(nt=G<y-1?m.J(G+1):Mt,G=1<G?m.J(G-2):I),tt=nt.tf(Mt);var gt=I.tf(G);nt=tt>gt+10?0<=O?nt.Oa(Mt):Mt.Oa(nt):gt>tt+10?0<=O?I.Oa(G):G.Oa(I):0<=O?nt.Oa(G):G.Oa(nt)}else nt=0<=O?Mt.Oa(I):I.Oa(Mt);W!==pn&&(G=d.computeAngle(b,W,nt),b.xb=G),G=Mt.x+(I.x-Mt.x)*F-g.x,Mt=Mt.y+(I.y-Mt.y)*F-g.y}b.measure(1/0,1/0,0,0),I=b.measuredBounds;var zt=0;b instanceof wt&&(zt=b.strokeWidth),gt=(tt=b.naturalBounds).width+zt;var de=tt.height+zt;h.reset(),h.translate(-I.x,-I.y),h.scale(b.scale,b.scale),h.rotate(W===pn?b.angle:nt,gt/2,de/2),W!==ul&&W!==Hc||h.rotate(90,gt/2,de/2),W!==wf&&W!==Gc||h.rotate(-90,gt/2,de/2),W===zg&&(45<nt&&135>nt||225<nt&&315>nt)&&h.rotate(-nt,gt/2,de/2),tt=new B(0,0,gt,de),S.Ui(tt,H),h.ya(S),H=zt/2*b.scale-S.x,b=zt/2*b.scale-S.y,T.assign(it),zt=isNaN(it.x);var nn=isNaN(it.y);if(zt||nn){gt=gt/2+3,de=de/2+3;var $e=45<=nt&&135>=nt,Me=225<=nt&&315>=nt;W===pn&&($e||Me)?(T.x=nn?gt:it.y,T.y=zt?de:it.x,$e?0<=O||isNaN(O)&&.5>F||!zt||(T.y=-de):Me&&((0<=O||isNaN(O)&&.5>F)&&zt&&(T.y=-de),nn&&(T.x=-gt))):(zt&&(T.x=0<=O||isNaN(O)&&.5>F?gt:-gt),nn&&(T.y=-de),T.rotate(nt))}else T.rotate(nt);G+=T.x,Mt+=T.y,tt.set(I),tt.h(G+H,Mt+b,I.width,I.height),M.push(tt),e.Nc(tt)}}if(null!==u)for(i=u.labelNodes;i.next();)i.value.measure(1/0,1/0);t.dg=e,(t=t.location).h(t.x+e.x,t.y+e.y),_r(a,e.width||0,e.height||0),St.free(h),N.free(S),N.free(T)}}}},cg.prototype.arrange=function(t,e){var n=e.length;if(t instanceof At||t instanceof X){var i=t,a=null;t instanceof At&&(i=(a=t).adornedPart);var u=t instanceof At?null:i.path,h=t.j;if(0!==h.length){var d=0;if(null!==u&&d<h.length){var f=h[d];d++,u.arrange(f.x-t.dg.x,f.y-t.dg.y,f.width,f.height)}for(f=0;f<n;f++){var g=e[f];if(g!==u&&d<h.length){var m=h[d];d++,g.arrange(m.x-t.dg.x,m.y-t.dg.y,m.width,m.height)}}}if(2<=(n=(e=i.points).count)&&t instanceof X)for(u=t.labelNodes;u.next();){var y=t;d=(h=u.value).segmentIndex,f=h.segmentFraction;var x=h.alignmentFocus;if(g=h.segmentOrientation,m=h.segmentOffset,isNaN(d)){var _=y.ma,M=ye();_.vv(f,M);var S=N.allocAt(M[0],M[1]);S.add(y.i(0)),_.type===q.j||(_=_.figures.first()),S.offset(-_.startX,-_.startY),_=M[2],g!==pn&&(y=y.computeAngle(h,g,_),h.angle=y),y=S.x;var T=S.y;N.free(S),oe(M)}else if(d<-n||d>=n)T=M=N.alloc(),(_=y).pg(),_.computeMidPoint(T),_=y.midAngle,g!==pn&&(y=y.computeAngle(h,g,_),h.angle=y),y=M.x,T=M.y,N.free(M);else{if(S=0,0<=d?(M=e.m[d],T=d<n-1?e.m[d+1]:M):(M=e.m[S=n+d],T=0<S?e.m[S-1]:M),M.Ta(T)){0<=d?(_=0<d?e.m[d-1]:M,S=d<n-2?e.m[d+2]:T):(_=S<n-1?e.m[S+1]:M,S=1<S?e.m[S-2]:T);var k=_.tf(M),b=T.tf(S);_=k>b+10?0<=d?_.Oa(M):M.Oa(_):b>k+10?0<=d?T.Oa(S):S.Oa(T):0<=d?_.Oa(S):S.Oa(_)}else _=0<=d?M.Oa(T):T.Oa(M);g!==pn&&(y=y.computeAngle(h,g,_),h.angle=y),y=M.x+(T.x-M.x)*f,T=M.y+(T.y-M.y)*f}if(x.Qs())h.location=new N(y,T);else{x.wc()&&(x=Wt),(M=St.alloc()).reset(),M.scale(h.scale,h.scale),M.rotate(h.angle,0,0);var I=h.naturalBounds;S=B.allocAt(0,0,I.width,I.height),(k=N.alloc()).Ui(S,x),M.ya(k),x=-k.x,b=-k.y;var O=I.width,F=I.height;(I=N.alloc()).assign(m);var H=isNaN(m.x),W=isNaN(m.y);if(H||W){O=O/2+3,F=F/2+3;var it=45<=_&&135>=_,nt=225<=_&&315>=_;g===pn&&(it||nt)?(I.x=W?O:m.y,I.y=H?F:m.x,it?0<=d||isNaN(d)&&.5>f||!H||(I.y=-F):nt&&((0<=d||isNaN(d)&&.5>f)&&H&&(I.y=-F),W&&(I.x=-O))):(H&&(I.x=0<=d||isNaN(d)&&.5>f?O:-O),W&&(I.y=-F),I.rotate(_))}else I.rotate(_);y+=I.x,T+=I.y,M.Jq(S),d=N.allocAt(y+(x+=S.x),T+(b+=S.y)),h.move(d),N.free(d),N.free(I),N.free(k),B.free(S),St.free(M)}}null!==a?a.sk(!1):i.sk(!1)}},Ft(kc,tn),kc.prototype.measure=function(t,e,n,i,a,u,h){var d=t.nb();t.Kg=[];var f=d.margin,g=f.right+f.left,m=f.top+f.bottom;d.measure(e,n,u,h);var y=d.measuredBounds,x=new B(-f.left,-f.top,Math.max(y.width+g,0),Math.max(y.height+m,0));t.Kg.push(x),a.assign(x);for(var _=d.geometry,M=d.strokeWidth,S=_.flattenedSegments,T=_.flattenedLengths,k=_.flattenedTotalLength,b=S.length,I=0,O=0,F=ye(),H=0;H<b;H++){var W=S[H],it=[];O=I=0;for(var nt=W.length,tt=0;tt<nt;tt+=2){var G=W[tt],Mt=W[tt+1];if(0!==tt){var gt=180*Math.atan2(Mt-O,G-I)/Math.PI;0>gt&&(gt+=360),it.push(gt)}I=G,O=Mt}F.push(it)}if(null===t.Nf){for(var zt=[],de=t.T.m,nn=de.length,$e=0;$e<nn;$e++){var Me=de[$e],Jn=[];if(zt.push(Jn),Me.visible){var ci=Me.interval;if(!(0>ci))for(var ao=0;ao<nn;ao++)if(ao!==$e){var wi=de[ao];if(wi.visible&&Me.constructor===wi.constructor){var Ui=wi.interval;Ui>ci&&Jn.push(Ui)}}}}t.Nf=zt}var Ir=t.Nf,Ws=t.T.m,Go=Ws.length,Vn=0,ps=0,kh=k;t.tj=[];for(var Nh,nd=0;nd<Go;nd++){var rn=Ws[nd];if(Nh=[],rn.visible&&rn!==d){var Zf=Math.abs(rn.interval),id=t.graduatedTickUnit;if(!(2>id*Zf*k/t.graduatedRange)){var Ph=T[0][0],lo=0,Hi=0;ps=k*rn.graduatedStart-1e-4,kh=k*rn.graduatedEnd+1e-4;var xu=id*Zf,gr=t.graduatedTickBase;if(gr<t.graduatedMin){var Ah=(t.graduatedMin-gr)/xu;gr+=(Ah=Ah%1==0?Ah:Math.floor(Ah+1))*xu}else gr>t.graduatedMin+xu&&(gr-=Math.floor((gr-t.graduatedMin)/xu)*xu);for(var wu=Ir[nd],x0=gr,zo=1;gr<t.graduatedMax+5e-8;zo++){t:{for(var Ks=wu.length,Ih=0;Ih<Ks;Ih++)if(R.aa((gr-t.graduatedTickBase)%(wu[Ih]*t.graduatedTickUnit),0)){var xl=!1;break t}xl=!0}if(xl&&(null===rn.graduatedSkip||!rn.graduatedSkip(gr))&&((Vn=(gr-t.graduatedMin)*k/t.graduatedRange)>k&&(Vn=k),ps<=Vn&&Vn<=kh)){for(var gs=F[lo][Hi],Yo=T[lo][Hi];lo<T.length;){for(;Vn>Ph&&Hi<T[lo].length-1;)Hi++,gs=F[lo][Hi],Ph+=Yo=T[lo][Hi];if(Vn<=Ph)break;gs=F[++lo][Hi=0],Ph+=Yo=T[lo][Hi]}var Gi=S[lo],rd=Gi[2*Hi],od=Gi[2*Hi+1],ki=(Vn-(Ph-Yo))/Yo,sd=new N(rd+(Gi[2*Hi+2]-rd)*ki+M/2-_.bounds.x,od+(Gi[2*Hi+3]-od)*ki+M/2-_.bounds.y);sd.scale(d.scale,d.scale);t:{var Zs=gs,wl=F[lo];if(!(.5005>ki&&.4995<ki)){var br=Zs;if(.5>ki?0<Hi?br=wl[Hi-1]:R.aa(Gi[0],Gi[Gi.length-2])&&R.aa(Gi[1],Gi[Gi.length-1])&&(br=wl[wl.length-1]):.5<ki&&(Hi+1<wl.length?br=wl[Hi+1]:R.aa(Gi[0],Gi[Gi.length-2])&&R.aa(Gi[1],Gi[Gi.length-1])&&(br=wl[0])),Zs!==br){var Jf=Math.abs(Zs-br);if(180<Jf&&(Zs<br?Zs+=360:br+=360,Jf=Math.abs(Zs-br)),5e-4>ki||.9995<ki){gs=(Zs+br)/2%360;break t}if(10>Jf){var Nm=1-Math.abs(.5-ki);gs=(Zs*Nm+br*(1-Nm))%360;break t}}}gs=Zs}if(rn instanceof Zt){var ms="";""!==(ms=null!==rn.graduatedFunction?null!=(ms=rn.graduatedFunction(gr))?ms.toString():"":(+gr.toFixed(2)).toString())&&Nh.push({tm:sd,angle:gs,text:ms})}else Nh.push({tm:sd,angle:gs})}gr=x0+zo*xu}}}t.tj.push(Nh)}oe(F);var Mu=t.tj;if(null!==Mu)for(var Ba=i.length,ln=0;ln<Ba;ln++){var $n=i[ln],di=Mu[ln];if($n.visible&&$n!==d&&0!==di.length){if($n instanceof wt){var nr=t,zi=a,ys=$n.alignmentFocus;ys.wc()&&(ys=go);var We=$n.angle;$n.xb=0,$n.measure(1/0,1/0,0,0),$n.xb=We;var bh=$n.measuredBounds,ad=bh.width,Qf=bh.height,ld=B.allocAt(0,0,ad,Qf),ir=N.alloc();ir.Ui(ld,ys),B.free(ld);for(var Ml=-ir.x,vs=-ir.y,Eo=new B,$r=di.length,mn=0;mn<$r;mn++)for(var Js=di[mn],w0=Js.tm.x,xs=Js.tm.y,Ua=Js.angle,_u=0;4>_u;_u++){switch(_u){case 0:ir.h(Ml,vs);break;case 1:ir.h(Ml+ad,vs);break;case 2:ir.h(Ml,vs+Qf);break;case 3:ir.h(Ml+ad,vs+Qf)}ir.rotate(Ua+$n.angle),ir.offset(w0,xs),0===mn&&0===_u?Eo.h(ir.x,ir.y,0,0):Eo.Le(ir),ir.offset(-w0,-xs),ir.rotate(-Ua-$n.angle)}N.free(ir),null!==nr.Kg&&nr.Kg.push(Eo),hn(zi,Eo.x,Eo.y,Eo.width,Eo.height)}else if($n instanceof Zt){var Te=t,ws=a;null===Te.mh&&(Te.mh=new Zt);var on=Te.mh;hw(on,$n);var ud=$n.alignmentFocus;ud.wc()&&(ud=go);for(var To=$n.segmentOrientation,Qs=$n.segmentOffset,mr=new B,Cu=0,hd=0,Ms=0,Oh=0,Du=0,Fh=di.length,_l=0;_l<Fh;_l++){var ko=di[_l];Cu=ko.tm.x,hd=ko.tm.y,Ms=ko.angle,Du=Oh=$n.angle,To!==pn&&(Oh=X.computeAngle(To,Du=To===lh||To===_f?Ms+$n.angle:Ms)),on.xb=Oh,on.text=ko.text||"",on.measure(1/0,1/0,0,0);var No=on.measuredBounds,Su=on.naturalBounds,Xo=Su.width,qs=Su.height,yr=St.alloc();yr.reset(),yr.translate(-No.x,-No.y),yr.scale(on.scale,on.scale),yr.rotate(Du,Xo/2,qs/2),To!==ul&&To!==Hc||yr.rotate(90,Xo/2,qs/2),To!==wf&&To!==Gc||yr.rotate(-90,Xo/2,qs/2),To===zg&&(45<Ms&&135>Ms||225<Ms&&315>Ms)&&yr.rotate(-Ms,Xo/2,qs/2);var M0=B.allocAt(0,0,Xo,qs),ta=N.alloc();ta.Ui(M0,ud),yr.ya(ta);var cd=-ta.x,qf=-ta.y,Wr=N.alloc();Wr.assign(Qs),isNaN(Wr.x)&&(Wr.x=Xo/2+3),isNaN(Wr.y)&&(Wr.y=-(qs/2+3)),Wr.rotate(Ms);var Pm=new B(Cu+=Wr.x+cd,hd+=Wr.y+qf,No.width,No.height),Am=new B(No.x,No.y,No.width,No.height),Eu=new B(Su.x,Su.y,Su.width,Su.height);ko.wA=Oh,ko.lineCount=on.lineCount,ko.lines=[on.qb,on.di,on.oe,on.ze,on.zc,on.Pb,on.me],ko.actualBounds=Pm,ko.measuredBounds=Am,ko.naturalBounds=Eu,0===_l?mr.assign(Pm):mr.Nc(Pm),N.free(Wr),N.free(ta),B.free(M0),St.free(yr)}null!==Te.Kg&&Te.Kg.push(mr),hn(ws,mr.x,mr.y,mr.width,mr.height)}Di($n,!1)}}},kc.prototype.arrange=function(t,e,n){if(null!==t.Kg){var i=t.nb(),a=t.tj;if(null!==a){var u=t.Kg,h=0,d=u[h];h++,null!==i&&i.arrange(d.x-n.x,d.y-n.y,d.width,d.height);for(var f=e.length,g=0;g<f;g++){var m=e[g];d=a[g],m.visible&&m!==i&&0!==d.length&&(d=u[h],h++,m.arrange(d.x-n.x,d.y-n.y,d.width,d.height))}t.Kg=null}}},kc.prototype.lc=function(t,e,n){var i=n.zj;n.zj=!0;var a=t.naturalBounds,u=a.width;a=a.height,e.save(),e.beginPath(),e.rect(-1,-1,u+1,a+1),e.clip(),(u=t.nb()).lc(e,n),0>=(a=t.wf()*n.scale)&&(a=1);for(var h=u.actualBounds,d=t.T.m,f=t.tj,g=d.length,m=0;m<g;m++){var y=d[m],x=f[m],_=x.length;if(y.visible&&y!==u&&0!==x.length)if(y instanceof wt){if(!(2>t.graduatedTickUnit*y.interval*u.geometry.flattenedTotalLength/t.graduatedRange*a)){var M=y.measuredBounds,S=y.strokeWidth*y.scale,T=y.alignmentFocus;T.wc()&&(T=go);for(var k=0;k<_;k++){var b=x[k].tm,I=x[k].angle,O=T,F=y.tb;F.reset(),F.translate(b.x+h.x,b.y+h.y),F.rotate(I+y.angle,0,0),F.translate(-M.width*O.x+O.offsetX+S/2,-M.height*O.y+O.offsetY+S/2),F.scale(y.scale,y.scale),Ju(y,!1),y.Mh.set(y.tb),y.al=y.scale,_a(y,!1),y.lc(e,n),y.tb.reset()}}}else if(y instanceof Zt)for(null===t.mh&&(t.mh=new Zt),hw(M=t.mh,y),y=0;y<_;y++)(S=x[y]).actualBounds&&S.measuredBounds&&S.naturalBounds&&(M.Ub=S.text||"",M.xb=S.wA||0,M.Wc=S.lineCount||0,void 0!==(T=S.lines)&&(M.qb=T[0],M.di=T[1],M.oe=T[2],M.ze=T[3],M.zc=T[4],M.Pb=T[5],M.me=T[6]),S.naturalBounds&&(M.qc=S.naturalBounds),S.actualBounds&&M.arrange((T=S.actualBounds).x,T.y,T.width,T.height),M.arrange((T=S.actualBounds).x,T.y,T.width,T.height),k=S.measuredBounds,S=S.naturalBounds,(b=M.tb).reset(),b.translate(T.x+h.x,T.y+h.y),b.translate(-k.x,-k.y),M.zp(b,S.x,S.y,S.width,S.height),Ju(M,!1),M.Mh.set(M.tb),M.al=M.scale,_a(M,!1),M.lc(e,n))}n.zj=i,e.restore(),e.Ec(!0)},Ft(Y,ut),Y.prototype.cloneProtected=function(t){if(ut.prototype.cloneProtected.call(this,t),t.ia=this.ia,t.mb=this.mb.I(),t.wn=this.wn.I(),t.Kf=this.Kf,t.ia===Y.Table){t.oj=this.oj.I(),t.Bg=this.Bg,t.Vh=this.Vh,t.Uh=this.Uh,t.Ag=this.Ag,t.zg=this.zg,t.Th=this.Th;var e=[];if(0<this.Db.length)for(var n=this.Db,i=n.length,a=0;a<i;a++)if(void 0!==n[a]){var u=n[a].copy();u.Ti(t),e[a]=u}if(t.Db=e,e=[],0<this.yb.length)for(i=(n=this.yb).length,a=0;a<i;a++)void 0!==n[a]&&((u=n[a].copy()).Ti(t),e[a]=u);t.yb=e,t.Pj=this.Pj,t.nj=this.nj,t.wi=this.wi,t.fi=this.fi}t.Sp=this.Sp,t.Vn=this.Vn.I(),t.Wn=this.Wn.I(),t.Sn=this.Sn,t.Rn=this.Rn,t.Un=this.Un,t.Tn=this.Tn,t.tj=this.tj,t.Nf=this.Nf,t.ib=this.ib,t.Ph=this.Ph,t.oo=this.oo,t.bi=this.bi,t.se=this.se,t.pl=this.pl,t.dg.assign(this.dg),t.Oe=this.Oe,null!==this.pp&&(t.pp=this.pp)},Y.prototype.sf=function(t){ut.prototype.sf.call(this,t),t.T=this.T;for(var e=t.T.m,n=e.length,i=0;i<n;i++)e[i].Xf=t;t.lh=null},Y.prototype.copy=function(){var t=ut.prototype.copy.call(this);if(null!==t){for(var e=this.T.m,n=e.length,i=0;i<n;i++){var a=e[i].copy();a.Ti(t),a.Nj=null;var u=t.T,h=u.count;if(u.ub(h,a),null!==(u=t.part)){u.li=null,null!==a.portId&&u instanceof Q&&(u.Ge=!0);var d=t.diagram;null!==d&&d.undoManager.isUndoingRedoing||u.Va(Pt,"elements",t,null,a,null,h)}}return t}return null},(D=Y.prototype).toString=function(){return"Panel("+this.type.name+")#"+Jt(this)},D.Qo=function(t){ut.prototype.Qo.call(this,t);for(var e=this.T.m,n=e.length,i=0;i<n;i++)e[i].Qo(t)},D.Fi=function(t,e){if(this.ia===Y.Grid)t.Bd(),this.ia.lc(this,t,e);else if(this.ia===Y.Graduated)t.Bd(),this.ia.lc(this,t,e);else{this.ia===Y.Table&&(t.Bd(),t.lineCap="butt",dg(this,t,!0,this.Db,!0),dg(this,t,!1,this.yb,!0),Zy(this,t,!0,this.Db),Zy(this,t,!1,this.yb),dg(this,t,!0,this.Db,!1),dg(this,t,!1,this.yb,!1));var n=this.isClipping&&this.ia===Y.Spot;n&&t.save();for(var i=this.nb(),a=this.T.m,u=a.length,h=0;h<u;h++){var d=a[h];n&&d===i&&(t.clipInsteadOfFill=!0),d.lc(t,e),n&&d===i&&(t.clipInsteadOfFill=!1)}n&&(t.restore(),t.Ec(!0))}},D.kk=function(t,e,n,i,a){var u=this.he(),h=this.transform,d=1/(h.m11*h.m22-h.m12*h.m21),f=h.m22*d,g=-h.m12*d,m=-h.m21*d,y=h.m11*d,x=d*(h.m21*h.dy-h.m22*h.dx),_=d*(h.m12*h.dx-h.m11*h.dy);if(null!==this.areaBackground)return R.yf((h=this.actualBounds).left,h.top,h.right,h.bottom,t,e,n,i,a);if(null!==this.background)return u=t*f+e*m+x,d=t*g+e*y+_,t=n*f+i*m+x,f=n*g+i*y+_,a.h(0,0),u=R.yf(0,0,(n=this.naturalBounds).width,n.height,u,d,t,f,a),a.transform(h),u;u||(f=1,m=g=0,y=1,_=x=0),d=t*f+e*m+x,t=t*g+e*y+_,a.h(f=n*f+i*m+x,n=n*g+i*y+_),i=(f-d)*(f-d)+(n-t)*(n-t),g=!1,_=(y=this.T.m).length,m=N.alloc(),x=null,e=1/0;var M=null,S=this.isClipping&&this.ia===Y.Spot;S&&(M=N.alloc(),(g=(x=this.nb()).kk(d,t,f,n,M))&&(e=(d-M.x)*(d-M.x)+(t-M.y)*(t-M.y)));for(var T=0;T<_;T++){var k=y[T];k.visible&&k!==x&&k.kk(d,t,f,n,m)&&(g=!0,(k=(d-m.x)*(d-m.x)+(t-m.y)*(t-m.y))<i&&(i=k,a.set(m)))}return S&&(e>i&&a.set(M),N.free(M)),N.free(m),u&&a.transform(h),g},D.s=function(t){if(!Rn(this)){ut.prototype.s.call(this,t),t=null,(this.ia===Y.Auto||this.ia===Y.Link)&&(t=this.nb());for(var e=this.T.m,n=e.length,i=0;i<n;i++){var a=e[i];if((a===t||a.isPanelMain)&&a.s(!0),!a.desiredSize.u()){var u=xo(a,!1);(a instanceof yi||a instanceof Y||a instanceof Zt||u!==ze)&&a.s(!0)}}}},D.mk=function(){if(!Rn(this)){Di(this,!0),Wl(this,!0);for(var t=this.T.m,e=t.length,n=0;n<e;n++)t[n].mk()}},D.ll=function(){if(0==(2048&this.G)){Ju(this,!0),_a(this,!0);for(var t=this.T.m,e=t.length,n=0;n<e;n++)t[n].Bv()}},D.Bv=function(){_a(this,!0);for(var t=this.T.m,e=t.length,n=0;n<e;n++)t[n].Bv()},D.qm=function(t,e,n,i){var a=this.dg;a.h(0,0,0,0);var u=this.desiredSize,h=this.minSize;void 0===n&&(n=h.width,i=h.height),n=Math.max(n,h.width),i=Math.max(i,h.height);var d=this.maxSize;isNaN(u.width)||(t=Math.min(u.width,d.width)),isNaN(u.height)||(e=Math.min(u.height,d.height)),t=Math.max(n,t),e=Math.max(i,e);var f=this.mb;t=Math.max(t-f.left-f.right,0),e=Math.max(e-f.top-f.bottom,0);var g=this.T.m;0!==g.length&&this.ia.measure(this,t,e,g,a,n,i),t=a.width+f.left+f.right,f=a.height+f.top+f.bottom,isFinite(u.width)&&(t=u.width),isFinite(u.height)&&(f=u.height),t=Math.min(d.width,t),f=Math.min(d.height,f),t=Math.max(h.width,t),f=Math.max(h.height,f),_r(a,t=Math.max(n,t),f=Math.max(i,f)),_r(this.naturalBounds,t,f),this.ue(0,0,t,f)},D.nb=function(){if(null===this.lh){var t=this.T.m,e=t.length;if(0===e)return null;for(var n=0;n<e;n++){var i=t[n];if(!0===i.isPanelMain)return this.lh=i}this.lh=t[0]}return this.lh},D.vh=function(t,e,n,i){var a=this.T.m;if(this.actualBounds.h(t,e,n,i),0!==a.length){if(!this.desiredSize.u()){t=xo(this,!0);var u=this.measuredBounds;e=u.width,u=u.height;var h=this.Pg,d=h.left+h.right;switch(h=h.top+h.bottom,e===n&&u===i&&(t=ze),t){case ze:(e>n||u>i)&&(this.s(),this.measure(e>n?n:e,u>i?i:u,0,0));break;case Ve:this.s(!0),this.measure(n+d,i+h,0,0);break;case Ln:this.s(!0),this.measure(n+d,u+h,0,0);break;case En:this.s(!0),this.measure(e+d,i+h,0,0)}}this.ia.arrange(this,a,this.dg)}},D.xh=function(t){var e=this.naturalBounds,n=ss(this);if(Wi(0,0,e.width,e.height,t.x,t.y)){for(var i=(e=this.T.m).length,a=N.allocAt(0,0);i--;){var u=e[i];if((u.visible||u===n)&&(He(a.set(t),u.transform),u.$(a)))return N.free(a),!0}return N.free(a),!(null===this.Rb&&null===this.fd)}return!1},D.Bs=function(t){if(this.Mk===t)return this;for(var e=this.T.m,n=e.length,i=0;i<n;i++){var a=e[i].Bs(t);if(null!==a)return a}return null},D.Mm=function(t,e){if(e(this,t),t instanceof Y)for(var n=(t=t.T.m).length,i=0;i<n;i++)this.Mm(t[i],e)},D.hm=function(t){return sf(this,this,t)},D.Ya=function(t){if(this.name===t)return this;var e=this.T.m,n=e.length;null===this.bi&&null===this.se||(n=Pc(this));for(var i=0;i<n;i++){var a=e[i];if(a instanceof Y){var u=a.Ya(t);if(null!==u)return u}if(a.name===t)return a}return null},D.he=function(){return!(this.type===Y.TableRow||this.type===Y.TableColumn)},D.Wb=function(t,e,n){if(!1===this.pickable||(void 0===e&&(e=null),void 0===n&&(n=null),fr(this)))return null;var i=this.naturalBounds,a=1/this.wf(),u=this.he(),h=u?t:He(N.allocAt(t.x,t.y),this.transform),d=this.diagram,f=10,g=5;if(null!==d&&(g=(f=d.km("extraTouchArea"))/2),Wi(-g*a,-g*a,i.width+f*a,i.height+f*a,h.x,h.y)){if(!this.isAtomic){var m=(a=this.T.m).length;if(d=N.alloc(),g=(f=this.isClipping&&this.ia===Y.Spot)?this.nb():null,f&&(g.he()?He(d.set(t),g.transform):d.set(t),!g.$(d)))return N.free(d),u||N.free(h),null;for(var y=ss(this);m--;){var x=a[m];if((x.visible||x===y)&&(x.he()?He(d.set(t),x.transform):d.set(t),!f||x!==g)){var _=null;if(x instanceof Y?_=x.Wb(d,e,n):!0===x.pickable&&x.$(d)&&(_=x),null!==_&&(null!==e&&(_=e(_)),null!==_&&(null===n||n(_))))return N.free(d),u||N.free(h),_}}N.free(d)}return null===this.background&&null===this.areaBackground?(u||N.free(h),null):(t=Wi(0,0,i.width,i.height,h.x,h.y)?this:null,u||N.free(h),t)}return u||N.free(h),null},D.Ii=function(t,e,n,i){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===n&&(n=null);var a=this.naturalBounds,u=this.he(),h=u?t:He(N.allocAt(t.x,t.y),this.transform);if(a=Wi(0,0,a.width,a.height,h.x,h.y),this.type===Y.TableRow||this.type===Y.TableColumn||a){if(!this.isAtomic){for(var d=this.T.m,f=d.length,g=N.alloc(),m=ss(this);f--;){var y=d[f];if(y.visible||y===m){y.he()?He(g.set(t),y.transform):g.set(t);var x=y;(null!==(y=y instanceof Y?y:null)?y.Ii(g,e,n,i):x.$(g))&&!1!==x.pickable&&(null!==e&&(x=e(x)),null===x||null!==n&&!n(x)||i.add(x))}}N.free(g)}return u||N.free(h),a&&(null!==this.background||null!==this.areaBackground)}return u||N.free(h),!1},D.vf=function(t,e,n,i,a,u){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===n&&(n=null);var h=u;if(void 0===u&&(h=St.alloc()).reset(),h.multiply(this.transform),this.wh(t,h))return fg(this,e,n,a),void 0===u&&St.free(h),!0;if(this.Ic(t,h)){if(!this.isAtomic)for(var d=ss(this),f=this.T.m,g=f.length;g--;){var m=f[g];if(m.visible||m===d){var y=m.actualBounds,x=this.naturalBounds;y.x>x.width||y.y>x.height||0>y.x+y.width||0>y.y+y.height||(y=m,m=m instanceof Y?m:null,(x=St.alloc()).set(h),(null!==m?m.vf(t,e,n,i,a,x):Uy(y,t,i,x))&&(null!==e&&(y=e(y)),null===y||null!==n&&!n(y)||a.add(y)),St.free(x))}}return void 0===u&&St.free(h),i}return void 0===u&&St.free(h),!1},D.kg=function(t,e,n,i,a,u){if(!1===this.pickable)return!1;void 0===n&&(n=null),void 0===i&&(i=null);var h=this.naturalBounds,d=this.he(),f=d?t:He(N.allocAt(t.x,t.y),this.transform),g=d?e:He(N.allocAt(e.x,e.y),this.transform),m=f.tf(g),y=0<f.x&&f.x<h.width&&0<f.y&&f.y<h.height||Re(f.x,f.y,0,0,0,h.height)<=m||Re(f.x,f.y,0,h.height,h.width,h.height)<=m||Re(f.x,f.y,h.width,h.height,h.width,0)<=m||Re(f.x,f.y,h.width,0,0,0)<=m;if(h=f.nd(0,0)<=m&&f.nd(0,h.height)<=m&&f.nd(h.width,0)<=m&&f.nd(h.width,h.height)<=m,d||(N.free(f),N.free(g)),y){if(!this.isAtomic){f=N.alloc(),g=N.alloc(),m=ss(this);for(var x=this.T.m,_=x.length;_--;){var M=x[_];if(M.visible||M===m){var S=M.actualBounds,T=this.naturalBounds;(!d||!(S.x>T.width||S.y>T.height||0>S.x+S.width||0>S.y+S.height))&&(M.he()?(S=M.transform,He(f.set(t),S),He(g.set(e),S)):(f.set(t),g.set(e)),S=M,(null!==(M=M instanceof Y?M:null)?M.kg(f,g,n,i,a,u):S.Ux(f,g,a))&&(null!==n&&(S=n(S)),null===S||null!==i&&!i(S)||u.add(S)))}}N.free(f),N.free(g)}return a?y:h}return!1},D.add=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n]=arguments[n];for(n=0;n<e.length;n++)this.ub(this.T.count,e[n]);return this},D.J=function(t){return this.T.J(t)},D.ub=function(t,e){e instanceof ht&&z("Cannot add a Part to a Panel: "+e+"; use a Panel instead"),(this===e||this.mg(e))&&(this===e&&z("Cannot make a Panel contain itself: "+this.toString()),z("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+e.toString()));var n=e.panel;if(null!==n&&n!==this&&z("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+e.toString()+", already contained by "+n.toString()+", cannot be shared by this Panel: "+this.toString()),this.ia!==Y.Grid||e instanceof wt||z("Can only add Shapes to a Grid Panel, not: "+e),this.ia!==Y.Graduated||e instanceof wt||e instanceof Zt||z("Can only add Shapes or TextBlocks to a Graduated Panel, not: "+e),e.Ti(this),e.Nj=null,null!==this.itemArray){var i=e.data;null!==i&&"object"==typeof i&&(null===this.Xd&&(this.Xd=new xt),this.Xd.add(i,e))}var a=this.T;if(i=-1,n===this){for(var u=-1,h=this.T.m,d=h.length,f=0;f<d;f++)if(h[f]===e){u=f;break}if(-1!==u){if(u===t||u+1>=a.count&&t>=a.count)return;a.eb(u),i=u}else z("element "+e.toString()+" has panel "+n.toString()+" but is not contained by it.")}(0>t||t>a.count)&&(t=a.count),a.ub(t,e),(0===t||e.isPanelMain)&&(this.lh=null),Rn(this)||this.s(),e.s(!1),(null!==e.portId||e instanceof Y&&!0===e.Ge)&&(this.Ge=!0),this.Nf=null,this.Af()||cf(this,e,!1),null!==(n=this.part)&&(n.li=null,n.Sf=NaN,this.Ge&&n instanceof Q&&(n.Ge=!0),n.Ge&&n instanceof Q&&(n.kc=null),null!==(a=this.diagram)&&a.undoManager.isUndoingRedoing||(-1!==i&&n.Va(sn,"elements",this,e,null,i,null),n.Va(Pt,"elements",this,null,e,null,t)))},D.remove=function(t){for(var e=this.T.m,n=e.length,i=-1,a=0;a<n;a++)if(e[a]===t){i=a;break}-1!==i&&this.bc(i,!0)},D.eb=function(t){0<=t&&this.bc(t,!0)},D.bc=function(t,e){var n=this.T,i=n.J(t);if(i.Nj=null,i.Ti(null),null!==this.Xd){var a=i.data;"object"==typeof a&&this.Xd.remove(a)}n.eb(t),Di(this,!1),this.s(),this.lh===i&&(this.lh=null),this.Nf=null;var u=this.part;null!==u&&(u.li=null,u.Sf=NaN,u.Kb(),u instanceof Q&&(i instanceof Y?i.Mm(i,function(h,d){wv(u,d,e)}):wv(u,i,e)),null!==(n=this.diagram)&&n.undoManager.isUndoingRedoing||u.Va(sn,"elements",this,i,null,t,null))},Y.prototype.getRowDefinition=function(t){0>t&&me(t,">= 0",Y,"getRowDefinition:idx"),t=Math.round(t);var e=this.Db;if(void 0===e)return null;if(void 0===e[t]){var n=new en;n.Ti(this),n.isRow=!0,n.index=t,e[t]=n,this.Va(Pt,"rowdefs",this,null,n,null,t)}return e[t]},Y.prototype.RA=function(t){0>t&&me(t,">= 0",Y,"removeRowDefinition:idx"),t=Math.round(t);var e=this.Db;if(void 0!==e){var n=e[t];if(n){e[t]=void 0;for(var i=e.length-1;0<=i&&void 0===e[i--];)e.length--;this.Va(sn,"rowdefs",this,n,null,t,null),this.s()}}},Y.prototype.getColumnDefinition=function(t){0>t&&me(t,">= 0",Y,"getColumnDefinition:idx"),t=Math.round(t);var e=this.yb;if(void 0===e)return null;if(void 0===e[t]){var n=new en;n.Ti(this),n.isRow=!1,n.index=t,e[t]=n,this.Va(Pt,"coldefs",this,null,n,null,t)}return e[t]},(D=Y.prototype).MA=function(t){0>t&&me(t,">= 0",Y,"removeColumnDefinition:idx"),t=Math.round(t);var e=this.yb;if(void 0!==e){var n=e[t];if(n){e[t]=void 0;for(var i=e.length-1;0<=i&&void 0===e[i--];)e.length--;this.Va(sn,"coldefs",this,n,null,t,null),this.s()}}},D.Tz=function(t){if(0>t||this.type!==Y.Table)return-1;for(var e=0,n=this.Db,i=n.length,a=this.wi;a<i;a++){var u=n[a];if(void 0!==u&&t<(e+=u.total))break}return a},D.Lz=function(t){if(0>t||this.type!==Y.Table)return-1;for(var e=0,n=this.yb,i=n.length,a=this.fi;a<i;a++){var u=n[a];if(void 0!==u&&t<(e+=u.total))break}return a},D.jA=function(t,e){if(void 0===e&&(e=new N(NaN,NaN)),this.type!==Y.Graduated)return e.h(NaN,NaN),e;t=Math.min(Math.max(t,this.graduatedMin),this.graduatedMax);var n=this.nb();return n.geometry.uv((t-this.graduatedMin)/this.graduatedRange,e),n.transform.ya(e)},D.kA=function(t){if(this.type!==Y.Graduated)return NaN;var e=this.nb();return e.transform.Ed(t),e.geometry.Yx(t)*this.graduatedRange+this.graduatedMin},D.yz=function(t){void 0===t&&(t=!1);var e=this.copy();return qy(e,function(n){n instanceof Y&&(n.Ph=null,n.ib=null);var i=n.fb;null!==i&&(n.fb=null,i.each(function(a){n.bind(a.copy())})),null!==(i=n.rg)&&(n.rg=null,i.each(function(a){n.fw(a.value.copy())}))}),t&&Gr(e),e},D.Da=function(t){var e=this.Ph;if(null!==e)for(void 0===t&&(t=""),e=e.iterator;e.next();){var n=e.value,i=n.sourceProperty;if((""===t||""===i||i===t)&&(i=n.targetProperty,null!==n.converter||""!==i)){i=this.data;var a=n.sourceName;if(null!==a){if(""===a)i=this;else if("/"===a)i=this;else if("."===a)i=this;else if(".."===a)i=this;else if(null===(i=this.Ya(a)))continue}else if(n.isToModel){if(null===(i=this.diagram))continue;i=i.model.modelData}var u=this,h=n.Yi;if(-1!==h){if(null===(u=this.Bs(h)))continue}else null!==n.md&&(u=n.md);if("/"===a?i=u.part:"."===a?i=u:".."===a&&(i=u.panel),0!==(a=n.Jp)){if(!(u instanceof Y))continue;1===a?u=u.getColumnDefinition(n.Xl):2===a&&(u=u.getRowDefinition(n.Xl))}void 0!==u&&n.iw(u,i)}}},D.Tx=function(t){return null==t||null===this.Xd?null:this.Xd.H(t)},D.Ov=function(){for(var t=Pc(this);this.T.length>t;)this.bc(this.T.length-1,!1);gg(this,this.itemArray)},Dt.Object.defineProperties(Y.prototype,{type:{get:function(){return this.ia},set:function(t){var e=this.ia;e!==t&&(this.ia=t,this.ia===Y.Grid?this.isAtomic=!0:this.ia===Y.Table&&Ky(this),this.s(),this.g("type",e,t))}},elements:{get:function(){return this.T.iterator}},naturalBounds:{get:function(){return this.qc}},padding:{get:function(){return this.mb},set:function(t){"number"==typeof t?(0>t&&me(t,">= 0",Y,"padding"),t=new Lt(t)):(0>t.left&&me(t.left,">= 0",Y,"padding:value.left"),0>t.right&&me(t.right,">= 0",Y,"padding:value.right"),0>t.top&&me(t.top,">= 0",Y,"padding:value.top"),0>t.bottom&&me(t.bottom,">= 0",Y,"padding:value.bottom"));var e=this.mb;e.A(t)||(this.mb=t=t.I(),this.s(),this.g("padding",e,t))}},defaultAlignment:{get:function(){return this.wn},set:function(t){var e=this.wn;e.A(t)||(this.wn=t=t.I(),this.s(),this.g("defaultAlignment",e,t))}},defaultStretch:{get:function(){return this.Kf},set:function(t){var e=this.Kf;e!==t&&(this.Kf=t,this.s(),this.g("defaultStretch",e,t))}},defaultSeparatorPadding:{get:function(){return void 0===this.oj?Kh:this.oj},set:function(t){if(void 0!==this.oj){"number"==typeof t&&(t=new Lt(t));var e=this.oj;e.A(t)||(this.oj=t=t.I(),this.s(),this.g("defaultSeparatorPadding",e,t))}}},defaultRowSeparatorStroke:{get:function(){return void 0===this.Vh?null:this.Vh},set:function(t){var e=this.Vh;e!==t&&(null===t||"string"==typeof t||t instanceof Bt)&&(t instanceof Bt&&t.freeze(),this.Vh=t,this.N(),this.g("defaultRowSeparatorStroke",e,t))}},defaultRowSeparatorStrokeWidth:{get:function(){return void 0===this.Bg?1:this.Bg},set:function(t){if(void 0!==this.Bg){var e=this.Bg;e!==t&&isFinite(t)&&0<=t&&(this.Bg=t,this.s(),this.g("defaultRowSeparatorStrokeWidth",e,t))}}},defaultRowSeparatorDashArray:{get:function(){return void 0===this.Uh?null:this.Uh},set:function(t){if(void 0!==this.Uh){var e=this.Uh;if(e!==t){if(null!==t){for(var n=t.length,i=0,a=0;a<n;a++){var u=t[a];"number"==typeof u&&0<=u&&isFinite(u)||z("defaultRowSeparatorDashArray value "+u+" at index "+a+" must be a positive number or zero."),i+=u}if(0===i){if(null===e)return;t=null}}this.Uh=t,this.N(),this.g("defaultRowSeparatorDashArray",e,t)}}}},defaultColumnSeparatorStroke:{get:function(){return void 0===this.zg?null:this.zg},set:function(t){if(void 0!==this.zg){var e=this.zg;e!==t&&(null===t||"string"==typeof t||t instanceof Bt)&&(t instanceof Bt&&t.freeze(),this.zg=t,this.N(),this.g("defaultColumnSeparatorStroke",e,t))}}},defaultColumnSeparatorStrokeWidth:{get:function(){return void 0===this.Ag?1:this.Ag},set:function(t){if(void 0!==this.Ag){var e=this.Ag;e!==t&&isFinite(t)&&0<=t&&(this.Ag=t,this.s(),this.g("defaultColumnSeparatorStrokeWidth",e,t))}}},defaultColumnSeparatorDashArray:{get:function(){return void 0===this.Th?null:this.Th},set:function(t){if(void 0!==this.Th){var e=this.Th;if(e!==t){if(null!==t){for(var n=t.length,i=0,a=0;a<n;a++){var u=t[a];"number"==typeof u&&0<=u&&isFinite(u)||z("defaultColumnSeparatorDashArray value "+u+" at index "+a+" must be a positive number or zero."),i+=u}if(0===i){if(null===e)return;t=null}}this.Th=t,this.N(),this.g("defaultColumnSeparatorDashArray",e,t)}}}},viewboxStretch:{get:function(){return this.Sp},set:function(t){var e=this.Sp;e!==t&&(this.Sp=t,this.s(),this.g("viewboxStretch",e,t))}},gridCellSize:{get:function(){return this.Vn},set:function(t){var e=this.Vn;if(!e.A(t)){t.u()&&0!==t.width&&0!==t.height||z("Invalid Panel.gridCellSize: "+t),this.Vn=t.I();var n=this.diagram;null!==n&&this===n.grid&&va(n),this.N(),this.g("gridCellSize",e,t)}}},gridOrigin:{get:function(){return this.Wn},set:function(t){var e=this.Wn;if(!e.A(t)){t.u()||z("Invalid Panel.gridOrigin: "+t),this.Wn=t.I();var n=this.diagram;null!==n&&this===n.grid&&va(n),this.N(),this.g("gridOrigin",e,t)}}},graduatedMin:{get:function(){return this.Sn},set:function(t){var e=this.Sn;e!==t&&(this.Sn=t,this.s(),this.g("graduatedMin",e,t),Ci(this)&&null!==(t=this.part)&&Xl(this,t,"graduatedRange"))}},graduatedMax:{get:function(){return this.Rn},set:function(t){var e=this.Rn;e!==t&&(this.Rn=t,this.s(),this.g("graduatedMax",e,t),Ci(this)&&null!==(t=this.part)&&Xl(this,t,"graduatedRange"))}},graduatedRange:{get:function(){return this.graduatedMax-this.graduatedMin}},graduatedTickUnit:{get:function(){return this.Un},set:function(t){var e=this.Un;e!==t&&0<t&&(this.Un=t,this.s(),this.g("graduatedTickUnit",e,t))}},graduatedTickBase:{get:function(){return this.Tn},set:function(t){var e=this.Tn;e!==t&&(this.Tn=t,this.s(),this.g("graduatedTickBase",e,t))}},Ge:{get:function(){return 0!=(8388608&this.G)},set:function(t){0!=(8388608&this.G)!==t&&(this.G^=8388608)}},rowCount:{get:function(){return void 0===this.Db?0:this.Db.length}},columnCount:{get:function(){return void 0===this.yb?0:this.yb.length}},rowSizing:{get:function(){return void 0===this.Pj?ff:this.Pj},set:function(t){if(void 0!==this.Pj){var e=this.Pj;e!==t&&(this.Pj=t,this.s(),this.g("rowSizing",e,t))}}},columnSizing:{get:function(){return void 0===this.nj?ff:this.nj},set:function(t){if(void 0!==this.nj){var e=this.nj;e!==t&&(this.nj=t,this.s(),this.g("columnSizing",e,t))}}},topIndex:{get:function(){return void 0===this.wi?0:this.wi},set:function(t){if(void 0!==this.wi){var e=this.wi;e!==t&&((!isFinite(t)||0>t)&&z("Panel.topIndex must be greater than zero and a real number, not: "+t),this.wi=t,this.s(),this.g("topIndex",e,t))}}},leftIndex:{get:function(){return void 0===this.fi?0:this.fi},set:function(t){if(void 0!==this.fi){var e=this.fi;e!==t&&((!isFinite(t)||0>t)&&z("Panel.leftIndex must be greater than zero and a real number, not: "+t),this.fi=t,this.s(),this.g("leftIndex",e,t))}}},data:{get:function(){return this.ib},set:function(t){var e=this.ib;if(e!==t){var n=this instanceof ht&&!(this instanceof At);Gr(this),this.ib=t;var i=this.diagram;null!==i&&(n?(n=i.partManager,this instanceof X?(null!==e&&n.Qe.remove(e),null!==t&&n.Qe.add(t,this)):this instanceof ht&&(null!==e&&n.Re.remove(e),null!==t&&n.Re.add(t,this))):null!==(n=this.panel)&&null!==n.Xd&&(null!==e&&n.Xd.remove(e),null!==t&&n.Xd.add(t,this))),this.g("data",e,t),null!==i&&i.undoManager.isUndoingRedoing||null!==t&&this.Da()}}},itemIndex:{get:function(){return this.oo},set:function(t){var e=this.oo;e!==t&&(this.oo=t,this.g("itemIndex",e,t))}},itemArray:{get:function(){return this.bi},set:function(t){var e=this.bi;if(e!==t||null!==t&&function qM(t,e){for(var n=(t=t.T.m).length,i=e.length,a=0,u=null;a<n&&!((u=t[a])instanceof Y&&null!==u.data);)u=t[++a];if(n-a!==i)return!0;if(null===u)return 0<i;for(var h=0;a<n&&h<i;){if(!((u=t[a])instanceof Y)||u.data!==e[h])return!0;a++,h++}return!1}(this,t)){var n=this.diagram;e!==t&&(null!==n&&null!==e&&pr(n.partManager,this,n),this.bi=t,null!==n&&null!==t&&fh(n.partManager,this)),this.g("itemArray",e,t),null!==n&&n.undoManager.isUndoingRedoing||gg(this,t)}}},itemTemplate:{get:function(){return null===this.se?null:this.se.H("")},set:function(t){if(null===this.se){if(null===t)return;this.se=new xt}var e=this.se.H("");e!==t&&((t instanceof ht||t.isPanelMain)&&z("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: "+t),this.se.add("",t),this.g("itemTemplate",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.Ov())}},itemTemplateMap:{get:function(){return this.se},set:function(t){var e=this.se;if(e!==t){for(var n=t.iterator;n.next(););this.se=t,this.g("itemTemplateMap",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.Ov()}}},itemCategoryProperty:{get:function(){return this.pl},set:function(t){var e=this.pl;e!==t&&(this.pl=t,this.g("itemCategoryProperty",e,t))}},isAtomic:{get:function(){return 0!=(1048576&this.G)},set:function(t){var e=0!=(1048576&this.G);e!==t&&(this.G^=1048576,this.g("isAtomic",e,t))}},isClipping:{get:function(){return 0!=(2097152&this.G)},set:function(t){var e=0!=(2097152&this.G);e!==t&&(this.G^=2097152,this instanceof vt&&(this.$a=null),this.s(),this.g("isClipping",e,t))}},isOpposite:{get:function(){return 0!=(33554432&this.G)},set:function(t){var e=0!=(33554432&this.G);e!==t&&(this.G^=33554432,this.s(),this.g("isOpposite",e,t))}},isEnabled:{get:function(){return 0!=(4194304&this.G)},set:function(t){var e=0!=(4194304&this.G);if(e!==t){var n=null===this.panel||this.panel.Af();this.G^=4194304,this.g("isEnabled",e,t),null!==(e=this.diagram)&&e.undoManager.isUndoingRedoing||n&&cf(this,this,t)}}},alignmentFocusName:{get:function(){return this.Oe},set:function(t){var e=this.Oe;e!==t&&(this.Oe=t,this.s(),this.g("alignmentFocusName",e,t))}}}),Dt.Object.defineProperties(Y,{Position:{get:function(){return no.H("Position")}},Horizontal:{get:function(){return no.H("Horizontal")}},Vertical:{get:function(){return no.H("Vertical")}},Spot:{get:function(){return no.H("Spot")}},Auto:{get:function(){return no.H("Auto")}},Table:{get:function(){return no.H("Table")}},Viewbox:{get:function(){return no.H("Viewbox")}},TableRow:{get:function(){return no.H("TableRow")}},TableColumn:{get:function(){return no.H("TableColumn")}},Link:{get:function(){return no.H("Link")}},Grid:{get:function(){return no.H("Grid")}},Graduated:{get:function(){return no.H("Graduated")}}}),Y.prototype.rebuildItemElements=Y.prototype.Ov,Y.prototype.findItemPanelForData=Y.prototype.Tx,Y.prototype.updateTargetBindings=Y.prototype.Da,Y.prototype.copyTemplate=Y.prototype.yz,Y.prototype.graduatedValueForPoint=Y.prototype.kA,Y.prototype.graduatedPointForValue=Y.prototype.jA,Y.prototype.findColumnForLocalX=Y.prototype.Lz,Y.prototype.findRowForLocalY=Y.prototype.Tz,Y.prototype.removeColumnDefinition=Y.prototype.MA,Y.prototype.removeRowDefinition=Y.prototype.RA,Y.prototype.removeAt=Y.prototype.eb,Y.prototype.remove=Y.prototype.remove,Y.prototype.insertAt=Y.prototype.ub,Y.prototype.elt=Y.prototype.J,Y.prototype.add=Y.prototype.add,Y.prototype.findObject=Y.prototype.Ya,Y.prototype.findInVisualTree=Y.prototype.hm,Y.prototype.walkVisualTreeFrom=Y.prototype.Mm,Y.prototype.findMainElement=Y.prototype.nb;var uw=!1,as=null,no=new xt;function en(){xn(this),this.Xf=null,this.Br=!0,this.Qa=0,this.rc=NaN,this.Ij=0,this.Hj=1/0,this.wb=Fi,this.ka=this.$b=this.ga=0,this.fb=null,this.Cp=iv,this.Be=Lo,this.xp=this.$f=null,this.yp=NaN,this.Rb=this.Tj=null,this.sn=!1}function yg(t){if(t.sizing===iv){var e=t.Xf;return t.isRow?e.rowSizing:e.columnSizing}return t.sizing}Y.className="Panel",Y.definePanelLayout=jo,jo("Position",new Ec),jo("Vertical",new sg),jo("Auto",new lg),jo("Link",new cg),en.prototype.copy=function(){var t=new en;return t.Br=this.Br,t.Qa=this.Qa,t.rc=this.rc,t.Ij=this.Ij,t.Hj=this.Hj,t.wb=this.wb,t.ga=this.ga,t.$b=this.$b,t.ka=this.ka,t.Be=this.Be,t.Cp=this.Cp,t.$f=null===this.$f?null:this.$f.I(),t.xp=this.xp,t.yp=this.yp,t.Tj=null,null!==this.Tj&&(t.separatorDashArray=Xi(this.separatorDashArray)),t.Rb=this.Rb,t.sn=this.sn,t.fb=this.fb,t},(D=en.prototype).gb=function(t){t.classType===en&&(this.sizing=t)},D.toString=function(){return"RowColumnDefinition "+(this.isRow?"(Row ":"(Column ")+this.index+") #"+Jt(this)},D.Ti=function(t){this.Xf=t},D.cq=function(t){var e=0,n=this.Xf;if(this.index!==t&&(null===(t=this.separatorStroke)&&null!==n&&(t=this.isRow?n.defaultRowSeparatorStroke:n.defaultColumnSeparatorStroke),null!==t&&(e=this.separatorStrokeWidth,isNaN(e)&&(e=null!==n?this.isRow?n.defaultRowSeparatorStrokeWidth:n.defaultColumnSeparatorStrokeWidth:0))),null===(t=this.$f)){if(null===n)return e;t=n.defaultSeparatorPadding}return e+(this.isRow?t.top:t.left)},D.Fc=function(){var t=0,e=this.Xf,n=0,i=this.isRow;if(null!==e&&e.type===Y.Table)for(var a=i?e.Db.length:e.yb.length,u=0;u<a;u++){var h=i?e.Db[u]:e.yb[u];if(void 0!==h){n=h.index;break}}if(this.index!==n&&(null===(n=this.separatorStroke)&&null!==e&&(n=i?e.defaultRowSeparatorStroke:e.defaultColumnSeparatorStroke),null!==n&&(t=this.separatorStrokeWidth,isNaN(t)&&(t=null!==e?i?e.defaultRowSeparatorStrokeWidth:e.defaultColumnSeparatorStrokeWidth:0))),null===(i=this.$f)){if(null===e)return t;i=e.defaultSeparatorPadding}return t+(this.isRow?i.top+i.bottom:i.left+i.right)},D.Cb=function(t,e,n){var i=this.Xf;if(null!==i&&(i.Va(ve,t,this,e,n,void 0,void 0),null!==this.fb&&null!==(e=i.diagram)&&!e.skipsModelSourceBindings&&null!==(i=i.yh())&&null!==(e=i.data)))for(n=this.fb.iterator;n.next();)n.value.Mq(this,e,t,i)},D.bind=function(t,e,n,i){var a=null;return(a="string"==typeof t?new Fe(t,e,n,i):t).md=this,null!==(t=this.panel)&&null!==(e=t.yh())&&ev(e)&&z("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+a+" on "+t),null===this.fb&&(this.fb=new et),this.fb.add(a),this},Dt.Object.defineProperties(en.prototype,{panel:{get:function(){return this.Xf}},isRow:{get:function(){return this.Br},set:function(t){this.Br=t}},index:{get:function(){return this.Qa},set:function(t){this.Qa=t}},height:{get:function(){return this.rc},set:function(t){var e=this.rc;e!==t&&(0>t&&me(t,">= 0",en,"height"),this.rc=t,this.actual=this.ga,null!==this.panel&&this.panel.s(),this.Cb("height",e,t))}},width:{get:function(){return this.rc},set:function(t){var e=this.rc;e!==t&&(0>t&&me(t,">= 0",en,"width"),this.rc=t,this.actual=this.ga,null!==this.panel&&this.panel.s(),this.Cb("width",e,t))}},minimum:{get:function(){return this.Ij},set:function(t){var e=this.Ij;e!==t&&((0>t||!isFinite(t))&&me(t,">= 0",en,"minimum"),this.Ij=t,this.actual=this.ga,null!==this.panel&&this.panel.s(),this.Cb("minimum",e,t))}},maximum:{get:function(){return this.Hj},set:function(t){var e=this.Hj;e!==t&&(0>t&&me(t,">= 0",en,"maximum"),this.Hj=t,this.actual=this.ga,null!==this.panel&&this.panel.s(),this.Cb("maximum",e,t))}},alignment:{get:function(){return this.wb},set:function(t){var e=this.wb;e.A(t)||(this.wb=t.I(),null!==this.panel&&this.panel.s(),this.Cb("alignment",e,t))}},stretch:{get:function(){return this.Be},set:function(t){var e=this.Be;e!==t&&(this.Be=t,null!==this.panel&&this.panel.s(),this.Cb("stretch",e,t))}},separatorPadding:{get:function(){return this.$f},set:function(t){"number"==typeof t&&(t=new Lt(t));var e=this.$f;null!==t&&null!==e&&e.A(t)||(null!==t&&(t=t.I()),this.$f=t,null!==this.panel&&this.panel.s(),this.Cb("separatorPadding",e,t))}},separatorStroke:{get:function(){return this.xp},set:function(t){var e=this.xp;e!==t&&(null!==t&&Ql(t,"RowColumnDefinition.separatorStroke"),t instanceof Bt&&t.freeze(),this.xp=t,null!==this.panel&&this.panel.s(),this.Cb("separatorStroke",e,t))}},separatorStrokeWidth:{get:function(){return this.yp},set:function(t){var e=this.yp;e!==t&&(this.yp=t,null!==this.panel&&this.panel.s(),this.Cb("separatorStrokeWidth",e,t))}},separatorDashArray:{get:function(){return this.Tj},set:function(t){var e=this.Tj;if(e!==t){if(null!==t){for(var n=t.length,i=0,a=0;a<n;a++){var u=t[a];"number"==typeof u&&0<=u&&isFinite(u)||z("separatorDashArray value "+u+" at index "+a+" must be a positive number or zero."),i+=u}if(0===i){if(null===e)return;t=null}}this.Tj=t,null!==this.panel&&this.panel.N(),this.Cb("separatorDashArray",e,t)}}},background:{get:function(){return this.Rb},set:function(t){var e=this.Rb;e!==t&&(null!==t&&Ql(t,"RowColumnDefinition.background"),t instanceof Bt&&t.freeze(),this.Rb=t,null!==this.panel&&this.panel.N(),this.Cb("background",e,t))}},coversSeparators:{get:function(){return this.sn},set:function(t){var e=this.sn;e!==t&&(this.sn=t,null!==this.panel&&this.panel.N(),this.Cb("coversSeparators",e,t))}},sizing:{get:function(){return this.Cp},set:function(t){var e=this.Cp;e!==t&&(this.Cp=t,null!==this.panel&&this.panel.s(),this.Cb("sizing",e,t))}},actual:{get:function(){return this.ga},set:function(t){this.ga=isNaN(this.rc)?Math.max(Math.min(this.Hj,t),this.Ij):Math.max(Math.min(this.Hj,this.rc),this.Ij)}},measured:{get:function(){return this.$b},set:function(t){this.$b=t}},total:{get:function(){return this.ga+this.Fc()}},position:{get:function(){return this.ka},set:function(t){this.ka=t}}}),en.prototype.computeEffectiveSpacing=en.prototype.Fc,en.prototype.computeEffectiveSpacingTop=en.prototype.cq;var iv=new J(en,"Default",0),df=new J(en,"None",1),ff=new J(en,"ProportionalExtra",2);function wt(t,e){ut.call(this),this.Ad=this.ma=null,this.Hn="None",this.Pn=Lo,this.Dc=this.cl="black",this.cg=1,this.Tl="butt",this.Ul="miter",this.Uj=10,this.ih=null,this.jh=0,this.jf=this.hf=Fi,this.Xo=this.Wo=NaN,this.eo=!1,this.Zo=null,this.dl=this.$l="None",this.Wd=1,this.Ud=0,this.Sd=1,this.Td=null,"string"==typeof t?this.figure=t:t&&Object.assign(this,t),e&&Object.assign(this,e)}function Ac(t,e,n,i){var a=n.length;if(!(4>a)){var u=i.measuredBounds,h=Math.max(1,u.width);u=u.height;for(var g,m,y,x,_,M,d=n[0],f=n[1],S=0,T=ye(),k=2;k<a;k+=2)0==(y=(g=n[k])-d)&&(y=.001),x=(d=(m=n[k+1])-f)/y,_=Math.atan2(d,y),M=Math.sqrt(y*y+d*d),T.push([y,_,x,M]),S+=M,d=g,f=m;d=n[0],f=n[1],y=i.measuredBounds.width,i instanceof wt&&(y-=i.strokeWidth),1>y&&(y=1),a=n=y,m=0!=(g=h/2),y=(M=T[k=0])[0],_=M[1],x=M[2],M=M[3];for(var b=0;.1<=S;){if(0===b&&(m?(a=n,a-=g,S-=g,m=!1):a=n,0===a&&(a=1)),a>S)return void oe(T);a>M?(b=a-M,a=M):b=0;var I=Math.sqrt(a*a/(1+x*x));if(0>y&&(I=-I),t.translate(d+=I,f+=x*I),t.rotate(_),t.translate(-h/2,-u/2),0===b&&i.Fi(t,e),t.translate(h/2,u/2),t.rotate(-_),t.translate(-d,-f),S-=a,M-=a,0!==b){if(++k===T.length)return void oe(T);y=(M=T[k])[0],_=M[1],x=M[2],M=M[3],a=b}}oe(T)}}function rv(t){var e=t.geometryStretch;return null!==t.Ad?e===Lo?Ve:e:e===Lo?Vo[t.figure].defaultStretch:e}function vg(t,e,n,i,a){return(e=(t=n.x-t)*t+(e=n.y-e)*e)<i?(a.x=n.x,a.y=n.y,e):i}function fe(t,e,n,i,a,u,h,d,f){var g=!1,m=(a-h)*(e-i)-(u-d)*(t-n);return 0!==m&&(f.x=((a*d-u*h)*(t-n)-(a-h)*(t*i-e*n))/m,f.y=((a*d-u*h)*(e-i)-(u-d)*(t*i-e*n))/m,(t>n?t-n:n-t)<(e>i?e-i:i-e)?(t=e<i?e:i,e=e<i?i:e,(f.y>t||R.aa(f.y,t))&&(f.y<e||R.aa(f.y,e))&&(g=!0)):(e=t<n?t:n,t=t<n?n:t,(f.x>e||R.aa(f.x,e))&&(f.x<t||R.aa(f.x,t))&&(g=!0)),g)}function cn(t,e,n,i){if(!t.Is(e,n,i))return!1;t=e.x,e=e.y;var a=n.x,u=n.y;return n=i.x,i=i.y,t===a?(e<u?(t=e,e=u):t=u,i>=t&&i<=e):(t<a?(i=t,t=a):i=a,n>=i&&n<=t)}function ov(t){var e=t.diagram;null!==e&&e.undoManager.isUndoingRedoing||(t.segmentOrientation=lh,"None"!==t.$l?(t.segmentIndex=-1,t.alignmentFocus=Ki):"None"!==t.dl&&(t.segmentIndex=0,t.alignmentFocus=new ct(1-Ki.x,Ki.y)))}function sv(t){var e=io[t];if(void 0===e){var n=t.toLowerCase();if("none"===n)return"None";if(void 0===(e=io[n])){var a,i=null;for(a in R.Qm)if(a.toLowerCase()===n){i=a;break}if(null!==i)return t=q.parse(R.Qm[i],!1),io[i]=t,n!==i&&(io[n]=i),i}}return"string"==typeof e?e:e instanceof q?t:null}en.className="RowColumnDefinition",en.Default=iv,en.None=df,en.ProportionalExtra=ff,Ft(wt,ut),wt.prototype.cloneProtected=function(t){ut.prototype.cloneProtected.call(this,t),t.ma=this.ma,t.Hn=this.Hn,t.Pn=this.Pn,t.Ad=this.Ad,t.cl=this.cl,t.Dc=this.Dc,t.cg=this.cg,t.Tl=this.Tl,t.Ul=this.Ul,t.Uj=this.Uj,null!==this.ih&&(t.ih=Xi(this.ih)),t.jh=this.jh,t.hf=this.hf.I(),t.jf=this.jf.I(),t.Wo=this.Wo,t.Xo=this.Xo,t.eo=this.eo,t.Zo=this.Zo,t.$l=this.$l,t.dl=this.dl,t.Wd=this.Wd,t.Ud=this.Ud,t.Sd=this.Sd,t.Td=this.Td},(D=wt.prototype).gb=function(t){t===ze||t===Fo||t===vc||t===Lo?this.geometryStretch=t:ut.prototype.gb.call(this,t)},D.toString=function(){return"Shape("+("None"!==this.figure?this.figure:"None"!==this.toArrow?this.toArrow:this.fromArrow)+")#"+Jt(this)},D.Fi=function(t,e){var n=this.Dc,i=this.cl;if(null!==n||null!==i){var a=this.ma;if(null!==a){t.Bd();var u=this.actualBounds,h=this.naturalBounds;null!==i&&dr(this,t,i,!0,!1,h,u);var d=this.part,f=this.cg;if(null===n||0!==f||null===d||!this.isPanelMain&&d.nb()!==this||(f=d.type===Y.Link&&d instanceof At&&"Selection"===d.category&&d.adornedObject instanceof wt&&d.adornedPart.nb()===d.adornedObject?d.adornedObject.strokeWidth:0),0===f&&(n=null),null!==n&&0!==f&&(dr(this,t,n,!1,!1,h,u),t.lineWidth=f,t.lineJoin=this.Ul,t.lineCap=this.Tl,t.miterLimit=this.Uj),u=!1,d&&e.Fe("drawShadows")&&(u=d.isShadowed),d=!0,null===n||null!==i&&"transparent"!==i||(d=!1),h=!1,null!==(f=this.strokeDashArray)&&(h=!0,t.As(f,this.jh)),a.type===q.j)t.beginPath(),t.moveTo(a.startX,a.startY),t.lineTo(a.endX,a.endY),null!==n&&t.Xi();else if(a.type===q.C){var g=a.startX;f=a.startY;var m=a.endX,y=a.endY;a=Math.min(g,m);var x=Math.min(f,y);g=Math.abs(m-g),f=Math.abs(y-f),t.beginPath(),t.rect(a,x,g,f),null!==i&&t.uf(i),null!==n&&(d&&u&&Fs(t),(0===g||0===f)&&(t.beginPath(),t.rect(a,x,Math.max(g,.1),Math.max(f,.1))),t.Xi(),d&&u&&Da(t))}else if(a.type===q.M)g=a.startX,f=a.startY,m=a.endX,y=a.endY,a=Math.abs(m-g)/2,x=Math.abs(y-f)/2,g=Math.min(g,m)+a,f=Math.min(f,y)+x,t.beginPath(),t.moveTo(g,f-x),t.bezierCurveTo(g+R.qg*a,f-x,g+a,f-R.qg*x,g+a,f),t.bezierCurveTo(g+a,f+R.qg*x,g+R.qg*a,f+x,g,f+x),t.bezierCurveTo(g-R.qg*a,f+x,g-a,f+R.qg*x,g-a,f),t.bezierCurveTo(g-a,f-R.qg*x,g-R.qg*a,f-x,g,f-x),t.closePath(),null!==i&&t.uf(i),null!==n&&(d&&u?(Fs(t),t.Xi(),Da(t)):t.Xi());else if(a.type===q.o)for(f=(a=a.figures).length,x=0;x<f;x++){g=a.m[x],t.beginPath(),t.moveTo(g.startX,g.startY),y=(m=g.segments.m).length;for(var _=null,M=0;M<y;M++){var S=m[M];switch(S.type){case In:t.moveTo(S.endX,S.endY);break;case Ge:t.lineTo(S.endX,S.endY);break;case Ji:t.bezierCurveTo(S.point1X,S.point1Y,S.point2X,S.point2Y,S.endX,S.endY);break;case lr:t.quadraticCurveTo(S.point1X,S.point1Y,S.endX,S.endY);break;case we:if(S.radiusX===S.radiusY){var T=Math.PI/180;t.arc(S.point1X,S.point1Y,S.radiusX,S.startAngle*T,(S.startAngle+S.sweepAngle)*T,0>S.sweepAngle,null!==_?_.endX:g.startX,null!==_?_.endY:g.startY)}else if(0===(T=(_=da(S,g)).length))t.lineTo(S.centerX,S.centerY);else for(var k=0;k<T;k++){var b=_[k];0===k&&t.lineTo(b[0],b[1]),t.bezierCurveTo(b[2],b[3],b[4],b[5],b[6],b[7])}break;case Qr:if(k=T=0,null!==_&&_.type===we){if(0===(b=(_=da(_,g)).length)){t.lineTo(S.endX,S.endY);break}null!==(_=_[b-1]||null)&&(T=_[6],k=_[7])}else T=null!==_?_.endX:g.startX,k=null!==_?_.endY:g.startY;if(0===(T=(_=Ns(S,g,T,k)).length)){t.lineTo(S.endX,S.endY);break}for(k=0;k<T;k++)t.bezierCurveTo((b=_[k])[2],b[3],b[4],b[5],b[6],b[7]);break;default:z("Segment not of valid type: "+S.type)}S.isClosed&&t.closePath(),_=S}m=g.isFilled,u?g.isShadowed?(!0===m&&"transparent"!==i&&null!==i&&t.uf(i),null!==n&&(m&&d&&Fs(t),t.Xi(),m&&d&&Da(t))):(Fs(t),m&&"transparent"!==i&&null!==i&&t.uf(i),null!==n&&t.Xi(),Da(t)):(m&&null!==i&&t.uf(i),null!==n&&t.Xi())}if(h&&t.ys(),null!==this.pathPattern){if((n=this.pathPattern).measure(1/0,1/0),n.arrange(0,0,(i=n.measuredBounds).width,i.height),u=this.geometry,t.save(),t.beginPath(),i=ye(),u.type===q.j)i.push(u.startX),i.push(u.startY),i.push(u.endX),i.push(u.endY),Ac(t,e,i,n);else if(u.type===q.o)for(u=u.figures.iterator;u.next();){for(d=u.value,i.length=0,i.push(d.startX),i.push(d.startY),f=h=d.startX,x=a=d.startY,m=(g=d.segments.m).length,y=0;y<m;y++){switch((M=g[y]).type){case In:Ac(t,e,i,n),i.length=0,i.push(M.endX),i.push(M.endY),f=h=M.endX,x=a=M.endY;break;case Ge:i.push(M.endX),i.push(M.endY),h=M.endX,a=M.endY;break;case Ji:R.Ce(h,a,M.point1X,M.point1Y,M.point2X,M.point2Y,M.endX,M.endY,.5,i),h=M.endX,a=M.endY;break;case lr:R.xq(h,a,M.point1X,M.point1Y,M.endX,M.endY,.5,i),h=M.endX,a=M.endY;break;case we:if(0===(_=(S=da(M,d)).length)){i.push(M.centerX),i.push(M.centerY),h=M.centerX,a=M.centerY;break}for(T=0;T<_;T++)R.Ce(h,a,(k=S[T])[2],k[3],k[4],k[5],k[6],k[7],.5,i),h=k[6],a=k[7];break;case Qr:if(0===(_=(S=Ns(M,d,h,a)).length)){i.push(M.endX),i.push(M.endY),h=M.endX,a=M.endY;break}for(T=0;T<_;T++)R.Ce(h,a,(k=S[T])[2],k[3],k[4],k[5],k[6],k[7],.5,i),h=k[6],a=k[7];break;default:z("Segment not of valid type: "+M.type)}M.isClosed&&(i.push(f),i.push(x),Ac(t,e,i,n))}Ac(t,e,i,n)}else if(u.type===q.C)i.push(u.startX),i.push(u.startY),i.push(u.endX),i.push(u.startY),i.push(u.endX),i.push(u.endY),i.push(u.startX),i.push(u.endY),i.push(u.startX),i.push(u.startY),Ac(t,e,i,n);else if(u.type===q.M){if((a=new De).startX=u.endX,a.startY=(u.startY+u.endY)/2,(h=new Yt(we)).startAngle=0,h.sweepAngle=360,h.centerX=(u.startX+u.endX)/2,h.centerY=(u.startY+u.endY)/2,h.radiusX=Math.abs(u.startX-u.endX)/2,h.radiusY=Math.abs(u.startY-u.endY)/2,a.add(h),0===(d=(u=da(h,a)).length))i.push(h.centerX),i.push(h.centerY);else for(h=a.startX,a=a.startY,f=0;f<d;f++)R.Ce(h,a,(x=u[f])[2],x[3],x[4],x[5],x[6],x[7],.5,i),h=x[6],a=x[7];Ac(t,e,i,n)}oe(i),t.restore(),t.Ec(!1)}}}},D.da=function(t,e){if(void 0===e&&(e=new N),t instanceof ct){t.wc()&&z("getDocumentPoint Spot must be a real, specific Spot, not: "+t.toString());var n=this.naturalBounds,i=this.strokeWidth;e.h(t.x*(n.width+i)-i/2+n.x+t.offsetX,t.y*(n.height+i)-i/2+n.y+t.offsetY)}else e.set(t);return this.de.ya(e),e},D.Mi=function(t){void 0===t&&(t=new B);var e=this.naturalBounds,n=this.de;e=B.allocAt(e.x,e.y,e.width,e.height);var i=this.strokeWidth;return e.Gc(i/2,i/2),i=N.allocAt(e.x,e.y).transform(n),t.h(i.x,i.y,0,0),i.h(e.right,e.y).transform(n),hn(t,i.x,i.y,0,0),i.h(e.right,e.bottom).transform(n),hn(t,i.x,i.y,0,0),i.h(e.x,e.bottom).transform(n),hn(t,i.x,i.y,0,0),B.free(e),N.free(i),t},D.xh=function(t,e){var n=this.geometry;if(null===n||null===this.fill&&null===this.stroke)return!1;var i=n.bounds,a=this.strokeWidth/2;n.type!==q.j||e||(a+=2);var u=B.alloc();if(u.assign(i),u.Gc(a+2,a+2),!u.$(t))return B.free(u),!1;if(i=a+1e-4,n.type===q.j)return!(null===this.stroke||(i=(n.endX-n.startX)*(t.x-n.startX)+(n.endY-n.startY)*(t.y-n.startY),0>(n.startX-n.endX)*(t.x-n.endX)+(n.startY-n.endY)*(t.y-n.endY)||0>i))&&(B.free(u),R.Mb(n.startX,n.startY,n.endX,n.endY,a,t.x,t.y));if(n.type===q.C){e=n.startX;var h=n.startY,d=n.endX;if(n=n.endY,u.x=Math.min(e,d),u.y=Math.min(h,n),u.width=Math.abs(d-e),u.height=Math.abs(n-h),null===this.fill){if(u.Gc(-i,-i),u.$(t))return B.free(u),!1;u.Gc(i,i)}return null!==this.stroke&&u.Gc(a,a),t=u.$(t),B.free(u),t}if(n.type===q.M){h=n.startX,a=n.startY,d=n.endX;var f=n.endY;if(n=Math.min(h,d),e=Math.min(a,f),h=Math.abs(d-h)/2,a=Math.abs(f-a)/2,n=t.x-(n+h),e=t.y-(e+a),null===this.fill){if(a-=i,0>=(h-=i)||0>=a||1>=n*n/(h*h)+e*e/(a*a))return B.free(u),!1;h+=i,a+=i}return null!==this.stroke&&(h+=i,a+=i),B.free(u),!(0>=h||0>=a)&&1>=n*n/(h*h)+e*e/(a*a)}if(n.type===q.o)return B.free(u),null===this.fill?ei(n,t.x,t.y,a):Od(n,t,a,1<this.strokeWidth,e);z("Unknown Geometry type: "+n.type)},D.qm=function(t,e,n,i){var a=this.desiredSize,u=this.cg;if(t=Math.max(t,0),e=Math.max(e,0),null!==this.Ad)var h=this.geometry.bounds;else{var d=this.figure,f=Vo[d];if(void 0===f){var g=R.Ne[d];"string"==typeof g&&(g=R.Ne[g]),"function"==typeof g?(f=g(null,100,100),Vo[d]=f):z("Unsupported Figure: "+d)}h=f.bounds}d=h.width,f=h.height,g=h.width;var m=h.height;switch(xo(this,!0)){case ze:i=n=0;break;case Ve:g=Math.max(t-u,0),m=Math.max(e-u,0);break;case Ln:g=Math.max(t-u,0),i=0;break;case En:n=0,m=Math.max(e-u,0)}switch(isFinite(a.width)&&(g=a.width),isFinite(a.height)&&(m=a.height),a=this.maxSize,h=this.minSize,n=Math.max(n-u,h.width),i=Math.max(i-u,h.height),g=Math.min(a.width,g),m=Math.min(a.height,m),g=isFinite(g)?Math.max(n,g):Math.max(d,n),m=isFinite(m)?Math.max(i,m):Math.max(f,i),n=rv(this)){case ze:break;case Ve:d=g,f=m;break;case Fo:n=Math.min(g/d,m/f),isFinite(n)||(n=1),d*=n,f*=n;break;default:z(n+" is not a valid geometryStretch.")}null!==this.Ad?(0===d&&(d=.001),0===f&&(f=.001),i=d/(a=(n=null!==this.Ad?this.Ad:this.ma).bounds).width,a=f/a.height,isFinite(i)||(i=1),isFinite(a)||(a=1),this.ma=1===i&&1===a?n:n.copy().scale(i,a)):null!==this.ma&&R.aa(this.ma.kl,t-u)&&R.aa(this.ma.jl,e-u)||(this.ma=wt.makeGeometry(this,d,f)),h=this.ma.bounds,t===1/0||e===1/0?this.ue(h.x-u/2,h.y-u/2,0===t&&0===d?0:h.width+u,0===e&&0===f?0:h.height+u):this.ue(-u/2,-u/2,g+u,m+u)},D.vh=function(t,e,n,i){tg(this,t,e,n,i)},D.Is=function(t,e,n){return this.kk(t.x,t.y,e.x,e.y,n)},D.kk=function(t,e,n,i,a){var u=this.transform,h=1/(u.m11*u.m22-u.m12*u.m21),d=u.m22*h,f=-u.m12*h,g=-u.m21*h,m=u.m11*h,y=h*(u.m21*u.dy-u.m22*u.dx),x=h*(u.m12*u.dx-u.m11*u.dy);u=t*d+e*g+y,h=t*f+e*m+x,d=n*d+i*g+y,f=n*f+i*m+x,y=this.cg/2,null===(g=this.ma)&&(this.measure(1/0,1/0),g=this.ma);var _=g.bounds;if(m=!1,g.type===q.j)if(1.5>=this.strokeWidth)m=R.Ie(g.startX,g.startY,g.endX,g.endY,u,h,d,f,a);else{if(g.startX===g.endX?(i=y,m=0):(e=(g.endY-g.startY)/(g.endX-g.startX),i=(m=y/Math.sqrt(1+e*e))*e),e=ye(),t=new N,R.Ie(g.startX+i,g.startY+m,g.endX+i,g.endY+m,u,h,d,f,t)&&e.push(t),t=new N,R.Ie(g.startX-i,g.startY-m,g.endX-i,g.endY-m,u,h,d,f,t)&&e.push(t),t=new N,R.Ie(g.startX+i,g.startY+m,g.startX-i,g.startY-m,u,h,d,f,t)&&e.push(t),t=new N,R.Ie(g.endX+i,g.endY+m,g.endX-i,g.endY-m,u,h,d,f,t)&&e.push(t),0===(d=e.length))return oe(e),!1;for(m=!0,f=1/0,i=0;i<d;i++)(n=((t=e[i]).x-u)*(t.x-u)+(t.y-h)*(t.y-h))<f&&(f=n,a.x=t.x,a.y=t.y);oe(e)}else if(g.type===q.C)m=R.yf(_.x-y,_.y-y,_.x+_.width+y,_.y+_.height+y,u,h,d,f,a);else if(g.type===q.M){t:if(0===(e=B.allocAt(_.x,_.y,_.width,_.height).Gc(y,y)).width)m=R.Ie(e.x,e.y,e.x,e.y+e.height,u,h,d,f,a);else if(0===e.height)m=R.Ie(e.x,e.y,e.x+e.width,e.y,u,h,d,f,a);else{if(i=e.x+(t=e.width/2),m=e.y+(g=e.height/2),n=9999,u!==d&&(n=(h-f)/(u-d)),9999>Math.abs(n)){if(0>t*t*n*n+g*g-(f=h-m-n*(u-i))*f){a.x=NaN,a.y=NaN,m=!1;break t}d=(-t*t*n*f+t*g*(y=Math.sqrt(t*t*n*n+g*g-f*f)))/(g*g+t*t*n*n)+i,t=(-t*t*n*f-t*g*y)/(g*g+t*t*n*n)+i,g=n*(d-i)+f+m,f=n*(t-i)+f+m,Math.abs((u-d)*(u-d))+Math.abs((h-g)*(h-g))<Math.abs((u-t)*(u-t))+Math.abs((h-f)*(h-f))?(a.x=d,a.y=g):(a.x=t,a.y=f)}else{if(d=g*g,0>(d-=d/(t*t)*(f=u-i)*f)){a.x=NaN,a.y=NaN,m=!1;break t}d=m+(f=Math.sqrt(d)),f=m-f,Math.abs(d-h)<Math.abs(f-h)?(a.x=u,a.y=d):(a.x=u,a.y=f)}m=!0}B.free(e)}else if(g.type===q.o){x=N.alloc();var M=d-u,S=f-h,T=M*M+S*S,k=u,b=h;if(0<T&&_.contains(k,b)&&(x.x=k,x.y=b,this.$(x)))for(0!==M&&.5>Math.abs(M)?(S*=.5/M,M=.5):0!==S&&.5>Math.abs(S)&&(M*=.5/S,S=.5),k-=M,b-=S;_.contains(k,b);)k-=M,b-=S;for(a.x=d,a.y=f,S=0;S<g.figures.count;S++)for(var I=g.figures.m[S],O=I.isFilled?k:u,F=I.isFilled?b:h,H=I.segments,W=_=I.startX,it=M=I.startY,nt=0;nt<H.count;nt++){var tt=H.m[nt],G=tt.type,Mt=tt.endX,gt=tt.endY,zt=!1;switch(G){case In:W=Mt,it=gt;break;case Ge:zt=fe(_,M,Mt,gt,O,F,d,f,x);break;case Ji:zt=R.Zp(_,M,tt.point1X,tt.point1Y,tt.point2X,tt.point2Y,Mt,gt,O,F,d,f,.6,x);break;case lr:zt=R.Zp(_,M,_+2/3*(tt.point1X-_),M+2/3*(tt.point1Y-M),Mt+2/3*(tt.point1X-Mt),gt+2/3*(tt.point1Y-gt),Mt,gt,O,F,d,f,.6,x);break;case we:case Qr:var de=(G=tt.type===we?da(tt,I):Ns(tt,I,_,M)).length;if(0===de){zt=fe(_,M,tt.type===we?tt.centerX:tt.endX,tt.type===we?tt.centerY:tt.endY,O,F,d,f,x);break}for(gt=null,Mt=0;Mt<de;Mt++){if(gt=G[Mt],0===Mt&&fe(_,M,gt[0],gt[1],O,F,d,f,x)){var nn=vg(O,F,x,T,a);nn<T&&(T=nn,m=!0)}R.Zp(gt[0],gt[1],gt[2],gt[3],gt[4],gt[5],gt[6],gt[7],O,F,d,f,.6,x)&&(nn=vg(O,F,x,T,a))<T&&(T=nn,m=!0)}Mt=gt[6],gt=gt[7];break;default:z("Unknown Segment type: "+G)}_=Mt,M=gt,zt&&(zt=vg(O,F,x,T,a))<T&&(T=zt,m=!0),tt.isClosed&&fe(_,M,Mt=W,gt=it,O,F,d,f,x)&&(tt=vg(O,F,x,T,a))<T&&(T=tt,m=!0)}u=n-t,h=i-e,0!==(d=Math.sqrt(u*u+h*h))&&(u/=d,h/=d),a.x-=u*y,a.y-=h*y,N.free(x)}else z("Unknown Geometry type: "+g.type);return!!m&&(this.transform.ya(a),!0)},D.wh=function(t,e){if(void 0===e)return t.De(this.actualBounds);var n=this.ma;null===n&&(this.measure(1/0,1/0),n=this.ma),n=n.bounds;var i=this.strokeWidth/2,a=!1,u=N.alloc();return u.h(n.x-i,n.y-i),t.$(e.ya(u))&&(u.h(n.x-i,n.bottom+i),t.$(e.ya(u))&&(u.h(n.right+i,n.bottom+i),t.$(e.ya(u))&&(u.h(n.right+i,n.y-i),t.$(e.ya(u))&&(a=!0)))),N.free(u),a},D.Ic=function(t,e){if(this.wh(t,e)||void 0===e&&(e=this.transform,t.De(this.actualBounds)))return!0;var n=St.alloc();n.set(e),n.Ns();var i=t.left,a=t.right,u=t.top;t=t.bottom;var h=N.alloc();if(h.h(i,u),n.ya(h),this.xh(h,!0)||(h.h(a,u),n.ya(h),this.xh(h,!0))||(h.h(i,t),n.ya(h),this.xh(h,!0))||(h.h(a,t),n.ya(h),this.xh(h,!0)))return N.free(h),!0;var d=N.alloc(),f=N.alloc();return n.set(e),n.Hv(this.transform),n.Ns(),d.x=a,d.y=u,d.transform(n),h.x=i,h.y=u,h.transform(n),e=!1,cn(this,h,d,f)?e=!0:(h.x=a,h.y=t,h.transform(n),cn(this,h,d,f)?e=!0:(d.x=i,d.y=t,d.transform(n),cn(this,h,d,f)?e=!0:(h.x=i,h.y=u,h.transform(n),cn(this,h,d,f)&&(e=!0)))),N.free(h),St.free(n),N.free(d),N.free(f),e},D.Ux=function(t,e,n){function i(T,k){for(var b=T.length,I=0;I<b;I+=2)if(k.nd(T[I],T[I+1])>a)return!0;return!1}if(n&&null!==this.fill&&this.xh(t,!0))return!0;var a=t.tf(e),u=a;if(1.5<this.strokeWidth&&(a=this.strokeWidth/2+Math.sqrt(a),a*=a),null===(e=this.ma)&&(this.measure(1/0,1/0),null===(e=this.ma)))return!1;if(!n){var h=e.bounds,d=h.x,f=h.y,g=h.x+h.width;if(h=h.y+h.height,ar(t.x,t.y,d,f)<=a&&ar(t.x,t.y,g,f)<=a&&ar(t.x,t.y,d,h)<=a&&ar(t.x,t.y,g,h)<=a)return!0}if(d=e.startX,f=e.startY,g=e.endX,h=e.endY,e.type===q.j){if(n=(d-g)*(t.x-g)+(f-h)*(t.y-h),Re(t.x,t.y,d,f,g,h)<=(0<=(g-d)*(t.x-d)+(h-f)*(t.y-f)&&0<=n?a:u))return!0}else{if(e.type===q.C)return e=!1,n&&(e=Re(t.x,t.y,d,f,d,h)<=a||Re(t.x,t.y,d,f,g,f)<=a||Re(t.x,t.y,g,f,g,h)<=a||Re(t.x,t.y,d,h,g,h)<=a),e;if(e.type===q.M){e=t.x-(d+g)/2,u=t.y-(f+h)/2;var m=Math.abs(g-d)/2,y=Math.abs(h-f)/2;if(0===m||0===y)return Re(t.x,t.y,d,f,g,h)<=a;if(!n)return!(ar(e,u,-m,0)>=a||ar(e,u,0,-y)>=a||ar(e,u,0,y)>=a||ar(e,u,m,0)>=a);if((t=R.Ez(m,y,e,u))*t<=a)return!0}else if(e.type===q.o){if(u=(g=e.bounds).x,d=g.y,f=g.x+g.width,g=g.y+g.height,t.x>f&&t.x<u&&t.y>g&&t.y<d&&Re(t.x,t.y,u,d,u,g)>a&&Re(t.x,t.y,u,d,f,d)>a&&Re(t.x,t.y,f,g,u,g)>a&&Re(t.x,t.y,f,g,f,d)>a)return!1;if(u=Math.sqrt(a),!n){for(n=e.figures,e=0;e<n.count;e++){if(t.nd(h=(u=n.m[e]).startX,m=u.startY)>a)return!1;for(f=(d=u.segments.m).length,g=0;g<f;g++)switch(y=d[g],y.type){case In:case Ge:if(t.nd(h=y.endX,m=y.endY)>a)return!1;break;case Ji:var x=ye();if(R.Ce(h,m,y.point1X,y.point1Y,y.point2X,y.point2Y,y.endX,y.endY,.8,x),h=i(x,t),oe(x),h||t.nd(h=y.endX,m=y.endY)>a)return!1;break;case lr:if(x=ye(),R.xq(h,m,y.point1X,y.point1Y,y.endX,y.endY,.8,x),h=i(x,t),oe(x),h||t.nd(h=y.endX,m=y.endY)>a)return!1;break;case we:case Qr:var _=(x=y.type===we?da(y,u):Ns(y,u,h,m)).length;if(0===_){if(t.nd(h=y.type===we?y.centerX:y.endX,m=y.type===we?y.centerY:y.endY)>a)return!1;break}y=null;for(var M=ye(),S=0;S<_;S++)if(y=x[S],M.length=0,R.Ce(y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7],.8,M),i(M,t))return oe(M),!1;oe(M),null!==y&&(h=y[6],m=y[7]);break;default:z("Unknown Segment type: "+y.type)}}return!0}if(null===this.fill?ei(e,t.x,t.y,u):Od(e,t,u,!0,!1))return!0}}return!1},D.cc=function(){this.ma=null},D.Ow=function(){return this.cg},wt.makeGeometry=function(t,e,n){if("None"!==t.toArrow)var i=io[t.toArrow];else"None"!==t.fromArrow?i=io[t.fromArrow]:("string"==typeof(i=R.Ne[t.figure])&&(i=R.Ne[i]),void 0===i&&z("Unknown Shape.figure: "+t.figure),(i=i(t,e,n)).kl=e,i.jl=n);if(null===i){var a=R.Ne.Rectangle;"function"==typeof a&&(i=a(t,e,n))}return i},Dt.Object.defineProperties(wt.prototype,{geometry:{get:function(){return null!==this.ma?this.ma:this.Ad},set:function(t){var e=this.ma,n=this.Ad;if(e!==t){this.Ad=this.ma=null!==t?t.freeze():null;var i=this.part;null!==i&&(i.Sf=NaN),this.s(),this.g("geometry",e||n,t),Ci(this)&&null!==(t=this.part)&&Xl(this,t,"geometryString")}}},geometryString:{get:function(){return null===this.geometry?"":this.geometry.toString()},set:function(t){var e=(t=q.parse(t)).normalize();this.geometry=t,this.position=t=N.allocAt(-e.x,-e.y),N.free(t)}},isGeometryPositioned:{get:function(){return this.eo},set:function(t){var e=this.eo;e!==t&&(this.eo=t,this.s(),this.g("isGeometryPositioned",e,t))}},fill:{get:function(){return this.cl},set:function(t){var e=this.cl;e!==t&&(null!==t&&Ql(t,"Shape.fill"),t instanceof Bt&&t.freeze(),this.cl=t,this.N(),this.g("fill",e,t))}},stroke:{get:function(){return this.Dc},set:function(t){var e=this.Dc;e!==t&&(null!==t&&Ql(t,"Shape.stroke"),t instanceof Bt&&t.freeze(),this.Dc=t,this.N(),this.g("stroke",e,t))}},strokeWidth:{get:function(){return this.cg},set:function(t){var e=this.cg;if(e!==t)if(0<=t){this.cg=t,this.s();var n=this.part;null!==n&&(n.Sf=NaN),this.g("strokeWidth",e,t)}else me(t,"value >= 0",wt,"strokeWidth:value")}},strokeCap:{get:function(){return this.Tl},set:function(t){var e=this.Tl;e!==t&&("string"!=typeof t||"butt"!==t&&"round"!==t&&"square"!==t?me(t,'"butt", "round", or "square"',wt,"strokeCap"):(this.Tl=t,this.N(),this.g("strokeCap",e,t)))}},strokeJoin:{get:function(){return this.Ul},set:function(t){var e=this.Ul;e!==t&&("string"!=typeof t||"miter"!==t&&"bevel"!==t&&"round"!==t?me(t,'"miter", "bevel", or "round"',wt,"strokeJoin"):(this.Ul=t,this.N(),this.g("strokeJoin",e,t)))}},strokeMiterLimit:{get:function(){return this.Uj},set:function(t){var e=this.Uj;if(e!==t&&1<=t){this.Uj=t,this.N();var n=this.part;null!==n&&(n.Sf=NaN),this.g("strokeMiterLimit",e,t)}}},strokeDashArray:{get:function(){return this.ih},set:function(t){var e=this.ih;if(e!==t){if(null!==t){for(var n=t.length,i=0,a=0;a<n;a++){var u=t[a];0<=u&&isFinite(u)||z("strokeDashArray:value "+u+" at index "+a+" must be a positive number or zero."),i+=u}if(0===i){if(null===e)return;t=null}}this.ih=t,this.N(),this.g("strokeDashArray",e,t)}}},strokeDashOffset:{get:function(){return this.jh},set:function(t){var e=this.jh;e!==t&&0<=t&&(this.jh=t,this.N(),this.g("strokeDashOffset",e,t))}},figure:{get:function(){return this.Hn},set:function(t){var e=this.Hn;if(e!==t){var n=R.Ne[t];"function"==typeof n?n=t:(n=R.Ne[t.toLowerCase()])||z("Unknown Shape.figure: "+t),e!==n&&(null!==(t=this.part)&&(t.Sf=NaN),this.Hn=n,this.Ad=null,this.cc(),this.s(),this.g("figure",e,n))}}},toArrow:{get:function(){return this.$l},set:function(t){var e=this.$l;if(!0===t?t="Standard":!1===t&&(t=""),e!==t){var n=sv(t);null===n?z("Unknown Shape.toArrow: "+t):e!==n&&(this.$l=n,this.Ad=null,this.cc(),this.s(),ov(this),this.g("toArrow",e,n))}}},fromArrow:{get:function(){return this.dl},set:function(t){var e=this.dl;if(!0===t?t="Standard":!1===t&&(t=""),e!==t){var n=sv(t);null===n?z("Unknown Shape.fromArrow: "+t):e!==n&&(this.dl=n,this.Ad=null,this.cc(),this.s(),ov(this),this.g("fromArrow",e,n))}}},spot1:{get:function(){return this.hf},set:function(t){var e=this.hf;e.A(t)||(this.hf=t=t.I(),this.s(),this.g("spot1",e,t))}},spot2:{get:function(){return this.jf},set:function(t){var e=this.jf;e.A(t)||(this.jf=t=t.I(),this.s(),this.g("spot2",e,t))}},parameter1:{get:function(){return this.Wo},set:function(t){var e=this.Wo;e!==t&&(this.Wo=t,this.cc(),this.s(),this.g("parameter1",e,t))}},parameter2:{get:function(){return this.Xo},set:function(t){var e=this.Xo;e!==t&&(this.Xo=t,this.cc(),this.s(),this.g("parameter2",e,t))}},naturalBounds:{get:function(){var t=this.desiredSize;return t.u()||null===this.ma?new B(0,0,t.width,t.height):(this.qc.assign(this.ma.bounds),this.qc)}},pathPattern:{get:function(){return this.Zo},set:function(t){var e=this.Zo;e!==t&&(this.Zo=t,this.N(),this.g("pathPattern",e,t))}},geometryStretch:{get:function(){return this.Pn},set:function(t){var e=this.Pn;e!==t&&(this.Pn=t,this.s(),this.g("geometryStretch",e,t))}},interval:{get:function(){return this.Wd},set:function(t){var e=this.Wd;if(e!==(t=Math.round(t))&&0!==t&&isFinite(t)){this.Wd=t;var n=this.diagram;null!==n&&this.panel===n.grid&&va(n),this.s(),null!==(n=this.panel)&&(n.Nf=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return this.Ud},set:function(t){var e=this.Ud;e!==t&&(0>t?t=0:1<t&&(t=1),this.Ud=t,this.s(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return this.Sd},set:function(t){var e=this.Sd;e!==t&&(0>t?t=0:1<t&&(t=1),this.Sd=t,this.s(),this.g("graduatedEnd",e,t))}},graduatedSkip:{get:function(){return this.Td},set:function(t){var e=this.Td;e!==t&&(this.Td=t,this.s(),this.g("graduatedSkip",e,t))}}}),wt.prototype.intersectsRect=wt.prototype.Ic,wt.prototype.containedInRect=wt.prototype.wh,wt.prototype.getNearestIntersectionPoint=wt.prototype.Is,wt.prototype.getDocumentBounds=wt.prototype.Mi,wt.prototype.getDocumentPoint=wt.prototype.da;var io=new Nn,Vo=new Nn;function Zt(t,e){return ut.call(this),Oc||(Si=Ur?new Hr(null).context:null,Oc=!0),this.Ub="",this.Dc="black",this.ne="13px sans-serif",this.ui="start",this.Rd=ze,this.Bi=sy,this.Aj=!0,this.$h=this.ai=!1,this.Vf=e_,this.gg=wg,this.Ir=this.qb=this.Wc=0,this.ku=this.lu=null,this.En=!1,this.kd=this.gn=this.Kp=this.vi=this.Lp=null,this.gf=this.ff=0,this.Xh=Cg,this.te=1/0,this.di=0,this.oe=null,this.ze=0,this.me=this.Pb=this.zc=null,this.Wd=1,this.Ud=0,this.Sd=1,this.Td=this.sj=null,"string"==typeof t?this.text=t:t&&Object.assign(this,t),e&&Object.assign(this,e),this}function hw(t,e){t.G=6144|e.G,t.lb=e.opacity,t.Rb=e.background,t.fd=e.areaBackground,t.Sc=e.desiredSize.I(),t.Uf=e.minSize.I(),t.Tf=e.maxSize.I(),t.Ab=null!==e.Ab?e.Ab.copy():null,t.sa=e.scale,t.xb=e.angle,t.Be=e.stretch,t.Pg=e.margin.I(),t.wb=e.alignment.I(),t.Gk=e.alignmentFocus.I(),t.Jl=e.segmentFraction,t.Kl=e.segmentOffset.I(),t.Ll=e.segmentOrientation,null!==e.$a&&(t.$a=e.$a.copy()),t.Nl=e.shadowVisible,e instanceof Zt&&(t.Ub=e.Ub,t.Dc=e.Dc,t.ne=e.ne,t.ui=e.ui,t.Rd=e.Rd,t.Bi=e.Bi,t.Aj=e.Aj,t.ai=e.ai,t.$h=e.$h,t.Vf=e.Vf,t.gg=e.gg,t.oe=null,t.ff=e.ff,t.gf=e.gf,t.te=e.te,t.di=e.di,t.Wd=e.Wd,t.Ud=e.Ud,t.Sd=e.Sd,t.sj=e.sj,t.Td=e.Td)}function qu(t,e,n){null===t.me?(t.me=e,t.qb=n):((null===t.Pb||null===t.zc)&&(t.Pb=[],t.zc=[],t.Pb.push(t.me),t.zc.push(t.qb)),t.Pb.push(e),t.zc.push(n))}function js(t,e,n,i){var a=t.Xh===Cg;a&&(e=e.trim());var u=0,h=t.ne,d=t.ff+t.gf;d=Math.max(0,th(t)+d);var f=t.Vf===_g?t_(h):0;if(t.Wc>=t.te)null!==i&&i.h(0,d);else if(h=e,t.gg===Ic){t.ze=1;var g=zr(e);if(0===f||g<=n)t.qb=Math.max(t.qb,g),qu(t,e,t.qb),null!==i&&i.h(g,d);else{for(g=zr((u=nu(t,h))+(e=nu(t,h=h.substr(u.length))));0<e.length&&g<=n;)g=(u+=e)+(e=nu(t,h=h.substr(e.length))),a&&(g=g.trim()),g=zr(g);for(a&&(e=e.trim()),u+=e,n=Math.max(1,n-f);zr(u)>n&&1<u.length;)u=u.substr(0,u.length-1);var m=zr(u+=bc);t.qb=m,qu(t,u,m),null!==i&&i.h(m,d)}}else{for(f=0,0===h.length&&(f=1,qu(t,h,0));0<h.length;){for(e=nu(t,h),h=h.substr(e.length);zr(e)>n;){var y=1;for(g=zr(e.substr(0,y)),m=0;g<=n;)y++,m=g,g=zr(e.substr(0,y));if(1===y){var x=g;u=Math.max(u,g)}else x=m,u=Math.max(u,m);if(1>--y&&(y=1),qu(t,e.substr(0,y),x),f++,e=e.substr(y),t.Wc+f>t.te)break}for(g=zr(e+(m=nu(t,h)));0<m.length&&g<=n;)g=(e+=m)+(m=nu(t,h=h.substr(m.length))),a&&(g=g.trim()),g=zr(g);if(a&&(e=e.trim()),""!==e&&("\xad"===e[e.length-1]&&(e=e.substring(0,e.length-1)+"\u2010"),0===m.length?(y=g,u=Math.max(u,g)):(y=m=zr(e),u=Math.max(u,m)),qu(t,e,y),f++,t.Wc+f>t.te))break}t.ze=Math.min(t.te,f),t.qb=Math.max(t.qb,u),null!==i&&i.h(t.qb,d*t.ze)}}function nu(t,e){if(t.gg===Mg)return e.substr(0,1);for(var n=e.length,i=0,a=n_;i<n&&!a.test(e.charAt(i));)i++;for(t.Xh===cw&&(n=Math.min(n,i+1));i<n&&a.test(e.charAt(i));)i++;return i>=e.length?e:e.substr(0,i)}function zr(t){return null===Si?8*t.length:Si.measureText(t).width}function th(t){if(null!==t.oe)return t.oe;var e=t.ne;if(null===Si){var n=16;return t.oe=n}return void 0!==Dg[e]&&5e3>i_?n=Dg[e]:(n=1.3*Si.measureText("M").width,Dg[e]=n,i_++),t.oe=n}function t_(t){if(null===Si)return 6;if(void 0!==Sg[t]&&5e3>dw)var e=Sg[t];else e=Si.measureText(bc).width,Sg[t]=e,dw++;return e}function av(t,e){var n=t.Ub.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),i=t.ff+t.gf;if(i=Math.max(0,th(t)+i),0===n.length)return t.qb=0,t.Wc=1,i;if(!t.isMultiline){var a=n.indexOf("\n",0);0<=a&&(n=n.substr(0,a))}a=0;for(var h,u=t.Wc=0,d=!1;!d;){if(-1===(h=n.indexOf("\n",u))&&(h=n.length,d=!0),u<=h){if(u=n.substr(u,h-u),t.gg!==Ic){t.ze=0;var f=mt.alloc();js(t,u,e,f),a+=f.height,mt.free(f),t.Wc+=t.ze}else js(t,u,e,null),a+=i,t.Wc++;t.Wc===t.te&&(d=!0)}u=h+1}return t.Ir=a}wt.className="Shape",wt.getFigureGenerators=function(){var e,t=new xt;for(e in R.Ne)e!==e.toLowerCase()&&t.add(e,R.Ne[e]);return t.freeze(),t},wt.defineFigureGenerator=function(t,e){var n=t.toLowerCase(),i=R.Ne;i[t]=e,i[n]=t},wt.getArrowheadGeometries=function(){var t=new xt;for(i in R.Qm)if(void 0===io[i]){var e=q.parse(R.Qm[i],!1);io[i]=e,(e=i.toLowerCase())!==i&&(io[e]=i)}for(var n in io)if(n!==n.toLowerCase()){var i=io[n];i instanceof q&&t.add(n,i)}return t.freeze(),t},wt.defineArrowheadGeometry=function(t,e){var n;n="string"==typeof e?q.parse(e,!1):e,"none"!==(e=t.toLowerCase())&&t!==e||z("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+t);var i=io;i[t]=n,i[e]=t},Ft(Zt,ut),Zt.prototype.cloneProtected=function(t){ut.prototype.cloneProtected.call(this,t),t.Ub=this.Ub,t.Dc=this.Dc,t.ne=this.ne,t.ui=this.ui,t.Rd=this.Rd,t.Bi=this.Bi,t.Aj=this.Aj,t.ai=this.ai,t.$h=this.$h,t.Vf=this.Vf,t.gg=this.gg,t.Wc=this.Wc,t.Ir=this.Ir,t.qb=this.qb,t.lu=this.lu,t.ku=this.ku,t.En=this.En,t.Lp=this.Lp,t.vi=this.vi,t.Kp=this.Kp,t.gn=this.gn,t.kd=this.kd,t.ff=this.ff,t.gf=this.gf,t.Xh=this.Xh,t.te=this.te,t.oe=this.oe,t.ze=this.ze,t.zc=this.zc,t.Pb=this.Pb,t.me=this.me,t.di=this.di,t.Wd=this.Wd,t.Ud=this.Ud,t.Sd=this.Sd,t.sj=this.sj,t.Td=this.Td},(D=Zt.prototype).gb=function(t){t.classType===Zt?this.wrap=t:ut.prototype.gb.call(this,t)},D.toString=function(){return 22<this.Ub.length?'TextBlock("'+this.Ub.substring(0,20)+'"...)':'TextBlock("'+this.Ub+'")'},D.s=function(){ut.prototype.s.call(this),this.ku=this.lu=null},D.Fi=function(t,e){if(null!==this.Dc&&0!==this.Ub.length&&null!==this.ne){var n=this.naturalBounds,i=this.actualBounds,a=n.width,u=n.height,h=th(this),d=t.textAlign=this.ui,f=e.io;"start"===d?d=f?"right":"left":"end"===d&&(d=f?"left":"right"),f=this.ai;var g=this.$h;dr(this,t,this.Dc,!0,!1,n,i),(f||g)&&dr(this,t,this.Dc,!1,!1,n,i),i=0,n=!1;var m=this.de,y=m.dx-(h*m.m21+m.dx),x=e.scale;switch(8>(y*y+(m=m.dy-(h*m.m22+m.dy))*m)*x*x&&(n=!0),e.Sb!==t&&(n=!1),!1===e.Fe("textGreeking")&&(n=!1),e=this.ff,y=this.gf,this.flip){case Qd:t.translate(a,0),t.scale(-1,1);break;case Zu:t.translate(0,u),t.scale(1,-1);break;case Ye:t.translate(a,u),t.scale(-1,-1)}if(t.Bd(),u>(x=(e+h+y)*(m=this.Wc))&&(i=(i=this.Bi).y*u-i.y*x+i.offsetY),1===m&&null!==this.me)(y=this.qb)>a&&(y=a),this.Ei(this.me,t,0,i+e,a,h,y,n,d,f,g);else if(null!==this.zc&&null!==this.Pb)for(x=0;x<m;x++){var _=this.zc[x];_>a&&(_=a),this.Ei(this.Pb[x],t,0,i+=e,a,h,_,n,d,f,g),i+=h+y}switch(this.flip){case Qd:t.scale(-1,1),t.translate(-a,0);break;case Zu:t.scale(1,-1),t.translate(0,-u);break;case Ye:t.scale(-1,-1),t.translate(-a,-u)}}},D.Ei=function(t,e,n,i,a,u,h,d,f,g,m){var y=0;d?("left"===f?y=0:"right"===f?y=a-h:"center"===f&&(y=(a-h)/2),e.fillRect(n+y,i+.25*u,h,1)):("left"===f?y=0:"right"===f?y=a:"center"===f&&(y=a/2),a=null!==lv?lv(this,u):.75*u,e.fillText(t,n+y,i+a),0==(t=u/20|0)&&(t=1),"right"===f?y-=h:"center"===f&&(y-=h/2),g&&(f=null!==eh?eh(this,u):.8*u,e.beginPath(),e.lineWidth=t,e.moveTo(n+y,i+f),e.lineTo(n+y+h,i+f),e.stroke()),m&&(e.beginPath(),e.lineWidth=t,i=i+u-u/2.2|0,t%2!=0&&(i+=.5),e.moveTo(n+y,i),e.lineTo(n+y+h,i),e.stroke()))},D.qm=function(t,e,n,i){this.di=t;var u,a=this.ne;if(null!==Si&&uv!==a&&(uv=Si.font=a),this.qb=this.ze=0,this.me=this.Pb=this.zc=this.oe=null,isNaN(this.desiredSize.width)){if(0===(a=this.Ub.replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length)a=0;else if(this.isMultiline){for(var h=u=0,d=!1;!d;){var f=a.indexOf("\n",h);-1===f&&(f=a.length,d=!0),h=a.substr(h,f-h),this.Xh===Cg&&(h=h.trim()),u=Math.max(u,zr(h)),h=f+1}a=u}else 0<=(u=a.indexOf("\n",0))&&(a=a.substr(0,u)),a=zr(a);a=Math.min(a,t/this.scale),a=Math.max(8,a)}else a=this.desiredSize.width;if(null!==this.panel&&(a=Math.min(a,this.panel.maxSize.width)),u=av(this,a),d=u=isNaN(this.desiredSize.height)?Math.min(u,e/this.scale):this.desiredSize.height,0!==this.qb&&null!==this.zc&&null!==this.Pb&&this.Vf===_g&&(e=this.ne,e=this.Vf===_g?t_(e):0,f=this.ff+this.gf,f=Math.max(0,th(this)+f),!((d=Math.min(this.maxLines-1,Math.max(Math.floor(d/f+.01)-1,0)))+1>=this.Pb.length))){for(f=this.Pb[d],e=Math.max(1,t-e);zr(f)>e&&1<f.length;)f=f.substr(0,f.length-1);e=zr(f+=bc),this.Pb[d]=f,this.Pb=this.Pb.slice(0,d+1),this.zc[d]=e,this.zc=this.zc.slice(0,d+1),this.ze=this.Pb.length,this.qb=Math.max(this.qb,e),this.Wc=this.ze,1===this.Wc&&(this.me=this.Pb[0])}(this.wrap===xg||isNaN(this.desiredSize.width))&&(a=isNaN(t)?this.qb:Math.min(t,this.qb),isNaN(this.desiredSize.width)&&(a=Math.max(8,a))),a=Math.max(n,a),u=Math.max(i,u),_r(this.qc,a,u),this.ue(0,0,a,u)},D.vh=function(t,e,n,i){tg(this,t,e,n,i)},Dt.Object.defineProperties(Zt.prototype,{font:{get:function(){return this.ne},set:function(t){var e=this.ne;e!==t&&(this.ne=t,this.oe=null,this.s(),this.g("font",e,t))}},text:{get:function(){return this.Ub},set:function(t){var e=this.Ub;e!==(t=null!=t?t.toString():"")&&(this.Ub=t,this.s(),this.g("text",e,t))}},textAlign:{get:function(){return this.ui},set:function(t){var e=this.ui;e===t||"start"!==t&&"end"!==t&&"left"!==t&&"right"!==t&&"center"!==t||(this.ui=t,this.N(),this.g("textAlign",e,t))}},flip:{get:function(){return this.Rd},set:function(t){var e=this.Rd;e!==t&&(this.Rd=t,this.N(),this.g("flip",e,t))}},verticalAlignment:{get:function(){return this.Bi},set:function(t){var e=this.Bi;e.A(t)||(this.Bi=t=t.I(),xc(this),this.g("verticalAlignment",e,t))}},naturalBounds:{get:function(){if(!this.qc.u()){var t=mt.alloc();js(this,this.Ub,999999,t);var e=t.width;mt.free(t),t=av(this,e);var n=this.desiredSize;isNaN(n.width)||(e=n.width),isNaN(n.height)||(t=n.height),_r(this.qc,e,t)}return this.qc}},isMultiline:{get:function(){return this.Aj},set:function(t){var e=this.Aj;e!==t&&(this.Aj=t,this.s(),this.g("isMultiline",e,t))}},isUnderline:{get:function(){return this.ai},set:function(t){var e=this.ai;e!==t&&(this.ai=t,this.N(),this.g("isUnderline",e,t))}},isStrikethrough:{get:function(){return this.$h},set:function(t){var e=this.$h;e!==t&&(this.$h=t,this.N(),this.g("isStrikethrough",e,t))}},wrap:{get:function(){return this.gg},set:function(t){var e=this.gg;e!==t&&(this.gg=t,this.s(),this.g("wrap",e,t))}},overflow:{get:function(){return this.Vf},set:function(t){var e=this.Vf;e!==t&&(this.Vf=t,this.s(),this.g("overflow",e,t))}},stroke:{get:function(){return this.Dc},set:function(t){var e=this.Dc;e!==t&&(null!==t&&Ql(t,"TextBlock.stroke"),t instanceof Bt&&t.freeze(),this.Dc=t,this.N(),this.g("stroke",e,t))}},lineCount:{get:function(){return this.Wc}},lineHeight:{get:function(){return th(this)}},editable:{get:function(){return this.En},set:function(t){var e=this.En;e!==t&&(this.En=t,this.g("editable",e,t))}},textEditor:{get:function(){return this.Lp},set:function(t){var e=this.Lp;e!==t&&(this.Lp=t,this.g("textEditor",e,t))}},errorFunction:{get:function(){return this.kd},set:function(t){var e=this.kd;e!==t&&(this.kd=t,this.g("errorFunction",e,t))}},interval:{get:function(){return this.Wd},set:function(t){var e=this.Wd;if(e!==(t=Math.round(t))&&0!==t&&isFinite(t)){this.Wd=t,this.s();var n=this.panel;null!==n&&(n.Nf=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return this.Ud},set:function(t){var e=this.Ud;e!==t&&(0>t?t=0:1<t&&(t=1),this.Ud=t,this.s(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return this.Sd},set:function(t){var e=this.Sd;e!==t&&(0>t?t=0:1<t&&(t=1),this.Sd=t,this.s(),this.g("graduatedEnd",e,t))}},graduatedFunction:{get:function(){return this.sj},set:function(t){var e=this.sj;e!==t&&(this.sj=t,this.s(),this.g("graduatedFunction",e,t))}},graduatedSkip:{get:function(){return this.Td},set:function(t){var e=this.Td;e!==t&&(this.Td=t,this.s(),this.g("graduatedSkip",e,t))}},textValidation:{get:function(){return this.vi},set:function(t){var e=this.vi;e!==t&&(this.vi=t,this.g("textValidation",e,t))}},textEdited:{get:function(){return this.Kp},set:function(t){var e=this.Kp;e!==t&&(this.Kp=t,this.g("textEdited",e,t))}},spacingAbove:{get:function(){return this.ff},set:function(t){var e=this.ff;e!==t&&(this.ff=t,this.s(),this.g("spacingAbove",e,t))}},spacingBelow:{get:function(){return this.gf},set:function(t){var e=this.gf;e!==t&&(this.gf=t,this.s(),this.g("spacingBelow",e,t))}},formatting:{get:function(){return this.Xh},set:function(t){var e=this.Xh;e!==t&&(this.Xh=t,this.s(),this.g("formatting",e,t))}},maxLines:{get:function(){return this.te},set:function(t){var e=this.te;e!==t&&(0>=(t=Math.floor(t))&&me(t,"> 0",Zt,"maxLines"),this.te=t,this.s(),this.g("maxLines",e,t))}},metrics:{get:function(){return{arrSize:null!==this.zc?this.zc:[this.qb],arrText:null!==this.Pb?this.Pb:[this.me],maxLineWidth:this.qb,fontHeight:this.oe}}},choices:{get:function(){return this.gn},set:function(t){var e=this.gn;e!==t&&(this.gn=t,this.g("choices",e,t))}}});var pf,lv=null,eh=null,Ic=new J(Zt,"None",0),xg=new J(Zt,"WrapFit",1),wg=new J(Zt,"WrapDesiredSize",2),Mg=new J(Zt,"WrapBreakAll",3),e_=new J(Zt,"OverflowClip",0),_g=new J(Zt,"OverflowEllipsis",1),Cg=new J(Zt,"FormatTrim",0),cw=new J(Zt,"FormatNone",0),n_=/[ \u200b\u00ad]/,Dg=new Nn,i_=0,Sg=new Nn,dw=0,bc="...",uv="",Si=null,Oc=!1;function er(t,e){ut.call(this),this.Gg=null,this.Ep="",this.hh=Jr,this.fl=Ve,this.kh=this.kd=null,this.el=Wt,this.Rd=ze,this.Wl=null,this.co=!1,this.Kn=!0,this.ul=!1,this.Pl=null,"string"==typeof t?this.source=t:t&&Object.assign(this,t),e&&Object.assign(this,e)}function gf(t){void 0===t&&(t=""),""!==t?pf[t]&&(delete pf[t],hv--):(pf=new Nn,hv=0)}function r_(t,e){e.Vy||(e.Hr=function(n){e.zr=!0,e.Xn=!1;var i=e.Cg.copy();if(null!=i){for(i=i.iterator;i.next();){var a=i.value,u=e.getAttribute("src")||"",h=a.$g.H(u);if(null!==h)for(var d=h.length,f=0;f<d;f++)a.$o.add(u=h[f]),a.Fb(),e.Qn&&(void 0===e.Du&&(e.Du=n),null!==u.kh&&u.kh(u,n))}e.Cg.clear()}t.desiredSize.u()||(Di(t,!1),t.s())},e.kr=function(n){e.Xn=n;var i=e.Cg.copy();if(null!=i){for(i=i.iterator;i.next();){var a=i.value,u=e.getAttribute("src")||"",h=a.$g.H(u);if(null!==h){a=h.length,u=ye();for(var d=0;d<a;d++)u.push(h[d]);if(e.Qn)for(d=0;d<a;d++)null!==(h=u[d]).kd&&h.kd(h,n);oe(u)}}e.Cg.clear()}},e.addEventListener("load",e.Hr),e.addEventListener("error",e.kr),e.Vy=!0)}function o_(t){t.Hr&&t.removeEventListener("load",t.Hr),t.kr&&t.removeEventListener("error",t.kr),delete t.Hr,delete t.kr}Zt.className="TextBlock",Zt.getEllipsis=function(){return bc},Zt.setEllipsis=function(t){bc=t,Sg=new Nn,dw=0},Zt.getBaseline=function(){return lv},Zt.setBaseline=function(t){lv=t},Zt.getUnderline=function(){return eh},Zt.setUnderline=function(t){eh=t},Zt.isValidFont=function(t){if(Oc||(Si=Ur?new Hr(null).context:null,Oc=!0),null===Si)return!0;var e=Si.font;if(t===e||"10px sans-serif"===t)return!0;Si.font="10px sans-serif",Si.font=t;var n=Si.font;if("10px sans-serif"!==n)return Si.font=e,!0;Si.font="19px serif";var i=Si.font;return Si.font=t,n=Si.font,Si.font=e,n!==i},Zt.FormatNone=cw,Zt.FormatTrim=Cg,Zt.None=Ic,Zt.OverflowClip=e_,Zt.OverflowEllipsis=_g,Zt.WrapBreakAll=Mg,Zt.WrapDesiredSize=wg,Zt.WrapFit=xg,Ft(er,ut),er.prototype.cloneProtected=function(t){ut.prototype.cloneProtected.call(this,t),t.element=this.Gg,t.Ep=this.Ep,t.hh=this.hh.I(),t.fl=this.fl,t.Rd=this.Rd,t.kd=this.kd,t.kh=this.kh,t.el=this.el.I(),t.Kn=this.Kn,t.Pl=this.Pl},er.prototype.gb=function(t){t===ze||t===Fo||t===vc?this.imageStretch=t:ut.prototype.gb.call(this,t)},er.prototype.toString=function(){return"Picture("+this.source+")#"+Jt(this)},er.prototype.KA=function(){if(""!==this.source){gf(this.source);var t=this.source;this.source="",this.source=t}},er.prototype.redraw=function(){this.N()},er.prototype.Fi=function(t,e){var n=this.Gg;if(null!==n){var i=n.getAttribute("src");if(!(n instanceof HTMLImageElement&&(null===i||""===i)||n.Xn instanceof Event&&t instanceof Zl)){i=this.naturalBounds;var a=0,u=0,h=this.co,d=h?+n.width:n.naturalWidth;if(void 0===d&&n.videoWidth&&(d=n.videoWidth),void 0===(h=h?+n.height:n.naturalHeight)&&n.videoHeight&&(h=n.videoHeight),h=h||i.height,0!==(d=d||i.width)&&0!==h){var f=d,g=h;this.sourceRect.u()&&(a=this.hh.x,u=this.hh.y,d=this.hh.width,h=this.hh.height);var m=d,y=h,x=this.fl,_=this.el;switch(x){case ze:if(this.sourceRect.u())break;m>=i.width&&(a=a+_.offsetX+(m*_.x-i.width*_.x)),y>=i.height&&(u=u+_.offsetY+(y*_.y-i.height*_.y)),d=Math.min(i.width,m),h=Math.min(i.height,y);break;case Ve:m=i.width,y=i.height;break;case Fo:case vc:x===Fo?(m*=x=Math.min(i.height/y,i.width/m),y*=x):x===vc&&((m*=x=Math.max(i.height/y,i.width/m))>=i.width&&(a=(a+_.offsetX+(m*_.x-i.width*_.x)/m)*d),(y*=x)>=i.height&&(u=(u+_.offsetY+(y*_.y-i.height*_.y)/y)*h),d*=1/(m/i.width),h*=1/(y/i.height),m=i.width,y=i.height)}var M=m*(x=this.wf()*e.scale)*y*x,S=d*h/M,T=n.__goCache;if(x=null,n.zr&&void 0!==T&&4<M&&S>rS*rS)for(null===T.Di&&(a_(T,4,f,g,n),a_(T,16,f,g,n)),g=(f=T.Di).length,M=0;M<g&&f[M].ratio*f[M].ratio<S;M++)x=f[M];if(!e.Bn){if(null===this.Wl)if(null===this.Gg)this.Wl=!1;else{f=new Hr(null).context;try{f.drawImage(this.Gg,0,0)}catch(b){this.Kn=!1}try{f.getImageData(0,0,1,1).data[3]&&(this.Wl=!1),this.Wl=!1}catch(b){this.Wl=!0}}if(this.Wl)return}switch(f=0,m<i.width&&(f=_.offsetX+(i.width*_.x-m*_.x)),g=0,y<i.height&&(g=_.offsetY+(i.height*_.y-y*_.y)),this.flip){case Qd:t.translate(Math.min(i.width,m),0),t.scale(-1,1);break;case Zu:t.translate(0,Math.min(i.height,y)),t.scale(1,-1);break;case Ye:t.translate(Math.min(i.width,m),Math.min(i.height,y)),t.scale(-1,-1)}if(t.Bd(),e.Fe("pictureRatioOptimization")&&!e.zj&&void 0!==T&&null!==x&&1!==x.ratio){t.save(),e=x.ratio;try{t.drawImage(x.source,a/e,u/e,Math.min(x.source.width,d/e),Math.min(x.source.height,h/e),f,g,Math.min(i.width,m),Math.min(i.height,y))}catch(b){this.Kn=!1}t.restore()}else try{t.drawImage(n,a,u,d,h,f,g,Math.min(i.width,m),Math.min(i.height,y))}catch(b){this.Kn=!1}switch(this.flip){case Qd:t.scale(-1,1),t.translate(-Math.min(i.width,m),0);break;case Zu:t.scale(1,-1),t.translate(0,-Math.min(i.height,y));break;case Ye:t.scale(-1,-1),t.translate(-Math.min(i.width,m),-Math.min(i.height,y))}}}}},er.prototype.qm=function(t,e,n,i){var a=this.desiredSize,u=xo(this,!0),h=this.Gg,d=this.co;(d||!this.ul&&h&&h.complete)&&(this.ul=!0),null===h&&(isFinite(a.width)||(t=0),isFinite(a.height)||(e=0)),isFinite(a.width)||u===Ve||u===Ln?(isFinite(t)||(this.sourceRect.u()?t=this.sourceRect.width:null!==h&&(t=d?+h.width:h.naturalWidth)),n=0):null!==h&&!1!==this.ul&&(t=this.sourceRect.u()?this.sourceRect.width:d?+h.width:h.naturalWidth),isFinite(a.height)||u===Ve||u===En?(isFinite(e)||(this.sourceRect.u()?e=this.sourceRect.height:null!==h&&(e=d?+h.height:h.naturalHeight)),i=0):null!==h&&!1!==this.ul&&(e=this.sourceRect.u()?this.sourceRect.height:d?+h.height:h.naturalHeight),isFinite(a.width)&&(t=a.width),isFinite(a.height)&&(e=a.height),a=this.maxSize,u=this.minSize,n=Math.max(n||0,u.width),i=Math.max(i||0,u.height),t=Math.min(a.width,t),e=Math.min(a.height,e),t=Math.max(n,t),e=Math.max(i,e),null===h||h.complete||(isFinite(t)||(t=0),isFinite(e)||(e=0)),_r(this.qc,t,e),this.ue(0,0,t,e)},er.prototype.vh=function(t,e,n,i){tg(this,t,e,n,i)},Dt.Object.defineProperties(er.prototype,{element:{get:function(){return this.Gg},set:function(t){var e=this.Gg;if(e!==t){this.co=t instanceof HTMLCanvasElement;var n=t instanceof HTMLImageElement;e instanceof HTMLImageElement&&o_(e),null===t||n||t instanceof HTMLVideoElement||this.co||z("Picture.element must be an instance of Image, Canvas, or Video, not: "+t);var i=this.diagram;null!==i&&Ay(i,this),this.Gg=t,null!==t&&n&&void 0===t.Cg&&(t.Cg=new K),null!==i&&n&&Kp(i,this),null!==t&&(this.co||!0===t.complete?(t.Qn&&(t.Xn instanceof Event&&null!==this.kd?this.kd(this,t.Xn):!0===t.zr&&!t.Xn&&null!==this.kh&&t.Du&&this.kh(this,t.Du)),t.zr=!0,this.desiredSize.u()||(Di(this,!1),this.s())):n&&r_(this,t)),this.g("element",e,t),this.N()}}},source:{get:function(){return this.Ep},set:function(t){var e=this.Ep;if(e!==t){this.Ep=t;var n=pf;if(Ur){if(void 0!==n[t])var i=n[t];else if(""!==t){30<hv&&(gf(),n=pf),(i=Bn("img")).Qn=!0,r_(this,i);var a=this.Pl;null!==a&&(i.crossOrigin=a(this)),i.src=t,n[t]=i,hv++}this.element=i,null!==i&&void 0===i.__goCache&&(i.__goCache=new s_),this.s(),this.N()}this.g("source",e,t)}}},sourceCrossOrigin:{get:function(){return this.Pl},set:function(t){if(this.Pl!==t&&(this.Pl=t,null!==this.element)){var e=this.element.getAttribute("src");null===t&&"string"==typeof e?this.element.crossOrigin=null:null!==t&&(this.element.crossOrigin=t(this)),this.element.src=e}}},sourceRect:{get:function(){return this.hh},set:function(t){var e=this.hh;e.A(t)||(this.hh=t=t.I(),this.N(),this.g("sourceRect",e,t))}},imageStretch:{get:function(){return this.fl},set:function(t){var e=this.fl;e!==t&&(this.fl=t,this.N(),this.g("imageStretch",e,t))}},flip:{get:function(){return this.Rd},set:function(t){var e=this.Rd;e!==t&&(this.Rd=t,this.N(),this.g("flip",e,t))}},imageAlignment:{get:function(){return this.el},set:function(t){var e=this.el;e.A(t)||(this.el=t=t.I(),this.N(),this.g("imageAlignment",e,t))}},errorFunction:{get:function(){return this.kd},set:function(t){var e=this.kd;e!==t&&(this.kd=t,this.g("errorFunction",e,t))}},successFunction:{get:function(){return this.kh},set:function(t){var e=this.kh;e!==t&&(this.kh=t,this.g("successFunction",e,t))}},naturalBounds:{get:function(){return this.qc}}}),er.prototype.redraw=er.prototype.redraw,er.prototype.reloadSource=er.prototype.KA;var hv=0,rS=4;function s_(){this.Di=null}function a_(t,e,n,i,a){null===t.Di&&(t.Di=[]);var u=new Hr(null),h=u.context,d=1/e;u.width=n/e,u.height=i/e,0!==u.width&&0!==u.height&&(e=new l_(u.La,e),n=1,0<t.Di.length&&(a=(n=t.Di[t.Di.length-1]).source,n=n.ratio),h.setTransform(d*n,0,0,d*n,0,0),h.Bd(),h.drawImage(a,0,0),t.Di.push(e))}function l_(t,e){this.source=t,this.ratio=e}function wo(){this.Fs=new q,this.gc=null}function iu(t,e,n,i,a){t.gc=new De,t.gc.startX=e,t.gc.startY=n,t.gc.isFilled=i,t.Fs.figures.add(t.gc),void 0!==a&&(t.gc.isShadowed=a)}function u_(t){var e=t.gc.segments.length;0<e&&t.gc.segments.J(e-1).close()}function Vs(t,e,n,i,a,u,h){var d;void 0===d&&(d=!1);var f=new Yt(Ji);f.point1X=e,f.point1Y=n,f.point2X=i,f.point2Y=a,f.endX=u,f.endY=h,d&&f.close(),t.gc.segments.add(f)}function Fc(t,e,n,i,a){var u;void 0===u&&(u=!1);var h=new Yt(lr);h.point1X=e,h.point1Y=n,h.endX=i,h.endY=a,u&&h.close(),t.gc.segments.add(h)}function fw(t,e,n,i,a,u,h,d){var f;void 0===f&&(f=!1),e=new Yt(Qr,h,d,e,n,i,a,u),f&&e.close(),t.gc.segments.add(e)}function Eg(t){var e=Tg;return null!==e?(Tg=null,e.reset(t),e):((e=new wo).reset(t),e)}er.className="Picture",pf=new Nn,er.clearCache=gf,s_.className="PictureCacheArray",l_.className="PictureCacheInstance",wo.prototype.reset=function(t){null!==t?(t.ea(),this.Fs=t,t.figures.clear()):this.Fs=new q,this.gc=null},wo.prototype.Jm=function(t){this.gc.isShadowed=t},wo.prototype.moveTo=function(t,e,n){void 0===n&&(n=!1);var i=new Yt(In);i.endX=t,i.endY=e,n&&i.close(),this.gc.segments.add(i)},wo.prototype.lineTo=function(t,e,n){void 0===n&&(n=!1);var i=new Yt(Ge);i.endX=t,i.endY=e,n&&i.close(),this.gc.segments.add(i)},wo.prototype.arcTo=function(t,e,n,i,a,u,h){void 0===u&&(u=0),void 0===h&&(h=!1);var d=new Yt(we);d.startAngle=t,d.sweepAngle=e,d.centerX=n,d.centerY=i,d.radiusX=a,d.radiusY=0!==u?u:a,h&&d.close(),this.gc.segments.add(d)};var Tg=null;function Tn(t,e){var n=t.toLowerCase(),i=R.Ne;i[t]=e,i[n]=t}function ht(t,e){void 0===t||t instanceof tn||"string"==typeof t?Y.call(this,t):(Y.call(this),t&&(e=t)),this.D=2408959,this.Og=this.Jf="",this.kp=this.gp=this.tp=this.ro=null,this.wp="",this.Hf=this.$n=this.vp=this.fh=null,this.ip="",this.hp=po,this.Ub=this.lp="",this.ei=this.kn=this.Qh=null,this.ae=new N(NaN,NaN).freeze(),this.xo="",this.Ze=null,this.yo=zn,this.mp=Fi,this.Go=ny,this.zo=iy,this.An=null,this.so=127,this.Bp=ry,this.Ap="gray",this.bg=4,this.Xw=-1,this.Wp=NaN,this.Uy=new B,this.li=null,this.Sf=NaN,e&&Object.assign(this,e)}function cv(t){0!=(16384&t.D)&&(t.updateAdornments(),t.D&=-16385)}function kg(t){if(!1===Ea(t)){Pg(t,!0),t.ll();var e=t.diagram;null!==e&&(e.qe.add(t),e.Fb())}}function fv(t){if(t.D|=2097152,!1!==Ea(t)){var e=t.position,n=t.location;n.u()&&e.u()||ih(t,e,n),n=t.vb;var i=B.alloc().assign(n);n.ea(),n.x=e.x,n.y=e.y,n.freeze(),t.rm(i,n),B.free(i),Pg(t,!1)}}function Sa(t,e,n,i){void 0===i&&(i=new N),n=n.wc()?Wt:n;var a=e.naturalBounds;if(i.h(a.width*n.x+n.offsetX,a.height*n.y+n.offsetY),null===e||e===t)return i;for(e.transform.ya(i),e=e.panel;null!==e&&e!==t;)e.transform.ya(i),e=e.panel;return null!==t.Ab&&t.Ab.ya(i),i.offset(-t.ic.x,-t.ic.y),i}function nh(t,e){var n=t.Uy;isNaN(t.Sf)&&(t.Sf=af(t));var i=t.Sf,a=2*i;if(!t.isShadowed)return n.h(e.x-1-i,e.y-1-i,e.width+2+a,e.height+2+a),n;i=e.x,a=e.y;var u=e.width;e=e.height;var h=t.shadowBlur;return u+=h,e+=h,i-=h/2,a-=h/2,0<(t=t.shadowOffset).x?u+=t.x:(i+=t.x,u-=t.x),0<t.y?e+=t.y:(a+=t.y,e-=t.y),n.h(i-1,a-1,u+2,e+2),n}function Lc(t,e,n,i,a){null===e||t instanceof At||(e=e.animationManager).rb&&wy(e,t,new N(i,a),n)}function ih(t,e,n){var i=N.alloc(),a=t.locationObject,u=a.naturalBounds,h=a instanceof wt?a.strokeWidth:0;if(i.Vi(0,0,u.width+h,u.height+h,t.locationSpot),a!==t)for(i.offset(-h/2,-h/2),a.transform.ya(i),a=a.panel;null!==a&&a!==t;)a.transform.ya(i),a=a.panel;null!==t.Ab&&t.Ab.ya(i),i.offset(-t.ic.x,-t.ic.y),a=t.diagram,u=n.u(),h=e.u(),u&&h?0!=(2097152&t.D)?Ng(t,e,n,a,i):rh(t,e,n,a,i):u?Ng(t,e,n,a,i):h&&rh(t,e,n,a,i),t.D|=2097152,N.free(i),t.ll()}function Ng(t,e,n,i,a){var u=e.x,h=e.y;e.h(n.x-a.x,n.y-a.y),null!==i&&((i=(n=i.animationManager).defaultAnimation.isAnimating)||!n.rb||t instanceof At||wy(n,t,new N(u,h),e),i||e.x===u&&e.y===h||t.g("position",new N(u,h),e.copy()))}function rh(t,e,n,i,a){var u=n.copy();n.h(e.x+a.x,e.y+a.y),n.A(u)||null===i||t.g("location",u,n.copy())}function Rc(t,e,n){Ag(t,!1),t instanceof Q&&zl(n,t),t.layer.isTemporary||e||n.Pa(),e=t.vb;var i=n.viewportBounds;i.u()?Bs(t)?(Se(e,i)||t.Jd(!1),t.updateAdornments()):e.Ic(i)?(t.Jd(!0),t.updateAdornments()):t.Kb():n.xj=!0}function ru(t,e,n,i){e.constructor===t.constructor||mv||(mv=!0,Oi('Should not change the class of the Part when changing category from "'+n+'" to "'+i+'"'),Oi("  Old class: "+aa(t.constructor)+", new class: "+aa(e.constructor)+", part: "+t.toString())),t.$j();var a=t.data;n=t.layerName;var u=t.isSelected,h=t.isHighlighted,d=!0,f=!0,g=!1;t instanceof Q&&(d=t.isTreeLeaf,f=t.isTreeExpanded,g=t.wasTreeExpanded),e.sf(t),e.cloneProtected(t),t.Jf=i,t.s(),t.N(),i=!0,null!==(e=t.diagram)&&(i=e.skipsUndoManager,e.skipsUndoManager=!0),t.ib=a,t.D=u?4096|t.D:-4097&t.D,t.D=h?524288|t.D:-524289&t.D,t instanceof Q&&(t.R=d?4|t.R:-5&t.R,t.R=f?1|t.R:-2&t.R,t.R=g?2|t.R:-3&t.R),null!==a&&t.Da(),(a=t.layerName)!==n&&(t.Og=n,t.layerName=a),null!==e&&(e.skipsUndoManager=i),t.Jc()&&t.B(64)}function Ea(t){return 0!=(32768&t.D)}function Pg(t,e){t.D=e?32768|t.D:-32769&t.D}function Ag(t,e){t.D=e?65536|t.D:-65537&t.D}function Bs(t){return 0!=(131072&t.D)}function jc(t,e){t.D=e?1048576|t.D:-1048577&t.D}function Ig(t,e){var n=e.containingGroup;return null!==n?1+Ig(t,n):e instanceof Q&&null!==(e=e.labeledLink)?Ig(t,e):0}function mf(t,e){var n=e.containingGroup;return null!==n||e instanceof Q&&null!==(n=e.labeledLink)?mf(t,n):e}function pv(t,e,n){if(e===n||null===n)return!1;var i=e.containingGroup;return!(null===i||i!==n&&!pv(t,i,n))||e instanceof Q&&null!==(e=e.labeledLink)&&pv(t,e,n)}function gv(t){return!(!t.isVisible()||null!==(t=t.layer)&&t.isTemporary)}function ou(t,e,n,i,a,u){if(void 0===u&&(u=null),!(t.contains(e)||null!==u&&!u(e)||e instanceof At))if(t.add(e),e instanceof Q){if(n&&e instanceof vt)for(var h=e.memberParts;h.next();)ou(t,h.value,n,i,a,u);if(!1!==a)for(h=e.linksConnected;h.next();){var d=h.value;if(!t.contains(d)){var f=d.fromNode,g=d.toNode;f=null===f||t.contains(f),g=null===g||t.contains(g),(a?f&&g:f||g)&&ou(t,d,n,i,a,u)}}if(1<i)for(e=e.tv();e.next();)ou(t,e.value,n,i-1,a,u)}else if(e instanceof X)for(e=e.labelNodes;e.next();)ou(t,e.value,n,i,a,u)}wo.className="StreamGeometryContext",Tn("Rectangle",function(t,e,n){var i=R.Ff[t="r"+e+","+n];return void 0!==i||((i=new q(q.C)).endX=e,i.endY=n,R.Gf<R.Rm&&(R.Ff[t]=i,R.Gf++)),i}),Tn("Square",function(t,e,n){var i=R.Ff[t="s"+e+","+n];return void 0!==i||((i=new q(q.C)).endX=e,i.endY=n,i.defaultStretch=Fo,R.Gf<R.Rm&&(R.Ff[t]=i,R.Gf++)),i}),Tn("RoundedRectangle",function(t,e,n){t=t?t.parameter1:NaN,(isNaN(t)||0>t)&&(t=5),t=Math.min(t,e/3);var i="rr"+e+","+n+","+(t=Math.min(t,n/3)),a=R.Ff[i];if(void 0!==a)return a;var u=t*R.qg;return a=(new q).add(new De(t,0,!0).add(new Yt(Ge,e-t,0)).add(new Yt(Ji,e,t,e-u,0,e,u)).add(new Yt(Ge,e,n-t)).add(new Yt(Ji,e-t,n,e,n-u,e-u,n)).add(new Yt(Ge,t,n)).add(new Yt(Ji,0,n-t,u,n,0,n-u)).add(new Yt(Ge,0,t)).add(new Yt(Ji,t,0,0,u,u,0).close())),1<u&&(a.spot1=new ct(0,0,u,u),a.spot2=new ct(1,1,-u,-u)),R.Gf<R.Rm&&(R.Ff[i]=a,R.Gf++),a}),Tn("Border","RoundedRectangle"),Tn("Ellipse",function(t,e,n){var i=R.Ff[t="e"+e+","+n];return void 0!==i||((i=new q(q.M)).endX=e,i.endY=n,i.spot1=kp,i.spot2=ay,R.Gf<R.Rm&&(R.Ff[t]=i,R.Gf++)),i}),Tn("Circle",function(t,e,n){var i=R.Ff[t="c"+e+","+n];return void 0!==i||((i=new q(q.M)).endX=e,i.endY=n,i.spot1=kp,i.spot2=ay,i.defaultStretch=Fo,R.Gf<R.Rm&&(R.Ff[t]=i,R.Gf++)),i}),Tn("TriangleRight",function(t,e,n){return(new q).add(new De(0,0).add(new Yt(Ge,e,.5*n)).add(new Yt(Ge,0,n).close())).Km(0,.25,.5,.75)}),Tn("TriangleDown",function(t,e,n){return(new q).add(new De(0,0).add(new Yt(Ge,e,0)).add(new Yt(Ge,.5*e,n).close())).Km(.25,0,.75,.5)}),Tn("TriangleLeft",function(t,e,n){return(new q).add(new De(e,n).add(new Yt(Ge,0,.5*n)).add(new Yt(Ge,e,0).close())).Km(.5,.25,1,.75)}),Tn("TriangleUp",function(t,e,n){return(new q).add(new De(e,n).add(new Yt(Ge,0,n)).add(new Yt(Ge,.5*e,0).close())).Km(.25,.5,.75,1)}),Tn("Triangle","TriangleUp"),Tn("Diamond",function(t,e,n){return(new q).add(new De(.5*e,0).add(new Yt(Ge,0,.5*n)).add(new Yt(Ge,.5*e,n)).add(new Yt(Ge,e,.5*n).close())).Km(.25,.25,.75,.75)}),Tn("LineH",function(t,e,n){return(t=new q(q.j)).startX=0,t.startY=n/2,t.endX=e,t.endY=n/2,t}),Tn("LineV",function(t,e,n){return(t=new q(q.j)).startX=e/2,t.startY=0,t.endX=e/2,t.endY=n,t}),Tn("None","Rectangle"),Tn("BarH","Rectangle"),Tn("BarV","Rectangle"),Tn("MinusLine","LineH"),Tn("PlusLine",function(t,e,n){return(new q).add(new De(0,n/2,!1).add(new Yt(Ge,e,n/2)).add(new Yt(In,e/2,0)).add(new Yt(Ge,e/2,n)))}),Tn("XLine",function(t,e,n){return(new q).add(new De(0,n,!1).add(new Yt(Ge,e,0)).add(new Yt(In,0,0)).add(new Yt(Ge,e,n)))}),R.Qm={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"},Ft(ht,Y),ht.prototype.cloneProtected=function(t){Y.prototype.cloneProtected.call(this,t),t.D=-4097&this.D|49152,t.Jf=this.Jf,t.Og=this.Og,t.ro=this.ro,t.tp=this.tp,t.gp=this.gp,t.kp=this.kp,t.wp=this.wp,t.vp=this.vp,t.$n=this.$n,t.Hf=null,t.ip=this.ip,t.hp=this.hp.I(),t.lp=this.lp,t.mp=this.mp.I(),t.Ub=this.Ub,t.kn=this.kn,t.ae.assign(this.ae),t.xo=this.xo,t.yo=this.yo.I(),t.Go=this.Go.I(),t.zo=this.zo.I(),t.An=this.An,t.so=this.so,t.Bp=this.Bp.I(),t.Ap=this.Ap,t.bg=this.bg,t.Wp=this.Wp},ht.prototype.sf=function(t){Y.prototype.sf.call(this,t),t.Ch(),t.fh=null,t.Ze=null,t.li=null},ht.prototype.toString=function(){var t=aa(this.constructor)+"#"+Jt(this);return null!==this.data&&(t+="("+sr(this.data)+")"),t},ht.prototype.Ak=function(t,e,n,i,a,u,h){var d=this.diagram;null!==d&&(t===Pt&&"elements"===e?a instanceof Y?al(a,function(f){fh(d.partManager,f),Wd(d,f)}):Kp(d,a):t===sn&&"elements"===e&&(a instanceof Y?al(a,function(f){pr(d.partManager,f,d)}):Ay(d,a)),d.Va(t,e,n,i,a,u,h))},ht.prototype.Da=function(t){if(Y.prototype.Da.call(this,t),null!==this.data){for(var e=this.T.m,n=e.length,i=0;i<n;i++){var a=e[i];a instanceof Y&&al(a,function(u){null!==u.data&&u.Da()})}for(e=this.adornments;e.next();)e.value.Da(t)}},ht.prototype.updateRelationshipsFromData=function(){var t;null!==this.data&&(null===(t=this.diagram)||void 0===t||t.partManager.updateRelationshipsFromData(this))},ht.prototype.hk=function(t){var e=this.Hf;return null===e?null:e.H(t)},ht.prototype.th=function(t,e){if(null!==e){var n=null,i=this.Hf;if(null!==i&&(n=i.H(t)),n!==e){if(null!==n){var a=n.diagram;null!==a&&a.remove(n)}null===i&&(this.Hf=i=new xt),e.Jf!==t&&(e.category=t),i.add(t,e),null!==(t=this.diagram)&&(t.add(e),null!==(t=e.adornedObject)&&null!==(t=t.yh())&&(e.data=t.data))}}},ht.prototype.Cf=function(t){var e=this.Hf;if(null!==e){var n=e.H(t);if(null!==n){var i=n.diagram;null!==i&&i.remove(n)}e.remove(t),0===e.count&&(this.Hf=null)}},ht.prototype.$j=function(){var t=this.Hf;if(null!==t){var e=ye();for(t=t.iterator;t.next();)e.push(t.key);t=e.length;for(var n=0;n<t;n++)this.Cf(e[n]);oe(e)}},ht.prototype.updateAdornments=function(){var t=this.diagram;if(null!==t){for(var e=this.adornments;e.next();){var n=e.value;n.s(),n.placeholder&&n.placeholder.s()}t:{if(this.isSelected&&this.selectionAdorned&&null!==(e=this.selectionObject)&&this.actualBounds.u()&&this.isVisible()&&e.Bf()&&e.actualBounds.u()){if(null===(n=this.hk("Selection"))){if(null===(n=this.selectionAdornmentTemplate)&&(n=this.Dh()?t.linkSelectionAdornmentTemplate:this instanceof vt?t.groupSelectionAdornmentTemplate:t.nodeSelectionAdornmentTemplate),!(n instanceof At))break t;Gr(n),null!==(n=n.copy())&&(this.Dh()&&this.selectionObject===this.path&&(n.type=Y.Link),n.adornedObject=e)}if(null!==n){n.type===Y.Link&&n.s(),this.th("Selection",n);break t}}this.Cf("Selection")}for(function dv(t,e){e.toolManager.mouseDownTools.each(function(n){n.isEnabled&&n.updateAdornments(t)}),e.toolManager.updateAdornments(t)}(this,t),e=this.adornments;e.next();)e.value.Da()}},ht.prototype.Kb=function(){var t=this.diagram;null!==t&&(nl(t),0==(16384&this.D)&&(this.D|=16384,t.Fb()))},ht.prototype.ue=function(t,e,n,i){var a=this.ic;a.h(t,e,n,i),null===this.Ab&&(this.Ab=new St);var u=this.Ab;u.reset(),this.zp(u,t,e,n,i),this.Ab=u,u.Os()||u.Jq(a)},ht.prototype.zp=function(t,e,n,i,a){if(1!==this.sa&&t.scale(this.sa),0!==this.xb){var u=Wt;this.locationSpot.hb()&&(u=this.locationSpot);var h=N.alloc();if(this.locationObject!==this)for(h.Vi((n=(e=this.locationObject).naturalBounds).x,n.y,n.width,n.height,u),null!==e.Ab&&e.Ab.ya(h),h.offset(-e.measuredBounds.x,-e.measuredBounds.y),u=e.panel;null!==u&&u!==this;)null!==u.Ab&&u.Ab.ya(h),h.offset(-u.measuredBounds.x,-u.measuredBounds.y),u=u.panel;else h.Vi(e,n,i,a,u);t.rotate(this.xb,h.x,h.y),N.free(h)}},ht.prototype.move=function(t,e){!0===e?this.location=t:this.position=t},ht.prototype.moveTo=function(t,e,n){t=N.allocAt(t,e),this.move(t,n),N.free(t)},ht.prototype.isVisible=function(){if(!this.visible)return!1;var t=this.layer;if(null!==t){if(!t.visible)return!1;if(null!==(t=t.diagram)&&t.animationManager.Ys(this))return!0}return!!(null===(t=this.containingGroup)||t.isSubGraphExpanded&&t.isVisible())},ht.prototype.Nb=function(t){var e=this.diagram;t?(this.B(4),this.Kb(),null!==e&&e.qe.add(this)):(this.B(8),this.$j()),this.Ch(),null!==e&&(e.Pa(),e.N())},ht.prototype.Ya=function(t){if(this.name===t)return this;var e=this.li;if(null===e&&(this.li=e=new xt),null!==e.H(t))return e.H(t);var n=Y.prototype.Ya.call(this,t);return null!==n?(e.set(t,n),n):(e.set(t,null),null)},ht.prototype.Mi=function(t){return void 0===t&&(t=new B),t.assign(this.actualBounds)},ht.prototype.Sa=function(){!0===Rn(this)&&this.measure(1/0,1/0),this.arrange()},ht.prototype.arrange=function(){if(!1===fr(this))fv(this);else{Wl(this,!1);var t=this.vb,e=B.alloc();e.assign(t);var n=Bs(this);this.vh(0,0,this.ic.width,this.ic.height);var i=this.position;ih(this,i,this.location),t.ea(),t.x=i.x,t.y=i.y,t.freeze(),this.rm(e,t),e.A(t)?this.Jd(n):!this.Jc()||R.w(e.width,t.width)&&R.w(e.height,t.height)||0<=this.Xw&&this.B(16),B.free(e),Pg(this,!1)}},(D=ht.prototype).rm=function(t,e){var n=this.diagram;if(null!==n){var i=!1;if(!1===n.vj&&t.u()){var a=B.alloc();a.assign(n.documentBounds),a.cw(n.padding),t.x>a.x&&t.y>a.y&&t.right<a.right&&t.bottom<a.bottom&&e.x>a.x&&e.y>a.y&&e.right<a.right&&e.bottom<a.bottom&&(i=!0),B.free(a)}0==(65536&this.D)&&t.A(e)||Rc(this,i,n),n.N(),!t.u()&&!e.u()||ti(t,e)||(this instanceof Q&&!n.undoManager.isUndoingRedoing&&this.pd(),this.Ch())}},D.Zv=function(t,e,n){if(this.Dh()||!t.u())return!1;var i=this.diagram;return null!==i&&Lc(this,i,t,e,n),this.ka=t,this.D&=-2097153,!this.ae.u()||null!==i&&!i.animationManager.isTicking&&i.undoManager.isUndoingRedoing||(this.ae=new N((i=this.ae).x+(t.x-e),i.y+(t.y-n)),this.g("location",i,this.ae.copy())),!1===Ea(this)&&!1===fr(this)&&(kg(this),fv(this)),!0},D.Gm=function(t,e,n){var i=this.ae,a=this.ka;if(n){if(i.x===t&&i.y===e)return;Ea(this)||fr(this)?a.h(NaN,NaN):a.h(a.x+t-i.x,a.y+e-i.y),i.h(t,e)}else{if(a.x===t&&a.y===e)return;Ea(this)||fr(this)?this.gt():i.h(i.x+t-a.x,i.y+e-a.y),a.h(t,e)}kg(this)},D.gt=function(){this.D&=-2097153,kg(this)},D.Si=function(){return!0},D.Jc=function(){return!0},D.Dh=function(){return!1},D.Ri=function(){return!0},ht.prototype.canCopy=function(){if(!this.copyable)return!1;var t=this.layer;return null===t||!!t.allowCopy&&(null===(t=t.diagram)||!!t.allowCopy)},ht.prototype.canDelete=function(){if(!this.deletable)return!1;var t=this.layer;return null===t||!!t.allowDelete&&(null===(t=t.diagram)||!!t.allowDelete)},ht.prototype.canEdit=function(){if(!this.textEditable)return!1;var t=this.layer;return null===t||!!t.allowTextEdit&&(null===(t=t.diagram)||!!t.allowTextEdit)},ht.prototype.canGroup=function(){if(!this.groupable)return!1;var t=this.layer;return null===t||!!t.allowGroup&&(null===(t=t.diagram)||!!t.allowGroup)},ht.prototype.canMove=function(){if(!this.movable)return!1;var t=this.layer;return null===t||!!t.allowMove&&(null===(t=t.diagram)||!!t.allowMove)},ht.prototype.canReshape=function(){if(!this.reshapable)return!1;var t=this.layer;return null===t||!!t.allowReshape&&(null===(t=t.diagram)||!!t.allowReshape)},ht.prototype.canResize=function(){if(!this.resizable)return!1;var t=this.layer;return null===t||!!t.allowResize&&(null===(t=t.diagram)||!!t.allowResize)},ht.prototype.canRotate=function(){if(!this.rotatable)return!1;var t=this.layer;return null===t||!!t.allowRotate&&(null===(t=t.diagram)||!!t.allowRotate)},ht.prototype.canSelect=function(){if(!this.selectable)return!1;var t=this.layer;return null===t||!!t.allowSelect&&(null===(t=t.diagram)||!!t.allowSelect)},(D=ht.prototype).Jd=function(t){this.D=t?131072|this.D:-131073&this.D},D.Ch=function(){var t=this.containingGroup;null!==t&&(t.s(),null!==t.placeholder&&t.placeholder.s(),t.pd())},D.N=function(){var t=this.diagram;null!==t&&!fr(this)&&!Ea(this)&&this.isVisible()&&this.vb.u()&&t.N(nh(this,this.vb))},D.s=function(){Y.prototype.s.call(this);var t=this.diagram;null!==t&&(t.qe.add(this),this instanceof Q&&null!==this.labeledLink&&xc(this.labeledLink),t.Fb(!0))},D.pq=function(t){t||null!==(t=this.Qh)&&Cv(t,this)},D.qq=function(t){t||null!==(t=this.Qh)&&Dv(t,this)},D.fk=function(){var t=this.data;if(null!==t){var e=this.diagram;null!==e&&null!==(e=e.model)&&e.wm(t)}},D.Uz=function(){return Ig(this,this)},D.Yz=function(){return mf(this,this)},D.Fd=function(t){return t instanceof vt&&pv(this,this,t)},D.Rx=function(t){if(null===t)return null;if(this===t)return this.containingGroup;for(var e=this;null!==e;){if(e instanceof vt&&jc(e,!0),e instanceof Q){var n=e.labeledLink;null!==n&&(e=n)}e=e.containingGroup}for(n=null,e=t;null!==e;){if(0!=(1048576&e.D)){n=e;break}e instanceof Q&&null!==(t=e.labeledLink)&&(e=t),e=e.containingGroup}for(e=this;null!==e;)e instanceof vt&&jc(e,!1),e instanceof Q&&null!==(t=e.labeledLink)&&(e=t),e=e.containingGroup;return n},ht.prototype.canLayout=function(){if(!this.isLayoutPositioned||!this.isVisible())return!1;var t=this.layer;return!(null!==t&&t.isTemporary||this instanceof Q&&this.isLinkLabel)},ht.prototype.B=function(t){if(void 0===t&&(t=16777215),this.isLayoutPositioned&&0!=(t&this.layoutConditions)){var e=this.layer;e=!(null!==e&&e.isTemporary||this instanceof Q&&this.isLinkLabel)&&!(null!==(e=this.diagram)&&e.undoManager.isUndoingRedoing)}else e=!1;if(e)if(null!==(e=this.Qh)){var n=e.layout;null!==n?n.B():e.B(t)}else null!==(t=this.diagram)&&null!==(t=t.layout)&&t.B()},Dt.Object.defineProperties(ht.prototype,{key:{get:function(){var t=this.diagram;if(null!==t)return t.model.pa(this.data)}},adornments:{get:function(){return null===this.Hf?Un:this.Hf.iteratorValues}},layer:{get:function(){return this.ei}},diagram:{get:function(){var t=this.ei;return null==t?null:t.diagram}},layerName:{get:function(){return this.Og},set:function(t){var e=this.Og;if(e!==t){var n=this.diagram;if((null===n||null!==n.ik(t)&&!n.partManager.addsToTemporaryLayer)&&(this.Og=t,null!==n&&n.Pa(),this.g("layerName",e,t),null!==(e=this.layer)&&e.name!==t&&null!==(n=e.diagram)&&null!==(t=n.ik(t))&&t!==e)){var i=e.bc(-1,this,!0);if(0<=i&&n.Va(sn,"parts",e,this,null,i,!0),i=t.Oi(99999999,this,!0),e.visible!==t.visible&&this.Nb(t.visible),0<=i&&n.Va(Pt,"parts",t,null,this,!0,i),null!==(i=this.layerChanged)){var a=n.Z;n.Z=!0,i(this,e,t),n.Z=a}}}}},layerChanged:{get:function(){return this.ro},set:function(t){var e=this.ro;e!==t&&(this.ro=t,this.g("layerChanged",e,t))}},zOrder:{get:function(){return this.Wp},set:function(t){var e=this.Wp;if(e!==t){this.Wp=t;var n=this.layer;null!==n&&_y(n,-1,this),this.g("zOrder",e,t),null!==(t=this.diagram)&&t.N()}}},locationObject:{get:function(){if(null===this.Ze){var t=this.locationObjectName;""!==t?(t=this.Ya(t),this.Ze=null!==t?t:this):this.Ze=this instanceof At&&this.type!==Y.Link&&null!==this.placeholder?this.placeholder:this}return this.Ze.visible?this.Ze:this}},minLocation:{get:function(){return this.Go},set:function(t){var e=this.Go;e.A(t)||(this.Go=t=t.I(),this.g("minLocation",e,t))}},maxLocation:{get:function(){return this.zo},set:function(t){var e=this.zo;e.A(t)||(this.zo=t=t.I(),this.g("maxLocation",e,t))}},locationObjectName:{get:function(){return this.xo},set:function(t){var e=this.xo;e!==t&&(this.xo=t,this.Ze=null,this.s(),this.g("locationObjectName",e,t))}},locationSpot:{get:function(){return this.yo},set:function(t){var e=this.yo;e.A(t)||(this.yo=t=t.I(),this.s(),this.g("locationSpot",e,t))}},location:{get:function(){return this.ae},set:function(t){var e=t.x,n=t.y,i=this.ae;if(!(i.x===e||isNaN(i.x)&&isNaN(e))||!(i.y===n||isNaN(i.y)&&isNaN(n))){if(e=t=t.copy(),this.Dh())e=!1;else{if(this.ae=e,this.D|=2097152,!1===fr(this)&&(kg(this),(n=this.ka).u())){var a=this.diagram;if(null===a||a.animationManager.isTicking||!a.undoManager.isUndoingRedoing){var u=n.copy();n.h(n.x+(e.x-i.x),n.y+(e.y-i.y)),Lc(this,a,n,u.x,u.y),this.g("position",u,n.copy())}}e=!0}e&&this.g("location",i,t.copy())}}},category:{get:function(){return this.Jf},set:function(t){var e=this.Jf;if(e!==t){var n=this.diagram,i=this.data,a=null;if(null!==n&&null!==i&&!(this instanceof At)){var u=n.model.undoManager;u.isEnabled&&!u.isUndoingRedoing&&(a=this.clone()).T.addAll(this.T)}this.Jf=t,this.g("category",e,t),null===n||null===i||this instanceof At?this instanceof At&&null!==(a=this.adornedPart)&&(null!==(t=a.Hf)&&t.remove(e),a.th(this.category,this)):(u=n.model).undoManager.isUndoingRedoing||(this.Dh()?(n.partManager.setLinkCategoryForData(i,t),null!==(n=n.partManager.findLinkTemplateForCategory(t))&&(Gr(n),null!==(n=n.copy())&&ru(this,n,e,t))):(null!==u&&u.Dm(i,t),null!==(n=bw(n.partManager,i,t))&&(Gr(n),null===(n=n.copy())||n instanceof X||(i=this.location.copy(),ru(this,n,e,t),this.location.u()||(this.location=i)))),null!==a&&((e=this.clone()).T.addAll(this.T),this.g("self",a,e)))}}},self:{get:function(){return this},set:function(t){ru(this,t,this.category,t.category)}},copyable:{get:function(){return 0!=(1&this.D)},set:function(t){var e=0!=(1&this.D);e!==t&&(this.D^=1,this.g("copyable",e,t))}},deletable:{get:function(){return 0!=(2&this.D)},set:function(t){var e=0!=(2&this.D);e!==t&&(this.D^=2,this.g("deletable",e,t))}},textEditable:{get:function(){return 0!=(4&this.D)},set:function(t){var e=0!=(4&this.D);e!==t&&(this.D^=4,this.g("textEditable",e,t),this.Kb())}},groupable:{get:function(){return 0!=(8&this.D)},set:function(t){var e=0!=(8&this.D);e!==t&&(this.D^=8,this.g("groupable",e,t))}},movable:{get:function(){return 0!=(16&this.D)},set:function(t){var e=0!=(16&this.D);e!==t&&(this.D^=16,this.g("movable",e,t))}},selectionAdorned:{get:function(){return 0!=(32&this.D)},set:function(t){var e=0!=(32&this.D);e!==t&&(this.D^=32,this.g("selectionAdorned",e,t),this.Kb())}},isInDocumentBounds:{get:function(){return 0!=(64&this.D)},set:function(t){var e=0!=(64&this.D);if(e!==t){this.D^=64;var n=this.diagram;null!==n&&n.Pa(),this.g("isInDocumentBounds",e,t)}}},isLayoutPositioned:{get:function(){return 0!=(128&this.D)},set:function(t){var e=0!=(128&this.D);e!==t&&(this.D^=128,this.g("isLayoutPositioned",e,t),this.B(t?4:8))}},selectable:{get:function(){return 0!=(256&this.D)},set:function(t){var e=0!=(256&this.D);e!==t&&(this.D^=256,this.g("selectable",e,t),this.Kb())}},reshapable:{get:function(){return 0!=(512&this.D)},set:function(t){var e=0!=(512&this.D);e!==t&&(this.D^=512,this.g("reshapable",e,t),this.Kb())}},resizable:{get:function(){return 0!=(1024&this.D)},set:function(t){var e=0!=(1024&this.D);e!==t&&(this.D^=1024,this.g("resizable",e,t),this.Kb())}},rotatable:{get:function(){return 0!=(2048&this.D)},set:function(t){var e=0!=(2048&this.D);e!==t&&(this.D^=2048,this.g("rotatable",e,t),this.Kb())}},isSelected:{get:function(){return 0!=(4096&this.D)},set:function(t){var e=0!=(4096&this.D);if(e!==t){var n=this.diagram;if(!t||this.canSelect()&&!(null!==n&&n.selection.count>=n.maxSelectionCount)){this.D^=4096;var i=!1;if(null!==n){i=n.skipsUndoManager,n.skipsUndoManager=!0;var a=n.selection;a.ea(),t?a.add(this):a.remove(this),a.freeze()}this.g("isSelected",e,t),this.Kb(),null!==(t=this.selectionChanged)&&t(this),null!==n&&(n.Fb(),n.skipsUndoManager=i)}}}},isHighlighted:{get:function(){return 0!=(524288&this.D)},set:function(t){var e=0!=(524288&this.D);if(e!==t){this.D^=524288;var n=this.diagram;null!==n&&((n=n.highlighteds).ea(),t?n.add(this):n.remove(this),n.freeze()),this.g("isHighlighted",e,t),this.N(),null!==(t=this.highlightedChanged)&&t(this)}}},isShadowed:{get:function(){return 0!=(8192&this.D)},set:function(t){var e=0!=(8192&this.D);e!==t&&(this.D^=8192,this.g("isShadowed",e,t),this.N())}},isAnimated:{get:function(){return 0!=(262144&this.D)},set:function(t){var e=0!=(262144&this.D);e!==t&&(this.D^=262144,this.g("isAnimated",e,t))}},highlightedChanged:{get:function(){return this.$n},set:function(t){var e=this.$n;e!==t&&(this.$n=t,this.g("highlightedChanged",e,t))}},selectionObjectName:{get:function(){return this.wp},set:function(t){var e=this.wp;e!==t&&(this.wp=t,this.fh=null,this.g("selectionObjectName",e,t))}},selectionAdornmentTemplate:{get:function(){return this.tp},set:function(t){var e=this.tp;e!==t&&(this.tp=t,this.g("selectionAdornmentTemplate",e,t))}},selectionObject:{get:function(){if(null===this.fh){var t=this.selectionObjectName;null!==t&&""!==t?(t=this.Ya(t),this.fh=null!==t?t:this):this.fh=this instanceof X&&null!==(t=this.path)?t:this}return this.fh}},selectionChanged:{get:function(){return this.vp},set:function(t){var e=this.vp;e!==t&&(this.vp=t,this.g("selectionChanged",e,t))}},resizeAdornmentTemplate:{get:function(){return this.gp},set:function(t){var e=this.gp;e!==t&&(this.gp=t,this.g("resizeAdornmentTemplate",e,t))}},resizeObjectName:{get:function(){return this.ip},set:function(t){var e=this.ip;e!==t&&(this.ip=t,this.g("resizeObjectName",e,t))}},resizeObject:{get:function(){var t=this.resizeObjectName;return""!==t&&null!==(t=this.Ya(t))?t:this}},resizeCellSize:{get:function(){return this.hp},set:function(t){var e=this.hp;e.A(t)||(this.hp=t=t.I(),this.g("resizeCellSize",e,t))}},rotateAdornmentTemplate:{get:function(){return this.kp},set:function(t){var e=this.kp;e!==t&&(this.kp=t,this.g("rotateAdornmentTemplate",e,t))}},rotateObjectName:{get:function(){return this.lp},set:function(t){var e=this.lp;e!==t&&(this.lp=t,this.g("rotateObjectName",e,t))}},rotateObject:{get:function(){var t=this.rotateObjectName;return""!==t&&null!==(t=this.Ya(t))?t:this}},rotationSpot:{get:function(){return this.mp},set:function(t){var e=this.mp;e.A(t)||(this.mp=t=t.I(),this.g("rotationSpot",e,t))}},text:{get:function(){return this.Ub},set:function(t){var e=this.Ub;e!==t&&(this.Ub=t,this.g("text",e,t))}},containingGroup:{get:function(){return this.Qh},set:function(t){if(this.Jc()){var e=this.Qh;if(e!==t){null===t||this!==t&&!t.Fd(this)||(this===t&&z("Cannot make a Group a member of itself: "+this.toString()),z("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+t.toString())),this.B(2);var n=this.diagram;if(null!==e?Dv(e,this):this instanceof vt&&null!==n&&n.xi.remove(this),this.Qh=t,null!==t?Cv(t,this):this instanceof vt&&null!==n&&n.xi.add(this),this.B(1),null!==n&&n.Z){var i=this.data,a=n.model;if(null!==i&&a.pk()){var u=a.pa(null!==t?t.data:null);a.Gq(i,u)}}if(null!==(i=this.containingGroupChanged)&&(a=!0,null!==n&&(a=n.Z,n.Z=!0),i(this,e,t),null!==n&&(n.Z=a)),this instanceof vt)for(ou(n=new K,this,!0,0,!0),n=n.iterator;n.next();)if((i=n.value)instanceof Q)for(i=i.linksConnected;i.next();)su(i.value);if(this instanceof Q){for(n=this.linksConnected;n.next();)su(n.value);null!==(n=this.labeledLink)&&su(n)}this.g("containingGroup",e,t),null!==t&&null!==(e=t.layer)&&_y(e,-1,t)}}else z("cannot set the Part.containingGroup of a Link or Adornment")}},containingGroupChanged:{get:function(){return this.kn},set:function(t){var e=this.kn;e!==t&&(this.kn=t,this.g("containingGroupChanged",e,t))}},isTopLevel:{get:function(){return!(null!==this.containingGroup||this instanceof Q&&null!==this.labeledLink)}},layoutConditions:{get:function(){return this.so},set:function(t){var e=this.so;e!==t&&(this.so=t,this.g("layoutConditions",e,t))}},dragComputation:{get:function(){return this.An},set:function(t){var e=this.An;e!==t&&(this.An=t,this.g("dragComputation",e,t))}},shadowOffset:{get:function(){return this.Bp},set:function(t){var e=this.Bp;e.A(t)||(this.Bp=t=t.I(),this.N(),this.g("shadowOffset",e,t))}},shadowColor:{get:function(){return this.Ap},set:function(t){var e=this.Ap;e!==t&&(this.Ap=t,this.N(),this.g("shadowColor",e,t))}},shadowBlur:{get:function(){return this.bg},set:function(t){var e=this.bg;e!==t&&(this.bg=t,this.N(),this.g("shadowBlur",e,t))}}}),ht.prototype.invalidateLayout=ht.prototype.B,ht.prototype.findCommonContainingGroup=ht.prototype.Rx,ht.prototype.isMemberOf=ht.prototype.Fd,ht.prototype.findTopLevelPart=ht.prototype.Yz,ht.prototype.findSubGraphLevel=ht.prototype.Uz,ht.prototype.ensureBounds=ht.prototype.Sa,ht.prototype.getDocumentBounds=ht.prototype.Mi,ht.prototype.findObject=ht.prototype.Ya,ht.prototype.moveTo=ht.prototype.moveTo,ht.prototype.invalidateAdornments=ht.prototype.Kb,ht.prototype.clearAdornments=ht.prototype.$j,ht.prototype.removeAdornment=ht.prototype.Cf,ht.prototype.addAdornment=ht.prototype.th,ht.prototype.findAdornment=ht.prototype.hk,ht.prototype.updateTargetBindings=ht.prototype.Da;var mv=!1;function At(t,e){void 0===t||t instanceof tn||"string"==typeof t?ht.call(this,t):(ht.call(this),t&&(e=t)),this.D&=-257,this.Og="Adornment",this.ie=null,this.ax=0,this.xx=!1,this.j=this.Ra=null,e&&Object.assign(this,e)}function Q(t,e){void 0===t||t instanceof tn||"string"==typeof t?ht.call(this,t):(ht.call(this),t&&(e=t)),this.R=13,this.ab=new et,this.Pp=this.ql=this.ii=this.uo=this.to=null,this.Kk=lx,this.kc=this.Pe=null,this.cp=Lg,this.rh=!1,e&&Object.assign(this,e)}function yv(t,e){null!==e&&(null===t.Pe&&(t.Pe=new K),t.Pe.add(e))}function pw(t,e,n,i){if(null===e||null===t.Pe)return null;for(var a=t.Pe.iterator;a.next();){var u=a.value;if(u.Ws===t&&u.Iv===e&&u.uy===n&&u.vy===i||u.Ws===e&&u.Iv===t&&u.uy===i&&u.vy===n)return u}return null}function gw(t,e){for(t=t.linksConnected;t.next();){var n=t.value;(n.fromPort===e||n.toPort===e)&&(an(n.fromPort),an(n.toPort),n.Ua())}}function an(t){if(null!==t){var e=t.bp;null!==e&&e.mm(),null===(e=(t=t.part).containingGroup)||t.isVisible()||an(e.port)}}function mw(t,e,n,i){if(null!==e&&!n.has(e)){n.add(e);var a=!0,u=t.diagram;null!==u&&(a=u.isTreePathToChildren),e.linksConnected.each(function(h){h.isTreeLink?(a?h.fromNode===e:h.toNode===e)&&mw(t,a?h.toNode:h.fromNode,n,i):i.add(h)})}}function bg(t,e,n){an(n);var i=t.ab.contains(e);if(i||t.ab.add(e),!i||e.fromNode===e.toNode){var a=t.linkConnected;if(null!==a){var u=!0,h=t.diagram;null!==h&&(u=h.Z,h.Z=!0),a(t,e,n),null!==h&&(h.Z=u)}}!i&&e.isTreeLink&&(n=e.fromNode,e=e.toNode,null!==n&&null!==e&&n!==e&&(i=!0,null!==(t=t.diagram)&&(i=t.isTreePathToChildren),u=i?n:e,(a=i?e:n).rh||(a.rh=u),!u.isTreeLeaf||null!==t&&t.undoManager.isUndoingRedoing||(i?n===u&&(u.isTreeLeaf=!1):e===u&&(u.isTreeLeaf=!1))))}function vv(t,e,n){an(n);var i=t.ab.remove(e),a=null;if(i||e.toNode===e.fromNode){var u=t.linkDisconnected;if(a=t.diagram,null!==u){var h=!0;null!==a&&(h=a.Z,a.Z=!0),u(t,e,n),null!==a&&(a.Z=h)}}i&&e.isTreeLink&&(n=!0,null!==a&&(n=a.isTreePathToChildren),t=n?e.toNode:e.fromNode,e=n?e.fromNode:e.toNode,null!==t&&(t.rh=!1),null===e||e.isTreeLeaf||(0===e.ab.count?(e.rh=null,null!==a&&a.undoManager.isUndoingRedoing||(e.isTreeLeaf=!0)):Og(e)))}function Og(t){if(t.rh=!1,0!==t.ab.count){var e=!0,n=t.diagram;if(null===n||!n.undoManager.isUndoingRedoing){for(null!==n&&(e=n.isTreePathToChildren),n=t.ab.iterator;n.next();){var i=n.value;if(i.isTreeLink)if(e){if(i.fromNode===t)return void(t.isTreeLeaf=!1)}else if(i.toNode===t)return void(t.isTreeLeaf=!1)}t.isTreeLeaf=!0}}}function xv(t){null===t.kc?t.kc=new xt:t.kc.clear(),t.Mm(t,function(e,n){h_(e,n)}),0===t.kc.count&&t.kc.add("",t)}function h_(t,e){var n=e.portId;null!==n&&null!==t.kc&&t.kc.add(n,e)}function wv(t,e,n){var i=e.portId;if(null!==i&&(null!==t.kc&&t.kc.remove(i),null!==(e=t.diagram)&&n)){for(n=null,t=t.findLinksConnected(i);t.next();)i=t.value,null===n&&(n=ye()),n.push(i);if(null!==n){for(t=0;t<n.length;t++)e.remove(n[t]);oe(n)}}}function Fg(t,e){return null===(e=e.lg())?0:1+Fg(t,e)}function Mv(t,e,n,i,a,u,h){if(1<i)for(var d=n?t.iq():t.Dd();d.next();){var f=d.value;f.isTreeLink&&(null===(f=f.nq(t))||f===t||e.contains(f)||(e.add(f),Mv(f,e,n,i-1,a,u,h)))}else yw(t,e,n,a,u,h)}function yw(t,e,n,i,a,u){for(var h=a===t||t.isTreeExpanded,d=n?t.iq():t.Dd();d.next();){var f=d.value;if(f.isTreeLink&&null!==(f=f.nq(t))&&f!==t){var g=e.contains(f);g||e.add(f),h&&(u&&i.Wj(f,a),f.Ch(),f.Nb(!1)),f.isTreeExpanded&&(f.wasTreeExpanded=f.isTreeExpanded,g||yw(f,e,n,i,a,u))}}t.isTreeExpanded=!1}function vw(t,e,n,i,a,u,h){for(var d=u!==t&&t.isTreeExpanded,f=n?t.iq():t.Dd();f.next();){var g=f.value;g.isTreeLink&&(d||g.rd||g.Ua(),null!==(g=g.nq(t))&&g!==t&&!e.contains(g)&&(e.add(g),d||(g.Nb(!0),g.Ch(),h&&a.Yj(g,u)),2<i||g.wasTreeExpanded))&&(g.wasTreeExpanded=!1,vw(g,e,n,i-1,a,u,h))}t.isTreeExpanded=!0}ht.className="Part",ht.LayoutNone=0,ht.LayoutAdded=1,ht.LayoutRemoved=2,ht.LayoutShown=4,ht.LayoutHidden=8,ht.LayoutNodeSized=16,ht.LayoutGroupLayout=32,ht.LayoutNodeReplaced=64,ht.LayoutStandard=127,ht.LayoutAll=16777215,Ft(At,ht),At.prototype.toString=function(){var t=this.adornedPart;return"Adornment("+this.category+")"+(null!==t?t.toString():"")},At.prototype.updateRelationshipsFromData=function(){},At.prototype.sk=function(t){var e=this.adornedObject,n=null==e?void 0:e.part;if(n instanceof X&&e instanceof wt){e=n.path,n.sk(t),t=e.geometry,e=(n=this.T.m).length;for(var i=0;i<e;i++){var a=n[i];a.isPanelMain&&a instanceof wt&&(a.ma=t)}}},At.prototype.Si=function(){var t=this.ie;return null===t||null===(t=t.part)||!fr(t)},At.prototype.Jc=function(){return!1},At.prototype.Ak=function(t,e,n,i,a,u,h){if(t===Pt&&"elements"===e){if(a instanceof yi)null===this.Ra&&(this.Ra=a);else if(a instanceof Y){var d=a.hm(function(f){return f instanceof yi});d instanceof yi&&null===this.Ra&&(this.Ra=d)}}else t===sn&&"elements"===e&&null!==this.Ra&&(i===this.Ra||i instanceof Y&&this.Ra.mg(i))&&(this.Ra=null);ht.prototype.Ak.call(this,t,e,n,i,a,u,h)},At.prototype.updateAdornments=function(){},At.prototype.fk=function(){},Dt.Object.defineProperties(At.prototype,{placeholder:{get:function(){return this.Ra}},adornedObject:{get:function(){return this.ie},set:function(t){var e=this.adornedPart,n=null;null!==t&&(n=t.part),null===e||null!==t&&e===n||e.Cf(this.category),this.ie=t,null!==n&&n.th(this.category,this)}},adornedPart:{get:function(){var t=this.ie;return null!==t?t.part:null}},containingGroup:{get:function(){return null}}}),At.className="Adornment",Ft(Q,ht),Q.prototype.cloneProtected=function(t){ht.prototype.cloneProtected.call(this,t),t.R=this.R,t.R=-17&this.R,t.to=this.to,t.uo=this.uo,t.ii=this.ii,t.Pp=this.Pp,t.Kk=this.Kk.I(),t.cp=this.cp},(D=Q.prototype).sf=function(t){ht.prototype.sf.call(this,t),t.pd(),t.Pe=this.Pe,t.kc=null},D.qA=function(t,e,n){null==e&&(e=""),null==n&&(n=""),null!==(t=pw(this,t,e,n))&&t.mm()},D.Ak=function(t,e,n,i,a,u,h){(t===Pt&&"elements"===e||t===sn&&"elements"===e)&&(this.kc=null),ht.prototype.Ak.call(this,t,e,n,i,a,u,h)},D.pd=function(t){for(var e=this.linksConnected;e.next();){var n=e.value;void 0!==t&&t.contains(n)||(an(n.fromPort),an(n.toPort),n.Ua())}},D.Si=function(){return!0},Q.prototype.getAvoidableRect=function(t){return t.set(this.actualBounds),t.Xp(this.Kk),t},Q.prototype.findVisibleNode=function(){for(var t=this;null!==t&&!t.isVisible();)t=t.containingGroup;return t},Q.prototype.isVisible=function(){if(!ht.prototype.isVisible.call(this))return!1;var t=!0,e=$u,n=this.diagram;if(null!==n){if(n.animationManager.Ys(this))return!0;t=n.isTreePathToChildren,e=n.treeCollapsePolicy}if(e===$u){if(null!==(t=this.lg())&&!t.isTreeExpanded)return!1}else if(e===jy){if(0<(t=t?this.qv():this.rv()).count&&t.all(function(i){return!i.isTreeExpanded}))return!1}else if(e===Vy&&0<(t=t?this.qv():this.rv()).count&&t.any(function(i){return!i.isTreeExpanded}))return!1;return null===(t=this.labeledLink)||t.isVisible()},Q.prototype.Nb=function(t){ht.prototype.Nb.call(this,t);for(var e=this.linksConnected;e.next();){var n=e.value;if(t&&null!==this.containingGroup){var i=n.nq(this);null===i||i.Fd(this.containingGroup)||n.Ua()}n.Nb(t)}},Q.prototype.Sx=function(){var t=new K,e=new K;return mw(this,this,t,e),e.iterator},Q.prototype.findLinksConnected=function(t){if(void 0===t&&(t=null),null===t)return this.ab.iterator;var e=new vn(this.ab),n=this;return e.predicate=function(i){return i.fromNode===n&&i.fromPortId===t||i.toNode===n&&i.toPortId===t},e},(D=Q.prototype).iq=function(t){void 0===t&&(t=null);var e=new vn(this.ab),n=this;return e.predicate=function(i){return i.fromNode===n&&(null===t||i.fromPortId===t)},e},D.Dd=function(t){void 0===t&&(t=null);var e=new vn(this.ab),n=this;return e.predicate=function(i){return i.toNode===n&&(null===t||i.toPortId===t)},e},D.pv=function(t){void 0===t&&(t=null);for(var e=null,n=null,i=this.ab.iterator;i.next();){var a=i.value;a.fromNode===this?(null===t||a.fromPortId===t)&&(a=a.toNode,null!==e?e.add(a):null!==n&&n!==a?((e=new K).add(n),e.add(a)):n=a):a.toNode!==this||null!==t&&a.toPortId!==t||(a=a.fromNode,null!==e?e.add(a):null!==n&&n!==a?((e=new K).add(n),e.add(a)):n=a)}return null!==e?e.iterator:null!==n?new Cn(n):Un},D.rv=function(t){void 0===t&&(t=null);for(var e=null,n=null,i=this.ab.iterator;i.next();){var a=i.value;a.fromNode!==this||null!==t&&a.fromPortId!==t||(a=a.toNode,null!==e?e.add(a):null!==n&&n!==a?((e=new K).add(n),e.add(a)):n=a)}return null!==e?e.iterator:null!==n?new Cn(n):Un},D.qv=function(t){void 0===t&&(t=null);for(var e=null,n=null,i=this.ab.iterator;i.next();){var a=i.value;a.toNode!==this||null!==t&&a.toPortId!==t||(a=a.fromNode,null!==e?e.add(a):null!==n&&n!==a?((e=new K).add(n),e.add(a)):n=a)}return null!==e?e.iterator:null!==n?new Cn(n):Un},D.Pz=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var i=new vn(this.ab),a=this;return i.predicate=function(u){return!((u.fromNode!==a||u.toNode!==t||null!==e&&u.fromPortId!==e||null!==n&&u.toPortId!==n)&&(u.fromNode!==t||u.toNode!==a||null!==n&&u.fromPortId!==n||null!==e&&u.toPortId!==e))},i},D.Qz=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var i=new vn(this.ab),a=this;return i.predicate=function(u){return!(u.fromNode!==a||u.toNode!==t||null!==e&&u.fromPortId!==e||null!==n&&u.toPortId!==n)},i},Q.prototype.updateRelationshipsFromData=function(){var t=this.diagram;null!==t&&t.partManager.updateRelationshipsFromData(this)},(D=Q.prototype).pq=function(t){ht.prototype.pq.call(this,t),t||(Og(this),null!==(t=this.ql)&&xw(t,this))},D.qq=function(t){ht.prototype.qq.call(this,t),t||null!==(t=this.ql)&&null!==t.ld&&(t.ld.remove(this),t.s())},D.fk=function(){if(0<this.ab.count){var t=this.diagram;if(null!==t)for(var e=null===t.commandHandler||t.commandHandler.deletesConnectedLinks,n=this.ab.copy().iterator;n.next();){var i=n.value;e?t.remove(i):(i.fromNode===this&&(i.fromNode=null),i.toNode===this&&(i.toNode=null))}}this.labeledLink=null,ht.prototype.fk.call(this)},D.Es=function(t){if(null===this.kc){if(""===t&&!1===this.Ge)return this;xv(this)}var e=this.kc.H(t);return null!==e||""!==t&&null!==(e=this.kc.H(""))?e:this},D.sA=function(t){if(null===t||t===this)return!1;var e=!0,n=this.diagram;if(null!==n&&(e=n.isTreePathToChildren),n=this,e)for(;n!==t;){e=null;for(var i=n.ab.iterator;i.next();){var a=i.value;if(a.isTreeLink&&(e=a.fromNode)!==n&&e!==this)break}if(e===this||null===e||e===n)return!1;n=e}else for(;n!==t;){for(e=null,i=n.ab.iterator;i.next()&&(!(a=i.value).isTreeLink||(e=a.toNode)===n||e===this););if(e===this||null===e||e===n)return!1;n=e}return!0},D.bA=function(){var t=!0,e=this.diagram;if(null!==e&&(t=e.isTreePathToChildren),e=this,t)for(;;){t=null;for(var n=e.ab.iterator;n.next();){var i=n.value;if(i.isTreeLink&&(t=i.fromNode)!==e&&t!==this)break}if(t===this)return this;if(null===t||t===e)return e;e=t}else for(;;){for(t=null,n=e.ab.iterator;n.next()&&(!(i=n.value).isTreeLink||(t=i.toNode)===e||t===this););if(t===this)return this;if(null===t||t===e)return e;e=t}},D.Mz=function(t){if(null===t)return null;if(this===t)return this;for(var e=this;null!==e;)jc(e,!0),e=e.lg();var n=null;for(e=t;null!==e;){if(0!=(1048576&e.D)){n=e;break}e=e.lg()}for(e=this;null!==e;)jc(e,!1),e=e.lg();return n},D.Ji=function(){var t=!0,e=this.diagram;if(null!==e&&(t=e.isTreePathToChildren),e=this.ab.iterator,t){for(;e.next();)if((t=e.value).isTreeLink&&t.fromNode!==this)return t}else for(;e.next();)if((t=e.value).isTreeLink&&t.toNode!==this)return t;return null},D.lg=function(){var t=this.rh;if(null===t)return null;if(t instanceof Q)return t;var e=!0;if(null!==(t=this.diagram)&&(e=t.isTreePathToChildren),t=this.ab.iterator,e){for(;t.next();)if((e=t.value).isTreeLink&&(e=e.fromNode)!==this)return this.rh=e}else for(;t.next();)if((e=t.value).isTreeLink&&(e=e.toNode)!==this)return this.rh=e;return this.rh=null},D.$z=function(){var e=new K;return function t(n,i){i.add(n);var a=n.Ji();null!==a&&(i.add(a),null!==(n=n.lg())&&t(n,i))}(this,e),e},D.Zz=function(){return Fg(this,this)},D.kq=function(){var t=!0,e=this.diagram;null!==e&&(t=e.isTreePathToChildren),e=new vn(this.ab);var n=this;return e.predicate=t?function(i){return!(!i.isTreeLink||i.fromNode!==n)}:function(i){return!(!i.isTreeLink||i.toNode!==n)},e},D.tv=function(){var t=!0,e=this.diagram;null!==e&&(t=e.isTreePathToChildren);var n=e=null,i=this.ab.iterator;if(t)for(;i.next();)(t=i.value).isTreeLink&&t.fromNode===this&&(t=t.toNode,null!==e?e.add(t):null!==n&&n!==t?((e=new et).add(n),e.add(t)):n=t);else for(;i.next();)(t=i.value).isTreeLink&&t.toNode===this&&(t=t.fromNode,null!==e?e.add(t):null!==n&&n!==t?((e=new et).add(n),e.add(t)):n=t);return null!==e?e.iterator:null!==n?new Cn(n):Un},D.aA=function(t){void 0===t&&(t=1/0);var e=new K;return ou(e,this,!1,t,!0),e},Q.prototype.collapseTree=function(t){void 0===t&&(t=1),1>t&&(t=1);var e=this.diagram;if(null!==e&&!e.He){e.He=!0;var n=new K;n.add(this),Mv(this,n,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===$u),e.He=!1}},Q.prototype.expandTree=function(t){void 0===t&&(t=2),2>t&&(t=2);var e=this.diagram;if(null!==e&&!e.He){e.He=!0;var n=new K;n.add(this),vw(this,n,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===$u),e.He=!1}},Dt.Object.defineProperties(Q.prototype,{portSpreading:{get:function(){return this.cp},set:function(t){var e=this.cp;e!==t&&(this.cp=t,this.g("portSpreading",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.pd())}},avoidable:{get:function(){return 0!=(8&this.R)},set:function(t){var e=0!=(8&this.R);if(e!==t){this.R^=8;var n=this.diagram;null!==n&&zl(n,this),this.g("avoidable",e,t)}}},avoidableMargin:{get:function(){return this.Kk},set:function(t){"number"==typeof t&&(t=new Lt(t));var e=this.Kk;if(!e.A(t)){this.Kk=t=t.I();var n=this.diagram;null!==n&&zl(n,this),this.g("avoidableMargin",e,t)}}},linksConnected:{get:function(){return this.ab.iterator}},linkConnected:{get:function(){return this.to},set:function(t){var e=this.to;e!==t&&(this.to=t,this.g("linkConnected",e,t))}},linkDisconnected:{get:function(){return this.uo},set:function(t){var e=this.uo;e!==t&&(this.uo=t,this.g("linkDisconnected",e,t))}},linkValidation:{get:function(){return this.ii},set:function(t){var e=this.ii;e!==t&&(this.ii=t,this.g("linkValidation",e,t))}},isLinkLabel:{get:function(){return null!==this.ql}},labeledLink:{get:function(){return this.ql},set:function(t){var e=this.ql;if(e!==t){var n=this.diagram,i=this.data;if(null!==e){if(null!==e.ld&&(e.ld.remove(this),e.s()),null!==n&&null!==i&&!n.undoManager.isUndoingRedoing){var a=e.data,u=n.model;if(null!==a&&u.Qi()){var h=u.pa(i);void 0!==h&&u.wy(a,h)}}this.containingGroup=null}this.ql=t,null!==t&&(xw(t,this),null===n||null===i||n.undoManager.isUndoingRedoing||(n=n.model,null!==(a=t.data)&&n.Qi()&&void 0!==(i=n.pa(i))&&n.av(a,i)),this.containingGroup=t.containingGroup),xc(this),this.g("labeledLink",e,t)}}},port:{get:function(){return this.Es("")}},ports:{get:function(){return null===this.kc&&xv(this),this.kc.iteratorValues}},isTreeExpanded:{get:function(){return 0!=(1&this.R)},set:function(t){var e=0!=(1&this.R);if(e!==t){this.R^=1;var n=this.diagram;if(this.g("isTreeExpanded",e,t),null!==(e=this.treeExpandedChanged)){var i=!0;null!==n&&(i=n.Z,n.Z=!0),e(this),null!==n&&(n.Z=i)}null!==n&&n.undoManager.isUndoingRedoing?this.Nb(t):t?this.expandTree():this.collapseTree()}}},wasTreeExpanded:{get:function(){return 0!=(2&this.R)},set:function(t){var e=0!=(2&this.R);e!==t&&(this.R^=2,this.g("wasTreeExpanded",e,t))}},treeExpandedChanged:{get:function(){return this.Pp},set:function(t){var e=this.Pp;e!==t&&(this.Pp=t,this.g("treeExpandedChanged",e,t))}},isTreeLeaf:{get:function(){return 0!=(4&this.R)},set:function(t){var e=0!=(4&this.R);e!==t&&(this.R^=4,this.g("isTreeLeaf",e,t))}}}),Q.prototype.expandTree=Q.prototype.expandTree,Q.prototype.collapseTree=Q.prototype.collapseTree,Q.prototype.findTreeParts=Q.prototype.aA,Q.prototype.findTreeChildrenNodes=Q.prototype.tv,Q.prototype.findTreeChildrenLinks=Q.prototype.kq,Q.prototype.findTreeLevel=Q.prototype.Zz,Q.prototype.findTreeParentChain=Q.prototype.$z,Q.prototype.findTreeParentNode=Q.prototype.lg,Q.prototype.findTreeParentLink=Q.prototype.Ji,Q.prototype.findCommonTreeParent=Q.prototype.Mz,Q.prototype.findTreeRoot=Q.prototype.bA,Q.prototype.isInTreeOf=Q.prototype.sA,Q.prototype.findPort=Q.prototype.Es,Q.prototype.findLinksTo=Q.prototype.Qz,Q.prototype.findLinksBetween=Q.prototype.Pz,Q.prototype.findNodesInto=Q.prototype.qv,Q.prototype.findNodesOutOf=Q.prototype.rv,Q.prototype.findNodesConnected=Q.prototype.pv,Q.prototype.findLinksInto=Q.prototype.Dd,Q.prototype.findLinksOutOf=Q.prototype.iq,Q.prototype.findExternalTreeLinksConnected=Q.prototype.Sx,Q.prototype.invalidateConnectedLinks=Q.prototype.pd,Q.prototype.invalidateLinkBundle=Q.prototype.qA;var c_=new J(Q,"SpreadingNone",10),Lg=new J(Q,"SpreadingEvenly",11),_v=new J(Q,"SpreadingPacked",12);function vt(t,e){void 0===t||t instanceof tn||"string"==typeof t?Q.call(this,t):(Q.call(this),t&&(e=t)),this.R|=4608,this.Eo=new K,this.zl=new K,this.Ra=this.Ip=this.ki=this.Fo=this.Do=this.$a=null,this.Ac=new Rt,this.Ac.group=this,this.mr=null,e&&Object.assign(this,e)}function Cv(t,e){if(t.Eo.add(e)){e instanceof vt&&t.zl.add(e);var n=t.memberAdded;if(null!==n){var i=!0,a=t.diagram;null!==a&&(i=a.Z,a.Z=!0),n(t,e),null!==a&&(a.Z=i)}t.isVisible()&&t.isSubGraphExpanded||e.Nb(!1)}e instanceof X&&!t.computesBoundsIncludingLinks||(null===(e=t.Ra)&&(e=t),e.s())}function Dv(t,e){if(t.Eo.remove(e)){e instanceof vt&&t.zl.remove(e);var n=t.memberRemoved;if(null!==n){var i=!0,a=t.diagram;null!==a&&(i=a.Z,a.Z=!0),n(t,e),null!==a&&(a.Z=i)}t.isVisible()&&t.isSubGraphExpanded||e.Nb(!0)}e instanceof X&&!t.computesBoundsIncludingLinks||(null===(e=t.Ra)&&(e=t),e.s())}function Sv(t,e,n,i){for(var a=t.memberParts;a.next();){var u=a.value;if(u.Nb(!1),u instanceof vt&&u.isSubGraphExpanded&&(u.wasSubGraphExpanded=u.isSubGraphExpanded,Sv(u,e,n,i)),u instanceof Q)u.pd(e),n.Wj(u,i);else if(u instanceof X)for(u=u.labelNodes;u.next();)u.value.pd(e)}t.isSubGraphExpanded=!1}function Ev(t,e,n,i){for(var a=t.memberParts;a.next();){var u=a.value;if(u.Nb(!0),u instanceof vt&&u.wasSubGraphExpanded&&(u.wasSubGraphExpanded=!1,Ev(u,e,n,i)),u instanceof Q)u.pd(e),n.Yj(u,i);else if(u instanceof X)for(u=u.labelNodes;u.next();)u.value.pd(e)}t.isSubGraphExpanded=!0}function yi(t){ut.call(this),this.mb=Kh,this.rp=new B(NaN,NaN,NaN,NaN),t&&Object.assign(this,t)}function X(t){ht.call(this,Y.Link),this.Ia=8,this.Se=null,this.Te="",this.kf=this.On=null,this.lf="",this.Op=null,this.Ek=pn,this.rn=0,this.tn=pn,this.un=NaN,this.Oj=Hg,this.Dp=.5,this.ld=null,this.Bb=(new et).freeze(),this.cf=this.Zg=null,this.Gl=new B,this.ma=new q,this.C=this.o=this.If=this.Mf=null,this.Ru=new N,this.qr=this.px=this.ox=null,this.Rt=NaN,this.P=null,this.j=[],t&&Object.assign(this,t)}function su(t){var i,e=t.fromNode,n=t.toNode;if(i=null!==e?null!==n?e.Rx(n):e.containingGroup:null!==n?n.containingGroup:null,(n=t.Qh)!==(e=i)){null!==n&&Dv(n,t),t.Qh=e,null!==e&&Cv(e,t);var a=t.containingGroupChanged;if(null!==a){var u=!0,h=t.diagram;null!==h&&(u=h.Z,h.Z=!0),a(t,n,e),null!==h&&(h.Z=u)}!t.rd||t.ox!==n&&t.px!==n||t.Ua()}if(t.isLabeledLink)for(t=t.labelNodes;t.next();)t.value.containingGroup=i}function xw(t,e){null===t.ld&&(t.ld=new K),t.ld.add(e),t.s()}function Ta(t,e,n){if(0!==e||0!==n)if(0===t.pointsCount)t.defaultFromPoint&&t.defaultFromPoint.offset(e,n),t.defaultToPoint&&t.defaultToPoint.offset(e,n);else{for(var i=t.rd,a=new et,u=t.Bb.iterator;u.next();){var h=u.value;a.add(new N(h.x+e,h.y+n).freeze())}a.freeze(),u=t.Bb,t.Bb=a,h=t.diagram,isNaN(e)||isNaN(n)||null!==h&&h.animationManager.rb?t.s():(t.ae.h(t.ae.x+e,t.ae.y+n),t.ka.h(t.ka.x+e,t.ka.y+n),xc(t)),i?Tv(t):(t.defaultFromPoint&&(t.defaultFromPoint=t.i(0)),t.defaultToPoint&&(t.defaultToPoint=t.i(t.pointsCount-1))),null!==h&&h.animationManager.rb&&(e=h.animationManager,t.cf=a,e.Il.add(t)),t.g("points",u,a)}}function Tv(t){0===t.Bb.count?t.rd=!1:(t.rd=!0,t.qr=null,t.Rt=NaN,t.defaultFromPoint=t.i(0),t.defaultToPoint=t.i(t.pointsCount-1),ww(t,!1))}function Rg(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?(e.x=e.x>=t.x?t.x+9e9:t.x-9e9,e.y=t.y):(e.y=e.y>=t.y?t.y+9e9:t.y-9e9,e.x=t.x),e}function jg(t,e){var n=e.bp;return null===n&&((n=new lu).port=e,n.node=e.part,e.bp=n),Tw(n,t)}function Vc(t){return t===An||.5===t.x&&.5===t.y}function Vg(t){return.5===t.x&&.5===t.y?t:Wt}function yf(t){if(null===t.diagram||!t.isAvoiding||!Xx(t.diagram))return!1;var e=t.points.m,n=e.length;if(4>n)return!1;t=Oy(t.diagram,!0,t.containingGroup,null);for(var i=1;i<n-2;i++){var a=e[i],u=e[i+1];if(!t.qk(Math.min(a.x,u.x),Math.min(a.y,u.y),Math.abs(a.x-u.x),Math.abs(a.y-u.y)))return!0}return!1}function kv(t,e,n,i,a,u,h){var d=e.bq,f=e.aq,g=ls(e,n,i),m=n,y=i;for(0===a?m+=d:90===a?y+=f:180===a?m-=d:y-=f,a!==h&&g>Aa&&ls(e,m,y)!==g-1&&(ls(e,n-d,i)===g-1?(a=180,m=n-d,y=i):ls(e,n+d,i)===g-1?(a=0,m=n+d,y=i):ls(e,n,i-f)===g-1?(a=270,m=n,y=i-f):ls(e,n,i+f)===g-1&&(a=90,m=n,y=i+f));g>Aa&&ls(e,m,y)===g-1;)n=m,i=y,0===a?m+=d:90===a?y+=f:180===a?m-=d:y-=f,--g;u?g>Aa&&(180===a||0===a?n=Math.floor(n/d)*d+d/2:(90===a||270===a)&&(i=Math.floor(i/f)*f+f/2)):(n=Math.floor(n/d)*d+d/2,i=Math.floor(i/f)*f+f/2),g>Aa&&(u=a,h=n,m=i,0===a?(u=90,m+=f):90===a?(u=180,h-=d):180===a?(u=270,m-=f):270===a&&(u=0,h+=d),ls(e,h,m)===g-1?kv(t,e,h,m,u,!1,u):(h=n,m=i,0===a?(u=270,m-=f):90===a?(u=0,h+=d):180===a?(u=90,m+=f):270===a&&(u=180,h-=d),ls(e,h,m)===g-1&&kv(t,e,h,m,u,!1,u))),t.pf(n,i)}function Bg(t,e,n,i){return t=n-t,isNaN(t)||t===1/0||t===-1/0?NaN:(0>t&&(t=-t),e=i-e,isNaN(e)||e===1/0||e===-1/0?NaN:(0>e&&(e=-e),R.aa(t,0)?e:R.aa(e,0)?t:Math.sqrt(t*t+e*e)))}function ka(t,e,n,i){var a=t.pointsCount;if(2>a)return e;if(n){var u=t.i(1);if(0===(i=Bg(e.x,e.y,n=u.x-i.x,u=u.y-i.y)))return e;a=2===a?.5*i:i,(t=t.computeShortLength(!0))>a&&(t=a),a=t*(u-e.y)/i,e.x+=t*(n-e.x)/i,e.y+=a}else{if(u=t.i(a-2),0===(i=Bg(e.x,e.y,n=u.x-i.x,u=u.y-i.y)))return e;a=2===a?.5*i:i,(t=t.computeShortLength(!1))>a&&(t=a),a=t*(e.y-u)/i,e.x-=t*(e.x-n)/i,e.y-=a}return e}function vf(t,e,n,i){for(var a=t.pointsCount,u=e;R.aa(e.x,u.x)&&R.aa(e.y,u.y);){if(n>=a)return a-1;u=t.i(n++)}if(!R.aa(e.x,u.x)&&!R.aa(e.y,u.y))return n-1;for(var h=u;R.aa(e.x,u.x)&&R.aa(u.x,h.x)&&(!i||(e.y>=u.y?u.y>=h.y:u.y<=h.y))||R.aa(e.y,u.y)&&R.aa(u.y,h.y)&&(!i||(e.x>=u.x?u.x>=h.x:u.x<=h.x));){if(n>=a)return a-1;h=t.i(n++)}return n-2}function oh(t,e,n,i,a,u,h){if(!h&&ll(t)){var d=(h=t.computeJumpLength())/2,f=[],g=0;if(t.isVisible()&&(g=function Nv(t,e,n,i){var a=t.diagram;if(null===a||e.A(n))return 0;for(a=a.layers;a.next();){var u=a.value;if(null!==u&&u.visible)for(var h=(u=u.Fa.m).length,d=0;d<h;d++){var f=u[d];if(f instanceof X){if(f===t)return 0<i.length&&i.sort(function(m,y){return m-y}),i.length;if(f.isVisible()&&ll(f)){var g=f.routeBounds;g.u()&&t.routeBounds.Ic(g)&&!t.usesSamePort(f)&&null!==(g=f.path)&&g.Bf()&&Pv(e,n,i,f)}}}}return 0<i.length&&i.sort(function(m,y){return m-y}),i.length}(t,a,u,f)),0<g)if(R.w(a.y,u.y))if(a.x<u.x)for(var m=0;m<g;){var y=Math.max(a.x,Math.min(f[m++]-d,u.x-h));e.lineTo(y+n,u.y+i);for(var x=y+n,_=Math.min(y+h,u.x);m<g&&(y=f[m])<_+h;)m++,_=Math.min(y+d,u.x);y=u.y-h+i,_+=n;var M=u.y+i;t.curve===Na?iu(e,_,M,!1):Vs(e,x,y,_,y,_,M)}else for(--g;0<=g;){for(m=Math.min(a.x,Math.max(f[g--]+d,u.x+h)),e.lineTo(m+n,u.y+i),x=m+n,y=Math.max(m-h,u.x);0<=g&&(m=f[g])>y-h;)g--,y=Math.max(m-d,u.x);m=u.y-h+i,y+=n,_=u.y+i,t.curve===Na?iu(e,y,_,!1):Vs(e,x,m,y,m,y,_)}else if(R.w(a.x,u.x))if(a.y<u.y)for(m=0;m<g;){for(y=Math.max(a.y,Math.min(f[m++]-d,u.y-h)),e.lineTo(u.x+n,y+i),x=y+i,y=Math.min(y+h,u.y);m<g&&(_=f[m])<y+h;)m++,y=Math.min(_+d,u.y);_=u.x-h+n,M=u.x+n,y+=i,t.curve===Na?iu(e,M,y,!1):Vs(e,_,x,_,y,M,y)}else for(--g;0<=g;){for(m=Math.min(a.y,Math.max(f[g--]+d,u.y+h)),e.lineTo(u.x+n,m+i),x=m+i,m=Math.max(m-h,u.y);0<=g&&(y=f[g])>m-h;)g--,m=Math.max(y-d,u.y);y=u.x-h+n,_=u.x+n,m+=i,t.curve===Na?iu(e,_,m,!1):Vs(e,y,x,y,m,_,m)}}e.lineTo(u.x+n,u.y+i)}function Pv(t,e,n,i){for(var a=R.w(t.y,e.y),u=i.pointsCount,h=i.i(0),d=N.alloc(),f=1;f<u;f++){var g=i.i(f);if(f<u-1){var m=i.i(f+1);if(h.y===g.y&&g.y===m.y){if(g.x>h.x&&m.x>=g.x||g.x<h.x&&m.x<=g.x)continue}else if(h.x===g.x&&g.x===m.x&&(g.y>h.y&&m.y>=g.y||g.y<h.y&&m.y<=g.y))continue}t:{var y=t.y,x=e.x,_=e.y,M=h.x;h=h.y;var S=g.x,T=g.y;if(R.w(m=t.x,x)){if(!R.w(y,_)&&R.w(h,T)&&Math.min(y,_)<h&&Math.max(y,_)>h&&Math.min(M,S)<m&&Math.max(M,S)>m&&!R.w(M,S)){d.x=m,d.y=h,m=!0;break t}}else if(R.w(y,_)&&R.w(M,S)&&Math.min(m,x)<M&&Math.max(m,x)>M&&Math.min(h,T)<y&&Math.max(h,T)>y&&!R.w(h,T)){d.x=M,d.y=y,m=!0;break t}d.x=0,d.y=0,m=!1}m&&n.push(a?d.x:d.y),h=g}N.free(d)}function ll(t){return(t=t.curve)===Bc||t===Na}function ww(t,e){(e||ll(t))&&(null===(e=t.diagram)||e.animationManager.isTicking||e.Wh.contains(t)||0===t.Gl.width&&0===t.Gl.height||e.Wh.add(t,t.Gl.copy()))}function d_(t,e,n){if(null!==e&&e.Lm&&e.rd&&ll(e)){var i=e.routeBounds;i.u()&&(t.routeBounds.Ic(i)||n.Ic(i))&&(t.usesSamePort(e)||e.cc(!1))}}function sh(t){var e=t.Se;if(null!==e){var n=t.kf;if(null!==n&&isNaN(t.curviness)){for(var i=t.Te,a=t.lf,u=t=null,h=e.ab.m,d=h.length,f=0;f<d;f++){var g=h[f];(g.Se===e&&g.Te===i&&g.kf===n&&g.lf===a||g.Se===n&&g.Te===a&&g.kf===e&&g.lf===i)&&(null===u?u=g:(null===t&&(t=[]).push(u),t.push(g)))}if(null!==t){for(null===(u=pw(e,n,i,a))&&(yv(e,u=new Df(e,i,n,a)),yv(n,u)),u.links=t,e=0;e<t.length;e++)t[e].If=u;u.mm()}}}}function Ug(t){var e=t.If;null!==e&&isNaN(t.curviness)&&(t.If=null,0<=(t=e.links.indexOf(t))&&(kl(e.links,t),e.mm()))}Q.className="Node",Q.SpreadingNone=c_,Q.SpreadingEvenly=Lg,Q.SpreadingPacked=_v,Ft(vt,Q),vt.prototype.cloneProtected=function(t){Q.prototype.cloneProtected.call(this,t),this.R=-32769&this.R,null!==this.$a&&(t.$a=this.$a.copy()),t.Do=this.Do,t.Fo=this.Fo,t.ki=this.ki,t.Ip=this.Ip;var e=t.hm(function(n){return n instanceof yi});t.Ra=e instanceof yi?e:null,null!==this.Ac?(t.Ac=this.Ac.copy(),t.Ac.group=t):(null!==t.Ac&&(t.Ac.group=null),t.Ac=null)},(D=vt.prototype).sf=function(t){Q.prototype.sf.call(this,t);var e=t.jk();for(t=t.memberParts;t.next();){var n=t.value;if(n.s(),n.B(8),n.$j(),n instanceof Q)n.pd(e);else if(n instanceof X)for(n=n.labelNodes;n.next();)n.value.pd(e)}},D.Ak=function(t,e,n,i,a,u,h){if(t===Pt&&"elements"===e){if(a instanceof yi)null===this.Ra?this.Ra=a:this.Ra!==a&&z("Cannot insert a second Placeholder into the visual tree of a Group.");else if(a instanceof Y){var d=a.hm(function(f){return f instanceof yi});d instanceof yi&&(null===this.Ra?this.Ra=d:this.Ra!==d&&z("Cannot insert a second Placeholder into the visual tree of a Group."))}}else t===sn&&"elements"===e&&null!==this.Ra&&(i===this.Ra||i instanceof Y&&this.Ra.mg(i))&&(this.Ra=null);Q.prototype.Ak.call(this,t,e,n,i,a,u,h)},D.rm=function(t,e){Q.prototype.rm.call(this,t,e),this.isClipping&&this.type!==Y.Spot&&this.isSubGraphExpanded&&((t=this.resizeObject)instanceof Y&&(t=t.nb()),null===this.$a&&(this.$a=new B),t.Mi(this.$a),t instanceof wt&&this.$a.Gc(-t.strokeWidth,-t.strokeWidth))},D.vh=function(t,e,n,i){this.Ze=this.Ra,Q.prototype.vh.call(this,t,e,n,i)},D.Sa=function(){var t=this;t.isSubGraphExpanded&&this.memberParts.each(function(e){!t.computesBoundsIncludingLinks&&e instanceof X||e.Sa()}),Q.prototype.Sa.call(this)},D.Si=function(){if(!Q.prototype.Si.call(this))return!1;for(var t=this.memberParts;t.next();){var e=t.value;if(e instanceof Q){if(e.isVisible()&&fr(e))return!1}else if(e instanceof X&&e.isVisible()&&fr(e)&&e.fromNode!==this&&e.toNode!==this)return!1}return!0},D.fk=function(){if(0<this.Eo.count){var t=this.diagram;if(null!==t)for(var e=this.Eo.copy().iterator;e.next();)t.remove(e.value)}Q.prototype.fk.call(this)},vt.prototype.canAddMembers=function(t){var e=this.diagram;if(null===e)return!1;for(e=e.commandHandler,t=tw(t).iterator;t.next();)if(!e.isValidMember(this,t.value))return!1;return!0},vt.prototype.addMembers=function(t,e){var n=this.diagram;if(null===n)return!1;n=n.commandHandler;var i=!0;for(t=tw(t).iterator;t.next();){var a=t.value;!e||n.isValidMember(this,a)?a.containingGroup=this:i=!1}return i},vt.prototype.canUngroup=function(){if(!this.ungroupable)return!1;var t=this.layer;return!(null===t||!t.allowUngroup||null!==(t=t.diagram)&&!t.allowUngroup)},(D=vt.prototype).pd=function(t){var e=0!=(65536&this.R);if(Q.prototype.pd.call(this,t),!e)for(0==(65536&this.R)&&(this.R=65536^this.R),e=this.ov();e.next();){var n=e.value;if(void 0===t||!t.contains(n)){var i=n.fromNode;(null!==i&&i!==this&&i.Fd(this)&&!i.isVisible()||null!==(i=n.toNode)&&i!==this&&i.Fd(this)&&!i.isVisible())&&(an(n.fromPort),an(n.toPort),n.Ua())}}},D.ov=function(){var t=null!==this.diagram&&this.diagram.tx;if(t&&null!==this.mr)return this.mr.iterator;var e=this.jk();e.add(this);for(var n=new K,i=e.iterator;i.next();){var a=i.value;if(a instanceof Q)for(a=a.linksConnected;a.next();){var u=a.value;e.contains(u)||n.add(u)}}return t&&(this.mr=n),n.iterator},D.Oz=function(){var t=this.jk();t.add(this);for(var e=new K,n=t.iterator;n.next();){var i=n.value;if(i instanceof Q)for(i=i.linksConnected;i.next();){var a=i.value,u=a.fromNode;null===u||t.contains(u)&&u!==this||e.add(u),null===(a=a.toNode)||t.contains(a)&&a!==this||e.add(a)}}return e.iterator},D.Nz=function(){var e=new K;return function t(n,i){null!==n&&(i.add(n),t(n.containingGroup,i))}(this,e),e},D.jk=function(){var t=new K;return ou(t,this,!0,0,!0),t.remove(this),t},D.Nb=function(t){Q.prototype.Nb.call(this,t);for(var e=this.memberParts;e.next();)e.value.Nb(t)},vt.prototype.collapseSubGraph=function(){var t=this.diagram;null===t||t.He||(t.He=!0,Sv(this,this.jk(),t,this),t.He=!1)},vt.prototype.expandSubGraph=function(){var t=this.diagram;null===t||t.He||(t.He=!0,Ev(this,this.jk(),t,this),t.He=!1)},vt.prototype.move=function(t,e){void 0===e&&(e=!1);var n=e?this.location:this.position,i=n.x;n=n.y;var a=t.x,u=t.y;if(!(i===a||isNaN(i)&&isNaN(a))||!(n===u||isNaN(n)&&isNaN(u))){for(i=a-(isNaN(i)?0:i),n=u-(isNaN(n)?0:n),u=N.alloc(),Q.prototype.move.call(this,t,e),t=new K,e=this.jk().iterator;e.next();)(a=e.value)instanceof X&&(a.suspendsRouting&&t.add(a),a.rd||a.fromNode!==this&&a.toNode!==this)&&(a.suspendsRouting=!0);for(e.reset();e.next();)if(!((a=e.value).Dh()||a instanceof Q&&a.isLinkLabel)){var h=a.position,d=a.location;h.u()?(u.x=h.x+i,u.y=h.y+n,a.position=u):d.u()&&(u.x=d.x+i,u.y=d.y+n,a.location=u)}for(e.reset();e.next();)(a=e.value)instanceof X&&(a.suspendsRouting=t.contains(a),a.rd||a.fromNode!==this&&a.toNode!==this)&&(u.x=(h=a.position).x+i,u.y=h.y+n,u.u()?a.move(u):a.Ua(),yf(a)&&a.Ua());N.free(u)}},Dt.Object.defineProperties(vt.prototype,{placeholder:{get:function(){return this.Ra}},computesBoundsAfterDrag:{get:function(){return 0!=(2048&this.R)},set:function(t){var e=0!=(2048&this.R);e!==t&&(this.R^=2048,this.g("computesBoundsAfterDrag",e,t))}},computesBoundsIncludingLinks:{get:function(){return 0!=(4096&this.R)},set:function(t){var e=0!=(4096&this.R);e!==t&&(this.R^=4096,this.g("computesBoundsIncludingLinks",e,t))}},computesBoundsIncludingLocation:{get:function(){return 0!=(8192&this.R)},set:function(t){var e=0!=(8192&this.R);e!==t&&(this.R^=8192,this.g("computesBoundsIncludingLocation",e,t))}},handlesDragDropForMembers:{get:function(){return 0!=(16384&this.R)},set:function(t){var e=0!=(16384&this.R);e!==t&&(this.R^=16384,this.g("handlesDragDropForMembers",e,t))}},memberParts:{get:function(){return this.Eo.iterator}},layout:{get:function(){return this.Ac},set:function(t){var e=this.Ac;if(e!==t){null!==e&&(e.diagram=null,e.group=null),this.Ac=t;var n=this.diagram;null!==t&&(t.diagram=n,t.group=this),null!==n&&(n.Nh=!0),this.g("layout",e,t),null!==n&&n.Fb()}}},memberAdded:{get:function(){return this.Do},set:function(t){var e=this.Do;e!==t&&(this.Do=t,this.g("memberAdded",e,t))}},memberRemoved:{get:function(){return this.Fo},set:function(t){var e=this.Fo;e!==t&&(this.Fo=t,this.g("memberRemoved",e,t))}},memberValidation:{get:function(){return this.ki},set:function(t){var e=this.ki;e!==t&&(this.ki=t,this.g("memberValidation",e,t))}},ungroupable:{get:function(){return 0!=(256&this.R)},set:function(t){var e=0!=(256&this.R);e!==t&&(this.R^=256,this.g("ungroupable",e,t))}},isSubGraphExpanded:{get:function(){return 0!=(512&this.R)},set:function(t){var e=0!=(512&this.R);if(e!==t){this.R^=512;var n=this.diagram;if(this.g("isSubGraphExpanded",e,t),null!==(e=this.subGraphExpandedChanged)){var i=!0;null!==n&&(i=n.Z,n.Z=!0),e(this),null!==n&&(n.Z=i)}null!==n&&n.undoManager.isUndoingRedoing?(null!==this.Ra&&this.Ra.s(),this.memberParts.each(function(a){a.updateAdornments()})):t?this.expandSubGraph():this.collapseSubGraph()}}},wasSubGraphExpanded:{get:function(){return 0!=(1024&this.R)},set:function(t){var e=0!=(1024&this.R);e!==t&&(this.R^=1024,this.g("wasSubGraphExpanded",e,t))}},subGraphExpandedChanged:{get:function(){return this.Ip},set:function(t){var e=this.Ip;e!==t&&(this.Ip=t,this.g("subGraphExpandedChanged",e,t))}},Fh:{get:function(){return 0!=(32768&this.R)},set:function(t){0!=(32768&this.R)!==t&&(this.R^=32768)}}}),vt.prototype.expandSubGraph=vt.prototype.expandSubGraph,vt.prototype.collapseSubGraph=vt.prototype.collapseSubGraph,vt.prototype.findSubGraphParts=vt.prototype.jk,vt.prototype.findContainingGroupChain=vt.prototype.Nz,vt.prototype.findExternalNodesConnected=vt.prototype.Oz,vt.prototype.findExternalLinksConnected=vt.prototype.ov,vt.prototype.ensureBounds=vt.prototype.Sa,vt.className="Group",Ft(yi,ut),yi.prototype.cloneProtected=function(t){ut.prototype.cloneProtected.call(this,t),t.mb=this.mb.I(),t.rp=this.rp.copy()},yi.prototype.xh=function(t){if(null===this.background&&null===this.areaBackground)return!1;var e=this.naturalBounds;return Wi(0,0,e.width,e.height,t.x,t.y)},yi.prototype.qm=function(){var t=this.part;if(null!==t&&(t instanceof vt||t instanceof At)||z("Placeholder is not inside a Group or Adornment."),t instanceof vt){var e=this.computeBorder(this.rp),n=this.minSize,i=this.qc;for(_r(i,(isFinite(n.width)?Math.max(n.width,e.width):e.width)||0,(isFinite(n.height)?Math.max(n.height,e.height):e.height)||0),this.ue(0,0,i.width,i.height),i=t.memberParts,n=!1;i.next();)if(i.value.isVisible()){n=!0;break}i=t.diagram,!n||null===i||i.animationManager.Cv(t)||isNaN(e.x)||isNaN(e.y)||((n=N.alloc()).Ui(e,t.locationSpot),n.A(t.location)||(t.location=n),N.free(n))}else{e=this.qc,i=(n=this.mb).left+n.right;var a=n.top+n.bottom,u=t.adornedObject;t.angle=u.Li();var h=0;u instanceof wt&&(h=u.strokeWidth);var d=u.wf(),f=u.naturalBounds,g=(f.width+h)*d;h=(f.height+h)*d,t.type!==Y.Link&&(d=u.da("Selection"===t.category?zn:t.locationSpot,N.alloc()),t.location=d,N.free(d)),isNaN(g)||isNaN(h)?(t=u.da(zn,N.alloc()),(g=B.allocAt(t.x,t.y,0,0)).Le(u.da(ks,t)),g.Le(u.da(Rr,t)),g.Le(u.da(Zh,t)),_r(e,g.width+i||0,g.height+a||0),this.ue(-n.left,-n.top,e.width,e.height),N.free(t),B.free(g)):(_r(e,g+i||0,h+a||0),this.ue(-n.left,-n.top,e.width,e.height))}},yi.prototype.vh=function(t,e,n,i){this.actualBounds.h(t,e,n,i)},yi.prototype.computeBorder=function(t){var e=this.part,n=e.diagram;if(null!==n&&e instanceof vt&&!e.layer.isTemporary&&e.computesBoundsAfterDrag&&this.rp.u()){var i=n.toolManager.findTool("Dragging");if(i===n.currentTool&&null!==(n=i.computeBorder(e,this.rp,t)))return n}n=B.alloc(),i=this.computeMemberBounds(n);var a=this.mb;return e instanceof vt&&!e.isSubGraphExpanded?t.h(i.x-a.left,i.y-a.top,0,0):t.h(i.x-a.left,i.y-a.top,Math.max(i.width+a.left+a.right,0),Math.max(i.height+a.top+a.bottom,0)),B.free(n),e instanceof vt&&e.computesBoundsIncludingLocation&&e.location.u()&&t.Le(e.location),t},yi.prototype.computeMemberBounds=function(t){if(!(this.part instanceof vt))return t.h(0,0,0,0),t;for(var e=this.part,n=1/0,i=1/0,a=-1/0,u=-1/0,h=e.memberParts;h.next();){var d=h.value;if(d.isVisible()){if(d instanceof X&&(!e.computesBoundsIncludingLinks||Rn(d)||d.fromNode===e||d.toNode===e))continue;(d=d.actualBounds).left<n&&(n=d.left),d.top<i&&(i=d.top),d.right>a&&(a=d.right),d.bottom>u&&(u=d.bottom)}}return isFinite(n)&&isFinite(i)?t.h(n,i,a-n,u-i):t.h((e=e.location).x,e.y,0,0),t},Dt.Object.defineProperties(yi.prototype,{padding:{get:function(){return this.mb},set:function(t){"number"==typeof t&&(t=new Lt(t));var e=this.mb;e.A(t)||(this.mb=t=t.I(),this.g("padding",e,t),this.s())}}}),yi.className="Placeholder",Ft(X,ht),X.prototype.cloneProtected=function(t){ht.prototype.cloneProtected.call(this,t),t.Ia=-113&this.Ia,t.Te=this.Te,t.On=this.On,t.lf=this.lf,t.Op=this.Op,t.Ek=this.Ek,t.rn=this.rn,t.tn=this.tn,t.un=this.un,t.Oj=this.Oj,t.Dp=this.Dp,null!==this.P&&(t.P=this.P.copy())},(D=X.prototype).sf=function(t){ht.prototype.sf.call(this,t),this.Te=t.Te,this.lf=t.lf,t.Zg=null,t.Ua(),t.If=this.If;var e=t.fromPort;null!==e&&an(e),null!==(t=t.toPort)&&an(t)},D.gb=function(t){t.classType===X?2==(2&t.value)?this.routing=t:t===Ei||t===Na||t===Bc?this.curve=t:t===Gg||t===Uc||t===xf?this.adjusting=t:t!==Hg&&t!==pn&&z("Unknown Link enum value for a Link property: "+t):ht.prototype.gb.call(this,t)},D.Hc=function(){null===this.P&&(this.P=new Sf)},D.Si=function(){var t=this.fromNode;if(null!==t){var e=t.findVisibleNode();if(null!==e&&(t=e),fr(t)||Ea(t))return!1}return!(null!==(t=this.toNode)&&(e=t.findVisibleNode(),null!==e&&(t=e),fr(t)||Ea(t)))},D.Zv=function(){return!1},D.gt=function(){},D.Jc=function(){return!1},X.prototype.computeAngle=function(t,e,n){return X.computeAngle(e,n)},X.computeAngle=function(t,e){switch(t){default:case pn:t=0;break;case lh:t=e;break;case ul:t=e+90;break;case wf:t=e-90;break;case Mf:t=e+180;break;case _f:90<(t=R.vq(e))&&270>t&&(t-=180);break;case Hc:90<(t=R.vq(e+90))&&270>t&&(t-=180);break;case Gc:90<(t=R.vq(e-90))&&270>t&&(t-=180);break;case zg:if(45<(t=R.vq(e))&&135>t||225<t&&315>t)return 0;90<t&&270>t&&(t-=180)}return R.vq(t)},(D=X.prototype).Ch=function(){var t=this.containingGroup;null!==t&&this.fromNode!==t&&this.toNode!==t&&t.computesBoundsIncludingLinks&&ht.prototype.Ch.call(this)},D.nq=function(t){var e=this.fromNode;return t===e?this.toNode:e},D.gA=function(t){var e=this.fromPort;return t===e?this.toPort:e},D.pq=function(t){if(ht.prototype.pq.call(this,t),ll(this)&&this.rq(this.actualBounds),!t){var e=null;null!==(t=this.Se)&&bg(t,this,e=this.fromPort);var n=this.kf;if(null!==n){var i=this.toPort;n===t&&i===e||bg(n,this,i)}sh(this)}},D.qq=function(t){if(ht.prototype.qq.call(this,t),ll(this)&&this.rq(this.actualBounds),!t){var e=null;null!==(t=this.Se)&&vv(t,this,e=this.fromPort);var n=this.kf;if(null!==n){var i=this.toPort;n===t&&i===e||vv(n,this,i)}Ug(this)}},D.fk=function(){if(this.rd=!0,null!==this.ld){var t=this.diagram;if(null!==t)for(var e=this.ld.copy().iterator;e.next();)t.remove(e.value)}null!==this.data&&null!==(t=this.diagram)&&t.partManager.removeDataForLink(this)},X.prototype.updateRelationshipsFromData=function(){if(null!==this.data){var t=this.diagram;null!==t&&t.partManager.updateRelationshipsFromData(this)}},X.prototype.move=function(t,e){var n=e?this.location:this.position,i=n.x;isNaN(i)&&(i=0);var a=n.y;for(isNaN(a)&&(a=0),i=t.x-i,a=t.y-a,!0===e?ht.prototype.move.call(this,t,!1):(t=N.allocAt(n.x+i,n.y+a),ht.prototype.move.call(this,t,!1),N.free(t)),Ta(this,i,a),t=this.labelNodes;t.next();)(e=t.value).moveTo((n=e.position).x+i,n.y+a)},X.prototype.canRelinkFrom=function(){if(!this.relinkableFrom)return!1;var t=this.layer;return null===t||!!t.allowRelink&&!(null!==(t=t.diagram)&&!t.allowRelink)},X.prototype.canRelinkTo=function(){if(!this.relinkableTo)return!1;var t=this.layer;return null===t||!!t.allowRelink&&!(null!==(t=t.diagram)&&!t.allowRelink)},X.prototype.computeMidPoint=function(t){var e=this.pointsCount;if(0===e)return t.assign(Lr),t;if(1===e)return t.assign(this.i(0)),t;if(2===e){var n=this.i(0),i=this.i(1);return t.h((n.x+i.x)/2,(n.y+i.y)/2),t}if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===Ei))return this.ma.uv(.5,t),t.add(this.i(0)),n=this.ma.figures.first(),t.offset(-n.startX,-n.startY),t;if(this.computeCurve()===Ei){if(3===e)return this.i(1);if(n=3*((i=(e-1)/3|0)/2|0),i%2==1){i=this.i(n);var a=this.i(n+1),u=this.i(n+2);n=this.i(n+3),R.pz(i.x,i.y,a.x,a.y,u.x,u.y,n.x,n.y,t)}else t.assign(this.i(n));return t}var h=this.flattenedLengths;for(n=this.flattenedTotalLength,a=u=i=0;i<n/2&&u<e&&!(i+(a=h[u])>n/2);)i+=a,u++;return e=this.i(u),u=this.i(u+1),1>Math.abs(e.x-u.x)?t.h(e.x,e.y>u.y?e.y-(n/2-i):e.y+(n/2-i)):1>Math.abs(e.y-u.y)?t.h(e.x>u.x?e.x-(n/2-i):e.x+(n/2-i),e.y):t.h(e.x+(n=(n/2-i)/a)*(u.x-e.x),e.y+n*(u.y-e.y)),t},X.prototype.computeMidAngle=function(){var t=this.pointsCount;if(2>t)return NaN;if(2===t)return this.i(0).Oa(this.i(1));if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===Ei))return this.ma.Xx(.5);if(this.computeCurve()===Ei&&4<=t){var e=(t-1)/3|0,n=3*(e/2|0);if(e%2==1){n=Math.floor(n),t=this.i(n),e=this.i(n+1);var i=this.i(n+2);return n=this.i(n+3),R.oz(t.x,t.y,e.x,e.y,i.x,i.y,n.x,n.y)}if(0<n&&n+1<t)return this.i(n-1).Oa(this.i(n+1))}e=this.flattenedLengths,i=this.flattenedTotalLength;var u,a=0;for(n=0;a<i/2&&n<t&&!(a+(u=e[n])>i/2);)a+=u,n++;if(e=this.i(n),i=this.i(n+1),1>Math.abs(e.x-i.x)&&1>Math.abs(e.y-i.y)){if(0<n&&n+2<t)return this.i(n-1).Oa(this.i(n+2))}else{if(1>Math.abs(e.x-i.x))return e.y>i.y?270:90;if(1>Math.abs(e.y-i.y))return e.x>i.x?180:0}return e.Oa(i)},(D=X.prototype).i=function(t){return this.Bb.m[t]},D.Mc=function(t,e){this.Bb.Lc(t,e)},D.L=function(t,e,n){this.Bb.Lc(t,new N(e,n))},D.pA=function(t,e){this.Bb.ub(t,e)},D.l=function(t,e,n){this.Bb.ub(t,new N(e,n))},D.ce=function(t){this.Bb.add(t)},D.pf=function(t,e){this.Bb.add(new N(t,e))},D.Rv=function(t){this.Bb.eb(t)},D.ak=function(){this.Bb.clear()},D.Hh=function(){null===this.Zg&&(this.Zg=this.Bb,this.Bb=this.Bb.copy())},D.rf=function(){if(null!==this.Zg){for(var t=this.Zg,e=this.Bb,n=1/0,i=1/0,a=t.m,u=a.length,h=0;h<u;h++){var d=a[h];n=Math.min(d.x,n),i=Math.min(d.y,i)}d=h=1/0;for(var f=e.m,g=f.length,m=0;m<g;m++){var y=f[m];h=Math.min(y.x,h),d=Math.min(y.y,d),y.freeze()}if(e.freeze(),g===u){for(u=0;u<g;u++)if((m=a[u]).x-n!=(y=f[u]).x-h||m.y-i!=y.y-d){this.cc(!0);break}}else this.cc(!0);this.Zg=null,null!==(n=this.diagram)&&n.animationManager.rb&&(n=n.animationManager,this.cf=e,n.Il.add(this)),Tv(this),this.g("points",t,e)}},D.Tv=function(){null!==this.Zg&&(this.Bb=this.Zg,this.Zg=null)},D.Ua=function(){if(!this.suspendsRouting){var t=this.diagram;if(t){if(t.Ts.contains(this)||t.undoManager.isUndoingRedoing||(t=t.animationManager).isTicking&&!t.isAnimating)return;null!==this.cf&&!t.isTicking&&t.isAnimating&&(this.cf=null)}null!==(t=this.path)&&(this.rd=!1,this.s(),t.s())}},D.pg=function(){if(!this.rd&&!this.computingPoints){var t=!0;try{this.computingPoints=!0,this.Hh(),t=this.computePoints()}catch(e){this.computingPoints=!1,this.Tv()}finally{this.computingPoints=!1,t?this.rf():this.Tv()}}},X.prototype.computePoints=function(){if(null===this.diagram)return!1;var t=this.fromNode,e=null;if(null===t?(ah||((ah=new Q).desiredSize=Nl,ah.Sa()),this.defaultFromPoint&&(ah.location=this.defaultFromPoint,ah.Sa(),e=t=ah)):e=this.fromPort,null!==e&&!t.isVisible()){var n=t.findVisibleNode();null!==n&&n!==t?(t=n,e=n.port):t=n}if(this.ox=t,null===t||!t.location.u())return!1;for(;!(null===e||e.actualBounds.u()&&e.Bf());)e=e.panel;if(null===e)return!1;var i=this.toNode,a=null;if(null===i?(au||((au=new Q).desiredSize=Nl,au.Sa()),this.defaultToPoint&&(au.location=this.defaultToPoint,au.Sa(),a=i=au)):a=this.toPort,null===a||i.isVisible()||(null!==(n=i.findVisibleNode())&&n!==i?(i=n,a=n.port):i=n),this.px=i,null===i||!i.location.u())return!1;for(;!(null===a||a.actualBounds.u()&&a.Bf());)a=a.panel;if(null===a)return!1;var u=this.pointsCount,h=this.computeSpot(!0,e);n=this.computeSpot(!1,a);var d=Vc(h),f=Vc(n),g=e===a&&null!==e,m=this.isOrthogonal,y=this.curve===Ei;this.Mf=!(!g||m)&&(y=!0);var x=this.computeAdjusting()===pn||g;if(!m&&!g&&d&&f){if(d=!1,!x&&3<=u&&(x=this.getLinkPoint(t,e,h,!0,!1,i,a),f=this.getLinkPoint(i,a,n,!1,!1,t,e),d=this.adjustPoints(0,x,u-1,f))&&(x=this.getLinkPoint(t,e,h,!0,!1,i,a),f=this.getLinkPoint(i,a,n,!1,!1,t,e),this.adjustPoints(0,x,u-1,f)),!d)if(this.ak(),y){u=this.getLinkPoint(t,e,h,!0,!1,i,a),d=(x=this.getLinkPoint(i,a,n,!1,!1,t,e)).x-u.x,f=x.y-u.y,g=this.computeCurviness(),y=m=0;var _=u.x+d/3,M=u.y+f/3,S=_,T=M;R.w(f,0)?T=0<d?T-g:T+g:(m=-d/f,y=Math.sqrt(g*g/(m*m+1)),0>g&&(y=-y),T=m*((S=(0>f?-1:1)*y+_)-_)+M);var k=_=u.x+2*d/3,b=M=u.y+2*f/3;b=R.w(f,0)?0<d?b-g:b+g:m*((k=(0>f?-1:1)*y+_)-_)+M,this.ak(),this.ce(u),this.pf(S,T),this.pf(k,b),this.ce(x),this.Mc(0,this.getLinkPoint(t,e,h,!0,!1,i,a)),this.Mc(3,this.getLinkPoint(i,a,n,!1,!1,t,e))}else i=this.getLinkPoint(t,e,h,!0,!1,u=i,x=a),a=this.getLinkPoint(u,x,n,!1,!1,t,e),this.hasCurviness()?(x=a.x-i.x,n=a.y-i.y,h=this.computeCurviness(),u=t=i.x+x/2,d=e=i.y+n/2,R.w(n,0)?d=0<x?d-h:d+h:(x=-x/n,u=Math.sqrt(h*h/(x*x+1)),0>h&&(u=-u),d=x*((u=(0>n?-1:1)*u+t)-t)+e),this.ce(i),this.pf(u,d),this.ce(a)):(this.ce(i),this.ce(a),d=B.alloc(),e.Mi(d),f=d.$(a),x.Mi(d),g=d.$(i),(f||g)&&(h=e.da(Vg(h),new N),this.Mc(0,this.getLinkPointFromPoint(t,e,h,a,!0,h)),n=x.da(Vg(n),new N),this.Mc(1,this.getLinkPointFromPoint(u,x,n,i,!1,n))),B.free(d))}else{y=this.isAvoiding,x&&(m&&y||g)&&this.ak();var I=g?this.computeCurviness():0;y=this.getLinkPoint(t,e,h,!0,m,i,a),_=S=M=0,(m||!d||g)&&(T=this.computeEndSegmentLength(t,e,h,!0),_=this.getLinkDirection(t,e,y,h,!0,m,i,a),g&&(d||h.A(n)||!m&&h.x+n.x===1&&h.y+n.y===1)&&(_-=m?90:30,0>I&&(_-=180)),0>_?_+=360:360<=_&&(_-=360),g&&(T+=Math.abs(I)*(m?1:2)),0===_?M=T:90===_?S=T:180===_?M=-T:270===_?S=-T:(M=T*Math.cos(_*Math.PI/180),S=T*Math.sin(_*Math.PI/180)),h.wc()&&g&&(T=e.da(Wt,N.alloc()),k=N.allocAt(T.x+1e3*M,T.y+1e3*S),this.getLinkPointFromPoint(t,e,T,k,!0,y),N.free(T),N.free(k))),T=this.getLinkPoint(i,a,n,!1,m,t,e);var O=b=k=0;if(m||!f||g){var F=this.computeEndSegmentLength(i,a,n,!1);O=this.getLinkDirection(i,a,T,n,!1,m,t,e),g&&(f||h.A(n)||!m&&h.x+n.x===1&&h.y+n.y===1)&&(O+=m?0:30,0>I&&(O+=180)),0>O?O+=360:360<=O&&(O-=360),g&&(F+=Math.abs(I)*(m?1:2)),0===O?k=F:90===O?b=F:180===O?k=-F:270===O?b=-F:(k=F*Math.cos(O*Math.PI/180),b=F*Math.sin(O*Math.PI/180)),n.wc()&&g&&(n=a.da(Wt,N.alloc()),h=N.allocAt(n.x+1e3*k,n.y+1e3*b),this.getLinkPointFromPoint(i,a,n,h,!1,T),N.free(n),N.free(h))}n=y,(m||!d||g)&&(n=new N(y.x+M,y.y+S)),h=T,(m||!f||g)&&(h=new N(T.x+k,T.y+b)),!x&&!m&&d&&3<u&&this.adjustPoints(0,y,u-2,h)?this.Mc(u-1,T):!x&&!m&&f&&3<u&&this.adjustPoints(1,n,u-1,T)?this.Mc(0,y):!x&&(m?6<=u:4<u)&&this.adjustPoints(1,n,u-2,h)?(this.Mc(0,y),this.Mc(u-1,T)):(this.ak(),this.ce(y),(m||!d||g)&&this.ce(n),m&&this.addOrthoPoints(n,_,h,O,t,i),(m||!f||g)&&this.ce(h),this.ce(T))}return!0},X.prototype.getLinkPointFromPoint=function(t,e,n,i,a,u){if(void 0===u&&(u=new N),null===t||null===e)return u.assign(n),u;if(t.isVisible()||null!==(a=t.findVisibleNode())&&a!==t&&(e=a.port),t=null,null===(a=e.panel)||a.he()||(a=a.panel),null===a){a=i.x,i=i.y;var h=n.x;n=n.y}else{var d=-(t=a.de).m12*(a=1/(t.m11*t.m22-t.m12*t.m21)),f=-t.m21*a,g=t.m11*a,m=a*(t.m21*t.dy-t.m22*t.dx),y=a*(t.m12*t.dx-t.m11*t.dy);a=i.x*(h=t.m22*a)+i.y*f+m,i=i.x*d+i.y*g+y,h=n.x*h+n.y*f+m,n=n.x*d+n.y*g+y}return e.kk(a,i,h,n,u),null!==t&&u.transform(t),u},X.prototype.getLinkPoint=function(t,e,n,i,a,u,h,d){if(void 0===d&&(d=new N),n.hb()&&!Vc(n))return e.da(n,d),d;if(n.Kc()){var f=jg(this,e);if(null!==f){if(d.assign(f.tq),a&&this.routing===Av){var g=jg(this,h);if(null!==g&&f.fm<g.fm){f=N.alloc(),g=N.alloc();var m=new B(e.da(zn,f),e.da(ks,g)),y=this.computeSpot(!i,h);t=this.getLinkPoint(u,h,y,!i,a,t,e,g),(n.zf(Pd)||n.zf(Ad))&&t.y>=m.y&&t.y<=m.y+m.height?d.y=t.y:(n.zf(Nd)||n.zf(Id))&&t.x>=m.x&&t.x<=m.x+m.width&&(d.x=t.x),N.free(f),N.free(g)}}return d}}return n=e.da(Vg(n),N.alloc()),this.pointsCount>(a?6:2)?(h=this.i(i?1:this.pointsCount-2),a&&(h=Rg(n,h.copy()))):(f=this.computeSpot(!i,h),u=N.alloc(),h=h.da(Vg(f),u),a&&(h=Rg(n,h)),N.free(u)),this.getLinkPointFromPoint(t,e,n,h,i,d),N.free(n),d},X.prototype.getLinkDirection=function(t,e,n,i,a,u,h,d){t:if(i.hb())var f=i.x>i.y?i.x>1-i.y?0:i.x<1-i.y?270:315:i.x<i.y?i.x>1-i.y?90:i.x<1-i.y?180:135:.5>i.x?225:.5<i.x?45:0;else{if(i.Kc()&&null!==(f=jg(this,e)))switch(f.xc){case 1:f=270;break t;case 2:f=180;break t;default:case 4:f=0;break t;case 8:f=90;break t}f=e.da(Wt,N.alloc()),this.pointsCount>(u?6:2)?(d=this.i(a?1:this.pointsCount-2),d=u?Rg(f,d.copy()):n):(n=N.alloc(),d=d.da(Wt,n),N.free(n)),n=Math.abs(d.x-f.x)>Math.abs(d.y-f.y)?d.x>=f.x?0:180:d.y>=f.y?90:270,N.free(f),f=n}return i.wc()&&h.Fd(t)&&360<=(f+=180)&&(f-=360),Vc(i)||0===(t=e.Li())||(45<=t&&135>t?f+=90:135<=t&&225>t?f+=180:225<=t&&315>t&&(f+=270),360<=f&&(f-=360)),f},X.prototype.computeEndSegmentLength=function(t,e,n,i){return null!==e&&n.Kc()&&null!==(t=jg(this,e))?t.mv:(t=i?this.fromEndSegmentLength:this.toEndSegmentLength,null!==e&&isNaN(t)&&(t=i?e.fromEndSegmentLength:e.toEndSegmentLength),isNaN(t)&&(t=10),t)},X.prototype.computeSpot=function(t,e){return void 0===e&&(e=null),t?null===(t=e||this.fromPort)?t=Wt:((e=this.fromSpot).Lb()&&(e=t.fromSpot),t=e===Fi?An:e):null===(t=e||this.toPort)?t=Wt:((e=this.toSpot).Lb()&&(e=t.toSpot),t=e===Fi?An:e),t},X.prototype.computeOtherPoint=function(t,e){return this.computeAdjusting()!==pn&&4<this.pointsCount?this.computeMidPoint(new N):null!==(t=null!==(t=e.bp)?Tw(t,this):null)?t.tq:e.da(Wt)},X.prototype.computeShortLength=function(t){if(t){if(t=this.fromShortLength,isNaN(t)){var e=this.fromPort;null!==e&&(t=e.fromShortLength)}return isNaN(t)?0:t}return t=this.toShortLength,isNaN(t)&&null!==(e=this.toPort)&&(t=e.toShortLength),isNaN(t)?0:t},X.prototype.vf=function(t,e,n,i,a,u){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===n&&(n=null);var h=u;if(void 0===u&&(h=St.alloc()).reset(),h.multiply(this.transform),this.wh(t,h))return fg(this,e,n,a),void 0===u&&St.free(h),!0;if(this.Ic(t,h)){var d=!1;if(!this.isAtomic)for(var f=this.T.m,g=f.length;g--;){var m=f[g];if(m.visible||m===this.locationObject){var y=m.actualBounds,x=this.naturalBounds;if(!(y.x>x.width||y.y>x.height||0>y.x+y.width||0>y.y+y.height)){if((y=St.alloc()).set(h),m instanceof Y)d=m.vf(t,e,n,i,a,y);else if(this.path===m){if(m instanceof wt)if(d=t,x=i,!1===m.pickable)d=!1;else if(y.multiply(m.transform),x)t:{var _=d,M=y;if(m.wh(_,M))d=!0;else{if(void 0===M&&(M=m.transform,_.De(m.actualBounds))){d=!0;break t}d=_.left,x=_.right;var S=_.top;_=_.bottom;var T=N.alloc(),k=N.alloc(),b=N.alloc(),I=St.alloc();I.set(M),I.Hv(m.transform),I.Ns(),k.x=x,k.y=S,k.transform(I),T.x=d,T.y=S,T.transform(I),M=!1,cn(m,T,k,b)?M=!0:(T.x=x,T.y=_,T.transform(I),cn(m,T,k,b)?M=!0:(k.x=d,k.y=_,k.transform(I),cn(m,T,k,b)?M=!0:(T.x=d,T.y=S,T.transform(I),cn(m,T,k,b)&&(M=!0)))),St.free(I),N.free(T),N.free(k),N.free(b),d=M}}else d=m.wh(d,y)}else d=Uy(m,t,i,y);d&&(x=m,null!==e&&(x=e(m)),x&&(null===n||n(x))&&a.add(x)),St.free(y)}}}return void 0===u&&St.free(h),d||null!==this.background||null!==this.areaBackground}return void 0===u&&St.free(h),!1},X.prototype.computeCurve=function(){if(null===this.Mf){var t=this.fromPort;this.Mf=null!==t&&t===this.toPort&&!this.isOrthogonal}return this.Mf?Ei:this.curve},X.prototype.computeCorner=function(){if(this.curve===Ei)return 0;var t=this.corner;return(isNaN(t)||0>t)&&(t=10),t},X.prototype.findMidLabel=function(){for(var t=this.path,e=this.T.m,n=e.length,i=0;i<n;i++){var a=e[i];if(a!==t&&!a.isPanelMain&&(a.segmentIndex===-1/0||isNaN(a.segmentIndex)))return a}for(t=this.labelNodes;t.next();)if((e=t.value).segmentIndex===-1/0||isNaN(e.segmentIndex))return e;return null},X.prototype.computeSpacing=function(){if(!this.isVisible())return 0;var t=Cw;t=Math.max(t,this.computeThickness());var e=this.fromPort,n=this.toPort;if(null!==e&&null!==n){var i=this.findMidLabel();if(null!==i){var a=i.naturalBounds,u=i.margin,h=isNaN(a.width)?30:a.width*i.scale+u.left+u.right;a=isNaN(a.height)?14:a.height*i.scale+u.top+u.bottom,(i=i.segmentOrientation)===lh||i===_f||i===Mf?t=Math.max(t,a):i===wf||i===Gc||i===ul||i===Hc?t=Math.max(t,h):(e=e.da(Wt).Oa(n.da(Wt))/180*Math.PI,t=Math.max(t,Math.abs(Math.sin(e)*h)+Math.abs(Math.cos(e)*a)+1)),this.curve===Ei&&(t*=1.333)}}return t},X.prototype.arrangeBundledLinks=function(t,e){if(e)for(e=0;e<t.length;e++){var n=t[e];n.computeAdjusting()===pn&&n.Ua()}},X.prototype.computeCurviness=function(){var t=this.curviness;if(isNaN(t)){t=Yg;var e=this.If;if(null!==e){for(var n=ye(),i=0,a=e.links,u=0;u<a.length;u++){var h=a[u].computeSpacing();n.push(h),i+=h}for(i=-i/2,u=0;u<a.length;u++){if(a[u]===this){t=i+n[u]/2;break}i+=n[u]}e.Ws===this.fromNode&&(t=-t),oe(n)}}return t},X.prototype.computeThickness=function(){if(!this.isVisible())return 0;var t=this.path;return null!==t?Math.max(t.strokeWidth,1):1},X.prototype.hasCurviness=function(){return!isNaN(this.curviness)||null!==this.If},X.prototype.adjustPoints=function(t,e,n,i){var a=this.computeAdjusting();if(this.isOrthogonal){if(a===Uc)return!1;a===xf&&(a=Gg)}switch(a){case Uc:var u=this.i(t),h=this.i(n);if(!u.Ta(e)||!h.Ta(i)){var d=h.x-(a=u.x),f=h.y-(u=u.y),g=Math.sqrt(d*d+f*f);if(!R.aa(g,0)){if(R.aa(d,0))var m=0>f?-Math.PI/2:Math.PI/2;else m=Math.atan(f/Math.abs(d)),0>d&&(m=Math.PI-m);var y=e.y;d=i.x-(h=e.x);var x=i.y-y;for(f=Math.sqrt(d*d+x*x),R.aa(d,0)?x=0>x?-Math.PI/2:Math.PI/2:(x=Math.atan(x/Math.abs(d)),0>d&&(x=Math.PI-x)),g=f/g,m=x-m,this.Mc(t,e),t+=1;t<n;t++)d=(e=this.i(t)).x-a,f=e.y-u,e=Math.sqrt(d*d+f*f),R.aa(e,0)||(R.aa(d,0)?f=0>f?-Math.PI/2:Math.PI/2:(f=Math.atan(f/Math.abs(d)),0>d&&(f=Math.PI-f)),d=f+m,this.L(t,h+(e*=g)*Math.cos(d),y+e*Math.sin(d)));this.Mc(n,i)}}return!0;case xf:if(u=this.i(t),y=this.i(n),!u.Ta(e)||!y.Ta(i)){g=((h=y.x)-(a=u.x))*(h-a)+((y=y.y)-(u=u.y))*(y-u),m=e.y,x=i.y;var _=1;if((f=i.x)-(d=e.x)!=0){var M=(x-m)/(f-d);_=Math.sqrt(1+1/(M*M))}else M=9e9;for(this.Mc(t,e),t+=1;t<n;t++){var S=(e=this.i(t)).x,T=e.y,k=.5;0!==g&&(k=((a-S)*(a-h)+(u-T)*(u-y))/g);var b=a+k*(h-a),I=u+k*(y-u);e=Math.sqrt((S-b)*(S-b)+(T-I)*(T-I)),T<M*(S-b)+I&&(e=-e),0<M&&(e=-e),S=d+k*(f-d),k=m+k*(x-m),0!==M?this.L(t,e=S+e/_,k-(e-S)/M):this.L(t,S,k+e)}this.Mc(n,i)}return!0;case Gg:return this.isOrthogonal&&(a=this.i(t),u=this.i(t+1),h=this.i(t+2),y=d=u.x,g=m=u.y,R.w(a.y,u.y)?R.w(u.x,h.x)?m=e.y:R.w(u.y,h.y)&&(d=e.x):R.w(a.x,u.x)&&(R.w(u.y,h.y)?d=e.x:R.w(u.x,h.x)&&(m=e.y)),this.L(t+1,d,m),a=this.i(n),u=this.i(n-1),h=this.i(n-2),f=d=u.x,x=m=u.y,R.w(a.y,u.y)?R.w(u.x,h.x)?m=i.y:R.w(u.y,h.y)&&(d=i.x):R.w(a.x,u.x)&&(R.w(u.y,h.y)?d=i.x:R.w(u.x,h.x)&&(m=i.y)),this.L(n-1,d,m),yf(this))?(this.L(t+1,y,g),this.L(n-1,f,x),n=!1):(this.Mc(t,e),this.Mc(n,i),n=!0),n;default:return!1}},X.prototype.addOrthoPoints=function(t,e,n,i,a,u){0>e?e+=360:360<=e&&(e-=360),0>i?i+=360:360<=i&&(i-=360);var h=i;e=315<=e||45>e?0:45<=e&&135>e?90:135<=e&&225>e?180:270,i=315<=i||45>i?0:45<=i&&135>i?90:135<=i&&225>i?180:270;var d=a.actualBounds.copy(),f=u.actualBounds.copy();if(d.u()&&f.u()){d.Gc(Cf,Cf),f.Gc(Cf,Cf),d.Le(t),f.Le(n);var g=N.alloc(),m=N.alloc();0===e?n.x>t.x||270===i&&n.y<t.y&&f.right>t.x||90===i&&n.y>t.y&&f.right>t.x?(g.h(n.x,t.y),m.h(n.x,(t.y+n.y)/2),180===i?(g.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1),m.x=g.x,m.y=n.y):270===i&&n.y<t.y||90===i&&n.y>t.y?(g.x=t.x<f.left?this.computeMidOrthoPosition(t.x,t.y,f.left,n.y,!1):t.x<f.right&&(270===i&&t.y<f.top||90===i&&t.y>f.bottom)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):f.right,m.x=g.x,m.y=n.y):0===i&&t.x<f.left&&t.y>f.top&&t.y<f.bottom&&(g.x=t.x,g.y=t.y<n.y?Math.min(n.y,f.top):Math.max(n.y,f.bottom),m.y=g.y)):(g.h(t.x,n.y),m.h((t.x+n.x)/2,n.y),(180===i||90===i&&n.y<d.top||270===i&&n.y>d.bottom)&&(180===i&&(f.$(t)||d.$(n))?g.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):n.y<t.y&&(180===i||90===i)?g.y=this.computeMidOrthoPosition(t.x,d.top,n.x,Math.max(n.y,f.bottom),!0):n.y>t.y&&(180===i||270===i)&&(g.y=this.computeMidOrthoPosition(t.x,d.bottom,n.x,Math.min(n.y,f.top),!0)),m.x=n.x,m.y=g.y),g.y>d.top&&g.y<d.bottom&&(n.x>=d.left&&n.x<=t.x||t.x<=f.right&&t.x>=n.x?(90===i||270===i)&&(g.h(Math.max((t.x+n.x)/2,t.x),t.y),m.h(g.x,n.y)):(g.y=270===i||(0===i||180===i)&&n.y<t.y?Math.min(n.y,0===i?d.top:Math.min(d.top,f.top)):Math.max(n.y,0===i?d.bottom:Math.max(d.bottom,f.bottom)),m.x=n.x,m.y=g.y))):180===e?n.x<t.x||270===i&&n.y<t.y&&f.left<t.x||90===i&&n.y>t.y&&f.left<t.x?(g.h(n.x,t.y),m.h(n.x,(t.y+n.y)/2),0===i?(g.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1),m.x=g.x,m.y=n.y):270===i&&n.y<t.y||90===i&&n.y>t.y?(g.x=t.x>f.right?this.computeMidOrthoPosition(t.x,t.y,f.right,n.y,!1):t.x>f.left&&(270===i&&t.y<f.top||90===i&&t.y>f.bottom)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):f.left,m.x=g.x,m.y=n.y):180===i&&t.x>f.right&&t.y>f.top&&t.y<f.bottom&&(g.x=t.x,g.y=t.y<n.y?Math.min(n.y,f.top):Math.max(n.y,f.bottom),m.y=g.y)):(g.h(t.x,n.y),m.h((t.x+n.x)/2,n.y),(0===i||90===i&&n.y<d.top||270===i&&n.y>d.bottom)&&(0===i&&(f.$(t)||d.$(n))?g.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):n.y<t.y&&(0===i||90===i)?g.y=this.computeMidOrthoPosition(t.x,d.top,n.x,Math.max(n.y,f.bottom),!0):n.y>t.y&&(0===i||270===i)&&(g.y=this.computeMidOrthoPosition(t.x,d.bottom,n.x,Math.min(n.y,f.top),!0)),m.x=n.x,m.y=g.y),g.y>d.top&&g.y<d.bottom&&(n.x<=d.right&&n.x>=t.x||t.x>=f.left&&t.x<=n.x?(90===i||270===i)&&(g.h(Math.min((t.x+n.x)/2,t.x),t.y),m.h(g.x,n.y)):(g.y=270===i||(0===i||180===i)&&n.y<t.y?Math.min(n.y,180===i?d.top:Math.min(d.top,f.top)):Math.max(n.y,180===i?d.bottom:Math.max(d.bottom,f.bottom)),m.x=n.x,m.y=g.y))):90===e?n.y>t.y||180===i&&n.x<t.x&&f.bottom>t.y||0===i&&n.x>t.x&&f.bottom>t.y?(g.h(t.x,n.y),m.h((t.x+n.x)/2,n.y),270===i?(g.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0),m.x=n.x,m.y=g.y):180===i&&n.x<t.x||0===i&&n.x>t.x?(g.y=t.y<f.top?this.computeMidOrthoPosition(t.x,t.y,n.x,f.top,!0):t.y<f.bottom&&(180===i&&t.x<f.left||0===i&&t.x>f.right)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):f.bottom,m.x=n.x,m.y=g.y):90===i&&t.y<f.top&&t.x>f.left&&t.x<f.right&&(g.x=t.x<n.x?Math.min(n.x,f.left):Math.max(n.x,f.right),g.y=t.y,m.x=g.x)):(g.h(n.x,t.y),m.h(n.x,(t.y+n.y)/2),(270===i||0===i&&n.x<d.left||180===i&&n.x>d.right)&&(270===i&&(f.$(t)||d.$(n))?g.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):n.x<t.x&&(270===i||0===i)?g.x=this.computeMidOrthoPosition(d.left,t.y,Math.max(n.x,f.right),n.y,!1):n.x>t.x&&(270===i||180===i)&&(g.x=this.computeMidOrthoPosition(d.right,t.y,Math.min(n.x,f.left),n.y,!1)),m.x=g.x,m.y=n.y),g.x>d.left&&g.x<d.right&&(n.y>=d.top&&n.y<=t.y||t.y<=f.bottom&&t.y>=n.y?(0===i||180===i)&&(g.h(t.x,Math.max((t.y+n.y)/2,t.y)),m.h(n.x,g.y)):(g.x=180===i||(90===i||270===i)&&n.x<t.x?Math.min(n.x,90===i?d.left:Math.min(d.left,f.left)):Math.max(n.x,90===i?d.right:Math.max(d.right,f.right)),m.x=g.x,m.y=n.y))):n.y<t.y||180===i&&n.x<t.x&&f.top<t.y||0===i&&n.x>t.x&&f.top<t.y?(g.h(t.x,n.y),m.h((t.x+n.x)/2,n.y),90===i?(g.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0),m.x=n.x,m.y=g.y):180===i&&n.x<t.x||0===i&&n.x>=t.x?(g.y=t.y>f.bottom?this.computeMidOrthoPosition(t.x,t.y,n.x,f.bottom,!0):t.y>f.top&&(180===i&&t.x<f.left||0===i&&t.x>f.right)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):f.top,m.x=n.x,m.y=g.y):270===i&&t.y>f.bottom&&t.x>f.left&&t.x<f.right&&(g.x=t.x<n.x?Math.min(n.x,f.left):Math.max(n.x,f.right),g.y=t.y,m.x=g.x)):(g.h(n.x,t.y),m.h(n.x,(t.y+n.y)/2),(90===i||0===i&&n.x<d.left||180===i&&n.x>d.right)&&(90===i&&(f.$(t)||d.$(n))?g.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):n.x<t.x&&(90===i||0===i)?g.x=this.computeMidOrthoPosition(d.left,t.y,Math.max(n.x,f.right),n.y,!1):n.x>t.x&&(90===i||180===i)&&(g.x=this.computeMidOrthoPosition(d.right,t.y,Math.min(n.x,f.left),n.y,!1)),m.x=g.x,m.y=n.y),g.x>d.left&&g.x<d.right&&(n.y<=d.bottom&&n.y>=t.y||t.y>=f.top&&t.y<=n.y?(0===i||180===i)&&(g.h(t.x,Math.min((t.y+n.y)/2,t.y)),m.h(n.x,g.y)):(g.x=180===i||(90===i||270===i)&&n.x<t.x?Math.min(n.x,270===i?d.left:Math.min(d.left,f.left)):Math.max(n.x,270===i?d.right:Math.max(d.right,f.right)),m.x=g.x,m.y=n.y)));var y=n;if(this.isAvoiding){var x=this.diagram;if(null===x||a===u||this.layer.isTemporary||!Xx(x)||d.$(y)&&!u.Fd(a)||f.$(t)&&!a.Fd(u))e=!1;else{var _=Oy(x,!0,this.containingGroup,null);if(17!==this.segmentIndex&&_.qk(Math.min(t.x,g.x),Math.min(t.y,g.y),Math.abs(t.x-g.x),Math.abs(t.y-g.y))&&_.qk(Math.min(g.x,m.x),Math.min(g.y,m.y),Math.abs(g.x-m.x),Math.abs(g.y-m.y))&&_.qk(Math.min(m.x,y.x),Math.min(m.y,y.y),Math.abs(m.x-y.x),Math.abs(m.y-y.y)))e=!1;else{a=t,u=y;var M=n=null;if(x.isVirtualized){(x=_.bounds.copy()).Gc(-_.bq,-_.aq);var S=N.alloc();uh(_,t.x,t.y)||(R.yf(x.x,x.y,x.x+x.width,x.y+x.height,t.x,t.y,g.x,g.y,S)?(n=t=S.copy(),e=S.Oa(g)):R.yf(x.x,x.y,x.x+x.width,x.y+x.height,g.x,g.y,m.x,m.y,S)?(n=t=S.copy(),e=S.Oa(m)):R.yf(x.x,x.y,x.x+x.width,x.y+x.height,m.x,m.y,y.x,y.y,S)&&(n=t=S.copy(),e=S.Oa(y))),uh(_,y.x,y.y)||(R.yf(x.x,x.y,x.x+x.width,x.y+x.height,y.x,y.y,m.x,m.y,S)?(M=y=S.copy(),i=m.Oa(S)):R.yf(x.x,x.y,x.x+x.width,x.y+x.height,m.x,m.y,g.x,g.y,S)?(M=y=S.copy(),i=g.Oa(S)):R.yf(x.x,x.y,x.x+x.width,x.y+x.height,g.x,g.y,t.x,t.y,S)&&(M=y=S.copy(),i=t.Oa(S))),N.free(S)}(d=d.copy().Nc(f)).Gc(_.bq*_.it,_.aq*_.it),Sw(_,t,e,y,i,d,!0),f=ls(_,y.x,y.y),!_.abort&&f>=hh&&(Dw(_),d.Gc(_.bq*_.ly,_.aq*_.my),Sw(_,t,e,y,i,d,!1),f=ls(_,y.x,y.y)),!_.abort&&f<hh&&ls(_,y.x,y.y)!==Ti?(kv(this,_,y.x,y.y,i,!0,h),d=this.i(2),4>this.pointsCount?(0===e||180===e?(d.x=t.x,d.y=y.y):(d.x=y.x,d.y=t.y),this.L(2,d.x,d.y),this.l(3,d.x,d.y)):(h=this.i(3),0===e||180===e?R.w(d.x,h.x)?(d=0===e?Math.max(d.x,t.x):Math.min(d.x,t.x),this.L(2,d,t.y),this.L(3,d,h.y)):R.w(d.y,h.y)?(Math.abs(t.y-d.y)<=_.aq/2&&(this.L(2,d.x,t.y),this.L(3,h.x,t.y)),this.l(2,d.x,t.y)):this.L(2,t.x,d.y):(90===e||270===e)&&(R.w(d.y,h.y)?(d=90===e?Math.max(d.y,t.y):Math.min(d.y,t.y),this.L(2,t.x,d),this.L(3,h.x,d)):R.w(d.x,h.x)?(Math.abs(t.x-d.x)<=_.bq/2&&(this.L(2,t.x,d.y),this.L(3,t.x,h.y)),this.l(2,t.x,d.y)):this.L(2,d.x,t.y))),null!==n&&(t=this.i(1),h=this.i(2),t.x!==h.x&&t.y!==h.y?0===e||180===e?this.l(2,t.x,h.y):this.l(2,h.x,t.y):0===e||180===e?this.l(2,a.x,n.y):this.l(2,n.x,a.y)),null!==M&&(0===i||180===i?this.pf(u.x,M.y):this.pf(M.x,u.y)),e=!0):e=!1}}}else e=!1;e||(this.ce(g.copy()),this.ce(m.copy())),N.free(g),N.free(m)}},X.prototype.computeMidOrthoPosition=function(t,e,n,i,a){var u=0;return!this.hasCurviness()||this.computeSpot(!0,this.fromPort).Kc()||this.computeSpot(!1,this.toPort).Kc()||(u=this.computeCurviness()),a?(e+i)/2+u:(t+n)/2+u},X.prototype.Kz=function(t){var e=t.x;t=t.y;for(var n=this.i(0),i=this.i(1),a=Re(e,t,n.x,n.y,i.x,i.y),u=0,h=1;h<this.pointsCount-1;h++){n=this.i(h+1);var d=Re(e,t,i.x,i.y,n.x,n.y);i=n,d<a&&(u=h,a=d)}return u},X.prototype.cc=function(t){this.Lm=!1,t&&this.s()},X.prototype.sk=function(t){if((t||!1!==this.rd&&(t=this.nb(),!this.Lm||null!==t&&null===t.geometry))&&(this.ma=this.makeGeometry(),null!==(t=this.path))){t.ma=this.ma;for(var e=this.T.m,n=e.length,i=0;i<n;i++){var a=e[i];a!==t&&a.isPanelMain&&a instanceof wt&&(a.ma=this.ma)}}},X.prototype.makeGeometry=function(){var t=this.ma,e=this.pointsCount;if(2>e)return t.type=q.j,this.Lm=!0,t;var n=!1,i=this.diagram;null!==i&&ll(this)&&i.Wh.contains(this)&&(0!==this.Gl.width||0!==this.Gl.height)&&(n=!0);var a=this.i(0).copy(),u=a.copy();i=this.Bb.m;var h=this.computeCurve();if(h===Ei&&3<=e&&!R.aa(this.smoothness,0))if(3===e){var d=this.i(1);i=Math.min(a.x,d.x);var f=Math.min(a.y,d.y);d=this.i(2),i=Math.min(i,d.x),f=Math.min(f,d.y)}else{if(this.isOrthogonal)for(f=0;f<e;f++)d=i[f],u.x=Math.min(d.x,u.x),u.y=Math.min(d.y,u.y);else for(i=3;i<e;i+=3)i+3>=e&&(i=e-1),f=this.i(i),u.x=Math.min(f.x,u.x),u.y=Math.min(f.y,u.y);i=u.x,f=u.y}else{for(f=0;f<e;f++)d=i[f],u.x=Math.min(d.x,u.x),u.y=Math.min(d.y,u.y);i=u.x,f=u.y}if(f-=this.Ru.y,a.x-=i-=this.Ru.x,a.y-=f,2!==e||ll(this)){if(t.type=q.o,d=Eg(t),0!==this.computeShortLength(!0)&&(a=ka(this,a,!0,u)),iu(d,a.x,a.y,!1),h===Ei&&3<=e&&!R.aa(this.smoothness,0))if(3===e)e=(n=this.i(1)).x-i,n=n.y-f,(a=this.i(2).copy()).x-=i,a.y-=f,0!==this.computeShortLength(!1)&&(a=ka(this,a,!1,u)),Vs(d,e,n,e,n,a.x,a.y);else if(this.isOrthogonal){e=N.allocAt(i,f),(n=N.alloc()).assign(this.i(1)),u=N.allocAt(i,f),a=N.allocAt(i,f),h=this.i(0);for(var g,m=this.smoothness/3,y=1;y<this.pointsCount-1;y++){var x=h,_=g=this.i(y),M=this.i(vf(this,g,y,!1));if(!(R.aa(x.x,_.x)&&R.aa(_.x,M.x)||R.aa(x.y,_.y)&&R.aa(_.y,M.y))){var S=m;isNaN(S)&&(S=this.smoothness/3);var T=x.x,k=_.x,b=M.x;M=M.y;var I=S*Bg(T,x=x.y,k,_=_.y);S*=Bg(k,_,b,M),R.aa(x,_)&&R.aa(k,b)&&(k>T?M>_?(u.x=k-I,u.y=_-I,a.x=k+S,a.y=_+S):(u.x=k-I,u.y=_+I,a.x=k+S,a.y=_-S):M>_?(u.x=k+I,u.y=_-I,a.x=k-S,a.y=_+S):(u.x=k+I,u.y=_+I,a.x=k-S,a.y=_-S)),R.aa(T,k)&&R.aa(_,M)&&(_>x?(b>k?(u.x=k-I,u.y=_-I,a.x=k+S):(u.x=k+I,u.y=_-I,a.x=k-S),a.y=_+S):(b>k?(u.x=k-I,u.y=_+I,a.x=k+S):(u.x=k+I,u.y=_+I,a.x=k-S),a.y=_-S)),(R.aa(T,k)&&R.aa(k,b)||R.aa(x,_)&&R.aa(_,M))&&(x=.5*(x+M),u.x=T=.5*(T+b),u.y=x,a.x=T,a.y=x),(1===y||2===y&&R.aa(h.x,this.i(0).x)&&R.aa(h.y,this.i(0).y))&&(n.x=.5*(h.x+g.x),n.y=.5*(h.y+g.y)),Vs(d,n.x-i,n.y-f,u.x-i,u.y-f,g.x-i,g.y-f),e.set(u),n.set(a),h=g}}g=h.x,h=h.y,m=this.i(this.pointsCount-1),0!==this.computeShortLength(!1)&&(m=ka(this,m.copy(),!1,ha)),Vs(d,a.x-i,a.y-f,(g=.5*(g+m.x))-i,(h=.5*(h+m.y))-f,m.x-i,m.y-f),N.free(e),N.free(n),N.free(u),N.free(a)}else for(n=3;n<e;n+=3)u=this.i(n-2),n+3>=e&&(n=e-1),a=this.i(n-1),h=this.i(n),n===e-1&&0!==this.computeShortLength(!1)&&(h=ka(this,h.copy(),!1,ha)),Vs(d,u.x-i,u.y-f,a.x-i,a.y-f,h.x-i,h.y-f);else{for((u=N.alloc()).assign(this.i(0)),(a=N.alloc()).assign(u),h=this.computeCorner(),y=1,g=0;y<e;){if(y=vf(this,u,y,1<y),m=this.i(y),y>=e-1){if(u.A(m)){if(0===g)for(y=1;y<e;)a.assign(u),oh(this,d,-i,-f,u,m=this.i(y++),n),u.assign(m)}else 0!==this.computeShortLength(!1)&&(m=ka(this,m.copy(),!1,ha)),oh(this,d,-i,-f,u,m,n);break}if(g=vf(this,m,y+1,y<e-3),y=-i,T=-f,x=m,k=this.i(g),S=n,R.w(u.y,x.y)&&R.w(x.x,k.x))if(M=Math.min(h,Math.abs(x.x-a.x)/2),M=I=Math.min(M,Math.abs(k.y-x.y)/2),R.w(M,0))oh(this,d,y,T,u,x,S),u.assign(x);else{var O=x.x,F=x.y;_=O,b=F,b=k.y>x.y?x.y+I:x.y-I,oh(this,d,y,T,u,k=N.allocAt(O=x.x>u.x?x.x-M:x.x+M,F),S),N.free(k),Fc(d,x.x+y,x.y+T,_+y,b+T),u.h(_,b)}else R.w(u.x,x.x)&&R.w(x.y,k.y)?(M=Math.min(h,Math.abs(x.y-a.y)/2),M=I=Math.min(M,Math.abs(k.x-x.x)/2),R.w(I,0)?(oh(this,d,y,T,u,x,S),u.assign(x)):(_=O=x.x,b=F=x.y,_=k.x>x.x?x.x+I:x.x-I,oh(this,d,y,T,u,k=N.allocAt(O,F=x.y>u.y?x.y-M:x.y+M),S),N.free(k),Fc(d,x.x+y,x.y+T,_+y,b+T),u.h(_,b))):(oh(this,d,y,T,u,x,S),u.assign(x));a.assign(m),y=g}N.free(u)}Tg=d}else(d=this.i(1).copy()).x-=i,d.y-=f,0!==this.computeShortLength(!0)&&(a=ka(this,a,!0,u)),0!==this.computeShortLength(!1)&&(d=ka(this,d,!1,u)),t.type=q.j,t.startX=a.x,t.startY=a.y,t.endX=d.x,t.endY=d.y;return this.Lm=!0,t},X.prototype.computeJumpLength=function(){return 10},X.prototype.rq=function(t){var e=this.layer;if(null!==e&&e.visible&&!e.isTemporary){var n=e.diagram;if(null!==n&&!n.animationManager.isTicking){var i=!1;for(n=n.layers;n.next();){var a=n.value;if(a.visible)if(a===e){i=!0;for(var u=!1,h=(a=a.Fa.m).length,d=0;d<h;d++){var f=a[d];f instanceof X&&(f===this?u=!0:u&&d_(this,f,t))}}else if(i)for(a=(u=a.Fa.m).length,h=0;h<a;h++)(d=u[h])instanceof X&&d_(this,d,t)}}}},X.prototype.usesSamePort=function(t){var e=this.pointsCount,n=t.pointsCount;if(0<e&&0<n){var i=this.i(0),a=t.i(0);if(i.Ta(a)||(e=this.i(e-1),t=t.i(n-1),e.Ta(t)||i.Ta(t)||e.Ta(a)))return!0}else if(this.fromNode===t.fromNode||this.toNode===t.toNode||this.fromNode===t.toNode||this.toNode===t.fromNode)return!0;return!1},X.prototype.isVisible=function(){if(!ht.prototype.isVisible.call(this))return!1;var t=this.containingGroup,e=!0,n=this.diagram;if(null!==n&&(e=n.isTreePathToChildren),null!==(n=this.fromNode)){if(this.isTreeLink&&e&&!n.isTreeExpanded)return!1;if(n===t)return!0;for(var i=n;null!==i;){if(i.labeledLink===this)return!0;i=i.containingGroup}if(null===(n=n.findVisibleNode())||n===t)return!1}if(null!==(n=this.toNode)){if(this.isTreeLink&&!e&&!n.isTreeExpanded)return!1;if(n===t)return!0;for(e=n;null!==e;){if(e.labeledLink===this)return!0;e=e.containingGroup}if(null===(e=n.findVisibleNode())||e===t)return!1}return!0},X.prototype.Nb=function(t){if(ht.prototype.Nb.call(this,t),null!==this.If&&this.If.mm(),null!==this.ld)for(var e=this.ld.iterator;e.next();)e.value.Nb(t)},X.prototype.computeAdjusting=function(){return this.isAvoiding&&null!==this.diagram&&this.diagram.animationManager.defaultAnimation.isAnimating?Gg:this.Ek},X.prototype.Dh=function(){return!0},Dt.Object.defineProperties(X.prototype,{fromNode:{get:function(){return this.Se},set:function(t){var e=this.Se;if(e!==t){var n=this.fromPort;null!==e&&(this.kf!==e&&vv(e,this,n),Ug(this),this.B(2)),this.Se=t,null!==t&&this.Nb(t.isVisible()),this.Mf=null,this.Ua();var i=this.diagram;null!==i&&i.Z&&i.partManager.setFromNodeForLink(this,t,e);var a=this.fromPort,u=this.fromPortChanged;if(null!==u){var h=!0;null!==i&&(h=i.Z,i.Z=!0),u(this,n,a),null!==i&&(i.Z=h)}null!==t&&(this.kf!==t&&bg(t,this,a),sh(this),this.B(1)),this.g("fromNode",e,t),su(this)}}},fromPortId:{get:function(){return this.Te},set:function(t){var e=this.Te;if(e!==t){var n=this.fromPort;null!==n&&an(n),Ug(this),this.Te=t;var i=this.fromPort;null!==i&&an(i);var a=this.diagram;if(null!==a){var u=this.data,h=a.model;null!==u&&h.Qi()&&h.Xv(u,t)}n!==i&&(this.Mf=null,this.Ua(),null!==(u=this.fromPortChanged)&&(h=!0,null!==a&&(h=a.Z,a.Z=!0),u(this,n,i),null!==a&&(a.Z=h))),sh(this),this.g("fromPortId",e,t)}}},fromPort:{get:function(){var t=this.Se;return null===t?null:t.Es(this.Te)}},fromPortChanged:{get:function(){return this.On},set:function(t){var e=this.On;e!==t&&(this.On=t,this.g("fromPortChanged",e,t))}},toNode:{get:function(){return this.kf},set:function(t){var e=this.kf;if(e!==t){var n=this.toPort;null!==e&&(this.Se!==e&&vv(e,this,n),Ug(this),this.B(2)),this.kf=t,null!==t&&this.Nb(t.isVisible()),this.Mf=null,this.Ua();var i=this.diagram;null!==i&&i.Z&&i.partManager.setToNodeForLink(this,t,e);var a=this.toPort,u=this.toPortChanged;if(null!==u){var h=!0;null!==i&&(h=i.Z,i.Z=!0),u(this,n,a),null!==i&&(i.Z=h)}null!==t&&(this.Se!==t&&bg(t,this,a),sh(this),this.B(1)),this.g("toNode",e,t),su(this)}}},toPortId:{get:function(){return this.lf},set:function(t){var e=this.lf;if(e!==t){var n=this.toPort;null!==n&&an(n),Ug(this),this.lf=t;var i=this.toPort;null!==i&&an(i);var a=this.diagram;if(null!==a){var u=this.data,h=a.model;null!==u&&h.Qi()&&h.aw(u,t)}n!==i&&(this.Mf=null,this.Ua(),null!==(u=this.toPortChanged)&&(h=!0,null!==a&&(h=a.Z,a.Z=!0),u(this,n,i),null!==a&&(a.Z=h))),sh(this),this.g("toPortId",e,t)}}},toPort:{get:function(){var t=this.kf;return null===t?null:t.Es(this.lf)}},toPortChanged:{get:function(){return this.Op},set:function(t){var e=this.Op;e!==t&&(this.Op=t,this.g("toPortChanged",e,t))}},fromSpot:{get:function(){return null!==this.P?this.P.Jg:Fi},set:function(t){this.Hc();var e=this.P.Jg;e.A(t)||(t=t.I(),this.P.Jg=t,this.g("fromSpot",e,t),(e.Kc()||t.Kc())&&null!==this.fromNode&&an(this.fromPort),this.Ua())}},fromEndSegmentLength:{get:function(){return null!==this.P?this.P.Hg:NaN},set:function(t){this.Hc();var e=this.P.Hg;e!==t&&(0>t&&me(t,">= 0",X,"fromEndSegmentLength"),this.P.Hg=t,this.g("fromEndSegmentLength",e,t),this.Ua())}},fromShortLength:{get:function(){return null!==this.P?this.P.Ig:NaN},set:function(t){this.Hc();var e=this.P.Ig;e!==t&&(this.P.Ig=t,this.cc(!0),this.g("fromShortLength",e,t))}},toSpot:{get:function(){return null!==this.P?this.P.ph:Fi},set:function(t){this.Hc();var e=this.P.ph;e.A(t)||(t=t.I(),this.P.ph=t,this.g("toSpot",e,t),(e.Kc()||t.Kc())&&null!==this.toNode&&an(this.toPort),this.Ua())}},toEndSegmentLength:{get:function(){return null!==this.P?this.P.nh:NaN},set:function(t){this.Hc();var e=this.P.nh;e!==t&&(0>t&&me(t,">= 0",X,"toEndSegmentLength"),this.P.nh=t,this.g("toEndSegmentLength",e,t),this.Ua())}},toShortLength:{get:function(){return null!==this.P?this.P.oh:NaN},set:function(t){this.Hc();var e=this.P.oh;e!==t&&(this.P.oh=t,this.cc(!0),this.g("toShortLength",e,t))}},isLabeledLink:{get:function(){return null!==this.ld&&0<this.ld.count}},labelNodes:{get:function(){return null===this.ld?Un:this.ld.iterator}},relinkableFrom:{get:function(){return 0!=(1&this.Ia)},set:function(t){var e=0!=(1&this.Ia);e!==t&&(this.Ia^=1,this.g("relinkableFrom",e,t),this.Kb())}},relinkableTo:{get:function(){return 0!=(2&this.Ia)},set:function(t){var e=0!=(2&this.Ia);e!==t&&(this.Ia^=2,this.g("relinkableTo",e,t),this.Kb())}},resegmentable:{get:function(){return 0!=(4&this.Ia)},set:function(t){var e=0!=(4&this.Ia);e!==t&&(this.Ia^=4,this.g("resegmentable",e,t),this.Kb())}},isTreeLink:{get:function(){return 0!=(8&this.Ia)},set:function(t){var e=0!=(8&this.Ia);e!==t&&(this.Ia^=8,this.g("isTreeLink",e,t),null!==this.fromNode&&Og(this.fromNode),null!==this.toNode&&Og(this.toNode))}},path:{get:function(){var t=this.nb();return t instanceof wt?t:null}},routeBounds:{get:function(){this.pg();var t=this.Gl,e=1/0,n=1/0,i=this.pointsCount;if(0===i)t.h(NaN,NaN,0,0);else{if(1===i)i=this.i(0),e=Math.min(i.x,e),n=Math.min(i.y,n),t.h(i.x,i.y,0,0);else if(2===i){i=this.i(0);var a=this.i(1);e=Math.min(i.x,a.x),n=Math.min(i.y,a.y),t.h(i.x,i.y,0,0),t.Le(a)}else if(this.computeCurve()===Ei&&3<=i&&!this.isOrthogonal)if(a=this.i(0),t.h(e=a.x,n=a.y,0,0),3===i){i=this.i(1),e=Math.min(i.x,e),n=Math.min(i.y,n);var u=this.i(2);e=Math.min(u.x,e),n=Math.min(u.y,n),R.cm(a.x,a.y,i.x,i.y,i.x,i.y,u.x,u.y,.5,t)}else for(u=3;u<i;u+=3){var h=this.i(u-2);u+3>=i&&(u=i-1);var d=this.i(u-1),f=this.i(u);R.cm(a.x,a.y,h.x,h.y,d.x,d.y,f.x,f.y,.5,t),e=Math.min(f.x,e),n=Math.min(f.y,n),a=f}else for(a=this.i(0),u=this.i(1),e=Math.min(a.x,u.x),n=Math.min(a.y,u.y),t.h(a.x,a.y,0,0),t.Le(u),a=2;a<i;a++)u=this.i(a),e=Math.min(u.x,e),n=Math.min(u.y,n),t.Le(u);this.Ru.h(e-t.x,n-t.y)}return t}},midPoint:{get:function(){return this.pg(),this.computeMidPoint(new N)}},midAngle:{get:function(){return this.pg(),this.computeMidAngle()}},flattenedLengths:{get:function(){if(null===this.qr){this.rd||Tv(this);for(var t=this.qr=[],e=this.pointsCount,n=0;n<e-1;n++){var i=this.i(n),a=this.i(n+1);R.aa(i.x,a.x)?0>(i=a.y-i.y)&&(i=-i):R.aa(i.y,a.y)?0>(i=a.x-i.x)&&(i=-i):i=Math.sqrt(i.tf(a)),t.push(i)}}return this.qr}},flattenedTotalLength:{get:function(){var t=this.Rt;if(isNaN(t)){for(var e=this.flattenedLengths,n=e.length,i=t=0;i<n;i++)t+=e[i];this.Rt=t}return t}},points:{get:function(){return this.Bb},set:function(t){var e=this.Bb;if(e!==t){var n=null;if(Array.isArray(t)){var i=t.length%2==0;if(i)for(var a=0;a<t.length;a++)if("number"!=typeof t[a]||isNaN(t[a])){i=!1;break}if(i)for(n=new et,i=0;i<t.length/2;i++)a=new N(t[2*i],t[2*i+1]).freeze(),n.add(a);else{for(i=!0,a=0;a<t.length;a++){var u=t[a];if(!Et(u)||"number"!=typeof u.x||isNaN(u.x)||"number"!=typeof u.y||isNaN(u.y)){i=!1;break}}if(i)for(n=new et,i=0;i<t.length;i++)n.add(new N((a=t[i]).x,a.y).freeze())}}else if(t instanceof et)for(n=t.copy(),t=n.iterator;t.next();)t.value.freeze();else z("Link.points value is not an instance of List or Array: "+t);n.freeze(),this.Bb=n,this.cc(!0),Tv(this),null!==(t=this.diagram)&&(t.Pi||t.undoManager.isUndoingRedoing||t.Ts.add(this),t.animationManager.rb&&(t=t.animationManager,this.cf=n,t.Il.add(this))),this.g("points",e,n)}}},pointsCount:{get:function(){return this.Bb.count}},rd:{get:function(){return 0!=(16&this.Ia)},set:function(t){0!=(16&this.Ia)!==t&&(this.Ia^=16)}},suspendsRouting:{get:function(){return 0!=(32&this.Ia)},set:function(t){0!=(32&this.Ia)!==t&&(this.Ia^=32)}},computingPoints:{get:function(){return 0!=(64&this.Ia)},set:function(t){0!=(64&this.Ia)!==t&&(this.Ia^=64)}},defaultFromPoint:{get:function(){return this.o},set:function(t){this.o=t.copy()}},defaultToPoint:{get:function(){return this.C},set:function(t){this.C=t.copy()}},isOrthogonal:{get:function(){return 2==(2&this.Oj.value)}},isAvoiding:{get:function(){return 4==(4&this.Oj.value)}},Lm:{get:function(){return 0!=(128&this.Ia)},set:function(t){0!=(128&this.Ia)!==t&&(this.Ia^=128)}},geometry:{get:function(){return this.Lm||(this.pg(),this.ma=this.makeGeometry()),this.ma}},firstPickIndex:{get:function(){return 2>=this.pointsCount?0:this.isOrthogonal||!Vc(this.computeSpot(!0))?1:0}},lastPickIndex:{get:function(){var t=this.pointsCount;return 0===t?0:2>=t?t-1:this.isOrthogonal||!Vc(this.computeSpot(!1))?t-2:t-1}},adjusting:{get:function(){return this.Ek},set:function(t){var e=this.Ek;e!==t&&(this.Ek=t,this.g("adjusting",e,t))}},corner:{get:function(){return this.rn},set:function(t){var e=this.rn;e!==t&&(this.rn=t,this.cc(!0),this.g("corner",e,t))}},curve:{get:function(){return this.tn},set:function(t){var e=this.tn;e!==t&&(this.tn=t,this.Ua(),this.cc(!0),ww(this,e===Na||e===Bc||t===Na||t===Bc),this.g("curve",e,t))}},curviness:{get:function(){return this.un},set:function(t){var e=this.un;e!==t&&(this.un=t,this.Ua(),this.cc(!1),this.g("curviness",e,t))}},routing:{get:function(){return this.Oj},set:function(t){var e=this.Oj;e!==t&&(this.Oj=t,this.Mf=null,this.Ua(),ww(this,2==(2&e.value)||2==(2&t.value)),this.g("routing",e,t))}},smoothness:{get:function(){return this.Dp},set:function(t){var e=this.Dp;e!==t&&(this.Dp=t,this.cc(!0),this.g("smoothness",e,t))}},key:{get:function(){var t=this.diagram;if(null!==t&&t.model.Qi())return t.model.mc(this.data)}}}),X.prototype.invalidateOtherJumpOvers=X.prototype.rq,X.prototype.findClosestSegment=X.prototype.Kz,X.prototype.updateRoute=X.prototype.pg,X.prototype.invalidateRoute=X.prototype.Ua,X.prototype.rollbackRoute=X.prototype.Tv,X.prototype.commitRoute=X.prototype.rf,X.prototype.startRoute=X.prototype.Hh,X.prototype.clearPoints=X.prototype.ak,X.prototype.removePoint=X.prototype.Rv,X.prototype.addPointAt=X.prototype.pf,X.prototype.addPoint=X.prototype.ce,X.prototype.insertPointAt=X.prototype.l,X.prototype.insertPoint=X.prototype.pA,X.prototype.setPointAt=X.prototype.L,X.prototype.setPoint=X.prototype.Mc,X.prototype.getPoint=X.prototype.i,X.prototype.getOtherPort=X.prototype.gA,X.prototype.getOtherNode=X.prototype.nq;var ah=null,au=null,Hg=new J(X,"Normal",1),Mw=new J(X,"Orthogonal",2),_w=new J(X,"AvoidsNodes",6),Av=new J(X,"AvoidsNodesStraight",7),pn=new J(X,"None",0),Ei=new J(X,"Bezier",9),Na=new J(X,"JumpGap",10),Bc=new J(X,"JumpOver",11),Gg=new J(X,"End",17),Uc=new J(X,"Scale",18),xf=new J(X,"Stretch",19),lh=new J(X,"OrientAlong",21),ul=new J(X,"OrientPlus90",22),wf=new J(X,"OrientMinus90",23),Mf=new J(X,"OrientOpposite",24),_f=new J(X,"OrientUpright",25),Hc=new J(X,"OrientPlus90Upright",26),Gc=new J(X,"OrientMinus90Upright",27),zg=new J(X,"OrientUpright45",28),Yg=16,Cw=14,Cf=8;function Df(t,e,n,i){xn(this),this.re=this.wr=!1,this.Ws=t,this.uy=e,this.Iv=n,this.vy=i,this.links=[]}function Pa(t){xn(this),this.Fy=this.group=null,this.Ms=!0,this.abort=!1,this.xd=this.wd=1,this.Bo=this.Ao=-1,this.dc=t.width,this.ec=t.height,this.Qb=null,this.Ai=this.zi=0,this.it=11,this.my=this.ly=22}function uh(t,e,n){return t.wd<=e&&e<=t.Ao&&t.xd<=n&&n<=t.Bo}function ls(t,e,n){return uh(t,e,n)?(e-=t.wd,n-=t.xd,t.Qb[0|(e/=t.dc)][0|(n/=t.ec)]):Wg}function Dw(t){if(null!==t.Qb)for(var e=0;e<=t.zi;e++)for(var n=t.Qb[e],i=0;i<=t.Ai;i++)n[i]>=Aa&&(n[i]=Wg)}function kr(t,e,n,i,a,u,h,d,f){if(!(e<u||e>h||n<d||n>f)){var g=0|e,m=0|n,y=t.Qb[g][m];if(y>=Aa&&y<hh)for(a?m+=i:g+=i,y+=1;u<=g&&g<=h&&d<=m&&m<=f&&!(y>=t.Qb[g][m]);)t.Qb[g][m]=y,y+=1,a?m+=i:g+=i;if(g=a?m:g,a)if(0<i)for(n+=i;n<g;n+=i)kr(t,e,n,1,!a,u,h,d,f),kr(t,e,n,-1,!a,u,h,d,f);else for(n+=i;n>g;n+=i)kr(t,e,n,1,!a,u,h,d,f),kr(t,e,n,-1,!a,u,h,d,f);else if(0<i)for(e+=i;e<g;e+=i)kr(t,e,n,1,!a,u,h,d,f),kr(t,e,n,-1,!a,u,h,d,f);else for(e+=i;e>g;e+=i)kr(t,e,n,1,!a,u,h,d,f),kr(t,e,n,-1,!a,u,h,d,f)}}function Xg(t,e,n,i,a,u,h,d,f){var g=Ti,m=Aa;for(t.Qb[e|=0][n|=0]=m;g===Ti&&e>u&&e<h&&n>d&&n<f;)t.Qb[e][n]=m+=1,a?n+=i:e+=i,g=t.Qb[e][n]}function $g(t,e,n,i,a,u,h,d,f){var g=Ti,m=hh;for(t.Qb[e|=0][n|=0]=m;g===Ti&&e>u&&e<h&&n>d&&n<f;)t.Qb[e][n]=m,a?n+=i:e+=i,g=t.Qb[e][n]}function Sw(t,e,n,i,a,u,h){if(null!==t.Qb){t.abort=!1;var d=e.x,f=e.y;if(uh(t,d,f)){d-=t.wd,d/=t.dc,f-=t.xd,f/=t.ec;var g=i.x,m=i.y;if(uh(t,g,m))if(g-=t.wd,g/=t.dc,m-=t.xd,m/=t.ec,1>=Math.abs(d-g)&&1>=Math.abs(f-m))t.abort=!0;else{var y=u.x;i=u.y,e=u.x+u.width;var x=u.y+u.height;y-=t.wd,y/=t.dc,i-=t.xd,i/=t.ec,e-=t.wd,e/=t.dc,x-=t.xd,x/=t.ec,u=Math.max(0,Math.min(t.zi,0|y)),e=Math.min(t.zi,Math.max(0,0|e)),y=Math.max(0,Math.min(t.Ai,0|i)),x=Math.min(t.Ai,Math.max(0,0|x)),g|=0,m|=0;var _=0===n||90===n?1:-1;if(n=90===n||270===n,(i=t.Qb)[d|=0][f|=0]===Ti?(Xg(t,d,f,_,n,u,e,y,x),Xg(t,d,f,1,!n,u,e,y,x),Xg(t,d,f,-1,!n,u,e,y,x)):Xg(t,d,f,_,n,d,f,d,f),i[g][m]===Ti?($g(t,g,m,0===a||90===a?1:-1,90===a||270===a,u,e,y,x),$g(t,g,m,1,!(90===a||270===a),u,e,y,x),$g(t,g,m,-1,!(90===a||270===a),u,e,y,x)):$g(t,g,m,_,n,g,m,g,m),n=ye(),h&&Ew(t,g,m,a,d,f,n))for((n[0]!==g||n[1]!==m)&&(n.unshift(m),n.unshift(g)),(n[n.length-2]!==d||n[n.length-1]!==f)&&(n.push(d),n.push(f)),t=Aa,i[a=n[n.length-2]][h=n[n.length-1]]=t++,u=n.length-4;0<=u;u-=2)for(a=n[u+2],h=n[u+3],e=n[u],g=n[u+1];e>a?a++:e<a?a--:g>h?h++:g<h&&h--,i[a][h]=t++,a!==e||h!==g;);else kr(t,d,f,1,!1,u,e,y,x),kr(t,d,f,-1,!1,u,e,y,x),kr(t,d,f,1,!0,u,e,y,x),kr(t,d,f,-1,!0,u,e,y,x);oe(n)}}}}function Ew(t,e,n,i,a,u,h){for(var d=t.Qb,f=e,g=n;;){if(f===a&&g===u)return!0;var m=f,y=g;if(0===i){if(!(m<a))break;m++}else if(90===i){if(!(y<u))break;y++}else if(180===i){if(!(m>a))break;m--}else{if(!(y>u))break;y--}var x=d[m][y];if(0===x||x===Kg)break;f=m,g=y}for(;;){if(m=i,y=f,x=g,0===i?x<u?(m=90,x++):x>u&&(m=270,x--):90===i?y<a?(m=0,y++):y>a&&(m=180,y--):180===i?x<u?(m=90,x++):x>u&&(m=270,x--):y<a?(m=0,y++):y>a&&(m=180,y--),y=d[y][x],m!==i&&0!==y&&y!==Kg){if(h.push(f),h.push(g),Ew(t,f,g,m,a,u,h))return!0;h.pop(),h.pop()}if(d[f][g]=Kg,0===i){if(f===e)return!1;f--}else if(90===i){if(g===n)return!1;g--}else if(180===i){if(f===e)return!1;f++}else{if(g===n)return!1;g++}}}X.className="Link",X.Normal=Hg,X.Orthogonal=Mw,X.AvoidsNodes=_w,X.AvoidsNodesStraight=Av,X.None=pn,X.Bezier=Ei,X.JumpGap=Na,X.JumpOver=Bc,X.End=Gg,X.Scale=Uc,X.Stretch=xf,X.OrientAlong=lh,X.OrientPlus90=ul,X.OrientMinus90=wf,X.OrientOpposite=Mf,X.OrientUpright=_f,X.OrientPlus90Upright=Hc,X.OrientMinus90Upright=Gc,X.OrientUpright45=zg,X.EndSegmentStep=8,X.CurvinessStart=Yg,X.SpacingMin=Cw,X.OrthoShortCut=Cf,Df.prototype.mm=function(){if(!this.wr){var t=this.links;0<t.length&&null!==(t=t[0].diagram)&&(t.Qw.add(this),this.re=t.undoManager.isUndoingRedoing)}this.wr=!0},Df.prototype.kw=function(){if(this.wr){this.wr=!1;var t=this.links;if(0<t.length){var e=t[0],n=e.diagram;n=null===n||n.Pi&&!this.re,this.re=!1,e.arrangeBundledLinks(t,n),1===t.length&&(e.If=null,t.length=0)}0===t.length&&(t=this.Ws,null!==this&&null!==t.Pe&&t.Pe.remove(this),t=this.Iv,null!==this&&null!==t.Pe&&t.Pe.remove(this))}},Df.className="LinkBundle",Pa.prototype.initialize=function(t){if(!(0>=t.width||0>=t.height)){var e=t.y,n=t.x+t.width,i=t.y+t.height;if(this.wd=Math.floor((t.x-this.dc)/this.dc)*this.dc,this.xd=Math.floor((e-this.ec)/this.ec)*this.ec,this.Ao=Math.ceil((n+2*this.dc)/this.dc)*this.dc,this.Bo=Math.ceil((i+2*this.ec)/this.ec)*this.ec,t=1+(0|Math.ceil((this.Ao-this.wd)/this.dc)),e=1+(0|Math.ceil((this.Bo-this.xd)/this.ec)),null===this.Qb||this.zi<t-1||this.Ai<e-1){for(n=[],i=0;i<=t;i++)n[i]=new Uint32Array(e);this.Qb=n,this.zi=t-1,this.Ai=e-1}if(t=Wg,null!==this.Qb)for(e=0;e<=this.zi;e++)if((n=this.Qb[e]).fill)n.fill(t);else for(i=0;i<=this.Ai;i++)n[i]=t}},Pa.prototype.qk=function(t,e,n,i){if(t>this.Ao||t+n<this.wd||e>this.Bo||e+i<this.xd)return!0;t=(t-this.wd)/this.dc|0,e=(e-this.xd)/this.ec|0,n=Math.max(0,n)/this.dc+1|0;var a=Math.max(0,i)/this.ec+1|0;if(0>t&&(n+=t,t=0),0>e&&(a+=e,e=0),0>n||0>a)return!0;for(i=0|Math.min(t+n-1,this.zi),n=0|Math.min(e+a-1,this.Ai);t<=i;t++){a=this.Qb[t];for(var u=e;u<=n;u++)if(a[u]===Ti)return!1}return!0},Dt.Object.defineProperties(Pa.prototype,{bounds:{get:function(){return new B(this.wd,this.xd,this.Ao-this.wd,this.Bo-this.xd)}},bq:{get:function(){return this.dc},set:function(t){0<t&&t!==this.dc&&(this.dc=t,this.initialize(this.bounds))}},aq:{get:function(){return this.ec},set:function(t){0<t&&t!==this.ec&&(this.ec=t,this.initialize(this.bounds))}}});var Ti=0,Aa=1,hh=999999,Wg=hh+1,Kg=hh+2;function lu(){xn(this),this.port=this.node=null,this.ee=[],this.uq=!1}function f_(t,e,n,i){switch(e=e.offsetY){case 8:return 90;case 2:return 180;case 1:return 270;case 4:return 0}switch(e){case 9:return 180<n?270:90;case 6:return 90<n&&270>=n?180:0}switch(t=180*Math.atan2(t.height,t.width)/Math.PI,e){case 3:return n>t&&n<=180+t?180:270;case 5:return n>180-t&&n<=360-t?270:0;case 12:return n>t&&n<=180+t?90:0;case 10:return n>180-t&&n<=360-t?180:90;case 7:return 90<n&&n<=180+t?180:n>180+t&&n<=360-t?270:0;case 13:return 180<n&&n<=360-t?270:n>t&&180>=n?90:0;case 14:return n>t&&n<=180-t?90:n>180-t&&270>=n?180:0;case 11:return n>180-t&&n<=180+t?180:n>180+t?270:90}return i&&15!==e&&0>(n-=15)&&(n+=360),n>t&&n<180-t?90:n>=180-t&&n<=180+t?180:n>180+t&&n<360-t?270:0}function Tw(t,e){var n=t.ee;if(0===n.length){t:if(!t.uq){n=t.uq,t.uq=!0;var i=null,a=t.node,u=a instanceof vt?a:null;if(null===u||u.isSubGraphExpanded)var h=a.isTreeExpanded?a.findLinksConnected(t.port.portId):a.Sx();else{if(!u.actualBounds.u()){t.uq=n;break t}h=(i=u).ov()}u=t.ee.length=0;var d=t.port.da(zn,N.alloc()),f=t.port.da(ks,N.alloc());for((a=B.allocAt(d.x,d.y,0,0)).Le(f),N.free(d),N.free(f),d=N.allocAt(a.x+a.width/2,a.y+a.height/2),f=t.port.Li(),h=h.iterator;h.next();){var g=h.value;if(g.isVisible()&&g.fromPort!==g.toPort){var m=g.fromPort===t.port||null!==g.fromNode&&g.fromNode.Fd(i),y=g.computeSpot(m,t.port);if(y.Kc()){var x=m?g.toPort:g.fromPort;if(null!==x&&null!==(m=x.part)){var _=m.findVisibleNode();null!==_&&_!==m&&(x=(m=_).port),m=g.computeOtherPoint(m,x),x=d.Oa(x.da(Wt)),x+=(d.Oa(m)-x)/360,0>(x-=f)?x+=360:360<=x&&(x-=360),0===(y=f_(a,y,x,g.isOrthogonal))?(y=4,180<x&&(x-=360)):90===y?(y=8,270<x&&(x-=360)):180===y?y=2:(y=1,90>x&&(x+=360)),void 0===(_=t.ee[u])?(_=new Iv(g,x,y),t.ee[u]=_):(_.link=g,_.angle=x,_.xc=y),_.Kv.set(m),u++}}}}for(N.free(d),t.ee.sort(lu.prototype.j),f=t.ee.length,i=-1,u=d=0;u<f;u++)void 0!==(h=t.ee[u])&&(h.xc!==i&&(i=h.xc,d=0),h.oq=d,d++);for(i=-1,d=0,u=f-1;0<=u;u--)void 0!==(f=t.ee[u])&&(f.xc!==i&&(i=f.xc,d=f.oq+1),f.fm=d);if(u=t.ee,y=t.port,i=t.node.portSpreading,d=N.alloc(),f=N.alloc(),h=N.alloc(),g=N.alloc(),y.da(zn,d),y.da(Rr,f),y.da(ks,h),y.da(Zh,g),_=x=m=y=0,i===_v)for(var M=0;M<u.length;M++){var S=u[M];if(null!==S){var T=S.link.computeThickness();switch(S.xc){case 8:x+=T;break;case 2:_+=T;break;case 1:y+=T;break;default:m+=T}}}var k=M=0,b=1,I=S=0;for(T=0;T<u.length;T++){var O=u[T];if(null!==O){if(M!==O.xc){switch(M=O.xc){case 8:var F=h;k=g;break;case 2:F=g,k=d;break;case 1:F=d,k=f;break;default:F=f,k=h}switch(S=k.x-F.x,I=k.y-F.y,M){case 8:x>Math.abs(S)?(b=Math.abs(S)/x,x=Math.abs(S)):b=1;break;case 2:_>Math.abs(I)?(b=Math.abs(I)/_,_=Math.abs(I)):b=1;break;case 1:y>Math.abs(S)?(b=Math.abs(S)/y,y=Math.abs(S)):b=1;break;default:m>Math.abs(I)?(b=Math.abs(I)/m,m=Math.abs(I)):b=1}k=0}var H=O.tq;if(i===_v){switch(O=O.link.computeThickness(),O*=b,H.set(F),M){case 8:H.x=F.x+S/2+x/2-k-O/2;break;case 2:H.y=F.y+I/2+_/2-k-O/2;break;case 1:H.x=F.x+S/2-y/2+k+O/2;break;default:H.y=F.y+I/2-m/2+k+O/2}k+=O}else{var W=.5;i===Lg&&(W=(O.oq+1)/(O.fm+1)),H.x=F.x+S*W,H.y=F.y+I*W}}}for(N.free(d),N.free(f),N.free(h),N.free(g),F=t.ee,u=0;u<F.length;u++)null!==(i=F[u])&&(i.mv=t.computeEndSegmentLength(i));t.uq=n,B.free(a)}n=t.ee}for(t=0;t<n.length;t++)if(null!==(a=n[t])&&a.link===e)return a;return null}function Iv(t,e,n){this.link=t,this.angle=e,this.xc=n,this.Kv=new N,this.fm=this.oq=0,this.tq=new N,this.mv=0}function Sf(){this.ph=this.Jg=Fi,this.oh=this.Ig=this.nh=this.Hg=NaN,this.Mp=this.Mn=null,this.Np=this.Nn=1/0}function Rt(t){xn(this),this.o=this.F=null,this.Zh=this.ho=!0,this.no=!1,this.an=new N(0,0).freeze(),this.ko=!0,this.en=this.jo=null,this.mo=!1,this.j=null,this.C=0,this.Co=this.Tp=null,this.us=!1,this.fg=this.Qj=null,this.ls=!1,t&&Object.assign(this,t)}function uu(t,e,n,i,a,u,h,d){for(n=n.iterator;n.next();){var f=n.value;i&&!f.isTopLevel||null!==a&&!a(f)||!f.canLayout()||(u&&f instanceof Q?f.isLinkLabel||(f instanceof vt&&null===f.layout?uu(t,e,f.memberParts,!1,a,u,h,d):(zc(f),e.add(f))):h&&f instanceof X?e.add(f):!d||!f.Jc()||f instanceof Q||(zc(f),e.add(f)))}}function zc(t){var e=t.actualBounds;(0===e.width||0===e.height||isNaN(e.width)||isNaN(e.height))&&t.Sa()}function Zg(t,e){if(null!==t.workerStateChanged){var n={key:t.group?t.group.key:null};void 0!==e&&(n.time=e),null!==t.Qj&&(n.running=kw(t.Qj)),null!==t.fg&&(n.waiting=kw(t.fg)),t.workerStateChanged(n,t)}}function kw(t){return{vertexes:t.vertexes.count,edges:t.edges.count}}function bv(t,e){var n=Jg(t);if(!n)throw Error("Unknown Layout class: "+t);if(e)for(var i in e)n[i]=e[i]}function Jg(t){var e=null;if("function"==typeof t){if(!(e=ch.get(t))){var n=aa(t);(e=ch.get(n))||((e=new oS).iv=t,e.name=n,e.j=t.name,e.gy=p_,ch.set(n,e),ch.set(t,e),ch.set(t.name,e))}}else"string"==typeof t&&(e=ch.get(t));return e}function Qg(t,e){t.us=!0;var n=Jg(t.constructor),i=Nw(t,e,!0);i._GoJS="_GoJS",n.Me.postMessage(i),n.om.set(Jt(t),t),t.Qj=e}function Nw(t,e,n){t.onNetworkSerialization(1,n,e,null);var i={};t.serializeLayoutProperties(i,n);var a=[];e.vertexes.each(function(h){var d={};h.serializeVertexProperties(d,n),a.push(d)});var u=[];return e.edges.each(function(h){var d={};h.serializeEdgeProperties(d,n),u.push(d)}),i={id:n?Jt(t):t.id,layout:aa(t.constructor),p:i,dB:a,Iz:u},t.onNetworkSerialization(2,n,e,i),i}function Ov(t,e,n){n&&(t.id=e.id);var i=t.diagram,a=t.createNetwork();t.onNetworkSerialization(3,n,a,e);var u=e.dB,h=new xt;u&&u.forEach(function(g){var m=null;null===g.key||null===i||n||(m=i.Eb(g.key)),null!==m?m=a.Zj(m):(m=a.createVertex(),a.ig(m)),n&&null!==g.key&&(m.data={ci:g.key}),h.set(g.id,m)});var d=e.Iz,f=new xt;return d&&d.forEach(function(g){var m=null;null===g.key||null===i||n||(m=i.findLinkForKey(g.key));var y=a.createEdge();a.am(y),y.link=m,n&&null!==g.key&&(y.data={ci:g.key}),f.set(g.id,y)}),u&&u.forEach(function(g){var m=h.get(g.id);m&&m.deserializeVertexProperties(g,h,f,n)}),d&&d.forEach(function(g){var m=f.get(g.id);m&&m.deserializeEdgeProperties(g,h,f,n)}),t.deserializeLayoutProperties(e.p,h,f,n,a),t.onNetworkSerialization(4,n,a,e),a}Pa.className="PositionArray",lu.prototype.toString=function(){for(var t=this.ee,e=this.node.toString()+" "+t.length.toString()+":",n=0;n<t.length;n++){var i=t[n];null!==i&&(e+="\n  "+i.toString())}return e},lu.prototype.mm=function(){this.ee.length=0},lu.prototype.j=function(t,e){return t===e?0:null===t?-1:null===e?1:t.xc<e.xc?-1:t.xc>e.xc?1:t.angle<e.angle?-1:t.angle>e.angle?1:0},lu.prototype.computeEndSegmentLength=function(t){var e=t.link,n=e.computeEndSegmentLength(this.node,this.port,An,e.fromPort===this.port),i=t.oq;if(0>i)return n;var a=t.fm;if(1>=a||!e.isOrthogonal)return n;e=t.Kv;var u=t.tq;return(2===t.xc||8===t.xc)&&(i=a-1-i),((t=2===t.xc||4===t.xc)?e.y<u.y:e.x<u.x)?n+8*i:(t?e.y===u.y:e.x===u.x)?n:n+8*(a-1-i)},lu.className="Knot",Iv.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.xc.toString()+":"+this.oq.toString()+"/"+this.fm.toString()+" "+this.tq.toString()+" "+this.mv.toString()+" "+this.Kv.toString()},Iv.className="LinkInfo",Sf.prototype.copy=function(){var t=new Sf;return t.Jg=this.Jg.I(),t.ph=this.ph.I(),t.Hg=this.Hg,t.nh=this.nh,t.Ig=this.Ig,t.oh=this.oh,t.Mn=this.Mn,t.Mp=this.Mp,t.Nn=this.Nn,t.Np=this.Np,t},Sf.className="LinkSettings",Rt.prototype.cloneProtected=function(t){t.ho=this.ho,t.Zh=this.Zh,t.no=this.no,t.an.assign(this.an),t.ko=this.ko,t.jo=this.jo,t.en=this.en,t.mo=!0,t.Co=this.Co,t.Tp=this.Tp},Rt.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},Rt.prototype.serializeLayoutProperties=function(t){t.arrangementOrigin={x:this.arrangementOrigin.x,y:this.arrangementOrigin.y},t.isRouting=this.isRouting},Rt.prototype.deserializeLayoutProperties=function(t){null!==t&&(this.arrangementOrigin=new N(t.arrangementOrigin.x,t.arrangementOrigin.y),this.isRouting=t.isRouting)},Rt.prototype.gb=function(){},Rt.prototype.toString=function(){var t=aa(this.constructor);return t+="(",null!==this.group&&(t+=" in "+this.group),null!==this.diagram&&(t+=" for "+this.diagram),t+")"},Rt.prototype.B=function(){if(this.isValidLayout){var t=this.diagram;if(null!==t&&!t.undoManager.isUndoingRedoing){var e=t.animationManager;!e.isTicking&&(e.defaultAnimation.isAnimating&&e.nc(),this.isOngoing&&t.Pi||this.isInitial&&!t.Pi)&&(this.isValidLayout=!1,t.Fb())}}},Rt.prototype.createNetwork=function(){return new te(this)},Rt.prototype.makeNetwork=function(t){var e=this.createNetwork();return t instanceof j?(e.hg(t.nodes,!0),e.hg(t.links,!0)):e.hg(t instanceof vt?t.memberParts:t.iterator),e},Rt.prototype.updateParts=function(){if(this.isValidLayout=!0,!this.workerLayout()){var t=this.diagram;if(null===t&&null!==this.network)for(var e=this.network.vertexes.iterator;e.next();){var n=e.value.node;if(null!==n&&null!==(t=n.diagram))break}try{null!==t&&t.wa("Layout"),this.commitLayout()}finally{null!==t&&t.Xa("Layout")}}},Rt.prototype.commitLayout=function(){if(null!==this.network){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();if(this.isRouting)for(t=this.network.edges.iterator;t.next();)t.value.commit()}},Rt.prototype.doLayout=function(t){var e=new K;t instanceof j?(uu(this,e,t.nodes,!0,this.Fh,!0,!1,!0),uu(this,e,t.parts,!0,this.Fh,!0,!1,!0)):t instanceof vt?uu(this,e,t.memberParts,!1,this.Fh,!0,!1,!0):e.addAll(t.iterator),0<e.count&&(null!==(t=this.diagram)&&t.wa("Layout"),this.doMinimalNoNetworkLayout(e),null!==t&&t.Xa("Layout")),this.isValidLayout=!0},Rt.prototype.doMinimalNoNetworkLayout=function(t){var e=Math.ceil(Math.sqrt(t.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var n=this.arrangementOrigin.x,i=n,a=this.arrangementOrigin.y,u=0,h=0;for(t=t.iterator;t.next();){var d=t.value;zc(d);var f=d.measuredBounds,g=f.width;f=f.height,d.moveTo(i,a),d instanceof vt&&(d.Fh=!1),i+=Math.max(g,50)+20,h=Math.max(h,Math.max(f,50)),u>=e-1?(u=0,i=n,a+=h+20,h=0):u++}},Rt.prototype.doMinimalNetworkLayout=function(){var t=Math.ceil(Math.sqrt(this.network.vertexes.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);for(var e=this.arrangementOrigin.x,n=e,i=this.arrangementOrigin.y,a=0,u=0,h=this.network.vertexes.iterator;h.next();){var d=h.value.node;if(!(null===d||d instanceof X)&&(zc(d),this.Fh(d))){var f=d.measuredBounds,g=f.width;f=f.height,d.moveTo(n,i),d instanceof vt&&(d.Fh=!1),n+=Math.max(g,50)+20,u=Math.max(u,Math.max(f,50)),a>=t-1?(a=0,n=e,i+=u+20,u=0):a++}}},Rt.prototype.Fh=function(t){return!(t.location.u()&&!(t instanceof vt&&t.Fh))},Rt.prototype.Ni=function(t,e){var n=this.boundsComputation;return null!==n?(e||(e=new B),n(t,this,e)):e?(e.set(t.actualBounds),e):t.actualBounds},Rt.prototype.Hx=function(t){var e=new K;return t instanceof j?(uu(this,e,t.nodes,!0,null,!0,!0,!0),uu(this,e,t.links,!0,null,!0,!0,!0),uu(this,e,t.parts,!0,null,!0,!0,!0)):uu(this,e,t instanceof vt?t.memberParts:t.iterator,!1,null,!0,!0,!0),e},Rt.prototype.initialOrigin=function(t){var e=this.group;if(null!==e){var n=e.position.copy();return(isNaN(n.x)||isNaN(n.y))&&n.set(t),null!==(e=e.placeholder)&&(n=e.da(zn),(isNaN(n.x)||isNaN(n.y))&&n.set(t),n.x+=(t=e.padding).left,n.y+=t.top),n}return t},Rt.prototype.mayUseWorker=function(){return!!this.mayUseWorkerFunction&&this.mayUseWorkerFunction(this)},Rt.prototype.workerLayout=function(){return!1},Rt.prototype.qz=function(){var t=Jg(this.constructor);t&&(null!==t.Me&&t.Me.terminate(),t.Me=null,t.om.iteratorValues.each(function(e){e.us=!1,e.Qj=null,e.fg=null,e.ls=!1,Zg(e)}),t.om.clear())},Rt.prototype.jw=function(){if("undefined"==typeof Worker||!us||"undefined"==typeof self||void 0!==self.DedicatedWorkerGlobalScope)return!1;if(!this.mayUseWorker())return this.us&&(this.ls=!0,this.fg=this.Qj=null,Zg(this)),!1;var t=Jg(this.constructor);return null!==t&&(null===t.Me&&(t.Me=new Worker(us),t.Me.onerror=function(e){e.preventDefault(),Oi("Worker Error at: "+e.filename+" "+e.lineno+" "+e.colno+"\n  "+e.message)},t.Me.j=function(e){Oi("Worker serialization error: "+e)},t.Me.onmessage=function(e){var n=e.data;if("_GoJS"===n._GoJS)if(n.version&&j.version&&n.version!==j.version)Oi("Failure: GoJS v"+j.version+"  Worker v"+n.version);else if(e=t.om.get(n.id)){if(t.om.remove(n.id),e.us=!1,e.Qj=null,e.ls)e.ls=!1,e.fg=null;else{var i=Ov(e,n,!1);e.network=i,e.updateParts(),e.network=null,e.isValidLayout=!0}if(Zg(e,n.time),null!==(n=e.fg))e.fg=null;else for(i=t.om.iteratorValues;i.next();){var a=i.value;if(null!==(n=a.fg)){a.fg=null;break}}null!==n&&Qg(e,n)}},t.Me.postMessage({_GoJS:"_GoJS",url:t.gy}),Array.isArray(t.scripts)&&t.scripts.forEach(function(e){t.Me.postMessage({_GoJS:"_GoJS",url:e})}),t.Me.postMessage({_GoJS:"_GoJS",version:-1})),null!==this.Qj?this.fg=this.network:Qg(this,this.network),Zg(this),this.doMinimalNetworkLayout(),this.network=null,this.isValidLayout=!0)},Rt.prototype.onNetworkSerialization=function(){},Dt.Object.defineProperties(Rt.prototype,{diagram:{get:function(){return this.F},set:function(t){this.F=t}},group:{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t,null!==t&&(this.F=t.diagram))}},isOngoing:{get:function(){return this.ho},set:function(t){this.ho!==t&&(this.ho=t)}},isInitial:{get:function(){return this.Zh},set:function(t){this.Zh=t,t||(this.mo=!0)}},isViewportSized:{get:function(){return this.no},set:function(t){this.no!==t&&(this.no=t)&&this.B()}},isRouting:{get:function(){return this.ko},set:function(t){this.ko!==t&&(this.ko=t)}},isRealtime:{get:function(){return this.jo},set:function(t){this.jo!==t&&(this.jo=t)}},isValidLayout:{get:function(){return this.mo},set:function(t){this.mo!==t&&(this.mo=t,t||null!==(t=this.diagram)&&(t.Nh=!0))}},network:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,null!==t&&(t.layout=this))}},boundsComputation:{get:function(){return this.en},set:function(t){this.en!==t&&(this.en=t,this.B())}},arrangementOrigin:{get:function(){return this.an},set:function(t){this.an.A(t)||(this.an.assign(t),this.B())}},id:{get:function(){return this.C},set:function(t){this.C=t}},mayUseWorkerFunction:{get:function(){return this.Co},set:function(t){this.Co!==t&&(this.Co=t)}},workerStateChanged:{get:function(){return this.Tp},set:function(t){this.Tp!==t&&(this.Tp=t)}}}),Rt.prototype.useWorker=Rt.prototype.jw,Rt.declareWorkerLayout=bv,Rt.prototype.cancelWorker=Rt.prototype.qz,Rt.prototype.collectParts=Rt.prototype.Hx,Rt.prototype.getLayoutBounds=Rt.prototype.Ni,Rt.prototype.invalidateLayout=Rt.prototype.B;var ch=new xt,p_="object"==typeof dt.document&&dt.document.currentScript?dt.document.currentScript.src:"",us="undefined"!=typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof Blob?URL.createObjectURL(new Blob(["self.onmessage=function(e){if(e.data.url){\nimportScripts(e.data.url);}}"],{type:"text/javascript"})):"";function oS(){this.iv=null,this.gy=this.j=this.name="",this.scripts=[],this.Me=null,this.om=new xt}function te(t){xn(this),this.Ac=t,this.mf=new K,this.le=new K,this.Xs=new xt,this.Ss=new xt}function Fv(t,e){if(null===e)return!1;var n=t.mf.remove(e);return n&&null!==(e=e.node)&&t.Xs.remove(e),n}function qg(t,e){if(null!==e){t.le.add(e);var n=e.link;null!==n&&null===t.hq(n)&&t.Ss.add(n,e),e.network=t}}function tm(t,e){null!==e&&t.le.remove(e)&&null!==(e=e.link)&&t.Ss.remove(e)}function Pw(t,e,n){if(null!==n&&n.network!==e){Fv(t,n),e.ig(n);for(var i=n.sourceEdges;i.next();){var a=i.value;a.network!==e&&(tm(t,a),qg(e,a),Pw(t,e,a.fromVertex))}for(i=n.destinationEdges;i.next();)(n=i.value).network!==e&&(tm(t,n),qg(e,n),Pw(t,e,n.toVertex))}}function Be(t){xn(this),this.Pc=t,this.j=new B(0,0,10,10).freeze(),this.o=new N(5,5).freeze(),this.mi=this.ib=null,this.qd=new et,this.Cd=new et}function Ze(t,e){return e=e.mi,(t=t.mi)?e?(t=t.text)<(e=e.text)?-1:t>e?1:0:1:null!==e?-1:0}function Yn(t){xn(this),this.Oc=t,this.ad=this.Tc=this.tl=this.ib=null}function dn(t){Rt.call(this),this.isViewportSized=!0,this.Up=this.Vp=NaN,this.tg=new mt(NaN,NaN).freeze(),this.ef=new mt(10,10).freeze(),this.wb=Ef,this.Gb=nm,this.Yc=Ia,this.Rc=Aw,t&&Object.assign(this,t)}function Aw(t,e){return(t=t.text)<(e=e.text)?-1:t>e?1:0}Rt.className="Layout",Rt.GoJSScriptURL=p_,Rt.declareWorkerLayout=bv,"undefined"!=typeof self&&void 0!==self.DedicatedWorkerGlobalScope&&"undefined"!=typeof self&&void 0!==self.DedicatedWorkerGlobalScope&&(self.onmessage=function(t){if("_GoJS"===(t=t.data)._GoJS)if(t.url)importScripts(t.url);else if(t.version)self.postMessage({_GoJS:"_GoJS",version:j.version},void 0);else{var e=performance.now(),n=null;t.layout&&(n=Jg(t.layout));var i=null;if(n&&n.iv&&(i=new n.iv),!i)throw Error("no registered Worker Layout: "+t.layout);i.network=Ov(i,t,!0),i.workerLayout=function(){var a=Nw(i,i.network,!1);return a._GoJS="_GoJS",a.time=performance.now()-e,self.postMessage(a,void 0),!0},i.doLayout(new et)}}),te.prototype.clear=function(){if(this.mf)for(var t=this.mf.iterator;t.next();)t.value.clear();if(this.le)for(t=this.le.iterator;t.next();)t.value.clear();this.mf=new K,this.le=new K,this.Xs=new xt,this.Ss=new xt},te.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutNetwork"+(null!==this.layout?"("+this.layout.toString()+")":"");if(0>=t)return e;if(e+=" vertexes: "+this.mf.count+" edges: "+this.le.count,1<t){for(var n=this.mf.iterator;n.next();)e+="\n    "+n.value.toString(t-1);for(n=this.le.iterator;n.next();)e+="\n    "+n.value.toString(t-1)}return e},te.prototype.createVertex=function(){return new Be(this)},te.prototype.createEdge=function(){return new Yn(this)},te.prototype.hg=function(t,e,n){if(null!==t){for(void 0===e&&(e=!1),void 0===n&&(n=null),null===n&&(n=function(h){if(h instanceof Q)return!h.isLinkLabel;if(h instanceof X){var d=h.fromNode;return null!==d&&!d.isLinkLabel&&!(null===(h=h.toNode)||h.isLinkLabel)}return!1}),t=t.iterator;t.next();){var i=t.value;if(i instanceof Q&&(!e||i.isTopLevel)&&i.canLayout()&&n(i))if(i instanceof vt&&null===i.layout)this.hg(i.memberParts,!1);else if(null===this.Ki(i)){var a=this.createVertex();a.node=i,this.ig(a)}}for(t.reset();t.next();)if((i=t.value)instanceof X&&(!e||i.isTopLevel)&&i.canLayout()&&n(i)&&null===this.hq(i)){var u=i.fromNode;a=i.toNode,null!==u&&null!==a&&u!==a&&(u=this.findGroupVertex(u),a=this.findGroupVertex(a),null!==u&&null!==a&&this.rk(u,a,i))}}},te.prototype.findGroupVertex=function(t){if(null===t)return null;var e=t.findVisibleNode();if(null===e)return null;if(null!==(t=this.Ki(e)))return t;for(e=e.containingGroup;null!==e;){if(null!==(t=this.Ki(e)))return t;e=e.containingGroup}return null},(D=te.prototype).ig=function(t){if(null!==t){this.mf.add(t);var e=t.node;null!==e&&this.Xs.add(e,t),t.network=this}},D.Zj=function(t){if(null===t)return null;var e=this.Ki(t);return null===e&&((e=this.createVertex()).node=t,this.ig(e)),e},D.lv=function(t){if(null!==t&&Fv(this,t)){for(var e=t.qd,n=e.count-1;0<=n;n--){var i=e.J(n);this.gk(i)}for(t=(e=t.Cd).count-1;0<=t;t--)n=e.J(t),this.gk(n)}},D.Dz=function(t){null!==t&&null!==(t=this.Ki(t))&&this.lv(t)},D.Ki=function(t){return null===t?null:this.Xs.H(t)},D.am=function(t){if(null!==t){qg(this,t);var e=t.toVertex;null!==e&&e.bv(t),null!==(e=t.fromVertex)&&e.$u(t)}},D.gz=function(t){if(null===t)return null;var e=t.fromNode,n=t.toNode,i=this.hq(t);return null===i?((i=this.createEdge()).link=t,null!==e&&(i.fromVertex=this.Zj(e)),null!==n&&(i.toVertex=this.Zj(n)),this.am(i)):(i.fromVertex=null!==e?this.Zj(e):null,i.toVertex=null!==n?this.Zj(n):null),i},D.gk=function(t){if(null!==t){var e=t.toVertex;null!==e&&e.kv(t),null!==(e=t.fromVertex)&&e.jv(t),tm(this,t)}},D.Cz=function(t){null!==t&&null!==(t=this.hq(t))&&this.gk(t)},D.hq=function(t){return null===t?null:this.Ss.H(t)},D.rk=function(t,e,n){if(null===t||null===e)return null;if(t.network===this&&e.network===this){var i=this.createEdge();return i.link=n,i.fromVertex=t,i.toVertex=e,this.am(i),i}return null},D.Am=function(t){if(null!==t){var e=t.fromVertex,n=t.toVertex;null!==e&&null!==n&&(e.jv(t),n.kv(t),t.Am(),e.bv(t),n.$u(t))}},D.fq=function(){for(var t=ye(),e=this.le.iterator;e.next();){var n=e.value;n.fromVertex===n.toVertex&&t.push(n)}for(e=t.length,n=0;n<e;n++)this.gk(t[n]);oe(t)},te.prototype.deleteArtificialVertexes=function(){for(var t=ye(),e=this.mf.iterator;e.next();){var n=e.value;null===n.node&&null===n.data&&t.push(n)}for(n=t.length,e=0;e<n;e++)this.lv(t[e]);for(e=ye(),n=this.le.iterator;n.next();){var i=n.value;null===i.link&&null===i.data&&e.push(i)}for(n=e.length,i=0;i<n;i++)this.gk(e[i]);oe(t),oe(e)},te.prototype.Gy=function(t){void 0===t&&(t=!0),t&&(this.deleteArtificialVertexes(),function g_(t){for(var e=ye(),n=t.le.iterator;n.next();){var i=n.value;null!==i.fromVertex&&null!==i.toVertex||e.push(i)}for(n=e.length,i=0;i<n;i++)t.gk(e[i]);oe(e)}(this),this.fq()),t=new et;for(var e=!0;e;){e=!1;for(var n=this.mf.iterator;n.next();){var i=n.value;if(0<i.qd.count||0<i.Cd.count){e=this.layout.createNetwork(),t.add(e),Pw(this,e,i),e=!0;break}}}return t.sort(function(a,u){return null===a||null===u||a===u?0:u.vertexes.count-a.vertexes.count}),t},te.prototype.Jz=function(){for(var t=new K,e=this.mf.iterator;e.next();)t.add(e.value.node);for(e=this.le.iterator;e.next();)t.add(e.value.link);return t},Dt.Object.defineProperties(te.prototype,{layout:{get:function(){return this.Ac},set:function(t){null!==t&&(this.Ac=t)}},vertexes:{get:function(){return this.mf}},edges:{get:function(){return this.le}}}),te.prototype.findAllParts=te.prototype.Jz,te.prototype.splitIntoSubNetworks=te.prototype.Gy,te.prototype.deleteSelfEdges=te.prototype.fq,te.prototype.reverseEdge=te.prototype.Am,te.prototype.linkVertexes=te.prototype.rk,te.prototype.findEdge=te.prototype.hq,te.prototype.deleteLink=te.prototype.Cz,te.prototype.deleteEdge=te.prototype.gk,te.prototype.addLink=te.prototype.gz,te.prototype.addEdge=te.prototype.am,te.prototype.findVertex=te.prototype.Ki,te.prototype.deleteNode=te.prototype.Dz,te.prototype.deleteVertex=te.prototype.lv,te.prototype.addNode=te.prototype.Zj,te.prototype.addVertex=te.prototype.ig,te.prototype.addParts=te.prototype.hg,te.className="LayoutNetwork",Be.prototype.serializeVertexProperties=function(t){t.id=Jt(this),t.key=this.node?this.node.key:this.data?this.data.ci:void 0,void 0===t.key&&(t.key=null),t.x=this.bounds.x,t.y=this.bounds.y,t.eB=this.bounds.width,t.mA=this.bounds.height,t.fx=this.focus.x,t.fy=this.focus.y;var e=[];this.qd.each(function(i){e.push(Jt(i))}),t.Ey=e;var n=[];this.Cd.each(function(i){n.push(Jt(i))}),t.Nx=n},Be.prototype.deserializeVertexProperties=function(t,e,n){if(null!==t){this.x=t.x,this.y=t.y,this.width=t.eB,this.height=t.mA,this.focusX=t.fx,this.focusY=t.fy;var i=this;t.Ey&&t.Ey.forEach(function(a){(a=n.get(a))&&i.qd.add(a)}),t.Nx&&t.Nx.forEach(function(a){(a=n.get(a))&&i.Cd.add(a)})}},Be.prototype.clear=function(){this.mi=this.ib=null,this.qd=new et,this.Cd=new et},Be.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutVertex#"+Jt(this);if(0<t&&(e+=null!==this.node?"("+this.node.toString()+")":"",1<t)){t="";for(var n=!0,i=this.qd.iterator;i.next();){var a=i.value;n?n=!1:t+=",",t+=a.toString(0)}for(a="",n=!0,i=this.Cd.iterator;i.next();)n?n=!1:a+=",",a+=i.value.toString(0);e+=" sources: "+t+" destinations: "+a}return e},Be.prototype.commit=function(){var t=this.ib;if(null!==t){var e=this.bounds,n=t.bounds;Et(n)?(n.x=e.x,n.y=e.y,n.width=e.width,n.height=e.height):t.bounds=e.copy()}else if(null!==(t=this.node)){if(e=this.bounds,!(t instanceof vt)){n=B.alloc();var i=this.network.layout.Ni(t,n),a=t.locationObject.da(Wt);if(i.u()&&a.u())return t.moveTo(e.x+this.focusX-(a.x-i.x),e.y+this.focusY-(a.y-i.y)),void B.free(n);B.free(n)}t.moveTo(e.x,e.y)}},Be.prototype.bv=function(t){null!==t&&(this.qd.contains(t)||this.qd.add(t))},Be.prototype.kv=function(t){null!==t&&this.qd.remove(t)},Be.prototype.$u=function(t){null!==t&&(this.Cd.contains(t)||this.Cd.add(t))},Be.prototype.jv=function(t){null!==t&&this.Cd.remove(t)},Dt.Object.defineProperties(Be.prototype,{sourceEdgesArrayAccess:{get:function(){return this.qd._dataArray}},destinationEdgesArrayAccess:{get:function(){return this.Cd._dataArray}},data:{get:function(){return this.ib},set:function(t){if(this.ib=t,null!==t&&t.bounds){var e=t.bounds;t=e.x;var n=e.y,i=e.width;this.o.h(i/2,(e=e.height)/2),this.j.h(t,n,i,e)}}},node:{get:function(){return this.mi},set:function(t){if(this.mi!==t){this.mi=t,t.Sa();var e=this.network.layout,n=B.alloc(),i=e.Ni(t,n);e=i.x;var a=i.y,u=i.width;if(i=i.height,isNaN(e)&&(e=0),isNaN(a)&&(a=0),this.j.h(e,a,u,i),B.free(n),!(t instanceof vt)&&(t=t.locationObject.da(Wt)).u())return void this.o.h(t.x-e,t.y-a);this.o.h(u/2,i/2)}}},bounds:{get:function(){return this.j},set:function(t){this.j.A(t)||this.j.assign(t)}},focus:{get:function(){return this.o},set:function(t){this.o.A(t)||this.o.assign(t)}},centerX:{get:function(){return this.j.x+this.o.x},set:function(t){var e=this.j;e.x+this.o.x!==t&&(e.ea(),e.x=t-this.o.x,e.freeze())}},centerY:{get:function(){return this.j.y+this.o.y},set:function(t){var e=this.j;e.y+this.o.y!==t&&(e.ea(),e.y=t-this.o.y,e.freeze())}},focusX:{get:function(){return this.o.x},set:function(t){var e=this.o;e.x!==t&&(e.ea(),e.x=t,e.freeze())}},focusY:{get:function(){return this.o.y},set:function(t){var e=this.o;e.y!==t&&(e.ea(),e.y=t,e.freeze())}},x:{get:function(){return this.j.x},set:function(t){var e=this.j;e.x!==t&&(e.ea(),e.x=t,e.freeze())}},y:{get:function(){return this.j.y},set:function(t){var e=this.j;e.y!==t&&(e.ea(),e.y=t,e.freeze())}},width:{get:function(){return this.j.width},set:function(t){var e=this.j;e.width!==t&&(e.ea(),e.width=t,e.freeze())}},height:{get:function(){return this.j.height},set:function(t){var e=this.j;e.height!==t&&(e.ea(),e.height=t,e.freeze())}},network:{get:function(){return this.Pc},set:function(t){this.Pc=t}},sourceVertexes:{get:function(){for(var t=new K,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);return t.iterator}},destinationVertexes:{get:function(){for(var t=new K,e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},vertexes:{get:function(){for(var t=new K,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);for(e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},sourceEdges:{get:function(){return this.qd.iterator}},destinationEdges:{get:function(){return this.Cd.iterator}},edges:{get:function(){for(var t=new et,e=this.sourceEdges;e.next();)t.add(e.value);for(e=this.destinationEdges;e.next();)t.add(e.value);return t.iterator}},edgesCount:{get:function(){return this.qd.count+this.Cd.count}}}),Be.prototype.deleteDestinationEdge=Be.prototype.jv,Be.prototype.addDestinationEdge=Be.prototype.$u,Be.prototype.deleteSourceEdge=Be.prototype.kv,Be.prototype.addSourceEdge=Be.prototype.bv,Be.className="LayoutVertex",Be.standardComparer=Ze,Be.smartComparer=function(t,e){if(null!==t){if(null!==e){var n=e.mi;if(null!==(t=t.mi)){if(null!==n){for(e=t.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),t=n.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),n=0;n<e.length;n++)if(""!==t[n]&&void 0!==t[n]){var i=parseFloat(e[n]),a=parseFloat(t[n]);if(isNaN(i)){if(!isNaN(a))return 1;if(0!==e[n].localeCompare(t[n]))return e[n].localeCompare(t[n])}else{if(isNaN(a))return-1;if(i-a!=0)return i-a}}else if(""!==e[n])return 1;return""!==t[n]&&void 0!==t[n]?-1:0}return 1}return null!==n?-1:0}return 1}return null!==e?-1:0},Yn.prototype.clear=function(){this.ad=this.Tc=this.tl=this.ib=null},Yn.prototype.serializeEdgeProperties=function(t){t.id=Jt(this),t.key=this.link?this.link.key:this.data?this.data.ci:void 0,void 0===t.key&&(t.key=null),t.from=this.fromVertex?Jt(this.fromVertex):null,t.$A=this.toVertex?Jt(this.toVertex):null},Yn.prototype.deserializeEdgeProperties=function(t,e){if(null!==t){var n=e.get(t.from);n&&(this.fromVertex=n),(t=e.get(t.$A))&&(this.toVertex=t)}},Yn.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutEdge#"+Jt(this);return 0<t&&(e+=null!==this.tl?"("+this.tl.toString()+")":"",1<t&&(e+=" "+(this.Tc?this.Tc.toString():"null")+" --\x3e "+(this.ad?this.ad.toString():"null"))),e},Yn.prototype.Am=function(){var t=this.Tc;this.Tc=this.ad,this.ad=t},Yn.prototype.commit=function(){},Yn.prototype.ay=function(t){return this.ad===t?this.Tc:this.Tc===t?this.ad:null},Dt.Object.defineProperties(Yn.prototype,{network:{get:function(){return this.Oc},set:function(t){this.Oc=t}},data:{get:function(){return this.ib},set:function(t){this.ib!==t&&(this.ib=t)}},link:{get:function(){return this.tl},set:function(t){this.tl!==t&&(this.tl=t)}},fromVertex:{get:function(){return this.Tc},set:function(t){this.Tc!==t&&(this.Tc=t)}},toVertex:{get:function(){return this.ad},set:function(t){this.ad!==t&&(this.ad=t)}}}),Yn.prototype.getOtherVertex=Yn.prototype.ay,Yn.className="LayoutEdge",Ft(dn,Rt),dn.prototype.cloneProtected=function(t){Rt.prototype.cloneProtected.call(this,t),t.Vp=this.Vp,t.Up=this.Up,t.tg.assign(this.tg),t.ef.assign(this.ef),t.wb=this.wb,t.Gb=this.Gb,t.Yc=this.Yc,t.Rc=this.Rc},dn.prototype.gb=function(t){t.classType===dn?t===Ia||t===im||t===Lv||t===dh?this.sorting=t:t===nm||t===Mo?this.arrangement=t:t===Ef||t===em?this.alignment=t:z("Unknown enum value: "+t):Rt.prototype.gb.call(this,t)},dn.prototype.doLayout=function(t){this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var e=this.Hx(t);t=this.diagram;for(var n=e.copy().iterator;n.next();){var i=n.value;if(!i.Dh()||null===i.fromNode&&null===i.toNode){if(i.Sa(),i instanceof vt)for(i=i.memberParts;i.next();)e.remove(i.value)}else e.remove(i)}var a=e.xa();if(0!==a.length){switch(this.sorting){case dh:a.reverse();break;case Ia:a.sort(this.comparer);break;case im:a.sort(this.comparer),a.reverse()}var u=this.wrappingColumn;isNaN(u)&&(u=0);var h=this.wrappingWidth;switch(isNaN(h)&&null!==t?(e=t.padding,h=Math.max(t.viewportBounds.width-e.left-e.right,0)):h=Math.max(this.wrappingWidth,0),0>=u&&0>=h&&(u=1),e=this.spacing.width,isFinite(e)||(e=0),n=this.spacing.height,isFinite(n)||(n=0),null!==t&&t.wa("Layout"),i=[],this.alignment){case em:var d=e,f=n,g=B.alloc(),m=Math.max(this.cellSize.width,1);if(!isFinite(m))for(var y=m=0;y<a.length;y++){var x=this.Ni(a[y],g);m=Math.max(m,x.width)}if(m=Math.max(m+d,1),y=Math.max(this.cellSize.height,1),!isFinite(y))for(x=y=0;x<a.length;x++){var _=this.Ni(a[x],g);y=Math.max(y,_.height)}y=Math.max(y+f,1),x=this.arrangement;for(var M=_=this.arrangementOrigin.x,S=this.arrangementOrigin.y,T=0,k=0,b=0;b<a.length;b++){var I=a[b],O=this.Ni(I,g),F=Math.ceil((O.width+d)/m)*m,H=Math.ceil((O.height+f)/y)*y;if(x===Mo)var W=Math.abs(M-O.width);else W=M+O.width;(0<u&&T>u-1||0<h&&0<T&&W-_>h)&&(i.push(new B(0,S,h+d,k)),T=0,M=_,S+=k,k=0),k=Math.max(k,H),I.moveTo(M+(O=x===Mo?-O.width:0),S),x===Mo?M-=F:M+=F,T++}i.push(new B(0,S,h+d,k)),B.free(g);break;case Ef:for(f=h,m=u,y=e,x=n,h=B.alloc(),_=Math.max(this.cellSize.width,1),u=S=g=0,d=N.alloc(),M=0;M<a.length;M++)T=this.Ni(k=a[M],h),k=Sa(k,k.locationObject,k.locationSpot,d),g=Math.max(g,k.x),S=Math.max(S,T.width-k.x),u=Math.max(u,k.y);(M=this.arrangement)===Mo?g+=y:S+=y,_=isFinite(_)?Math.max(_+y,1):Math.max(g+S,1);var it=k=this.arrangementOrigin.x;for(b=this.arrangementOrigin.y,S=0,f>=g&&(f-=g),g=I=0,F=Math.max(this.cellSize.height,1),O=u=0,H=!0,T=N.alloc(),W=0;W<a.length;W++){var nt=a[W],tt=this.Ni(nt,h),G=Sa(nt,nt.locationObject,nt.locationSpot,d);if(0<S?M===Mo?(it=(it-k-(tt.width-G.x))/_,it=(it=R.aa(Math.round(it),it)?Math.round(it):Math.floor(it))*_+k):(it=(it-k+G.x)/_,it=(it=R.aa(Math.round(it),it)?Math.round(it):Math.ceil(it))*_+k):I=M===Mo?it+G.x+tt.width:it-G.x,M===Mo)var Mt=-(it+G.x)+I;else Mt=it+tt.width-G.x-I;if(0<m&&S>m-1||0<f&&0<S&&Mt>f){for(i.push(new B(0,H?b-u:b,f+y,O+u+x)),it=0;it<S&&W!==S;it++){var gt=Sa(Mt=a[W-S+it],Mt.locationObject,Mt.locationSpot,T);Mt.moveTo(Mt.position.x,Mt.position.y+u-gt.y)}O+=x,b=H?b+O:b+(O+u),S=O=u=0,it=k,H=!1}it===k&&(g=M===Mo?Math.max(g,tt.width-G.x):Math.min(g,-G.x)),u=Math.max(u,G.y),O=Math.max(O,tt.height-G.y),isFinite(F)&&(O=Math.max(O,Math.max(tt.height,F)-G.y)),nt.moveTo(it-G.x,H?b-G.y:b),M===Mo?it-=G.x+y:it+=tt.width-G.x+y,S++}if(i.push(new B(0,b,f+y,(H?O:O+u)+x)),a.length!==S)for(f=0;f<S;f++)y=Sa(m=a[a.length-S+f],m.locationObject,m.locationSpot,d),m.moveTo(m.position.x,m.position.y+u-y.y);if(N.free(d),N.free(T),M===Mo)for(a=0;a<i.length;a++)(u=i[a]).width+=g,u.x-=g;else for(a=0;a<i.length;a++)(u=i[a]).x>g&&(u.width+=u.x-g,u.x=g);B.free(h)}for(d=u=h=a=0;d<i.length;d++)f=i[d],a=Math.min(a,f.x),h=Math.min(h,f.y),u=Math.max(u,f.x+f.width);this.commitLayers(i,new N(this.arrangement===Mo?a+e/2-(u+a):a-e/2,h-n/2)),null!==t&&t.Xa("Layout"),this.isValidLayout=!0}},dn.prototype.commitLayers=function(){},Dt.Object.defineProperties(dn.prototype,{wrappingWidth:{get:function(){return this.Vp},set:function(t){this.Vp!==t&&(0<t||isNaN(t))&&(this.Vp=t,this.isViewportSized=isNaN(t),this.B())}},wrappingColumn:{get:function(){return this.Up},set:function(t){this.Up!==t&&(0<t||isNaN(t))&&(this.Up=t,this.B())}},cellSize:{get:function(){return this.tg},set:function(t){this.tg.A(t)||(this.tg.assign(t),this.B())}},spacing:{get:function(){return this.ef},set:function(t){this.ef.A(t)||(this.ef.assign(t),this.B())}},alignment:{get:function(){return this.wb},set:function(t){this.wb===t||t!==Ef&&t!==em||(this.wb=t,this.B())}},arrangement:{get:function(){return this.Gb},set:function(t){this.Gb===t||t!==nm&&t!==Mo||(this.Gb=t,this.B())}},sorting:{get:function(){return this.Yc},set:function(t){this.Yc===t||t!==Lv&&t!==dh&&t!==Ia&&t!==im||(this.Yc=t,this.B())}},comparer:{get:function(){return this.Rc},set:function(t){this.Rc!==t&&(this.Rc=t,this.B())}}});var em=new J(dn,"Position",0),Ef=new J(dn,"Location",1),nm=new J(dn,"LeftToRight",2),Mo=new J(dn,"RightToLeft",3),Lv=new J(dn,"Forward",4),dh=new J(dn,"Reverse",5),Ia=new J(dn,"Ascending",6),im=new J(dn,"Descending",7);function jt(){this.Po=new K,this.wo=new K,this.Fa=new K,this.Re=new xt,this.Qe=new xt,this.Bj=new xt,this.F=null,this.Nq=!1}function Iw(t,e,n){if(null!=e&&!t.diagram.undoManager.isUndoingRedoing&&!t.Re.contains(e)){void 0===n&&(n=!0);t:{if(null!=e&&!t.F.undoManager.isUndoingRedoing&&!t.Re.contains(e)){var i=t.lq(e),a=bw(t,e,i);if(null!==a&&(Gr(a),null!==(a=a.copy()))){var u=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,a.Jf=i,a.ib=e,t.Nq&&(a.Og="Tool"),t.diagram.add(a),a.ib=null,a.data=e,t.diagram.skipsModelSourceBindings=u,i=a;break t}}i=null}null!==i&&n&&t.resolveReferencesForData(e)}}function bw(t,e,n){var i=(t=t.F).model;return i.pk()&&i.Dv(e)?null===(e=t.groupTemplateMap.H(n))&&null===(e=t.groupTemplateMap.H(""))&&(Bo||(Bo=!0,Oi('No Group template found for category "'+n+'"'),Oi("  Using default group template")),e=t.Qy):null===(e=t.nodeTemplateMap.H(n))&&null===(e=t.nodeTemplateMap.H(""))&&(kf||(kf=!0,Oi('No Node template found for category "'+n+'"'),Oi("  Using default node template")),e=t.Sy),e}function Tf(t,e,n){for(var i in n){var a=e[i],u=n[i];if(_n(u)){if(!_n(a)||a.length<u.length)return!1;for(var h=0;h<a.length;h++){var d=u[h];if(void 0!==d&&!Us(t,a[h],d))return!1}}else if(!Us(t,a,u))return!1}return!0}function Us(t,e,n){if("function"==typeof n){if(!n(e))return!1}else if(n instanceof RegExp){if(!e||!n.test(e.toString()))return!1}else if(Et(e)&&Et(n)){if(!Tf(t,e,n))return!1}else if(e!==n)return!1;return!0}function fh(t,e){var n=e.bi;if(_n(n)){var i=t.Bj.H(n);if(null===i)(i=[]).push(e),t.Bj.add(n,i);else{for(t=0;t<i.length;t++)if(i[t]===e)return;i.push(e)}}}function pr(t,e,n){al(e,function(h){for(var d=(h=h.T.m).length,f=0;f<d;f++)Ay(n,h[f])});var i=e.bi;if(_n(i)){var a=t.Bj.H(i);if(null!==a)for(var u=0;u<a.length;u++)if(a[u]===e){a.splice(u,1),0===a.length&&t.Bj.remove(i);break}}}function ba(t,e,n,i,a){if(null===e||a&&!e.canCopy())return null;if(i.contains(e))return i.H(e);var u=t.copyPartData(e,n);if(!(u instanceof ht))return null;if(u.isSelected=!1,u.isHighlighted=!1,i.add(e,u),e instanceof Q){for(var h=e.linksConnected;h.next();){var d=h.value;if(d.fromNode===e){var f=i.H(d);null!==f&&(f.fromNode=u)}d.toNode===e&&null!==(d=i.H(d))&&(d.toNode=u)}if(e instanceof vt&&u instanceof vt)for(e=e.memberParts;e.next();)(h=ba(t,e.value,n,i,a))instanceof X||null===h||(h.containingGroup=u)}else if(e instanceof X&&u instanceof X)for(null!==(h=e.fromNode)&&null!==(h=i.H(h))&&(u.fromNode=h),null!==(h=e.toNode)&&null!==(h=i.H(h))&&(u.toNode=h),e=e.labelNodes;e.next();)null!==(h=ba(t,e.value,n,i,a))&&h instanceof Q&&(h.labeledLink=u);return u}dn.className="GridLayout",dn.standardComparer=Aw,dn.smartComparer=function(t,e){if(null!==t){if(null!==e){t=t.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),e=e.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/);for(var n=0;n<t.length;n++)if(""!==e[n]&&void 0!==e[n]){var i=parseFloat(t[n]),a=parseFloat(e[n]);if(isNaN(i)){if(!isNaN(a))return 1;if(0!==t[n].localeCompare(e[n]))return t[n].localeCompare(e[n])}else{if(isNaN(a))return-1;if(i-a!=0)return i-a}}else if(""!==t[n])return 1;return""!==e[n]&&void 0!==e[n]?-1:0}return 1}return null!==e?-1:0},dn.Position=em,dn.Location=Ef,dn.LeftToRight=nm,dn.RightToLeft=Mo,dn.Forward=Lv,dn.Reverse=dh,dn.Ascending=Ia,dn.Descending=im,(D=jt.prototype).clear=function(){this.Po.clear(),this.wo.clear(),this.Fa.clear(),this.Re.clear(),this.Qe.clear(),this.Bj.clear()},D.Ke=function(t){this.F=t},D.Oi=function(t){if(t instanceof Q){if(this.Po.add(t),t instanceof vt){var e=t.containingGroup;null===e?this.F.xi.add(t):e.zl.add(t),null!==(e=t.layout)&&(e.diagram=this.F)}}else t instanceof X?this.wo.add(t):t instanceof At||this.Fa.add(t);null===(e=t.data)||t instanceof At||(t instanceof X?this.Qe.add(e,t):this.Re.add(e,t))},D.bc=function(t){if(t.$j(),t instanceof Q){if(this.Po.remove(t),t instanceof vt){var e=t.containingGroup;null===e?this.F.xi.remove(t):e.zl.remove(t),null!==(e=t.layout)&&(e.diagram=null)}}else t instanceof X?this.wo.remove(t):t instanceof At||this.Fa.remove(t);null===(e=t.data)||t instanceof At||(t instanceof X?this.Qe.remove(e):this.Re.remove(e))},D.Hd=function(){var t=this.F;if(null!==t){for(var e=t.nodeTemplateMap.iterator;e.next();){var n=e.value,i=e.key;(!n.Jc()||n instanceof vt)&&z('Invalid node template in Diagram.nodeTemplateMap: template for "'+i+'" must be a Node or a simple Part, not a Group or Link: '+n)}for(e=t.groupTemplateMap.iterator;e.next();)i=e.key,(n=e.value)instanceof vt||z('Invalid group template in Diagram.groupTemplateMap: template for "'+i+'" must be a Group, not a normal Node or Link: '+n);for(e=t.linkTemplateMap.iterator;e.next();)i=e.key,(n=e.value)instanceof X||z('Invalid link template in Diagram.linkTemplateMap: template for "'+i+'" must be a Link, not a normal Node or simple Part: '+n);for(e=ye(),n=t.selection.iterator;n.next();)(i=n.value.data)&&e.push(i);for(n=ye(),t=t.highlighteds.iterator;t.next();)(i=t.value.data)&&n.push(i);for(t=ye(),i=this.nodes.iterator;i.next();){var a=i.value;null!==a.data&&(t.push(a.data),t.push(a.location))}for(i=this.links.iterator;i.next();)null!==(a=i.value).data&&(t.push(a.data),t.push(a.location));for(i=this.parts.iterator;i.next();)null!==(a=i.value).data&&(t.push(a.data),t.push(a.location));for(this.removeAllModeledParts(),this.addAllModeledParts(),i=0;i<e.length;i++)null!==(a=this.vc(e[i]))&&(a.isSelected=!0);for(i=0;i<n.length;i++)null!==(a=this.vc(n[i]))&&(a.isHighlighted=!0);for(i=0;i<t.length;i+=2)null!==(a=this.vc(t[i]))&&(a.location=t[i+1]);oe(e),oe(n),oe(t)}},jt.prototype.addAllModeledParts=function(){this.addModeledParts(this.diagram.model.nodeDataArray)},jt.prototype.addModeledParts=function(t,e){var n=this,i=this.diagram.model;t.forEach(function(a){i.cb(a)&&Iw(n,a,!1)}),t.forEach(function(a){i.cb(a)&&n.resolveReferencesForData(a)}),!1!==e&&Gl(this.diagram,!1)},jt.prototype.insertLink=function(){return null},jt.prototype.resolveReferencesForData=function(){},jt.prototype.lq=function(t){return this.F.model.lq(t)},jt.prototype.getLinkCategoryForData=function(){return""},jt.prototype.setLinkCategoryForData=function(){},jt.prototype.setFromNodeForLink=function(){},jt.prototype.setToNodeForLink=function(){},jt.prototype.findLinkTemplateForCategory=function(t){var e=this.F,n=e.linkTemplateMap.H(t);return null===n&&null===(n=e.linkTemplateMap.H(""))&&(_o||(_o=!0,Oi('No Link template found for category "'+t+'"'),Oi("  Using default link template")),n=e.Ry),n},jt.prototype.removeAllModeledParts=function(){this.at(this.diagram.model.nodeDataArray)},jt.prototype.at=function(t){var e=this;t.forEach(function(n){e.Cq(n)})},jt.prototype.Cq=function(t){null!==(t=this.vc(t))&&(cc(this.diagram,t,!1),this.unresolveReferencesForPart(t))},jt.prototype.unresolveReferencesForPart=function(){},jt.prototype.removeDataForLink=function(){},jt.prototype.findPartForKey=function(t){return null==t?null:null!==(t=this.F.model.Vb(t))?this.Re.H(t):null},jt.prototype.Eb=function(t){return null==t||null===(t=this.F.model.Vb(t))?null:(t=this.Re.H(t))instanceof Q?t:null},jt.prototype.findLinkForKey=function(){return null},(D=jt.prototype).vc=function(t){if(null===t)return null;var e=this.Re.H(t);return null!==e?e:e=this.Qe.H(t)},D.Hi=function(t){return null===t?null:(t=this.Re.H(t))instanceof Q?t:null},D.uc=function(t){return null===t?null:this.Qe.H(t)},D.Ds=function(t){for(var e=0;e<arguments.length;++e);e=new K;for(var n=this.Po.iterator;n.next();){var i=n.value,a=i.data;if(null!==a)for(var u=0;u<arguments.length;u++){var h=arguments[u];if(Et(h)&&Tf(this,a,h)){e.add(i);break}}}return e.iterator},D.Cs=function(t){for(var e=0;e<arguments.length;++e);e=new K;for(var n=this.wo.iterator;n.next();){var i=n.value,a=i.data;if(null!==a)for(var u=0;u<arguments.length;u++){var h=arguments[u];if(Et(h)&&Tf(this,a,h)){e.add(i);break}}}return e.iterator},jt.prototype.doModelChanged=function(t){if(this.F){var e=this.F;if(t.model===e.model){var n=t.change;if(e.doModelChanged(t),e.Z){e.Z=!1;try{var i=t.modelChange;if(""!==i)if(n===ve){if("nodeCategory"===i){var a=this.vc(t.object),u=t.newValue;null!==a&&"string"==typeof u&&(a.category=u)}else"nodeDataArray"===i&&(this.at(t.oldValue),this.addModeledParts(t.newValue));e.isModified=!0}else if(n===Pt){var h=t.newValue;"nodeDataArray"===i&&Et(h)&&Iw(this,h),e.isModified=!0}else if(n===sn){var d=t.oldValue;"nodeDataArray"===i&&Et(d)&&this.Cq(d),e.isModified=!0}else n===qr&&("SourceChanged"===i?null!==t.object?this.updateDataBindings(t.object,t.propertyName):(this.Lq(),this.updateAllTargetBindings()):"ModelDisplaced"===i&&this.Hd());else if(n===ve){var f=t.propertyName,g=t.object;g===e.model?("nodeKeyProperty"===f||"nodeCategoryProperty"===f)&&(e.undoManager.isUndoingRedoing||this.Hd()):this.updateDataBindings(g,f),e.isModified=!0}else if(n===Pt||n===sn){var m=t.change===Pt,y=m?t.newParam:t.oldParam,x=m?t.newValue:t.oldValue,_=this.Bj.H(t.object);if(Array.isArray(_))for(t=0;t<_.length;t++){var M=_[t];if(m)hf(M,x,y,!0);else if(!(0>y)){var S=y+Pc(M);M.bc(S,!0),lw(M,S,y)}}e.isModified=!0}}finally{e.Z=!0}}}}},jt.prototype.updateAllTargetBindings=function(t){void 0===t&&(t="");for(var e=this.parts.iterator;e.next();)e.value.Da(t);for(e=this.nodes.iterator;e.next();)e.value.Da(t);for(e=this.links.iterator;e.next();)e.value.Da(t)},jt.prototype.Lq=function(){for(var t=this.F.model,e=new K,n=t.nodeDataArray,i=0;i<n.length;i++)e.add(n[i]);var a=[];for(this.nodes.each(function(h){null===h.data||e.contains(h.data)||a.push(h.data)}),this.parts.each(function(h){null===h.data||e.contains(h.data)||a.push(h.data)}),a.forEach(function(h){om(t,h,!1)}),i=0;i<n.length;i++){var u=n[i];null===this.vc(u)&&Fw(t,u,!1)}for(this.refreshDataBoundLinks(),n=this.parts.iterator;n.next();)n.value.updateRelationshipsFromData();for(n=this.nodes.iterator;n.next();)n.value.updateRelationshipsFromData();for(n=this.links.iterator;n.next();)n.value.updateRelationshipsFromData()},jt.prototype.refreshDataBoundLinks=function(){},jt.prototype.updateRelationshipsFromData=function(){},jt.prototype.updateDataBindings=function(t,e){if("string"==typeof e){var n=this.vc(t);if(null!==n)n.Da(e);else{n=null;for(var i=this.Bj.iterator;i.next();){for(var a=i.value,u=0;u<a.length;u++){var h=a[u].Tx(t);null!==h&&(null===n&&(n=ye()),n.push(h))}if(null!==n)break}if(null!==n){for(i=0;i<n.length;i++)n[i].Da(e);oe(n)}}t===this.diagram.model.modelData&&this.updateAllTargetBindings(e)}},jt.prototype.ek=function(t,e,n){void 0===n&&(n=!1);var i=new xt;if(_n(t))for(var a=0;a<t.length;a++)ba(this,t[a],e,i,n);else for(t=t.iterator;t.next();)ba(this,t.value,e,i,n);if(null!==e){n=e.model,t=null!==(t=e.toolManager.findTool("Dragging"))?t.dragOptions.dragsLink:e.zn.dragsLink,a=new K;for(var u=new xt,h=i.iterator;h.next();){var d=h.value;if(d instanceof X)t||null!==d.fromNode&&null!==d.toNode||a.add(d);else if(d instanceof Q&&null!==d.data&&n.nm()){var f=d,g=(d=h.key).lg();null!==g&&(null!==(g=i.H(g))?(n.fe(f.data,n.pa(g.data)),f=e.uc(f.data),null!==(d=d.Ji())&&null!==f&&u.add(d,f)):n.fe(f.data,void 0))}}if(0<a.count&&e.bt(a,!1),0<u.count)for(n=u.iterator;n.next();)i.add(n.key,n.value)}if(null!==e&&null!==this.F&&null!==(n=(e=e.model).afterCopyFunction)){var m=new xt;i.each(function(y){null!==y.key.data&&m.add(y.key.data,y.value.data)}),n(m,e,this.F.model)}for(e=i.iterator;e.next();)e.value.Da();return i},jt.prototype.copyPartData=function(t,e){var n=null,i=t.data;if(null!==i&&null!==e){var a=e.model;t instanceof X||Et(i=a.copyNodeData(i))&&(a.nf(i),n=e.vc(i))}else Gr(t),null!==(n=t.copy())&&(a=this.F,null!==e?e.add(n):null!==i&&null!==a&&null!==a.commandHandler&&a.commandHandler.copiesClipboardData&&(e=a.model,a=null,n instanceof X||(a=e.copyNodeData(i)),Et(a)&&(n.data=a)));return n},Dt.Object.defineProperties(jt.prototype,{nodes:{get:function(){return this.Po}},links:{get:function(){return this.wo}},parts:{get:function(){return this.Fa}},diagram:{get:function(){return this.F}},addsToTemporaryLayer:{get:function(){return this.Nq},set:function(t){this.Nq=t}}}),jt.prototype.updateAllRelationshipsFromData=jt.prototype.Lq,jt.prototype.findLinksByExample=jt.prototype.Cs,jt.prototype.findNodesByExample=jt.prototype.Ds,jt.prototype.findLinkForData=jt.prototype.uc,jt.prototype.findNodeForData=jt.prototype.Hi,jt.prototype.findPartForData=jt.prototype.vc,jt.prototype.findNodeForKey=jt.prototype.Eb,jt.prototype.removeModeledPart=jt.prototype.Cq,jt.prototype.removeModeledParts=jt.prototype.at,jt.prototype.rebuildParts=jt.prototype.Hd;var kf=!1,Bo=!1,_o=!1;function Xe(t){jt.apply(this,arguments)}function ph(t,e){e.forEach(function(n){gh(t,n)}),Gl(t.diagram,!1)}function gh(t,e){if(null!=e&&!t.diagram.undoManager.isUndoingRedoing&&!t.Qe.contains(e)){var n=t.getLinkCategoryForData(e),i=t.findLinkTemplateForCategory(n);if(null!==i){Gr(i);var a=i.copy();if(null!==a){i=t.diagram.skipsModelSourceBindings,t.diagram.skipsModelSourceBindings=!0,a.Jf=n,a.ib=e;var u=dl(n=t.diagram.model,e,!0);""!==u&&(a.fromPortId=u),void 0!==(u=Pr(n,e,!0))&&(u=t.Eb(u))instanceof Q&&(a.fromNode=u),""!==(u=dl(n,e,!1))&&(a.toPortId=u),void 0!==(u=Pr(n,e,!1))&&(u=t.Eb(u))instanceof Q&&(a.toNode=u),n=n.xf(e),Array.isArray(n)&&n.forEach(function(h){null!==(h=t.Eb(h))&&(h.labeledLink=a)}),t.Nq&&(a.Og="Tool"),t.diagram.add(a),a.ib=null,a.data=e,t.diagram.skipsModelSourceBindings=i}}}}function mh(t,e){e.forEach(function(n){t.Cq(n)})}function vi(){jt.apply(this,arguments),this.eh=null}function hl(t,e,n){if(null!==e&&null!==n){var i=t.diagram.toolManager.findTool("Linking"),a=e,u=n;if(t.diagram.isTreePathToChildren){for(e=u.linksConnected;e.next();)if(e.value.toNode===u)return}else for(u=e,e=(a=n).linksConnected;e.next();)if(e.value.fromNode===a)return;if((null===i||!Qh(i,a,u,null,!0))&&(i=t.getLinkCategoryForData(n.data),null!==(e=t.findLinkTemplateForCategory(i))&&(Gr(e),null!==(e=e.copy())))){var h=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,e.Jf=i,e.ib=n.data,e.fromNode=a,e.toNode=u,t.diagram.add(e),e.ib=null,e.data=n.data,t.diagram.skipsModelSourceBindings=h}}}function at(t,e){this.Dl=new K,this.Bl=new K,this.ww=',\n  "insertedNodeKeys": ',this.Oy=',\n  "modifiedNodeData": ',this.yw=',\n  "removedNodeKeys": ',this.Lh=null,xn(this),this.vn=this.na="",this.Mg=!1,this.j={},this.Cc=[],this.bb=new xt,this.ni="key",this.Sk=this.vl=null,this.mn=this.nn=!1,this.pn=!0,this.Ym=null,this.Kj="category",this.Lf=new xt,this.hu=new et,this.gh=!1,this.o=null,this.undoManager=new be,void 0!==t&&(_n(t)?this.nodeDataArray=t:Object.assign(this,t)),e&&Object.assign(this,e)}function Hs(t,e,n,i,a,u){function h(y,x){d?(void 0===y.__gohashid&&u.push(y),i.set(y,x)):(y=Jo++,i.set(y,x),a.set(y,e))}if(!Et(e))return e;u||(u=[]);var d=Object.isExtensible(e);if(i||(i=new xt),d){var f=i.get(e);if(f)return f}else for(a||(a=new xt),f=a.iterator;f.next();){var g=f.key;if(f.value===e&&(g=i.get(g)))return g}if(Array.isArray(e)){h(e,f=[]);for(var m=0;m<e.length;m++)f.push(Hs(t,e[m],!1,i,a,u))}else if(e instanceof N||e instanceof mt||e instanceof B||e instanceof Lt||e instanceof ct)f=e.copy(),h(e,f);else{if(e instanceof Bt||e instanceof q||e instanceof J)return e;if(e instanceof et)f=(new et).addAll(Hs(t,e.xa(),!1,i,a,u)),h(e,f);else if(e instanceof K)f=(new K).addAll(Hs(t,e.xa(),!1,i,a,u)),h(e,f);else if(e instanceof xt)f=(new xt).addAll(Hs(t,e.xa(),!1,i,a,u)),h(e,f);else if(e instanceof Date)f=new Date(e.getTime()),h(e,f);else if(e instanceof RegExp)f=new RegExp(e),h(e,f),f.lastIndex=e.lastIndex;else if("function"==typeof e.copy)f=e.copy(),h(e,f);else for(m in h(e,f={}),e)"__gohashid"!==m&&(f[m]=Hs(t,e[m],!1,i,a,u))}return n&&u.forEach(function(y){delete y.__gohashid}),f}function yh(t,e){Et(e=e.modelData)&&(t.xm(e),t.modelData=e)}function Rv(t,e){function n(a,u){if((u=u.part)&&a!==(u=u.data)){var h=i.get(a);null===h?((h=new K).add(u),i.add(a,h)):h.add(u)}}var i=t.Lh;null===i&&(i=new xt,e.changes.each(function(a){if(null!==a.diagram){var u=a.change;u===ve?(a=a.object.panel)&&(u=a.data)&&n(u,a):(u===Pt||u===sn)&&(u=(a=a.object).itemArray)&&n(u,a)}}),t.Lh=i)}function jv(t,e){for(var n=new K,i=0;i<t.nodeDataArray.length;i++){var a=t.nodeDataArray[i];Nf(t,e,a,a,n)}return n}function Nf(t,e,n,i,a){if(Array.isArray(n))for(var u=0;u<n.length;u++){var h=n[u];if(h===e)return a.add(i),!0;if(Nf(t,e,h,i,a))return!0}else if(Et(n)&&Object.getPrototypeOf(n)===Object.prototype)for(u in n){if((h=n[u])===e)return a.add(i),!0;if(Nf(t,e,h,i,a))return!0}return!1}function Oa(t,e,n){void 0===n&&(n=!1);var i=e.length;if(0>=i)return"[]";var a=new Es;a.add("["),n&&1<i&&a.add("\n");for(var u=0;u<i;u++){var h=e[u];void 0!==h&&(0<u&&(a.add(","),n&&a.add("\n")),a.add(t.Om(h)))}return n&&1<i&&a.add("\n"),a.add("]"),a.toString()}function Vv(t,e){return void 0===e||"__gohashid"===t||"_"===t[0]||"function"==typeof e}function ai(t){return isNaN(t)?"NaN":t===1/0?"9e9999":t===-1/0?"-9e9999":t}function rm(t,e){var n=e;if(n instanceof N)e={class:"go.Point",x:ai(n.x),y:ai(n.y)};else if(n instanceof mt)e={class:"go.Size",width:ai(n.width),height:ai(n.height)};else if(n instanceof B)e={class:"go.Rect",x:ai(n.x),y:ai(n.y),width:ai(n.width),height:ai(n.height)};else if(n instanceof Lt)e={class:"go.Margin",top:ai(n.top),right:ai(n.right),bottom:ai(n.bottom),left:ai(n.left)};else if(n instanceof ct)e=n.hb()?{class:"go.Spot",x:ai(n.x),y:ai(n.y),offsetX:ai(n.offsetX),offsetY:ai(n.offsetY)}:{class:"go.Spot",enum:n.toString()};else if(n instanceof Bt){if(e={class:"go.Brush",type:n.type.name},n.type===rs?e.color=n.color:(n.type===os||n.type===Tr)&&(e.start=n.start,e.end=n.end,n.type===Tr&&(0!==n.startRadius&&(e.startRadius=ai(n.startRadius)),isNaN(n.endRadius)||(e.endRadius=ai(n.endRadius)))),null!==n.colorStops){var i={};for(n=n.colorStops.iterator;n.next();)i[n.key]=n.value;e.colorStops=i}}else n instanceof q?(e={class:"go.Geometry",type:n.type.name},0!==n.startX&&(e.startX=ai(n.startX)),0!==n.startY&&(e.startY=ai(n.startY)),0!==n.endX&&(e.endX=ai(n.endX)),0!==n.endY&&(e.endY=ai(n.endY)),n.spot1.A(zn)||(e.spot1=n.spot1),n.spot2.A(ks)||(e.spot2=n.spot2),n.type===q.o&&(e.path=q.Ga(n))):n instanceof J&&(e={class:"go.EnumValue",classType:Yc(t,n.classType),name:n.name});for(var a in i="{",n=!0,e){var u=je(e,a);if(!Vv(a,u))if(n?n=!1:i+=",",i+=t.quote(a)+":","points"===a&&u instanceof et){var h="[";for(u=u.iterator;u.next();){var d=u.value;1<h.length&&(h+=","),h+=t.Om(d.x),h+=",",h+=t.Om(d.y)}i+=h+="]"}else i+=t.Om(u)}return i+"}"}function li(t){return"number"==typeof t?t:"NaN"===t?NaN:"9e9999"===t?1/0:"-9e9999"===t?-1/0:parseFloat(t)}function Je(t,e,n,i,a,u,h,d,f){void 0===d&&(d=null),void 0===f&&(f=null);var g=new le;g.model=t,g.change=n,g.modelChange=e,g.propertyName=i,g.object=a,g.oldValue=u,g.oldParam=d,g.newValue=h,g.newParam=f,t.ws(g)}function cl(t){return"number"==typeof t||"string"==typeof t}function Fw(t,e,n){var i=t.pa(e);(void 0===i||t.bb.H(i)!==e)&&(t.Fv(e),void 0===(i=t.pa(e))&&z("Model.makeNodeDataKeyUnique failed on "+e+".  Data not added to Model."),t.bb.add(i,e),i=null,n&&Tl(t.Cc,i=t.Cc.length,e),Je(t,"nodeDataArray",Pt,"nodeDataArray",t,null,e,null,i),t.zm(e),t.ym(e))}function om(t,e,n){var i=t.pa(e);if(void 0!==i&&t.bb.remove(i),i=null,n){t:if(n=t.Cc,Array.isArray(n))i=n.indexOf(e);else{i=n.length;for(var a=0;a<i;a++)if(n[a]===e){i=a;break t}i=-1}if(0>i)return;kl(t.Cc,i)}Je(t,"nodeDataArray",sn,"nodeDataArray",t,e,null,i,null),t.Kq(e)}function ro(t,e,n){if(void 0!==e){var i=t.Lf.H(e);null===i&&(i=new K,t.Lf.add(e,i)),i.add(n)}}function Co(t,e,n){if(void 0!==e){var i=t.Lf.H(e);i instanceof K&&(null==n?t.Lf.remove(e):(i.remove(n),0===i.count&&t.Lf.remove(e)))}}function Pf(t,e){return void 0===e?null:(t=t.Lf.H(e))instanceof K?t:null}function Af(t,e,n){if(t.copiesArrays&&Array.isArray(e)){var i=[];for(n=0;n<e.length;n++){var a=Af(t,e[n],t.copiesArrayObjects);i.push(a)}return xn(i),i}if(n&&Et(e)){for(i in n=(n=e.constructor)?new n:{},a=t.copiesKey||"string"!=typeof t.nodeKeyProperty?null:t.nodeKeyProperty,e)if("__gohashid"===i)n.__gohashid=void 0;else if(i===a)n[a]=void 0;else{var u=je(e,i),h=Yc(t,u);"GraphObject"===h||"Diagram"===h||"Layer"===h||"RowColumnDefinition"===h||"AnimationManager"===h||"Tool"===h||"CommandHandler"===h||"Layout"===h||"InputEvent"===h||"DiagramEvent"===h||u instanceof at||u instanceof be||u instanceof bn||u instanceof le||(u=Af(t,u,!1)),ce(n,i,u)}return xn(n),n}return e instanceof N||e instanceof mt||e instanceof B||e instanceof ct||e instanceof Lt?e.copy():e}function Bv(){return new at}function Yc(t,e){if("function"==typeof e){if(e.className)return e.className;if(e.name)return e.name}else if("object"==typeof e&&null!==e&&e.constructor)return Yc(t,e.constructor);return typeof e}function Uv(t){return Nr[t]?Nr[t]:void 0!==dt.go&&dt.go[t]?dt.go[t]:null}function je(t,e){if(!t||!e)return null;try{if("function"==typeof e)var n=e(t);else"function"==typeof t.getAttribute?null===(n=t.getAttribute(e))&&(n=void 0):n=t[e]}catch(i){}return n}function ce(t,e,n){if(t&&e)try{"function"==typeof e?e(t,n):"function"==typeof t.setAttribute?t.setAttribute(e,n):t[e]=n}catch(i){}}jt.className="PartManager",Ft(Xe,jt),Xe.prototype.addAllModeledParts=function(){var t=this.diagram.model;this.addModeledParts(t.nodeDataArray),ph(this,t.linkDataArray)},Xe.prototype.addModeledParts=function(t){for(jt.prototype.addModeledParts.call(this,t,!1),t=this.links.iterator;t.next();)su(t.value);Gl(this.diagram,!1)},Xe.prototype.removeAllModeledParts=function(){var t=this.diagram.model;mh(this,t.linkDataArray),this.at(t.nodeDataArray)},Xe.prototype.getLinkCategoryForData=function(t){return this.diagram.model.Gs(t)},Xe.prototype.setLinkCategoryForData=function(t,e){return this.diagram.model.Fq(t,e)},Xe.prototype.setFromNodeForLink=function(t,e){var n=this.diagram.model;n.Wv(t.data,n.pa(null!==e?e.data:null))},Xe.prototype.setToNodeForLink=function(t,e){var n=this.diagram.model;n.$v(t.data,n.pa(null!==e?e.data:null))},Xe.prototype.removeDataForLink=function(t){this.diagram.model.vm(t.data)},Xe.prototype.findPartForKey=function(t){var e=jt.prototype.findPartForKey.call(this,t);return null===e&&null!==(t=this.diagram.model.zh(t))?this.Qe.H(t):e},Xe.prototype.findLinkForKey=function(t){return null==t?null:null!==(t=this.diagram.model.zh(t))?this.Qe.H(t):null},Xe.prototype.doModelChanged=function(t){var e=this;if(jt.prototype.doModelChanged.call(this,t),this.diagram){var n=this.diagram;if(t.model===n.model){var i=t.change;if(n.Z){n.Z=!1;try{var a=t.modelChange;if(""!==a){if(i===ve){if("linkFromKey"===a){var u=this.uc(t.object);if(null!==u){var h=this.Eb(t.newValue);u.fromNode=h}}else if("linkToKey"===a){var d=this.uc(t.object);if(null!==d){var f=this.Eb(t.newValue);d.toNode=f}}else if("linkFromPortId"===a){var g=this.uc(t.object);if(null!==g){var m=t.newValue;"string"==typeof m&&(g.fromPortId=m)}}else if("linkToPortId"===a){var y=this.uc(t.object);if(null!==y){var x=t.newValue;"string"==typeof x&&(y.toPortId=x)}}else if("nodeGroupKey"===a){var _=this.vc(t.object);if(null!==_){var M=t.newValue;if(void 0!==M){var S=this.Eb(M);_.containingGroup=S instanceof vt?S:null}else _.containingGroup=null}}else if("linkLabelKeys"===a){var T=this.uc(t.object);if(null!==T){var k=t.oldValue,b=t.newValue;Array.isArray(k)&&k.forEach(function(G){0<=b.indexOf(G)||null!==(G=e.Eb(G))&&(G.labeledLink=null)}),Array.isArray(b)&&b.forEach(function(G){null!==(G=e.Eb(G))&&(G.labeledLink=T)})}}else if("linkCategory"===a){var I=this.uc(t.object),O=t.newValue;null!==I&&"string"==typeof O&&(I.category=O)}else"linkDataArray"===a&&(mh(this,t.oldValue),ph(this,t.newValue));n.isModified=!0}else if(i===Pt){var F=t.newValue;if("linkDataArray"===a&&"object"==typeof F&&null!==F)gh(this,F);else if("linkLabelKeys"===a&&cl(F)){var H=this.uc(t.object),W=this.Eb(F);null!==H&&null!==W&&(W.labeledLink=H)}n.isModified=!0}else if(i===sn){var it=t.oldValue;if("linkDataArray"===a&&"object"==typeof it&&null!==it)this.Cq(it);else if("linkLabelKeys"===a&&cl(it)){var nt=this.Eb(it);null!==nt&&(nt.labeledLink=null)}n.isModified=!0}}else if(i===ve){var tt=t.propertyName;t.object!==n.model||"linkFromKeyProperty"!==tt&&"linkToKeyProperty"!==tt&&"linkFromPortIdProperty"!==tt&&"linkToPortIdProperty"!==tt&&"linkLabelKeysProperty"!==tt&&"nodeIsGroupProperty"!==tt&&"nodeGroupKeyProperty"!==tt&&"linkCategoryProperty"!==tt||n.undoManager.isUndoingRedoing||this.Hd(),n.isModified=!0}}finally{n.Z=!0}}}}},Xe.prototype.refreshDataBoundLinks=function(){var t=this,e=this.diagram.model,n=new K,i=e.linkDataArray;i.forEach(function(u){n.add(u)});var a=[];this.links.each(function(u){null===u.data||n.contains(u.data)||a.push(u.data)}),a.forEach(function(u){jw(e,u,!1)}),i.forEach(function(u){null===t.uc(u)&&Gv(e,u,!1)})},Xe.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(null!==e){var n=t.diagram;if(null!==n){var i=n.model;if(t instanceof X){var a=Pr(i,e,!0);if(a=n.Eb(a),t.fromNode=a,a=Pr(i,e,!1),a=n.Eb(a),t.toNode=a,0<(e=i.xf(e)).length||0<t.labelNodes.count){if(1===e.length&&1===t.labelNodes.count){a=e[0];var u=t.labelNodes.first();if(i.pa(u.data)===a)return}a=(new K).addAll(e);var h=new K;t.labelNodes.each(function(d){null!==d.data&&void 0!==(d=i.pa(d.data))&&h.add(d)}),(e=h.copy()).Bq(a),(a=a.copy()).Bq(h),(0<e.count||0<a.count)&&(e.each(function(d){null!==(d=n.Eb(d))&&d.labeledLink===t&&(d.labeledLink=null)}),a.each(function(d){null!==(d=n.Eb(d))&&d.labeledLink!==t&&(d.labeledLink=t)}))}}else!(t instanceof At)&&(e=i.Ah(e),null===(e=n.findPartForKey(e))||e instanceof vt)&&(t.containingGroup=e)}}},Xe.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,n=e.pa(t);if(void 0!==n){var i=Pf(e,n),a=this.vc(t);if(null!==i&&null!==a){i=i.iterator;for(var u={};i.next();){var h=i.value;e.cb(h)?a instanceof vt&&e.Ah(h)===n&&null!==(h=this.vc(h))&&(h.containingGroup=a):(u.link=this.uc(h),null!==u.link&&a instanceof Q&&(Pr(e,h,!0)===n&&(u.link.fromNode=a),Pr(e,h,!1)===n&&(u.link.toNode=a),h=e.xf(h),Array.isArray(h)&&h.some(function(d){return function(f){return f===n&&(a.labeledLink=d.link,!0)}}(u)))),u={link:u.link}}Co(e,n)}void 0!==(t=e.Ah(t))&&(t=this.Eb(t))instanceof vt&&(a.containingGroup=t)}},Xe.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof Q){var n=e.pa(t.data);if(void 0!==n){for(var i=t.linksConnected;i.next();)ro(e,n,i.value.data);if(t.isLinkLabel&&null!==(i=t.labeledLink)&&ro(e,n,i.data),t instanceof vt)for(t=t.memberParts;t.next();)e.cb(i=t.value.data)&&ro(e,n,i)}}},Xe.prototype.copyPartData=function(t,e){var n=jt.prototype.copyPartData.call(this,t,e);if(t instanceof X)if(null!==(t=t.data)&&null!==e){var i=e.model;"object"==typeof(t=i.eq(t))&&null!==t&&(i.Ci(t),n=e.uc(t))}else null!==n&&(e=this.diagram,null!==t&&null!==e&&null!==e.commandHandler&&e.commandHandler.copiesClipboardData&&"object"==typeof(e=e.model.eq(t))&&null!==e&&(n.data=e));return n},Xe.prototype.insertLink=function(t,e,n,i){var a=this.diagram,u=a.model,h=a.toolManager.findTool("Linking"),d="";if(null!==t&&(null===e&&(e=t),null===(d=e.portId)&&(d="")),e="",null!==n&&(null===i&&(i=n),null===(e=i.portId)&&(e="")),(i=h.archetypeLinkData)instanceof X){if(Gr(i),null!==(u=i.copy()))return u.fromNode=t,u.fromPortId=d,u.toNode=n,u.toPortId=e,a.add(u),(t=h.archetypeLabelNodeData)instanceof Q&&(Gr(t),null!==(t=t.copy())&&(t.labeledLink=u,a.add(t))),u}else if(null!==i&&"object"==typeof(i=u.eq(i))&&null!==i)return null!==t&&Xc(u,i,u.pa(t.data),!0),$c(u,i,d,!0),null!==n&&Xc(u,i,u.pa(n.data),!1),$c(u,i,e,!1),u.Ci(i),null===(t=h.archetypeLabelNodeData)||t instanceof Q||"object"==typeof(t=u.copyNodeData(t))&&null!==t&&(u.nf(t),void 0!==(t=u.pa(t))&&u.av(i,t)),a.uc(i);return null},Xe.prototype.findLinkForKey=Xe.prototype.findLinkForKey,Xe.prototype.findPartForKey=Xe.prototype.findPartForKey,Xe.prototype.removeAllModeledParts=Xe.prototype.removeAllModeledParts,Xe.prototype.addModeledParts=Xe.prototype.addModeledParts,Xe.prototype.addAllModeledParts=Xe.prototype.addAllModeledParts,Xe.className="GraphLinksPartManager",Ft(vi,jt),vi.prototype.getLinkCategoryForData=function(t){return this.diagram.model.Js(t)},vi.prototype.setLinkCategoryForData=function(t,e){this.diagram.model.ft(t,e)},vi.prototype.setFromNodeForLink=function(t,e,n){var i=this.diagram.model;if(void 0===n&&(n=null),e=null!==e?e.data:null,this.diagram.isTreePathToChildren)i.fe(t.data,i.pa(e));else{var a=this.eh;this.eh=t,null!==n&&i.fe(n.data,void 0),i.fe(e,i.pa(null!==t.toNode?t.toNode.data:null)),this.eh=a}},vi.prototype.setToNodeForLink=function(t,e,n){var i=this.diagram.model;if(void 0===n&&(n=null),e=null!==e?e.data:null,this.diagram.isTreePathToChildren){var a=this.eh;this.eh=t,null!==n&&i.fe(n.data,void 0),i.fe(e,i.pa(null!==t.fromNode?t.fromNode.data:null)),this.eh=a}else i.fe(t.data,i.pa(e))},vi.prototype.removeDataForLink=function(t){this.diagram.model.fe(t.data,void 0)},vi.prototype.findLinkForKey=function(t){return null==t?null:null!==(t=this.diagram.model.Vb(t))?this.Qe.H(t):null},vi.prototype.doModelChanged=function(t){if(jt.prototype.doModelChanged.call(this,t),this.diagram){var e=this.diagram;if(t.model===e.model){var n=t.change;if(e.Z){e.Z=!1;try{var i=t.modelChange;if(""!==i){if(n===ve){if("nodeParentKey"===i){var a=t.object,u=this.Eb(t.newValue),h=this.Hi(a);if(null!==this.eh)null!==u&&(this.eh.data=a,this.eh.category=this.getLinkCategoryForData(a));else if(null!==h){var d=h.Ji();null!==d?null===u?e.remove(d):e.isTreePathToChildren?d.fromNode=u:d.toNode=u:hl(this,u,h)}}else if("parentLinkCategory"===i){var f=this.Hi(t.object),g=t.newValue;if(null!==f&&"string"==typeof g){var m=f.Ji();null!==m&&(m.category=g)}}e.isModified=!0}}else n===ve&&(t.object===e.model&&"nodeParentKeyProperty"===t.propertyName&&(e.undoManager.isUndoingRedoing||this.Hd()),e.isModified=!0)}finally{e.Z=!0}}}}},vi.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(null!==e){var n=t.diagram;if(null!==n){var i=n.model;t instanceof Q&&(e=i.Bh(e),(e=n.Eb(e))!==(i=t.lg())&&(i=t.Ji(),null!==e?null!==i?n.isTreePathToChildren?i.fromNode=e:i.toNode=e:hl(this,e,t):null!==i&&cc(n,i,!1)))}}},vi.prototype.updateDataBindings=function(t,e){jt.prototype.updateDataBindings.call(this,t,e),"string"==typeof e&&null!==this.vc(t)&&null!==(t=this.uc(t))&&t.Da(e)},vi.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,n=e.pa(t);if(void 0!==n){var i=Pf(e,n),a=this.vc(t);if(null!==i&&null!==a){for(i=i.iterator;i.next();){var u=i.value;e.cb(u)&&a instanceof Q&&e.Bh(u)===n&&hl(this,a,this.Hi(u))}Co(e,n)}void 0!==(t=e.Bh(t))&&a instanceof Q&&hl(this,t=this.Eb(t),a)}},vi.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof Q){var n=e.pa(t.data),i=this.uc(t.data);if(null!==i){i.isSelected=!1,i.isHighlighted=!1;var a=i.layer;if(null!==a){var u=a.bc(-1,i,!1);0<=u&&this.diagram.Va(sn,"parts",a,i,null,u,null),null!==(u=i.layerChanged)&&u(i,a,null)}}for(i=this.diagram.isTreePathToChildren,t=t.linksConnected;t.next();)a=t.value,e.cb(a=(i?a.toNode:a.fromNode).data)&&ro(e,n,a)}},vi.prototype.insertLink=function(t,e,n){e=this.diagram.model;var i=t,a=n;return this.diagram.isTreePathToChildren||(i=n,a=t),null!==i&&null!==a?(e.fe(a.data,e.pa(i.data)),a.Ji()):null},vi.prototype.findLinkForKey=vi.prototype.findLinkForKey,vi.className="TreePartManager",at.prototype.cloneProtected=function(t){t.na=this.na,t.vn=this.vn,t.Mg=this.Mg,t.ni=this.ni,t.vl=this.vl,t.Sk=this.Sk,t.nn=this.nn,t.mn=this.mn,t.pn=this.pn,t.Ym=this.Ym,t.Kj=this.Kj},at.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},at.prototype.clear=function(){this.Cc=[],this.bb.clear(),this.Lf.clear(),this.undoManager.clear()},at.prototype.toString=function(t){if(void 0===t&&(t=0),1<t)return this.Hq();var e=(""!==this.name?this.name:"")+" Model";if(0<t){e+="\n node data:";for(var n=(t=this.nodeDataArray).length,i=0;i<n;i++){var a=t[i];e+=" "+this.pa(a)+":"+sr(a)}}return e},at.prototype.aB=function(t){t.change!==qr&&z("Model.toIncrementalData argument is not a Transaction ChangedEvent:"+t.toString());var e=t.object;return t.isTransactionFinished&&e instanceof bn?(Rv(this,e),t=this.nw(e,"FinishedUndo"===t.propertyName),this.Lh=null,t):null},at.prototype.nw=function(t,e){var n=this,i=!1,a=new K,u=new K,h=new K,d=this.Lh;t.changes.each(function(y){y.model===n&&("nodeDataArray"===y.modelChange?y.change===Pt?a.add(y.newValue):y.change===sn&&h.add(y.oldValue):n.cb(y.object)?u.add(y.object):y.change!==ve||n.modelData!==y.object&&"modelData"!==y.propertyName?null!==y.object&&(d&&d.contains(y.object)?d.get(y.object).each(function(x){n.cb(x)&&u.add(x)}):y.object instanceof at||n.Qi()&&n.tc(y.object)||jv(n,y.object).each(function(x){u.add(x)})):i=!0)});var f=this.Bl;f.clear(),a.each(function(y){f.add(n.pa(y)),e||u.add(y)});var g=this.Dl;g.clear(),h.each(function(y){g.add(n.pa(y)),e&&u.add(y)}),t=n.cloneDeep(u.xa());var m=null;return i&&(null===m&&(m={}),m.modelData=this.cloneDeep(this.modelData)),0<f.count&&(null===m&&(m={}),e?m.removedNodeKeys=f.xa():m.insertedNodeKeys=f.xa()),0<t.length&&(null===m&&(m={}),m.modifiedNodeData=t),0<g.count&&(null===m&&(m={}),e?m.insertedNodeKeys=g.xa():m.removedNodeKeys=g.xa()),g.clear(),f.clear(),m},at.prototype.cloneDeep=function(t){return Hs(this,t,!0)},(D=at.prototype).quote=function(t){return JSON.stringify(t).replace(/[\u007F-\uFFFF]/g,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).substr(-4)})},D.Nm=function(){var t="";return""!==this.name&&(t+=',\n  "name": '+this.quote(this.name)),""!==this.dataFormat&&(t+=',\n  "dataFormat": '+this.quote(this.dataFormat)),this.isReadOnly&&(t+=',\n  "isReadOnly": '+this.isReadOnly),"key"!==this.nodeKeyProperty&&"string"==typeof this.nodeKeyProperty&&(t+=',\n  "nodeKeyProperty": '+this.quote(this.nodeKeyProperty)),this.copiesArrays&&(t+=',\n  "copiesArrays": true'),this.copiesArrayObjects&&(t+=',\n  "copiesArrayObjects": true'),this.copiesKey||(t+=',\n  "copiesKey": false'),"category"!==this.nodeCategoryProperty&&"string"==typeof this.nodeCategoryProperty&&(t+=',\n  "nodeCategoryProperty": '+this.quote(this.nodeCategoryProperty)),t},D.zq=function(t){t.name&&(this.name=t.name),t.dataFormat&&(this.dataFormat=t.dataFormat),t.isReadOnly&&(this.isReadOnly=!0),t.nodeKeyProperty&&(this.nodeKeyProperty=t.nodeKeyProperty),t.copiesArrays&&(this.copiesArrays=!0),t.copiesArrayObjects&&(this.copiesArrayObjects=!0),!1===t.copiesKey&&(this.copiesKey=!1),t.nodeCategoryProperty&&(this.nodeCategoryProperty=t.nodeCategoryProperty)},D.ow=function(){var n,t=this.modelData,e=!1;for(n in t)if(!Vv(n,t[n])){e=!0;break}return t="",e&&(t=',\n  "modelData": '+rm(this,this.modelData)),t+',\n  "nodeDataArray": '+Oa(this,this.nodeDataArray,!0)},D.Nv=function(t){yh(this,t),_n(t=t.nodeDataArray)&&(this.xm(t),this.nodeDataArray=t)},D.mw=function(t,e){var n=this,i=!1,a=new K,u=new K,h=new K,d=this.Lh;t.changes.each(function(m){m.model===n&&("nodeDataArray"===m.modelChange?m.change===Pt?a.add(m.newValue):m.change===sn&&h.add(m.oldValue):n.cb(m.object)?u.add(m.object):m.change!==ve||n.modelData!==m.object&&"modelData"!==m.propertyName?null!==m.object&&(d&&d.contains(m.object)?d.get(m.object).each(function(y){n.cb(y)&&u.add(y)}):m.object instanceof at||n.Qi()&&n.tc(m.object)||jv(n,m.object).each(function(y){u.add(y)})):i=!0)});var f=this.Bl;f.clear(),a.each(function(m){f.add(n.pa(m)),e||u.add(m)});var g=this.Dl;return g.clear(),h.each(function(m){g.add(n.pa(m)),e&&u.add(m)}),t="",i&&(t+=',\n  "modelData": '+rm(this,this.modelData)),0<f.count&&(t+=(e?this.yw:this.ww)+Oa(this,f.xa(),!0)),0<u.count&&(t+=this.Oy+Oa(this,u.xa(),!0)),0<g.count&&(t+=(e?this.ww:this.yw)+Oa(this,g.xa(),!0)),g.clear(),f.clear(),t},D.yq=function(t){(void 0!==t.name&&t.name!==this.name||void 0!==t.dataFormat&&t.dataFormat!==this.dataFormat||void 0!==t.isReadOnly&&t.isReadOnly!==this.isReadOnly||void 0!==t.nodeKeyProperty&&t.nodeKeyProperty!==this.nodeKeyProperty||void 0!==t.copiesArrays&&t.copiesArrays!==this.copiesArrays||void 0!==t.copiesArrayObjects&&t.copiesArrayObjects!==this.copiesArrayObjects||void 0!==t.copiesKey&&t.copiesKey!==this.copiesKey||void 0!==t.nodeCategoryProperty&&t.nodeCategoryProperty!==this.nodeCategoryProperty)&&z("applyIncrementalJson cannot change Model properties"),yh(this,t);var e=t.insertedNodeKeys,n=t.modifiedNodeData,i=new xt;if(Array.isArray(n))for(var a=0;a<n.length;a++){var u=n[a],h=this.pa(u);null!=h&&i.set(h,u)}if(Array.isArray(e))for(a=e.length,u=0;u<a;u++){var d=this.Vb(h=e[u]);null===d&&(d=(d=i.get(h))?d:this.copyNodeData({}),this.Em(d,h),this.nf(d))}if(Array.isArray(n))for(e=n.length,i=0;i<e;i++)if(u=this.pa(a=n[i]),null!==(u=this.Vb(u))){for(var f in a)"__gohashid"===f||f===this.nodeKeyProperty||this.nk()&&f===this.nodeIsGroupProperty||this.setDataProperty(u,f,a[f]);this.Fm(a,u)}if(t=t.removedNodeKeys,Array.isArray(t))for(n=t.length,f=0;f<n;f++)null!==(e=this.Vb(t[f]))&&this.wm(e)},D.Hy=function(t,e){t.change!==qr&&z("Model.toIncrementalJson argument is not a Transaction ChangedEvent:"+t.toString());var n=t.object;return t.isTransactionFinished&&n instanceof bn?(void 0===e&&(e=Yc(this,this)),Rv(this,n),t=this.mw(n,"FinishedUndo"===t.propertyName),this.Lh=null,"2"===e?'{ "incremental": 2'+t+"}":'{ "class": '+this.quote(e)+', "incremental": 1'+this.Nm()+t+"}"):'{ "incremental": 0 }'},D.bB=function(t,e){return this.Hy(t,e)},D.Hq=function(t){return void 0===t&&(t=Yc(this,this)),'{ "class": '+this.quote(t)+this.Nm()+this.ow()+"}"},D.toJSON=function(t){return this.Hq(t)},D.Cx=function(t){var e=null;if("string"==typeof t)try{e=dt.JSON.parse(t)}catch(i){}else"object"==typeof t?e=t:z("Unable to modify a Model from: "+t);var n=e.incremental;"number"!=typeof n&&z("Unable to apply non-incremental changes to Model: "+t),0!==n&&(this.wa("applyIncrementalJson"),this.yq(e),this.Xa("applyIncrementalJson"))},D.mz=function(t){return this.Cx(t)},at.constructGraphLinksModel=function(){return new at},(D=at.prototype).xm=function(t){if(_n(t))for(var e=t.length,n=0;n<e;n++){var i=t[n];if(Et(i)){var a=n;i=this.xm(i),Array.isArray(t)?t[a]=i:z("Cannot replace an object in an HTMLCollection or NodeList at "+a)}}else if(Et(t)){for(e in t)if(Et(n=t[e])&&(n=this.xm(n),t[e]=n,"points"===e&&Array.isArray(n))){for(a=n.length%2==0,i=0;i<n.length;i++)if("number"!=typeof n[i]){a=!1;break}if(a){for(a=new et,i=0;i<n.length/2;i++)a.add(new N(n[2*i],n[2*i+1]));a.freeze(),t[e]=a}}return function Ow(t){if("object"!=typeof t)return t;var e=t.class||"";if("NaN"===e)return NaN;if("Date"===e)return new Date(t.value);if(0!==e.indexOf("go."))return t;var n=t;if("Point"===(e=e.substr(3)))n=new N(li(t.x),li(t.y));else if("Size"===e)n=new mt(li(t.width),li(t.height));else if("Rect"===e)n=new B(li(t.x),li(t.y),li(t.width),li(t.height));else if("Margin"===e)n=new Lt(li(t.top),li(t.right),li(t.bottom),li(t.left));else if("Spot"===e)n="string"==typeof t.enum?ly(t.enum):new ct(li(t.x),li(t.y),li(t.offsetX),li(t.offsetY));else if("Brush"===e){if((n=new Bt).type=ua(Bt,t.type),"string"==typeof t.color&&(n.color=t.color),t.start instanceof ct&&(n.start=t.start),t.end instanceof ct&&(n.end=t.end),"number"==typeof t.startRadius&&(n.startRadius=li(t.startRadius)),"number"==typeof t.endRadius&&(n.endRadius=li(t.endRadius)),Et(t=t.colorStops))for(var i in t)n.addColorStop(parseFloat(i),t[i])}else"Geometry"===e?(n=null,(n="string"==typeof t.path?q.parse(t.path):new q).type=ua(q,t.type),"number"==typeof t.startX&&(n.startX=li(t.startX)),"number"==typeof t.startY&&(n.startY=li(t.startY)),"number"==typeof t.endX&&(n.endX=li(t.endX)),"number"==typeof t.endY&&(n.endY=li(t.endY)),t.spot1 instanceof ct&&(n.spot1=t.spot1),t.spot2 instanceof ct&&(n.spot2=t.spot2)):"EnumValue"===e&&(0===(i=t.classType).indexOf("go.")&&(i=i.substr(3)),"function"==typeof(i=Uv(i))&&(n=ua(i,t.name)));return n}(t)}return t},D.Om=function(t){return void 0===t?"undefined":null===t?"null":!0===t?"true":!1===t?"false":"string"==typeof t?this.quote(t):"number"==typeof t?t===1/0?"9e9999":t===-1/0?"-9e9999":isNaN(t)?'{"class":"NaN"}':t.toString():t instanceof Date?'{"class":"Date", "value":"'+t.toJSON()+'"}':t instanceof Number?this.Om(t.valueOf()):_n(t)?Oa(this,t):Et(t)?rm(this,t):"function"==typeof t?"null":t.toString()},D.uh=function(t){return this.hu.add(t),this},D.Bk=function(t){this.hu.remove(t)},D.ws=function(t){this.skipsUndoManager||this.undoManager.yv(t);for(var e=this.hu,n=e.length,i=0;i<n;i++)e.J(i)(t)},D.Va=function(t,e,n,i,a,u,h){Je(this,"",t,e,n,i,a,u,h)},D.g=function(t,e,n,i,a){Je(this,"",ve,t,this,e,n,i,a)},D.$s=function(t,e,n,i,a,u){Je(this,"",ve,e,t,n,i,a,u)},at.prototype.changeState=function(t,e){if(null!==t&&t.model===this)if(t.change===ve){var n=t.object,i=t.propertyName,a=t.H(e);i===this.nodeKeyProperty&&this.cb(n)&&(void 0!==(e=t.H(!e))&&this.bb.remove(e),void 0!==a&&this.bb.add(a,n)),ce(n,i,a)}else t.change===Pt?(n=t.newParam,"nodeDataArray"===t.modelChange?Et(t=t.newValue)&&"number"==typeof n&&(i=this.pa(t),e?(this.Cc[n]===t&&kl(this.Cc,n),void 0!==i&&this.bb.remove(i)):(this.Cc[n]!==t&&Tl(this.Cc,n,t),void 0!==i&&this.bb.add(i,t))):""===t.modelChange?((i=t.object)&&!_n(i)&&t.propertyName&&(i=je(t.object,t.propertyName)),_n(i)&&"number"==typeof n&&(t=t.newValue,e?kl(i,n):Tl(i,n,t))):z("unknown ChangedEvent.Insert modelChange: "+t.toString())):t.change===sn?(n=t.oldParam,"nodeDataArray"===t.modelChange?Et(t=t.oldValue)&&"number"==typeof n&&(i=this.pa(t),e?(this.Cc[n]!==t&&Tl(this.Cc,n,t),void 0!==i&&this.bb.add(i,t)):(this.Cc[n]===t&&kl(this.Cc,n),void 0!==i&&this.bb.remove(i))):""===t.modelChange?((i=t.object)&&!_n(i)&&t.propertyName&&(i=je(t.object,t.propertyName)),_n(i)&&"number"==typeof n&&(t=t.oldValue,e?Tl(i,n,t):kl(i,n))):z("unknown ChangedEvent.Remove modelChange: "+t.toString())):t.change!==qr&&z("unknown ChangedEvent: "+t.toString())},at.prototype.wa=function(t){return this.undoManager.wa(t)},at.prototype.Xa=function(t){return this.undoManager.Xa(t)},at.prototype.Df=function(){return this.undoManager.Df()},at.prototype.commit=function(t,e){void 0===e&&(e="");var n=this.skipsUndoManager;null===e&&(this.skipsUndoManager=!0,e=""),this.undoManager.wa(e);var i=!1;try{t(this),i=!0}finally{i?this.undoManager.Xa(e):this.undoManager.Df(),this.skipsUndoManager=n}},(D=at.prototype).Da=function(t,e){void 0===e&&(e=""),Je(this,"SourceChanged",qr,e,t,null,null)},D.pa=function(t){if(null!==t){var e=this.ni;if(""!==e&&void 0!==(e=je(t,e))){if(cl(e))return e;z("Key value for node data "+t+" is not a number or a string: "+e)}}},D.Em=function(t,e){if(null!==t){var n=this.ni;if(""!==n)if(this.cb(t)){var i=je(t,n);i!==e&&null===this.Vb(e)&&(ce(t,n,e),void 0!==i&&this.bb.remove(i),this.bb.add(e,t),Je(this,"nodeKey",ve,n,t,i,e),"string"==typeof n&&this.Da(t,n),this.Dq(i,e))}else ce(t,n,e)}},D.cb=function(t){var e=this.pa(t);return void 0!==e&&this.bb.H(e)===t},D.Vb=function(t){return null===t&&z("Model.findNodeDataForKey:key must not be null"),void 0!==t&&cl(t)?this.bb.H(t):null},D.Fv=function(t){if(null!==t){var e=this.ni;if(""!==e){var n=this.pa(t);if(void 0===n||this.bb.contains(n)){var i=this.vl;if(null!==i&&null!=(n=i(this,t))&&!this.bb.contains(n))return void ce(t,e,n);if("string"==typeof n){for(i=2;this.bb.contains(n+i);)i++;ce(t,e,n+i)}else if(void 0===n||"number"==typeof n){for(n=-this.bb.count-1;this.bb.contains(n);)n--;ce(t,e,n)}}}}},D.nf=function(t){null!==t&&(Zo(t),this.cb(t)||Fw(this,t,!0))},D.iz=function(t){if(_n(t))for(var e=t.length,n=0;n<e;n++)this.nf(t[n]);else for(t=t.iterator;t.next();)this.nf(t.value)},D.wm=function(t){null!==t&&om(this,t,!0)},D.QA=function(t){if(_n(t))for(var e=t.length,n=0;n<e;n++)this.wm(t[n]);else for(t=t.iterator;t.next();)this.wm(t.value)},D.DA=function(t){if(t!==this.nodeDataArray&&_n(t)){var e=this.Dl;e.clear(),e.addAll(this.bb.iteratorKeys);var n=this.Bl;n.clear();for(var i=t.length,a=0;a<i;a++){var u=t[a],h=this.pa(u);if(void 0!==h){n.add(h);var d=this.Vb(h);d!==u&&(null!==d?(this.Yp(d,u),this.Fm(u,d)):(u=this.cloneDeep(u),this.Em(u,h),this.nf(u)))}else h=this.cloneDeep(u),this.nf(h),n.add(this.pa(h))}for(t=e.iterator;t.next();)n.contains(i=t.value)||(i=this.Vb(i))&&this.wm(i);e.clear(),n.clear()}},D.Dq=function(t,e){void 0!==e&&(t=Pf(this,t))instanceof K&&this.Lf.add(e,t)},D.hw=function(){},D.zm=function(){},D.ym=function(){},D.Kq=function(){},D.uz=function(t){void 0===t?this.Lf.clear():this.Lf.remove(t)},at.prototype.copyNodeData=function(t){if(null===t)return null;var e=this.Sk;return Et(t=null!==e?e(t,this):Af(this,t,!0))&&xn(t),t},at.prototype.setDataProperty=function(t,e,n){if(this.cb(t)){if(e===this.nodeKeyProperty)return void this.Em(t,n);if(e===this.nodeCategoryProperty)return void this.Dm(t,n)}else!Lw&&t instanceof ut&&(Lw=!0,Oi('Model.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),Oi("  Is that really your intent?"));var i=je(t,e);i!==n&&(ce(t,e,n),this.$s(t,e,i,n))},(D=at.prototype).set=function(t,e,n){this.setDataProperty(t,e,n)},D.Yp=function(t,e){if(e){var i,n=this.cb(t);for(i in e)"__gohashid"===i||n&&i===this.nodeKeyProperty||this.setDataProperty(t,i,e[i])}},D.ez=function(t,e){this.Ks(t,-1,e)},D.Ks=function(t,e,n){0>e&&(e=t.length),Tl(t,e,n),Je(this,"",Pt,"",t,null,n,null,e)},D.Qv=function(t,e){void 0===e&&(e=-1),t===this.Cc&&z("Model.removeArrayItem should not be called on the Model.nodeDataArray"),-1===e&&(e=t.length-1);var n=t[e];kl(t,e),Je(this,"",sn,"",t,n,null,e,null)},D.lq=function(t){if(null===t)return"";var e=this.Kj;return""===e||void 0===(e=je(t,e))?"":"string"==typeof e?e:void z("getCategoryForNodeData found a non-string category for "+t+": "+e)},D.Dm=function(t,e){if(null!==t){var n=this.Kj;if(""!==n)if(this.cb(t)){var i=je(t,n);void 0===i&&(i=""),i!==e&&(ce(t,n,e),Je(this,"nodeCategory",ve,n,t,i,e))}else ce(t,n,e)}},D.Fm=function(t,e){this.Dm(e,this.lq(t))},D.nm=function(){return!1},D.nk=function(){return!1},D.Qi=function(){return!1},D.Ps=function(){return!1},D.pk=function(){return!1},Dt.Object.defineProperties(at.prototype,{name:{get:function(){return this.na},set:function(t){var e=this.na;e!==t&&(this.na=t,this.g("name",e,t))}},dataFormat:{get:function(){return this.vn},set:function(t){var e=this.vn;e!==t&&(this.vn=t,this.g("dataFormat",e,t))}},isReadOnly:{get:function(){return this.Mg},set:function(t){var e=this.Mg;e!==t&&(this.Mg=t,this.g("isReadOnly",e,t))}},modelData:{get:function(){return this.j},set:function(t){var e=this.j;e!==t&&(this.j=t,this.g("modelData",e,t),this.Da(t))}},undoManager:{get:function(){return this.o},set:function(t){var e=this.o;e!==t&&(null!==e&&e.xy(this),this.o=t,null!==t&&t.Ax(this))}},skipsUndoManager:{get:function(){return this.gh},set:function(t){this.gh=t}},nodeKeyProperty:{get:function(){return this.ni},set:function(t){var e=this.ni;e!==t&&(""===t&&z("Model.nodeKeyProperty may not be the empty string"),0<this.bb.count&&z("Cannot set Model.nodeKeyProperty when there is existing node data"),this.ni=t,this.g("nodeKeyProperty",e,t))}},makeUniqueKeyFunction:{get:function(){return this.vl},set:function(t){var e=this.vl;e!==t&&(this.vl=t,this.g("makeUniqueKeyFunction",e,t))}},nodeDataArray:{get:function(){return this.Cc},set:function(t){var e=this.Cc;if(e!==t){this.bb.clear(),this.hw();for(var n=t.length,i=0;i<n;i++){var a=t[i];Et(a)||z("Model.nodeDataArray must only contain Objects, not: "+a),Zo(a)}for(this.Cc=t,i=new et,a=0;a<n;a++){var u=t[a],h=this.pa(u);void 0===h||null!==this.bb.H(h)?i.add(u):this.bb.add(h,u)}for(i=i.iterator;i.next();)this.Fv(a=i.value),void 0!==(u=this.pa(a))&&this.bb.add(u,a);for(Je(this,"nodeDataArray",ve,"nodeDataArray",this,e,t),e=0;e<n;e++)this.zm(i=t[e]),this.ym(i);Array.isArray(t)||(this.isReadOnly=!0)}}},copyNodeDataFunction:{get:function(){return this.Sk},set:function(t){var e=this.Sk;e!==t&&(this.Sk=t,this.g("copyNodeDataFunction",e,t))}},copiesArrays:{get:function(){return this.nn},set:function(t){var e=this.nn;e!==t&&(this.nn=t,this.g("copiesArrays",e,t))}},copiesArrayObjects:{get:function(){return this.mn},set:function(t){var e=this.mn;e!==t&&(this.mn=t,this.g("copiesArrayObjects",e,t))}},copiesKey:{get:function(){return this.pn},set:function(t){var e=this.pn;e!==t&&(this.pn=t,this.g("copiesKey",e,t))}},afterCopyFunction:{get:function(){return this.Ym},set:function(t){var e=this.Ym;e!==t&&(this.Ym=t,this.g("afterCopyFunction",e,t))}},nodeCategoryProperty:{get:function(){return this.Kj},set:function(t){var e=this.Kj;e!==t&&(this.Kj=t,this.g("nodeCategoryProperty",e,t))}},type:{get:function(){return"Model"}}}),at.prototype.setCategoryForNodeData=at.prototype.Dm,at.prototype.getCategoryForNodeData=at.prototype.lq,at.prototype.removeArrayItem=at.prototype.Qv,at.prototype.insertArrayItem=at.prototype.Ks,at.prototype.addArrayItem=at.prototype.ez,at.prototype.assignAllDataProperties=at.prototype.Yp,at.prototype.set=at.prototype.set,at.prototype.clearUnresolvedReferences=at.prototype.uz,at.prototype.mergeNodeDataArray=at.prototype.DA,at.prototype.removeNodeDataCollection=at.prototype.QA,at.prototype.removeNodeData=at.prototype.wm,at.prototype.addNodeDataCollection=at.prototype.iz,at.prototype.addNodeData=at.prototype.nf,at.prototype.makeNodeDataKeyUnique=at.prototype.Fv,at.prototype.findNodeDataForKey=at.prototype.Vb,at.prototype.containsNodeData=at.prototype.cb,at.prototype.setKeyForNodeData=at.prototype.Em,at.prototype.getKeyForNodeData=at.prototype.pa,at.prototype.updateTargetBindings=at.prototype.Da,at.prototype.commit=at.prototype.commit,at.prototype.rollbackTransaction=at.prototype.Df,at.prototype.commitTransaction=at.prototype.Xa,at.prototype.startTransaction=at.prototype.wa,at.prototype.raiseDataChanged=at.prototype.$s,at.prototype.raiseChanged=at.prototype.g,at.prototype.raiseChangedEvent=at.prototype.Va,at.prototype.removeChangedListener=at.prototype.Bk,at.prototype.addChangedListener=at.prototype.uh,at.prototype.writeJsonValue=at.prototype.Om,at.prototype.replaceJsonObjects=at.prototype.xm,at.prototype.applyIncrementalJSON=at.prototype.mz,at.prototype.applyIncrementalJson=at.prototype.Cx,at.prototype.toJSON=at.prototype.toJSON,at.prototype.toJson=at.prototype.Hq,at.prototype.toIncrementalJSON=at.prototype.bB,at.prototype.toIncrementalJson=at.prototype.Hy,at.prototype.toIncrementalData=at.prototype.aB,at.prototype.clear=at.prototype.clear;var Lw=!1,Nr={};function Fe(t,e,n,i){xn(this),this.v=!1,void 0===t&&(t=""),void 0===e&&(e=t),void 0===n&&(n=null),this.j=-1,this.md=null,this.Yl=t,this.Xl=this.Jp=0,this.gs=null,this.lo=!1,this.Ql=e,this.ln=n,void 0===i?(this.yl=m_,this.Lk=null):(this.yl=sm,this.Lk=i),this.Ot=new K}function Rw(t,e,n){return null===(t=t.sourceName)||""===t?e:"/"===t?n.part:"."===t?n:".."===t?n.panel:e.Ya(t)}at.className="Model",at.fromJSON=at.fromJson=function(t,e){void 0===e&&(e=null);var n=null;if("string"==typeof t)try{n=dt.JSON.parse(t)}catch(u){}else"object"==typeof t?n=t:z("Unable to construct a Model from: "+t);if(null===e){t=null;var i=n.class;if("string"==typeof i)try{var a=null;0===i.indexOf("go.")?a=Uv(i=i.substr(3)):null===(a=Uv(i))&&(a=dt[i]),"function"==typeof a&&(t=new a)}catch(u){}null===t||t instanceof at?e=t:z("Unable to construct a Model of declared class: "+n.class)}return null===e&&(e=at.constructGraphLinksModel()),e.zq(n),e.Nv(n),e},at.safePropertyValue=je,at.safePropertySet=ce,Nr.Brush=Bt,Nr.ChangedEvent=le,Nr.Geometry=q,Nr.Margin=Lt,Nr.Panel=Y,Nr.Point=N,Nr.Rect=B,Nr.Size=mt,Nr.Spot=ct,Nr.Transaction=bn,Nr.UndoManager=be,Fe.prototype.copy=function(){var t=new Fe;return t.Yl=this.Yl,t.Jp=this.Jp,t.Xl=this.Xl,t.gs=this.gs,t.lo=this.lo,t.Ql=this.Ql,t.ln=this.ln,t.yl=this.yl,t.Lk=this.Lk,t},(D=Fe.prototype).gb=function(t){t.classType===Fe&&(this.mode=t)},D.toString=function(){return"Binding("+this.targetProperty+":"+this.sourceProperty+(-1!==this.Yi?" "+this.Yi:"")+" "+this.mode.name+")"},D.freeze=function(){return this.v=!0,this},D.ea=function(){return this.v=!1,this},D.oy=function(t){return void 0===t&&(t=null),this.mode=sm,this.backConverter=t,this},D.wq=function(t){return void 0===t&&(t=""),this.sourceName=t,this.isToModel=!1,this},D.GA=function(){return this.sourceName=null,this.isToModel=!0,this},D.iw=function(t,e,n){var i=this.Ql;if(void 0===n||""===i||i===n){n=this.Yl;var a=this.ln;if(null===a&&""===n)Oi("Binding error: target property is the empty string: "+this.toString());else{var u=e;if(""!==i&&(u=je(e,i)),void 0!==u)if(null===a)""!==n&&ce(t,n,u);else try{""!==n?ce(t,n,a(u,t)):a(u,t)}catch(d){}}}},D.Mq=function(t,e,n,i){if(this.yl===sm){var a=this.Yl;if(void 0===n||a===n){n=this.Ql;var u=this.Lk,h=t;if(""!==a&&(h=je(t,a)),void 0!==h&&!this.Ot.contains(t))try{this.Ot.add(t);var d=null!==i?i.diagram:null,f=null!==d?d.model:null;if(null===u){if(""!==n)null!==f?f.setDataProperty(e,n,h):ce(e,n,h);else if(null!==f&&null!==i&&0<=i.itemIndex&&null!==i.panel&&Array.isArray(i.panel.itemArray)){var g=i.itemIndex,m=i.panel.itemArray;f.Qv(m,g),f.Ks(m,g,h)}}else try{if(""!==n){var y=u(h,e,f);null!==f?f.setDataProperty(e,n,y):ce(e,n,y)}else{var x=u(h,e,f);if(void 0!==x&&null!==f&&null!==i&&0<=i.itemIndex&&null!==i.panel&&Array.isArray(i.panel.itemArray)){var _=i.itemIndex,M=i.panel.itemArray;f.Qv(M,_),f.Ks(M,_,x)}}}catch(S){}}finally{this.Ot.remove(t)}}}},Dt.Object.defineProperties(Fe.prototype,{Yi:{get:function(){return this.j},set:function(t){this.v&&bt(this),this.j=t}},targetProperty:{get:function(){return this.Yl},set:function(t){this.v&&bt(this),this.Yl=t}},sourceName:{get:function(){return this.gs},set:function(t){this.v&&bt(this),this.gs=t,null!==t&&(this.lo=!1)}},isToModel:{get:function(){return this.lo},set:function(t){this.v&&bt(this),this.lo=t}},sourceProperty:{get:function(){return this.Ql},set:function(t){this.v&&bt(this),this.Ql=t}},converter:{get:function(){return this.ln},set:function(t){this.v&&bt(this),this.ln=t}},backConverter:{get:function(){return this.Lk},set:function(t){this.v&&bt(this),this.Lk=t}},mode:{get:function(){return this.yl},set:function(t){this.v&&bt(this),this.yl=t}}}),Fe.prototype.updateSource=Fe.prototype.Mq,Fe.prototype.updateTarget=Fe.prototype.iw,Fe.prototype.ofModel=Fe.prototype.GA,Fe.prototype.ofObject=Fe.prototype.wq,Fe.prototype.makeTwoWay=Fe.prototype.oy;var sS="Binding",m_=new J(Fe,"OneWay",1),sm=new J(Fe,"TwoWay",2);function kt(t,e,n){at.call(this),this.vw=',\n  "insertedLinkKeys": ',this.Ny=',\n  "modifiedLinkData": ',this.xw=',\n  "removedLinkKeys": ',this.Xc=[],this.Rf=new K,this.jb=new xt,this.gi="",this.mj=this.Rk=this.wl=null,this.Xe="from",this.Ye="to",this.Gj=this.Fj="",this.Ej="category",this.$d="",this.Cl="isGroup",this.xe="group",this.on=!1,void 0!==e&&(this.linkDataArray=e),void 0!==t&&(_n(t)?this.nodeDataArray=t:Object.assign(this,t)),n&&Object.assign(this,n)}function Hv(t,e){for(var n=new K,i=0;i<t.linkDataArray.length;i++){var a=t.linkDataArray[i];Nf(t,e,a,a,n)}return n}function Pr(t,e,n){if(null!==e&&""!==(t=n?t.Xe:t.Ye)&&void 0!==(t=je(e,t))){if(cl(t))return t;z((n?"FromKey":"ToKey")+" value for link data "+e+" is not a number or a string: "+t)}}function Xc(t,e,n,i){if(null===n&&(n=void 0),null!==e){var a=i?t.Xe:t.Ye;if(""!==a)if(n=t.pm(n),t.tc(e)){var u=je(e,a);u!==n&&(Co(t,u,e),ce(e,a,n),null===t.Vb(n)&&ro(t,n,e),Je(t,i?"linkFromKey":"linkToKey",ve,a,e,u,n),"string"==typeof a&&t.Da(e,a))}else ce(e,a,n)}}function dl(t,e,n){return null===e||""===(t=n?t.Fj:t.Gj)||void 0===(e=je(e,t))?"":e}function $c(t,e,n,i){if(null!==e){var a=i?t.Fj:t.Gj;if(""!==a)if(t.tc(e)){var u=je(e,a);void 0===u&&(u=""),u!==n&&(ce(e,a,n),Je(t,i?"linkFromPortId":"linkToPortId",ve,a,e,u,n),"string"==typeof a&&t.Da(e,a))}else ce(e,a,n)}}function Gv(t,e,n){if(""!==t.linkKeyProperty){var i=t.mc(e);if(void 0!==i&&t.jb.H(i)===e)return;t.Us(e),void 0===(i=t.mc(e))&&z("GraphLinksModel.makeLinkDataKeyUnique failed on "+e+". Data not added to model."),t.jb.add(i,e)}t.Rf.add(e),i=null,n&&t.Xc.splice(i=t.Xc.length,0,e),Je(t,"linkDataArray",Pt,"linkDataArray",t,null,e,null,i),am(t,e)}function jw(t,e,n){t.Rf.remove(e);var i=t.mc(e);if(void 0!==i&&t.jb.remove(i),i=null,n){if(0>(i=t.Xc.indexOf(e)))return;t.Xc.splice(i,1)}if(Je(t,"linkDataArray",sn,"linkDataArray",t,e,null,i,null),Co(t,n=Pr(t,e,!0),e),Co(t,n=Pr(t,e,!1),e),i=t.xf(e),Array.isArray(i))for(var a=i.length,u=0;u<a;u++)Co(t,n=i[u],e)}function am(t,e){var n=Pr(t,e,!0);n=t.pm(n),null===t.Vb(n)&&ro(t,n,e),n=Pr(t,e,!1),n=t.pm(n),null===t.Vb(n)&&ro(t,n,e);var i=t.xf(e);if(Array.isArray(i))for(var a=i.length,u=0;u<a;u++)null===t.Vb(n=i[u])&&ro(t,n,e)}function If(t,e,n){t.Fq(n,t.Gs(e)),t.Wv(n,t.Zx(e)),t.$v(n,t.by(e)),t.et(n,t.xf(e)),t.Xv(n,t.$x(e)),t.aw(n,t.ey(e))}Fe.className="Binding",Fe.parseEnum=function(t,e){return function(n){return null===(n=ua(t,n))?e:n}},Fe.toString=sr,Fe.OneWay=m_,Fe.TwoWay=sm,Ft(kt,at),kt.constructGraphLinksModel=at.constructGraphLinksModel,kt.prototype.cloneProtected=function(t){at.prototype.cloneProtected.call(this,t),t.gi=this.gi,t.wl=this.wl,t.Rk=this.Rk,t.Xe=this.Xe,t.Ye=this.Ye,t.Fj=this.Fj,t.Gj=this.Gj,t.Ej=this.Ej,t.$d=this.$d,t.Cl=this.Cl,t.xe=this.xe,t.on=this.on},(D=kt.prototype).clear=function(){at.prototype.clear.call(this),this.Xc=[],this.jb.clear(),this.Rf.clear()},D.toString=function(t){if(void 0===t&&(t=0),2<=t)return this.Hq();var e=(""!==this.name?this.name:"")+" GraphLinksModel";if(0<t){e+="\n node data:";var i,n=(t=this.nodeDataArray).length;for(i=0;i<n;i++){var a=t[i];e+=" "+this.pa(a)+":"+sr(a)}for(e+="\n link data:",n=(t=this.linkDataArray).length,i=0;i<n;i++)e+=" "+Pr(this,a=t[i],!0)+"--\x3e"+Pr(this,a,!1)}return e},D.nw=function(t,e){""===this.linkKeyProperty&&z("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalData() to succeed.");var n=at.prototype.nw.call(this,t,e),i=this,a=new K,u=new K,h=new K,d=this.Lh;t.changes.each(function(m){m.model===i&&("linkDataArray"===m.modelChange?m.change===Pt?a.add(m.newValue):m.change===sn&&h.add(m.oldValue):i.tc(m.object)?u.add(m.object):null!==m.object&&(null!==m.object&&d&&d.contains(m.object)?d.get(m.object).each(function(y){i.tc(y)&&u.add(y)}):m.object instanceof at||i.cb(m.object)||Hv(i,m.object).each(function(y){u.add(y)})))});var f=this.Bl;f.clear(),a.each(function(m){f.add(i.mc(m)),e||u.add(m)});var g=this.Dl;return g.clear(),h.each(function(m){g.add(i.mc(m)),e&&u.add(m)}),t=i.cloneDeep(u.xa()),0<f.count&&(null===n&&(n={}),e?n.removedLinkKeys=f.xa():n.insertedLinkKeys=f.xa()),0<t.length&&(null===n&&(n={}),n.modifiedLinkData=t),0<g.count&&(null===n&&(n={}),e?n.insertedLinkKeys=g.xa():n.removedLinkKeys=g.xa()),g.clear(),f.clear(),n},D.Nm=function(){var t=at.prototype.Nm.call(this),e="";return"category"!==this.linkCategoryProperty&&"string"==typeof this.linkCategoryProperty&&(e+=',\n  "linkCategoryProperty": '+this.quote(this.linkCategoryProperty)),""!==this.linkKeyProperty&&"string"==typeof this.linkKeyProperty&&(e+=',\n  "linkKeyProperty": '+this.quote(this.linkKeyProperty)),"from"!==this.linkFromKeyProperty&&"string"==typeof this.linkFromKeyProperty&&(e+=',\n  "linkFromKeyProperty": '+this.quote(this.linkFromKeyProperty)),"to"!==this.linkToKeyProperty&&"string"==typeof this.linkToKeyProperty&&(e+=',\n  "linkToKeyProperty": '+this.quote(this.linkToKeyProperty)),""!==this.linkFromPortIdProperty&&"string"==typeof this.linkFromPortIdProperty&&(e+=',\n  "linkFromPortIdProperty": '+this.quote(this.linkFromPortIdProperty)),""!==this.linkToPortIdProperty&&"string"==typeof this.linkToPortIdProperty&&(e+=',\n  "linkToPortIdProperty": '+this.quote(this.linkToPortIdProperty)),""!==this.linkLabelKeysProperty&&"string"==typeof this.linkLabelKeysProperty&&(e+=',\n  "linkLabelKeysProperty": '+this.quote(this.linkLabelKeysProperty)),"isGroup"!==this.nodeIsGroupProperty&&"string"==typeof this.nodeIsGroupProperty&&(e+=',\n  "nodeIsGroupProperty": '+this.quote(this.nodeIsGroupProperty)),"group"!==this.nodeGroupKeyProperty&&"string"==typeof this.nodeGroupKeyProperty&&(e+=',\n  "nodeGroupKeyProperty": '+this.quote(this.nodeGroupKeyProperty)),t+e},D.zq=function(t){at.prototype.zq.call(this,t),t.linkKeyProperty&&(this.linkKeyProperty=t.linkKeyProperty),t.linkFromKeyProperty&&(this.linkFromKeyProperty=t.linkFromKeyProperty),t.linkToKeyProperty&&(this.linkToKeyProperty=t.linkToKeyProperty),t.linkFromPortIdProperty&&(this.linkFromPortIdProperty=t.linkFromPortIdProperty),t.linkToPortIdProperty&&(this.linkToPortIdProperty=t.linkToPortIdProperty),t.linkCategoryProperty&&(this.linkCategoryProperty=t.linkCategoryProperty),t.linkLabelKeysProperty&&(this.linkLabelKeysProperty=t.linkLabelKeysProperty),t.nodeIsGroupProperty&&(this.nodeIsGroupProperty=t.nodeIsGroupProperty),t.nodeGroupKeyProperty&&(this.nodeGroupKeyProperty=t.nodeGroupKeyProperty)},D.ow=function(){return at.prototype.ow.call(this)+',\n  "linkDataArray": '+Oa(this,this.linkDataArray,!0)},D.Nv=function(t){at.prototype.Nv.call(this,t),t=t.linkDataArray,Array.isArray(t)&&(this.xm(t),this.linkDataArray=t)},D.mw=function(t,e){""===this.linkKeyProperty&&z("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalJson() to succeed.");var n=at.prototype.mw.call(this,t,e),i=this,a=new K,u=new K,h=new K,d=this.Lh;t.changes.each(function(m){m.model===i&&("linkDataArray"===m.modelChange?m.change===Pt?a.add(m.newValue):m.change===sn&&h.add(m.oldValue):i.tc(m.object)?u.add(m.object):null!==m.object&&(null!==m.object&&d&&d.contains(m.object)?d.get(m.object).each(function(y){i.tc(y)&&u.add(y)}):m.object instanceof at||i.cb(m.object)||Hv(i,m.object).each(function(y){u.add(y)})))});var f=this.Bl;f.clear(),a.each(function(m){f.add(i.mc(m)),e||u.add(m)});var g=this.Dl;return g.clear(),h.each(function(m){g.add(i.mc(m)),e&&u.add(m)}),t=n,0<f.count&&(t+=(e?this.xw:this.vw)+Oa(this,f.xa(),!0)),0<u.count&&(t+=this.Ny+Oa(this,u.xa(),!0)),0<g.count&&(t+=(e?this.vw:this.xw)+Oa(this,g.xa(),!0)),g.clear(),f.clear(),t},D.yq=function(t){(void 0!==t.linkCategoryProperty&&t.linkCategoryProperty!==this.linkCategoryProperty||void 0!==t.linkKeyProperty&&t.linkKeyProperty!==this.linkKeyProperty||void 0!==t.linkFromKeyProperty&&t.linkFromKeyProperty!==this.linkFromKeyProperty||void 0!==t.linkToKeyProperty&&t.linkToKeyProperty!==this.linkToKeyProperty||void 0!==t.linkFromPortIdProperty&&t.linkFromPortIdProperty!==this.linkFromPortIdProperty||void 0!==t.linkToPortIdProperty&&t.linkToPortIdProperty!==this.linkToPortIdProperty||void 0!==t.linkLabelKeysProperty&&t.linkLabelKeysProperty!==this.linkLabelKeysProperty||void 0!==t.nodeIsGroupProperty&&t.nodeIsGroupProperty!==this.nodeIsGroupProperty||void 0!==t.nodeGroupKeyProperty&&t.nodeGroupKeyProperty!==this.nodeGroupKeyProperty)&&z("applyIncrementalJson cannot change Model properties"),at.prototype.yq.call(this,t);var e=t.insertedLinkKeys;if(Array.isArray(e))for(var n=e.length,i=0;i<n;i++){var a=e[i],u=this.zh(a);null===u&&(u=this.eq({}),this.dt(u,a),this.Ci(u))}if(e=t.modifiedLinkData,Array.isArray(e))for(n=e.length,i=0;i<n;i++)if(u=this.mc(a=e[i]),null!==(u=this.zh(u))){for(var h in a)"__gohashid"!==h&&h!==this.linkKeyProperty&&this.setDataProperty(u,h,a[h]);If(this,a,u)}if(t=t.removedLinkKeys,Array.isArray(t))for(h=t.length,e=0;e<h;e++)null!==(n=this.zh(t[e]))&&this.vm(n)},kt.prototype.changeState=function(t,e){if(null!==t&&t.model===this){if(t.change===ve){var n=t.object,i=t.propertyName;if(i===this.linkKeyProperty&&this.tc(n)){var a=t.H(e);return void 0!==(e=t.H(!e))&&this.jb.remove(e),void 0!==a&&this.jb.add(a,n),void ce(n,i,a)}}else if(t.change===Pt){if(n=t.newParam,"linkDataArray"===t.modelChange)return void(Et(t=t.newValue)&&"number"==typeof n&&(i=this.mc(t),e?(this.Rf.remove(t),this.Xc[n]===t&&this.Xc.splice(n,1),void 0!==i&&this.jb.remove(i)):(this.Rf.add(t),this.Xc[n]!==t&&this.Xc.splice(n,0,t),void 0!==i&&this.jb.add(i,t))));if("linkLabelKeys"===t.modelChange)return i=this.xf(t.object),void(Array.isArray(i)&&"number"==typeof n&&(e?(n=i.indexOf(t.newValue),0<=n&&i.splice(n,1)):0>i.indexOf(t.newValue)&&i.splice(n,0,t.newValue)))}else if(t.change===sn){if(n=t.oldParam,"linkDataArray"===t.modelChange)return void(Et(t=t.oldValue)&&"number"==typeof n&&(i=this.mc(t),e?(this.Rf.add(t),this.Xc[n]!==t&&this.Xc.splice(n,0,t),void 0!==i&&this.jb.add(i,t)):(this.Rf.remove(t),this.Xc[n]===t&&this.Xc.splice(n,1),void 0!==i&&this.jb.remove(i))));if("linkLabelKeys"===t.modelChange)return i=this.xf(t.object),void(Array.isArray(i)&&"number"==typeof n&&(e?0>i.indexOf(t.newValue)&&i.splice(n,0,t.newValue):(n=i.indexOf(t.newValue),0<=n&&i.splice(n,1))))}at.prototype.changeState.call(this,t,e)}},(D=kt.prototype).pm=function(t){if(void 0!==t){var e=this.mj;if(null!==e){var n=this.Vb(t);null===n&&(ce(n=this.copyNodeData(e),this.nodeKeyProperty,t),this.nf(n))}return t}},D.Zx=function(t){return Pr(this,t,!0)},D.Wv=function(t,e){Xc(this,t,e,!0)},D.by=function(t){return Pr(this,t,!1)},D.$v=function(t,e){Xc(this,t,e,!1)},D.$x=function(t){return dl(this,t,!0)},D.Xv=function(t,e){$c(this,t,e,!0)},D.ey=function(t){return dl(this,t,!1)},D.aw=function(t,e){$c(this,t,e,!1)},D.xf=function(t){if(null===t)return lm;var e=this.$d;return""===e||void 0===(t=je(t,e))?lm:t},D.et=function(t,e){if(null!==t){var n=this.$d;if(""!==n)if(this.tc(t)){var i=je(t,n);if(void 0===i&&(i=lm),i!==e){if(Array.isArray(i))for(var a=i.length,u=0;u<a;u++)Co(this,i[u],t);for(ce(t,n,e),a=e.length,u=0;u<a;u++){var h=e[u];null===this.Vb(h)&&ro(this,h,t)}Je(this,"linkLabelKeys",ve,n,t,i,e),"string"==typeof n&&this.Da(t,n)}}else ce(t,n,e)}},D.av=function(t,e){if(null!=e&&null!==t){var n=this.$d;if(""!==n){var i=je(t,n);if(void 0===i)(n=[]).push(e),this.et(t,n);else if(Array.isArray(i)){var a=i.indexOf(e);0<=a||(a=i.length,i.push(e),this.tc(t)&&(null===this.Vb(e)&&ro(this,e,t),Je(this,"linkLabelKeys",Pt,n,t,null,e,null,a)))}else z(n+" property is not an Array; cannot addLabelKeyForLinkData: "+t)}}},D.wy=function(t,e){if(null!=e&&null!==t){var n=this.$d;if(""!==n){var i=je(t,n);if(Array.isArray(i)){var a=i.indexOf(e);0>a||(i.splice(a,1),this.tc(t)&&(Co(this,e,t),Je(this,"linkLabelKeys",sn,n,t,e,null,a,null)))}else void 0!==i&&z(n+" property is not an Array; cannot removeLabelKeyforLinkData: "+t)}}},D.mc=function(t){if(null!==t){var e=this.gi;if(""!==e&&void 0!==(e=je(t,e))){if(cl(e))return e;z("Key value for link data "+t+" is not a number or a string: "+e)}}},D.dt=function(t,e){if(null!==t){var n=this.gi;if(""!==n)if(this.tc(t)){var i=je(t,n);i!==e&&null===this.zh(e)&&(ce(t,n,e),void 0!==i&&this.jb.remove(i),this.jb.add(e,t),Je(this,"linkKey",ve,n,t,i,e),"string"==typeof n&&this.Da(t,n))}else ce(t,n,e)}},D.zh=function(t){return null===t&&z("GraphLinksModel.findLinkDataForKey:key must not be null"),void 0!==t&&cl(t)?this.jb.H(t):null},D.Us=function(t){if(null!==t){var e=this.gi;if(""!==e){var n=this.mc(t);if(void 0===n||this.jb.contains(n)){var i=this.wl;if(null!==i&&null!=(n=i(this,t))&&!this.jb.contains(n))return void ce(t,e,n);if("string"==typeof n){for(i=2;this.jb.contains(n+i);)i++;ce(t,e,n+i)}else if(void 0===n||"number"==typeof n){for(n=-this.jb.count-1;this.jb.contains(n);)n--;ce(t,e,n)}}}}},D.tc=function(t){return null!==t&&this.Rf.contains(t)},D.Ci=function(t){null!==t&&(Zo(t),this.tc(t)||Gv(this,t,!0))},D.hz=function(t){if(Array.isArray(t))for(var e=t.length,n=0;n<e;n++)this.Ci(t[n]);else for(t=t.iterator;t.next();)this.Ci(t.value)},D.vm=function(t){null!==t&&jw(this,t,!0)},D.OA=function(t){if(Array.isArray(t))for(var e=t.length,n=0;n<e;n++)this.vm(t[n]);else for(t=t.iterator;t.next();)this.vm(t.value)},D.CA=function(t){if(""===this.linkKeyProperty&&z("GraphLinksModel.linkKeyProperty must not be an empty string for .mergeLinkDataArray() to succeed."),t!==this.linkDataArray&&_n(t)){var e=this.Dl;e.clear(),e.addAll(this.jb.iteratorKeys);var n=this.Bl;n.clear();for(var i=t.length,a=0;a<i;a++){var u=t[a],h=this.mc(u);if(void 0!==h){n.add(h);var d=this.zh(h);d!==u&&(null!==d?(this.Yp(d,u),If(this,u,d)):(u=this.cloneDeep(u),this.dt(u,h),this.Ci(u)))}else h=this.cloneDeep(u),this.Ci(h),n.add(this.mc(h))}for(t=e.iterator;t.next();)n.contains(i=t.value)||(i=this.zh(i))&&this.vm(i);e.clear(),n.clear()}},D.eq=function(t){if(null===t)return null;var e=this.Rk;return Et(t=null!==e?e(t,this):Af(this,t,!0))&&(xn(t),""!==this.Xe&&ce(t,this.Xe,void 0),""!==this.Ye&&ce(t,this.Ye,void 0),""!==this.$d&&ce(t,this.$d,[])),t},D.Dv=function(t){if(null===t)return!1;var e=this.Cl;return""!==e&&!!je(t,e)},D.Ah=function(t){if(null!==t){var e=this.xe;if(""!==e&&void 0!==(e=je(t,e))){if(cl(e))return e;z("GroupKey value for node data "+t+" is not a number or a string: "+e)}}},D.Gq=function(t,e){if(null===e&&(e=void 0),null!==t){var n=this.xe;if(""!==n)if(this.cb(t)){var i=je(t,n);i!==e&&(Co(this,i,t),ce(t,n,e),null===this.Vb(e)&&ro(this,e,t),Je(this,"nodeGroupKey",ve,n,t,i,e),"string"==typeof n&&this.Da(t,n))}else ce(t,n,e)}},kt.prototype.copyNodeData=function(t){return null===t?null:(t=at.prototype.copyNodeData.call(this,t),this.ck||""===this.xe||void 0===je(t,this.xe)||ce(t,this.xe,void 0),t)},kt.prototype.setDataProperty=function(t,e,n){if(this.cb(t)){if(e===this.nodeKeyProperty)return void this.Em(t,n);if(e===this.nodeCategoryProperty)return void this.Dm(t,n);if(e===this.nodeGroupKeyProperty)return void this.Gq(t,n)}else if(this.tc(t)){if(e===this.linkFromKeyProperty)return void Xc(this,t,n,!0);if(e===this.linkToKeyProperty)return void Xc(this,t,n,!1);if(e===this.linkFromPortIdProperty)return void $c(this,t,n,!0);if(e===this.linkToPortIdProperty)return void $c(this,t,n,!1);if(e===this.linkKeyProperty)return void this.dt(t,n);if(e===this.linkCategoryProperty)return void this.Fq(t,n);if(e===this.linkLabelKeysProperty)return void this.et(t,n)}var i=je(t,e);i!==n&&(ce(t,e,n),this.$s(t,e,i,n))},(D=kt.prototype).Yp=function(t,e){if(e){var a,n=this.cb(t),i=this.tc(t);for(a in e)"__gohashid"===a||n&&a===this.nodeKeyProperty||n&&a===this.nodeIsGroupProperty&&je(t,a)===e[a]||i&&a===this.linkKeyProperty||this.setDataProperty(t,a,e[a])}},D.Dq=function(t,e){at.prototype.Dq.call(this,t,e);for(var n=this.bb.iterator;n.next();)this.Sv(n.value,t,e);for(n=this.Rf.iterator;n.next();){var i=n.value,a=t,u=e;if(Pr(this,i,!0)===a){var h=this.Xe;ce(i,h,u),Je(this,"linkFromKey",ve,h,i,a,u),"string"==typeof h&&this.Da(i,h)}if(Pr(this,i,!1)===a&&(ce(i,h=this.Ye,u),Je(this,"linkToKey",ve,h,i,a,u),"string"==typeof h&&this.Da(i,h)),h=this.xf(i),Array.isArray(h))for(var d=h.length,f=this.$d,g=0;g<d;g++)h[g]===a&&(h[g]=u,Je(this,"linkLabelKeys",Pt,f,i,a,u,g,g))}},D.Sv=function(t,e,n){if(this.Ah(t)===e){var i=this.xe;ce(t,i,n),Je(this,"nodeGroupKey",ve,i,t,e,n),"string"==typeof i&&this.Da(t,i)}},D.hw=function(){at.prototype.hw.call(this);for(var t=this.linkDataArray,e=t.length,n=0;n<e;n++)am(this,t[n])},D.zm=function(t){at.prototype.zm.call(this,t);var e=Pf(this,t=this.pa(t));if(null!==e){var n=ye();for(e=e.iterator;e.next();){var i=e.value;if(this.cb(i)){if(this.Ah(i)===t){var a=this.xe;Je(this,"nodeGroupKey",ve,a,i,t,t),"string"==typeof a&&this.Da(i,a),n.push(i)}}else if(Pr(this,i,!0)===t&&(Je(this,"linkFromKey",ve,a=this.Xe,i,t,t),"string"==typeof a&&this.Da(i,a),n.push(i)),Pr(this,i,!1)===t&&(Je(this,"linkToKey",ve,a=this.Ye,i,t,t),"string"==typeof a&&this.Da(i,a),n.push(i)),a=this.xf(i),Array.isArray(a))for(var u=a.length,h=this.$d,d=0;d<u;d++)a[d]===t&&(Je(this,"linkLabelKeys",Pt,h,i,t,t,d,d),n.push(i))}for(e=0;e<n.length;e++)Co(this,t,n[e]);oe(n)}},D.ym=function(t){at.prototype.ym.call(this,t);var e=this.Ah(t);null===this.Vb(e)&&ro(this,e,t)},D.Kq=function(t){at.prototype.Kq.call(this,t),Co(this,this.Ah(t),t)},D.Gs=function(t){if(null===t)return"";var e=this.Ej;return""===e||void 0===(e=je(t,e))?"":"string"==typeof e?e:void z("getCategoryForLinkData found a non-string category for "+t+": "+e)},kt.prototype.getLinkCategoryForData=function(t){return this.Gs(t)},kt.prototype.Fq=function(t,e){if(null!==t){var n=this.Ej;if(""!==n)if(this.tc(t)){var i=je(t,n);void 0===i&&(i=""),i!==e&&(ce(t,n,e),Je(this,"linkCategory",ve,n,t,i,e),"string"==typeof n&&this.Da(t,n))}else ce(t,n,e)}},kt.prototype.setLinkCategoryForData=function(t,e){this.Fq(t,e)},(D=kt.prototype).Fm=function(t,e){at.prototype.Fm.call(this,t,e),this.Gq(e,this.Ah(t))},D.nk=function(){return!0},D.Qi=function(){return!0},D.Ps=function(){return!0},D.pk=function(){return!0},Dt.Object.defineProperties(kt.prototype,{archetypeNodeData:{get:function(){return this.mj},set:function(t){var e=this.mj;e!==t&&(this.mj=t,this.g("archetypeNodeData",e,t))}},linkFromKeyProperty:{get:function(){return this.Xe},set:function(t){var e=this.Xe;e!==t&&(this.Xe=t,this.g("linkFromKeyProperty",e,t))}},linkToKeyProperty:{get:function(){return this.Ye},set:function(t){var e=this.Ye;e!==t&&(this.Ye=t,this.g("linkToKeyProperty",e,t))}},linkFromPortIdProperty:{get:function(){return this.Fj},set:function(t){var e=this.Fj;e!==t&&(this.Fj=t,this.g("linkFromPortIdProperty",e,t))}},linkToPortIdProperty:{get:function(){return this.Gj},set:function(t){var e=this.Gj;e!==t&&(this.Gj=t,this.g("linkToPortIdProperty",e,t))}},linkLabelKeysProperty:{get:function(){return this.$d},set:function(t){var e=this.$d;e!==t&&(this.$d=t,this.g("linkLabelKeysProperty",e,t))}},linkDataArray:{get:function(){return this.Xc},set:function(t){var e=this.Xc;if(e!==t){this.jb.clear();for(var n=t.length,i=0;i<n;i++){var a=t[i];Et(a)||z("GraphLinksModel.linkDataArray must only contain Objects, not: "+a),Zo(a)}if(this.Xc=t,""!==this.linkKeyProperty){for(i=new et,a=0;a<n;a++){var u=t[a],h=this.mc(u);void 0===h||null!==this.jb.H(h)?i.add(u):this.jb.add(h,u)}for(i=i.iterator;i.next();)this.Us(a=i.value),void 0!==(u=this.mc(a))&&this.jb.add(u,a)}for(i=new K,a=0;a<n;a++)i.add(t[a]);for(this.Rf=i,Je(this,"linkDataArray",ve,"linkDataArray",this,e,t),e=0;e<n;e++)am(this,t[e])}}},linkKeyProperty:{get:function(){return this.gi},set:function(t){var e=this.gi;if(e!==t){this.gi=t,this.jb.clear();for(var n=this.linkDataArray.length,i=0;i<n;i++){var a=this.linkDataArray[i],u=this.mc(a);void 0===u&&(this.Us(a),u=this.mc(a)),void 0!==u&&this.jb.add(u,a)}this.g("linkKeyProperty",e,t)}}},makeUniqueLinkKeyFunction:{get:function(){return this.wl},set:function(t){var e=this.wl;e!==t&&(this.wl=t,this.g("makeUniqueLinkKeyFunction",e,t))}},copyLinkDataFunction:{get:function(){return this.Rk},set:function(t){var e=this.Rk;e!==t&&(this.Rk=t,this.g("copyLinkDataFunction",e,t))}},nodeIsGroupProperty:{get:function(){return this.Cl},set:function(t){var e=this.Cl;e!==t&&(this.Cl=t,this.g("nodeIsGroupProperty",e,t))}},nodeGroupKeyProperty:{get:function(){return this.xe},set:function(t){var e=this.xe;e!==t&&(this.xe=t,this.g("nodeGroupKeyProperty",e,t))}},ck:{get:function(){return this.on},set:function(t){this.on!==t&&(this.on=t)}},linkCategoryProperty:{get:function(){return this.Ej},set:function(t){var e=this.Ej;e!==t&&(this.Ej=t,this.g("linkCategoryProperty",e,t))}},type:{get:function(){return"GraphLinksModel"}}}),kt.prototype.setCategoryForLinkData=kt.prototype.Fq,kt.prototype.getCategoryForLinkData=kt.prototype.Gs,kt.prototype.assignAllDataProperties=kt.prototype.Yp,kt.prototype.setGroupKeyForNodeData=kt.prototype.Gq,kt.prototype.getGroupKeyForNodeData=kt.prototype.Ah,kt.prototype.isGroupForNodeData=kt.prototype.Dv,kt.prototype.copyLinkData=kt.prototype.eq,kt.prototype.mergeLinkDataArray=kt.prototype.CA,kt.prototype.removeLinkDataCollection=kt.prototype.OA,kt.prototype.removeLinkData=kt.prototype.vm,kt.prototype.addLinkDataCollection=kt.prototype.hz,kt.prototype.addLinkData=kt.prototype.Ci,kt.prototype.containsLinkData=kt.prototype.tc,kt.prototype.makeLinkDataKeyUnique=kt.prototype.Us,kt.prototype.findLinkDataForKey=kt.prototype.zh,kt.prototype.setKeyForLinkData=kt.prototype.dt,kt.prototype.getKeyForLinkData=kt.prototype.mc,kt.prototype.removeLabelKeyForLinkData=kt.prototype.wy,kt.prototype.addLabelKeyForLinkData=kt.prototype.av,kt.prototype.setLabelKeysForLinkData=kt.prototype.et,kt.prototype.getLabelKeysForLinkData=kt.prototype.xf,kt.prototype.setToPortIdForLinkData=kt.prototype.aw,kt.prototype.getToPortIdForLinkData=kt.prototype.ey,kt.prototype.setFromPortIdForLinkData=kt.prototype.Xv,kt.prototype.getFromPortIdForLinkData=kt.prototype.$x,kt.prototype.setToKeyForLinkData=kt.prototype.$v,kt.prototype.getToKeyForLinkData=kt.prototype.by,kt.prototype.setFromKeyForLinkData=kt.prototype.Wv,kt.prototype.getFromKeyForLinkData=kt.prototype.Zx,kt.prototype.clear=kt.prototype.clear;var lm=Object.freeze([]);function ui(t,e){at.call(this),this.ye="parent",this.qn=!1,this.Mj="parentLinkCategory",void 0!==t&&(_n(t)?this.nodeDataArray=t:Object.assign(this,t)),e&&Object.assign(this,e)}function Ce(t){Rt.call(this),this.Mw=this.Dn=this.Zb=0,this.ir=360,this.Lw=Do,this.qj=0,this.zw=new N,this.$q=this.be=0,this.ss=new cu,this.Bt=this.Lj=0,this.Yy=600,this.ep=NaN,this.cn=1,this.Gp=0,this.Vl=360,this.Gb=Do,this.K=Zn,this.Yc=hu,this.Rc=Ze,this.ef=6,this.Oo=Rf,t&&Object.assign(this,t)}function bf(t,e,n,i,a){var u=t.ir,h=t.Zb;t=t.be,i=i*Math.PI/180,n=n*Math.PI/180;for(var d=e.length,f=0;f<d;f++){var g=i+(a===Zn?f*n/(360<=u?d:d-1):-f*n/d),m=e.J(f),y=h*Math.tan(g)/t;y=Math.sqrt((h*h+t*t*y*y)/(1+y*y)),m.centerX=y*Math.cos(g),m.centerY=y*Math.sin(g),m.actualAngle=180*g/Math.PI}}function Of(t,e,n,i){var a=t.Zb,u=t.be,h=t.qj;n=n*Math.PI/180;for(var d=e.length,f=0;f<d;f++){var g=e.J(f),m=e.J(f===d-1?0:f+1),y=u*Math.sin(n);g.centerX=a*Math.cos(n),g.centerY=y,g.actualAngle=180*n/Math.PI,isNaN(g.diameter)&&Pe(g,0),isNaN(m.diameter)&&Pe(m,0),g=Wc(t,a,u,i===Zn?n:-n,(g.diameter+m.diameter)/2+h),n+=i===Zn?g:-g}}function Ff(t,e,n,i){var a=t.Zb,u=t.be,h=t.$q;n=n*Math.PI/180;for(var d=e.length,f=0;f<d;f++){var g=e.J(f);g.centerX=a*Math.cos(n),g.centerY=u*Math.sin(n),g.actualAngle=180*n/Math.PI,g=Wc(t,a,u,i===Zn?n:-n,h),n+=i===Zn?g:-g}}function Vw(t,e,n,i,a){var u=t.ir;if(t.Lj=0,t.ss=new cu,360>n){for(u=i+(a===Zn?u:-u);0>u;)u+=360;180<(u%=360)&&(u-=360),u*=Math.PI/180,t.Bt=u,Bw(t,e,n,i,a)}else zv(t,e,n,i,a);t.ss.commit(e)}function zv(t,e,n,i,a){var u=t.Zb,h=t.qj,d=t.Dn,f=u*Math.cos(i*Math.PI/180),g=t.be*Math.sin(i*Math.PI/180),m=e.xa();if(3===m.length)m[0].centerX=u,m[0].centerY=0,m[1].centerX=m[0].centerX-m[0].width/2-m[1].width/2-h,m[1].y=m[0].y,m[2].centerX=(m[0].centerX+m[1].centerX)/2,m[2].y=m[0].y-m[2].height-h;else if(4===m.length)m[0].centerX=u,m[0].centerY=0,m[2].centerX=-m[0].centerX,m[2].centerY=m[0].centerY,m[1].centerX=0,m[1].y=Math.min(m[0].y,m[2].y)-m[1].height-h,m[3].centerX=0,m[3].y=Math.max(m[0].y+m[0].height+h,m[2].y+m[2].height+h);else{u=N.alloc();for(var y=0;y<m.length&&(m[y].centerX=f,m[y].centerY=g,!(y>=m.length-1));y++)Yv(t,f,g,m,y,a,u)||Xv(t,f,g,m,y,a,u),f=u.x,g=u.y;if(N.free(u),t.Lj++,!(23<t.Lj)){f=m[0].centerX,g=m[0].centerY,u=m[m.length-1].centerX,y=m[m.length-1].centerY;var x=Math.abs(f-u)-((m[0].width+m[m.length-1].width)/2+h),_=Math.abs(g-y)-((m[0].height+m[m.length-1].height)/2+h);h=0,1>Math.abs(_)?Math.abs(f-u)<(m[0].width+m[m.length-1].width)/2&&(h=0):h=0<_?_:1>Math.abs(x)?0:x,f=Math.abs(u)>Math.abs(y)?0<u!=g>y:0<y!=f<u,(f=a===Zn?f:!f)&&(h=-Math.abs(h),h=Math.min(h,-m[m.length-1].width),h=Math.min(h,-m[m.length-1].height)),t.ss.compare(h,m),1<Math.abs(h)&&(t.Zb=8>t.Lj?t.Zb-h/(2*Math.PI):5>m.length&&10<h?t.Zb/2:t.Zb-(0<h?1.7:-2.3),t.be=t.Zb*d,zv(t,e,n,i,a))}}}function Bw(t,e,n,i,a){for(var u=t.Zb,h=t.be,d=t.Dn,f=u*Math.cos(i*Math.PI/180),g=h*Math.sin(i*Math.PI/180),m=N.alloc(),y=e.xa(),x=0;x<y.length&&(y[x].centerX=f,y[x].centerY=g,!(x>=y.length-1));x++)Yv(t,f,g,y,x,a,m)||Xv(t,f,g,y,x,a,m),f=m.x,g=m.y;if(N.free(m),t.Lj++,!(23<t.Lj)){if(f=Math.atan2(g,f),f=a===Zn?t.Bt-f:f-t.Bt,u=(f=Math.abs(f)<Math.abs(f-2*Math.PI)?f:f-2*Math.PI)*(u+h)/2,h=t.ss,Math.abs(u)<Math.abs(h.jm))for(h.jm=u,h.Ck=[],h.Pm=[],f=0;f<y.length;f++)h.Ck[f]=y[f].bounds.x,h.Pm[f]=y[f].bounds.y;1<Math.abs(u)&&(t.Zb=8>t.Lj?t.Zb-u/(2*Math.PI):t.Zb-(0<u?1.7:-2.3),t.be=t.Zb*d,Bw(t,e,n,i,a))}}function Yv(t,e,n,i,a,u,h){var d=t.Zb,f=t.be,g=0;t=(i[a].width+i[a+1].width)/2+t.qj;var m=!1;if(0<=n!=(u===Zn)){if((u=e+t)>d){if((u=e-t)<-d)return h.x=u,h.y=g,!1;m=!0}}else if((u=e-t)<-d){if((u=e+t)>d)return h.x=u,h.y=g,!1;m=!0}return g=Math.sqrt(1-Math.min(1,u*u/(d*d)))*f,0>n!==m&&(g=-g),Math.abs(n-g)>(i[a].height+i[a+1].height)/2?(h.x=u,h.y=g,!1):(h.x=u,h.y=g,!0)}function Xv(t,e,n,i,a,u,h){var d=t.Zb,f=t.be,g=0;if(t=(i[a].height+i[a+1].height)/2+t.qj,i=!1,0<=e!=(u===Zn)){if((u=n-t)<-f){if((u=n+t)>f)return h.x=g,void(h.y=u);i=!0}}else if((u=n+t)>f){if((u=n-t)<-f)return h.x=g,void(h.y=u);i=!0}g=Math.sqrt(1-Math.min(1,u*u/(f*f)))*d,0>e!==i&&(g=-g),h.x=g,h.y=u}function Lf(t,e,n,i,a){var u=t.Yy;if(.001>Math.abs(t.Dn-1))return void 0!==i&&void 0!==a?a*e:2*Math.PI*e;t=e>n?Math.sqrt(e*e-n*n)/e:Math.sqrt(n*n-e*e)/n;for(var h=0,d=void 0!==i&&void 0!==a?a/(u+1):Math.PI/(2*(u+1)),f=0,g=0;g<=u;g++){f=void 0!==i&&void 0!==a?i+g*a/u:g*Math.PI/(2*u);var m=Math.sin(f);h+=Math.sqrt(1-t*t*m*m)*d}return void 0!==i&&void 0!==a?(e>n?e:n)*h:4*(e>n?e:n)*h}function $v(t,e,n,i,a){return e/(void 0!==i&&void 0!==a?Lf(t,1,n,i,a):Lf(t,1,n))}function Wc(t,e,n,i,a){if(.001>Math.abs(t.Dn-1))return a/e;var u=e>n?Math.sqrt(e*e-n*n)/e:Math.sqrt(n*n-e*e)/n,h=0;t=2*Math.PI/(700*t.network.vertexes.count),e>n&&(i+=Math.PI/2);for(var d=0;;d++){var f=Math.sin(i+d*t);if((h+=(e>n?e:n)*Math.sqrt(1-u*u*f*f)*t)>=a)return d*t}}kt.className="GraphLinksModel",Nr.GraphLinksModel=kt,at.constructGraphLinksModel=at.constructGraphLinksModel=function(){return new kt},at.initDiagramModel=Bv=function(){return new kt},Ft(ui,at),ui.constructGraphLinksModel=at.constructGraphLinksModel,ui.prototype.cloneProtected=function(t){at.prototype.cloneProtected.call(this,t),t.ye=this.ye,t.qn=this.qn,t.Mj=this.Mj},(D=ui.prototype).toString=function(t){if(void 0===t&&(t=0),2<=t)return this.Hq();var e=(""!==this.name?this.name:"")+" TreeModel";if(0<t){e+="\n node data:";for(var n=(t=this.nodeDataArray).length,i=0;i<n;i++){var a=t[i];e+=" "+this.pa(a)+":"+sr(a)}}return e},D.Nm=function(){var t=at.prototype.Nm.call(this),e="";return"parent"!==this.nodeParentKeyProperty&&"string"==typeof this.nodeParentKeyProperty&&(e+=',\n  "nodeParentKeyProperty": '+this.quote(this.nodeParentKeyProperty)),t+e},D.zq=function(t){at.prototype.zq.call(this,t),t.nodeParentKeyProperty&&(this.nodeParentKeyProperty=t.nodeParentKeyProperty)},D.yq=function(t){void 0!==t.nodeParentKeyProperty&&t.nodeParentKeyProperty!==this.nodeParentKeyProperty&&z("applyIncrementalJson cannot change Model properties"),at.prototype.yq.call(this,t)},D.pm=function(t){return t},D.Bh=function(t){if(null!==t){var e=this.ye;if(""!==e&&void 0!==(e=je(t,e))){if(cl(e))return e;z("ParentKey value for node data "+t+" is not a number or a string: "+e)}}},D.fe=function(t,e){if(null===e&&(e=void 0),null!==t){var n=this.ye;if(""!==n)if(e=this.pm(e),this.cb(t)){var i=je(t,n);i!==e&&(Co(this,i,t),ce(t,n,e),null===this.Vb(e)&&ro(this,e,t),Je(this,"nodeParentKey",ve,n,t,i,e),"string"==typeof n&&this.Da(t,n))}else ce(t,n,e)}},D.Js=function(t){if(null===t)return"";var e=this.Mj;return""===e||void 0===(e=je(t,e))?"":"string"==typeof e?e:(z("getParentLinkCategoryForNodeData found a non-string category for "+t+": "+e),"")},ui.prototype.getLinkCategoryForData=function(t){return this.Js(t)},ui.prototype.ft=function(t,e){if(null!==t){var n=this.Mj;if(""!==n)if(this.cb(t)){var i=je(t,n);void 0===i&&(i=""),i!==e&&(ce(t,n,e),Je(this,"parentLinkCategory",ve,n,t,i,e),"string"==typeof n&&this.Da(t,n))}else ce(t,n,e)}},ui.prototype.setLinkCategoryForData=function(t,e){this.ft(t,e)},ui.prototype.copyNodeData=function(t){return null===t?null:(t=at.prototype.copyNodeData.call(this,t),this.dk||""===this.ye||void 0===je(t,this.ye)||ce(t,this.ye,void 0),t)},ui.prototype.setDataProperty=function(t,e,n){if(this.cb(t)){if(e===this.nodeKeyProperty)return void this.Em(t,n);if(e===this.nodeCategoryProperty)return void this.Dm(t,n);if(e===this.nodeParentKeyProperty)return void this.fe(t,n)}var i=je(t,e);i!==n&&(ce(t,e,n),this.$s(t,e,i,n))},(D=ui.prototype).Dq=function(t,e){at.prototype.Dq.call(this,t,e);for(var n=this.bb.iterator;n.next();)this.Sv(n.value,t,e)},D.Sv=function(t,e,n){if(this.Bh(t)===e){var i=this.ye;ce(t,i,n),Je(this,"nodeParentKey",ve,i,t,e,n),"string"==typeof i&&this.Da(t,i)}},D.zm=function(t){at.prototype.zm.call(this,t);var e=Pf(this,t=this.pa(t));if(null!==e){var n=ye();for(e=e.iterator;e.next();){var i=e.value;if(this.cb(i)&&this.Bh(i)===t){var a=this.ye;Je(this,"nodeParentKey",ve,a,i,t,t),"string"==typeof a&&this.Da(i,a),n.push(i)}}for(e=0;e<n.length;e++)Co(this,t,n[e]);oe(n)}},D.ym=function(t){at.prototype.ym.call(this,t);var e=this.Bh(t);e=this.pm(e),null===this.Vb(e)&&ro(this,e,t)},D.Kq=function(t){at.prototype.Kq.call(this,t),Co(this,this.Bh(t),t)},D.Fm=function(t,e){at.prototype.Fm.call(this,t,e),this.ft(e,this.Js(t)),this.fe(e,this.Bh(t))},D.nm=function(){return!0},D.Ps=function(){return!0},Dt.Object.defineProperties(ui.prototype,{nodeParentKeyProperty:{get:function(){return this.ye},set:function(t){var e=this.ye;e!==t&&(this.ye=t,this.g("nodeParentKeyProperty",e,t))}},dk:{get:function(){return this.qn},set:function(t){this.qn!==t&&(this.qn=t)}},parentLinkCategoryProperty:{get:function(){return this.Mj},set:function(t){var e=this.Mj;e!==t&&(this.Mj=t,this.g("parentLinkCategoryProperty",e,t))}},linkCategoryProperty:{get:function(){return this.parentLinkCategoryProperty},set:function(t){this.parentLinkCategoryProperty=t}},type:{get:function(){return"TreeModel"}}}),ui.prototype.setParentLinkCategoryForNodeData=ui.prototype.ft,ui.prototype.getParentLinkCategoryForNodeData=ui.prototype.Js,ui.prototype.setParentKeyForNodeData=ui.prototype.fe,ui.prototype.getParentKeyForNodeData=ui.prototype.Bh,ui.className="TreeModel",Nr.TreeModel=ui,Ft(Ce,Rt),Ce.prototype.cloneProtected=function(t){Rt.prototype.cloneProtected.call(this,t),t.ep=this.ep,t.cn=this.cn,t.Gp=this.Gp,t.Vl=this.Vl,t.Gb=this.Gb,t.K=this.K,t.Yc=this.Yc,t.Rc=this.Rc,t.ef=this.ef,t.Oo=this.Oo},Ce.prototype.gb=function(t){t.classType===Ce?t===um||t===Kc||t===hs||t===Wv||t===hu?this.sorting=t:t===pe||t===ie||t===Zn||t===fl?this.direction=t:t===Fa||t===yt||t===Do||t===Ue?this.arrangement=t:(t===vh||t===Rf)&&(this.nodeDiameterFormula=t):Rt.prototype.gb.call(this,t)},Ce.prototype.createNetwork=function(){return new xh(this)},Ce.prototype.doLayout=function(t){if(null===this.network&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),1>=(t=this.network.vertexes).count)1===t.count&&((t=t.first()).centerX=0,t.centerY=0);else{var e=new et;e.addAll(t.iterator),t=new et;var a,u,n=new et,i=this.sort(e),h=this.$q,d=this.arrangement,f=this.nodeDiameterFormula,g=this.radius;(!isFinite(g)||0>=g)&&(g=NaN);var m=this.aspectRatio;(!isFinite(m)||0>=m)&&(m=1);var y=this.startAngle;isFinite(y)||(y=0);var x=this.sweepAngle;if((!isFinite(x)||360<x||1>x)&&(x=360),e=this.spacing,isFinite(e)||(e=NaN),d===Ue&&f===vh?d=Do:d===Ue&&f!==vh&&(d=this.arrangement),(this.direction===pe||this.direction===ie)&&this.sorting!==hu){for(f=0;!(f>=i.length||(t.add(i.J(f)),f+1>=i.length));f+=2)n.add(i.J(f+1));this.direction===pe?(this.arrangement===Ue&&t.reverse(),(i=new et).addAll(t),i.addAll(n)):(this.arrangement===Ue&&n.reverse(),(i=new et).addAll(n),i.addAll(t))}f=i.length;for(var _=u=a=0;_<i.length;_++){var M=y+x*u*(this.direction===Zn?1:-1)/f,S=i.J(_).diameter;isNaN(S)&&(S=Pe(i.J(_),M)),360>x&&(0===_||_===i.length-1)&&(S/=2),a+=S,u++}if(isNaN(g)||d===Ue){if(isNaN(e)&&(e=6),d!==Do&&d!==Ue){for(u=-1/0,h=0;h<f;h++)_=i.J(h),a=i.J(h===f-1?0:h+1),isNaN(_.diameter)&&Pe(_,0),isNaN(a.diameter)&&Pe(a,0),u=Math.max(u,(_.diameter+a.diameter)/2);h=u+e,g=d===Fa?(u+e)/(2*Math.PI/f):$v(this,h*(360<=x?f:f-1),m,y*Math.PI/180,x*Math.PI/180)}else g=$v(this,a+(360<=x?f:f-1)*(d!==Ue?e:1.6*e),m,y*Math.PI/180,x*Math.PI/180);u=g*m}else if(_=Lf(this,g,u=g*m,y*Math.PI/180,x*Math.PI/180),isNaN(e))(d===Do||d===Ue)&&(e=(_-a)/(360<=x?f:f-1));else if(d===Do||d===Ue)(_=(_-a)/(360<=x?f:f-1))<e?u=(g=$v(this,a+e*(360<=x?f:f-1),m,y*Math.PI/180,x*Math.PI/180))*m:e=_;else{for(h=-1/0,a=0;a<f;a++)M=i.J(a),S=i.J(a===f-1?0:a+1),isNaN(M.diameter)&&Pe(M,0),isNaN(S.diameter)&&Pe(S,0),h=Math.max(h,(M.diameter+S.diameter)/2);(a=$v(this,(h+=e)*(360<=x?f:f-1),m,y*Math.PI/180,x*Math.PI/180))>g?u=(g=a)*m:h=_/(360<=x?f:f-1)}if(this.Lw=d,this.Zb=g,this.Dn=m,this.Mw=y,this.ir=x,this.qj=e,this.be=u,this.$q=h,e=i,i=this.Lw,d=this.Zb,g=this.Mw,m=this.ir,y=this.qj,x=this.be,f=this.$q,this.direction!==pe&&this.direction!==ie||i!==Ue)if(this.direction===pe||this.direction===ie){switch(h=0,i){case yt:h=180*Wc(this,d,x,g,f)/Math.PI;break;case Do:f=e=0,null!==(h=t.first())&&(e=Pe(h,Math.PI/2)),null!==(h=n.first())&&(f=Pe(h,Math.PI/2)),h=180*Wc(this,d,x,g,y+(e+f)/2)/Math.PI;break;case Fa:h=m/e.length}if(this.direction===pe){switch(i){case yt:Ff(this,t,g,fl);break;case Do:Of(this,t,g,fl);break;case Fa:bf(this,t,m/2,g,fl)}switch(i){case yt:Ff(this,n,g+h,Zn);break;case Do:Of(this,n,g+h,Zn);break;case Fa:bf(this,n,m/2,g+h,Zn)}}else{switch(i){case yt:Ff(this,n,g,fl);break;case Do:Of(this,n,g,fl);break;case Fa:bf(this,n,m/2,g,fl)}switch(i){case yt:Ff(this,t,g+h,Zn);break;case Do:Of(this,t,g+h,Zn);break;case Fa:bf(this,t,m/2,g+h,Zn)}}}else switch(i){case yt:Ff(this,e,g,this.direction);break;case Do:Of(this,e,g,this.direction);break;case Fa:bf(this,e,m,g,this.direction);break;case Ue:Vw(this,e,m,g,this.direction)}else Vw(this,e,m,g-m/2,Zn)}this.updateParts(),this.network=null,this.isValidLayout=!0},Ce.prototype.commitLayout=function(){this.commitNodes(),this.isRouting&&this.commitLinks()},Ce.prototype.commitNodes=function(){var t=null!==this.group&&null!==this.group.placeholder&&this.group.isSubGraphExpanded,e=t?this.group.location.copy():null,n=this.actualCenter;t?n=new N(0,0):(n.x=this.arrangementOrigin.x+this.Zb,n.y=this.arrangementOrigin.y+this.be);for(var i=this.network.vertexes.iterator;i.next();){var a=i.value;a.x+=n.x,a.y+=n.y,a.commit()}t&&(this.group.Sa(),t=this.group.position.copy(),n=this.group.location.copy(),e=e.ge(n.ge(t)),this.group.move(e),this.zw=e.ge(t))},Ce.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},Ce.prototype.sort=function(t){switch(this.sorting){case hs:break;case Wv:t.reverse();break;case um:t.sort(this.comparer);break;case Kc:t.sort(this.comparer),t.reverse();break;case hu:return this.Zs(function y_(t){for(var e=[],n=0;n<t.length;n++)e.push(0);n=new et;for(var i=0;i<t.length;i++){var a=-1,u=-1;if(0===i)for(var h=0;h<t.length;h++){var d=t.J(h).edgesCount;d>a&&(a=d,u=h)}else for(h=0;h<t.length;h++)(d=e[h])>a&&(a=d,u=h);for(n.add(t.J(u)),e[u]=-1,h=(u=t.J(u)).sourceEdges;h.next();)0>(a=t.indexOf(h.value.fromVertex))||0<=e[a]&&e[a]++;for(u=u.destinationEdges;u.next();)0>(a=t.indexOf(u.value.toVertex))||0<=e[a]&&e[a]++}return n}(t));default:z("Invalid sorting type.")}return t},Ce.prototype.Zs=function(t){for(var e=[],n=0;n<t.length;n++){var i=t.J(n);e[n]=[];for(var a,u=i.destinationEdges;u.next();)(a=t.indexOf(u.value.toVertex))!==n&&0>e[n].indexOf(a)&&e[n].push(a);for(i=i.sourceEdges;i.next();)(a=t.indexOf(i.value.fromVertex))!==n&&0>e[n].indexOf(a)&&e[n].push(a)}for(u=[],n=0;n<e.length;n++)u[n]=0;n=[];var h=[],d=[];i=[],a=new et;for(var f=0,g=0;g<e.length;g++){var m=e[g].length;if(1===m)i.push(g);else if(0===m)a.add(t.J(g));else{if(0===f)n.push(g);else{for(var y=m=1/0,x=-1,_=[],M=0;M<n.length;M++)0>e[n[M]].indexOf(n[M===n.length-1?0:M+1])&&_.push(M===n.length-1?0:M+1);if(0===_.length)for(M=0;M<n.length;M++)_.push(M);for(M=0;M<_.length;M++){for(var S=_[M],T=e[g],k=0,b=0;b<h.length;b++){var I=u[h[b]],O=u[d[b]];if(I<O){var F=I;I=O}else F=O;if(F<S&&S<=I)for(O=0;O<T.length;O++){var H=T[O];0>n.indexOf(H)||F<u[H]&&u[H]<I||F===u[H]||I===u[H]||k++}else for(O=0;O<T.length;O++)0>n.indexOf(H=T[O])||F<u[H]&&u[H]<I&&F!==u[H]&&I!==u[H]&&k++}for(T=k,b=k=0;b<e[g].length;b++)0<=(F=n.indexOf(e[g][b]))&&(k+=(F=Math.abs(S-(F>=S?F+1:F)))<n.length+1-F?F:n.length+1-F);for(b=0;b<h.length;b++)(F=u[h[b]])>=S&&F++,(I=u[d[b]])>=S&&I++,F>I&&(O=I,I=F,F=O),I-F<(n.length+2)/2==(F<S&&S<=I)&&k++;(T<m||T===m&&k<y)&&(m=T,y=k,x=S)}for(n.splice(x,0,g),m=0;m<n.length;m++)u[n[m]]=m;for(m=0;m<e[g].length;m++)0<=n.indexOf(y=e[g][m])&&(h.push(g),d.push(y))}f++}}for(h=n.length;;){for(u=!0,d=0;d<i.length;d++)if(0<=(m=n.indexOf(g=e[f=i[d]][0]))){for(x=y=0;x<e[g].length;x++)0>(_=n.indexOf(e[g][x]))||_===m||(y+=_<m!=(M=_>m?_-m:m-_)>h-M?1:-1);n.splice(0>y?m:m+1,0,f),i.splice(d,1),d--}else u=!1;if(u)break;n.push(i[0]),i.splice(0,1)}for(e=0;e<n.length;e++)a.add(t.J(n[e]));return a},Dt.Object.defineProperties(Ce.prototype,{radius:{get:function(){return this.ep},set:function(t){this.ep!==t&&(0<t||isNaN(t))&&(this.ep=t,this.B())}},aspectRatio:{get:function(){return this.cn},set:function(t){this.cn!==t&&0<t&&(this.cn=t,this.B())}},startAngle:{get:function(){return this.Gp},set:function(t){this.Gp!==t&&(this.Gp=t,this.B())}},sweepAngle:{get:function(){return this.Vl},set:function(t){this.Vl!==t&&(this.Vl=0<t&&360>=t?t:360,this.B())}},arrangement:{get:function(){return this.Gb},set:function(t){this.Gb===t||t!==Ue&&t!==Do&&t!==yt&&t!==Fa||(this.Gb=t,this.B())}},direction:{get:function(){return this.K},set:function(t){this.K===t||t!==Zn&&t!==fl&&t!==pe&&t!==ie||(this.K=t,this.B())}},sorting:{get:function(){return this.Yc},set:function(t){this.Yc===t||t!==hs&&t!==Wv&&t!==um&&!Kc&&t!==hu||(this.Yc=t,this.B())}},comparer:{get:function(){return this.Rc},set:function(t){this.Rc!==t&&(this.Rc=t,this.B())}},spacing:{get:function(){return this.ef},set:function(t){this.ef!==t&&(this.ef=t,this.B())}},nodeDiameterFormula:{get:function(){return this.Oo},set:function(t){this.Oo===t||t!==Rf&&t!==vh||(this.Oo=t,this.B())}},actualXRadius:{get:function(){return this.Zb}},actualYRadius:{get:function(){return this.be}},actualSpacing:{get:function(){return this.qj}},actualCenter:{get:function(){return this.zw}}});var Do=new J(Ce,"ConstantSpacing",0),yt=new J(Ce,"ConstantDistance",1),Fa=new J(Ce,"ConstantAngle",2),Ue=new J(Ce,"Packed",3),Zn=new J(Ce,"Clockwise",4),fl=new J(Ce,"Counterclockwise",5),pe=new J(Ce,"BidirectionalLeft",6),ie=new J(Ce,"BidirectionalRight",7),hs=new J(Ce,"Forwards",8),Wv=new J(Ce,"Reverse",9),um=new J(Ce,"Ascending",10),Kc=new J(Ce,"Descending",11),hu=new J(Ce,"Optimized",12),Rf=new J(Ce,"Pythagorean",13),vh=new J(Ce,"Circular",14);function cu(){this.jm=-1/0,this.Pm=this.Ck=null}function xh(t){te.call(this,t)}function Zc(t){Be.call(this,t),this.C=this.pj=NaN}function Pe(t,e){var n=t.network;if(null===n)return NaN;if(null===(n=n.layout))return NaN;if(n.arrangement===Ue)if(n.nodeDiameterFormula===vh)t.pj=Math.max(t.width,t.height);else{if(n=Math.abs(Math.sin(e)),e=Math.abs(Math.cos(e)),0===n)return t.width;if(0===e)return t.height;t.pj=Math.min(t.height/n,t.width/e)}else t.pj=n.nodeDiameterFormula===vh?Math.max(t.width,t.height):Math.sqrt(t.width*t.width+t.height*t.height);return t.pj}function jf(t){Yn.call(this,t)}function gn(t){Rt.call(this),this.sh=null,this.po=0,this.Nd=new mt(100,100).freeze(),this.bn=!1,this.df=!0,this.gd=!1,this.xl=100,this.Gn=1,this.Pf=1e3,this.Jo=10,this.fp=Math,this.Yk=.05,this.Xk=50,this.Vk=150,this.Wk=0,this.yn=10,this.xn=5,t&&Object.assign(this,t)}function Kv(t,e,n){if(function Uw(t,e){if(10<e||3>t.network.vertexes.count)return!1;for(t.sh=t.network.vertexes.xa(),(t=t.sh).sort(function(n,i){return null===n||null===i||n===i?0:i.Gd-n.Gd}),e=t.length-1;0<=e&&1>=t[e].Gd;)e--;return 1<t.length-e}(t,e)){var i=t.Pf;t.Pf*=1+1/(e+1);var a=function Zv(t,e){for(var n=t.network,i=new du(t),a=0;a<t.sh.length;a++){var u=t.sh[a];if(!(1<u.Gd))break;i.ig(u);var h=new qv;h.mt=u.Gd,h.nt=u.width,h.lt=u.height,h.pw=u.focus.x,h.qw=u.focus.y,null===u.Je&&(u.Je=new et),u.Je.add(h),u.Uv=u.Je.count-1}for(u=n.edges.iterator;u.next();){var d=u.value;h=d.toVertex,(a=d.fromVertex).network===i&&h.network===i?i.am(d):a.network===i?(null===(d=a.bk)&&(d=new et,a.bk=d),d.add(h),a.Gd--,a.Gh+=h.Gh):h.network===i&&(null===(d=h.bk)&&(d=new et,h.bk=d),d.add(a),h.Gd--,h.Gh+=a.Gh)}for(a=i.edges.iterator;a.next();)(u=a.value).length*=Math.max(1,R.sqrt((u.fromVertex.Gh+u.toVertex.Gh)/(4*e+1)));for(e=i.vertexes.iterator;e.next();){var f=(a=e.value).bk;if(null!==f&&0<f.count&&!(0>=(h=a.Je.J(a.Je.count-1).mt-a.Gd))){for(var g=d=0,m=f.count-h;m<f.count;m++){var y=f.J(m),x=null;for(u=y.edges.iterator;u.next();){var _=u.value;if(_.ay(y)===a){x=_;break}}null!==x&&(g+=x.length,d+=y.width*y.height)}u=a.centerX,f=a.centerY,x=a.focus,1>(_=(m=a.width)*(y=a.height))&&(_=1),d=R.sqrt((d+_+g*g*4/(h*h))/_),a.bounds=new B(u-x.x-(h=(d-1)*m/2),f-x.y-(d=(d-1)*y/2),m+2*h,y+2*d),a.focus=new N(x.x+h,x.y+d)}}return t.network=i,n}(t,e),u=Math.max(0,Math.max(Math.min(t.network.vertexes.count,n*(e+1)/11),10));for(t.maxIterations+=u,Kv(t,e+1,n),Jv(t,u),function v_(t,e){for(var n=t.network.vertexes.iterator;n.next();){var i=n.value;if(i.network=e,null!==i.Je){var a=i.Je.J(i.Uv);i.Gd=a.mt;var u=a.pw,h=a.qw;i.bounds=new B(i.centerX-u,i.centerY-h,a.nt,a.lt),i.focus=new N(u,h),i.Uv--}}for(n=t.network.edges.iterator;n.next();)n.value.network=e;t.network=e}(t,a),(e=a.vertexes.xa()).sort(function(h,d){return null===h||null===d||h===d?0:d.Gd-h.Gd}),n=0;n<e.length;n++)x_(t,e[n]);t.Pf=i}}function x_(t,e){var n=e.bk;if(null!==n&&0!==n.count){var i=e.centerX,a=e.centerY,u=e.width,h=e.height;null!==e.Je&&0<e.Je.count&&(u=(h=e.Je.J(0)).nt,h=h.lt),u=R.sqrt(u*u+h*h)/2;for(var d=!1,f=h=0,g=0,m=e.vertexes.iterator;m.next();){var y=m.value;1>=y.Gd?f++:(d=!0,g++,h+=Math.atan2(e.centerY-y.centerY,e.centerX-y.centerX))}if(0!==f)for(0<g&&(h/=g),g=e=0,e=d?2*Math.PI/(f+1):2*Math.PI/f,f%2==0&&(g=e/2),1<n.count&&n.sort(function(_,M){return null===_||null===M||_===M?0:M.width*M.height-_.width*_.height}),d=f%2==0?0:1,n=n.iterator;n.next();)if(!(1<(f=n.value).Gd||t.isFixed(f))){for(m=null,y=f.edges.iterator;y.next();){m=y.value;break}var x=f.height;y=R.sqrt((y=f.width)*y+x*x)/2,m=u+m.length+y,y=h+(e*(d/2>>1)+g)*(d%2==0?1:-1),f.centerX=i+m*Math.cos(y),f.centerY=a+m*Math.sin(y),d++}}}function hm(t,e,n,i,a,u,h){var d=9e19,f=-1,g=0;t:for(;g<e;g++){var m=t[g],y=m.x-n,x=m.y-i;if((y=y*y+x*x)<d){for(x=g-1;0<=x;x--)if(t[x].y>m.y&&t[x].x-m.x<a+h.width)continue t;for(x=g+1;x<e;x++)if(t[x].x>m.x&&t[x].y-m.y<u+h.height)continue t;f=g,d=y}}return f}function cm(t,e){var n=t.bounds,i=n.x;t=n.y;var a=n.width;n=n.height;var u=e.bounds,h=u.x;e=u.y;var d=u.width;return u=u.height,i+a<h?t>e+u?R.sqrt((n=i+a-h)*n+(t=t-e-u)*t):t+n<e?R.sqrt((i=i+a-h)*i+(t=t+n-e)*t):h-(i+a):i>h+d?t>e+u?R.sqrt((n=i-h-d)*n+(t=t-e-u)*t):t+n<e?R.sqrt((i=i-h-d)*i+(t=t+n-e)*t):i-(h+d):t>e+u?t-(e+u):t+n<e?e-(t+n):.1}function Jv(t,e){for(t.sh=null,e=t.po+e;t.po<e&&(t.po++,Qv(t)););t.sh=null}function Qv(t){null===t.sh&&(t.sh=t.network.vertexes.xa());var e=t.sh;if(0>=e.length)return!1;var n=e[0];n.forceX=0,n.forceY=0;for(var i=n.centerX,a=i,u=n=n.centerY,h=1;h<e.length;h++){var d=e[h];d.forceX=0,d.forceY=0;var f=d.centerX;d=d.centerY,i=Math.min(i,f),a=Math.max(a,f),n=Math.min(n,d),u=Math.max(u,d)}(a=a-i>u-n)?e.sort(function(S,T){return null===S||null===T||S===T?0:S.centerX-T.centerX}):e.sort(function(S,T){return null===S||null===T||S===T?0:S.centerY-T.centerY}),n=t.Pf;var g=i=d=0;for(u=0;u<e.length;u++){var m=(i=(h=e[u]).bounds).y+(d=h.focus).y;i=h.charge*t.electricalFieldX(f=i.x+d.x,m),g=h.charge*t.electricalFieldY(f,m),i+=h.mass*t.gravitationalFieldX(f,m),g+=h.mass*t.gravitationalFieldY(f,m),h.forceX+=i,h.forceY+=g;for(var y=u+1;y<e.length;y++){var x=e[y];if(x!==h){var _=(i=x.bounds).y+(d=x.focus).y;if(f-(g=i.x+d.x)>n||g-f>n){if(a)break}else if(m-_>n||_-m>n){if(!a)break}else{var M=cm(h,x);1>M?(null===(i=t.randomNumberGenerator)&&(t.randomNumberGenerator=i=new Vf),M=i.random(),d=i.random(),i=f>g?(1+(i=Math.abs(x.bounds.right-h.bounds.x)))*M:f<g?-(1+(i=Math.abs(x.bounds.x-h.bounds.right)))*M:(1+(i=Math.max(x.width,h.width)))*M-i/2,g=m>_?(1+(g=Math.abs(x.bounds.bottom-h.bounds.y)))*d:f<g?-(1+(g=Math.abs(x.bounds.y-h.bounds.bottom)))*d:(1+(g=Math.max(x.height,h.height)))*d-g/2):(i=(g-f)/M*(d=-h.charge*x.charge/(M*M)),g=(_-m)/M*d),h.forceX+=i,h.forceY+=g,x.forceX-=i,x.forceY-=g}}}}for(a=t.network.edges.iterator;a.next();)i=(h=(n=(d=a.value).fromVertex).bounds).x+(f=n.focus).x,h=h.y+f.y,f=(m=(u=d.toVertex).bounds).x+(y=u.focus).x,m=m.y+y.y,1>(y=cm(n,u))?(null===(y=t.randomNumberGenerator)&&(t.randomNumberGenerator=y=new Vf),d=y.random(),y=y.random(),i=(i>f?1:-1)*(1+(u.width>n.width?u.width:n.width))*d,g=(h>m?1:-1)*(1+(u.height>n.height?u.height:n.height))*y):(i=(f-i)/y*(d=d.stiffness*(y-d.length)),g=(m-h)/y*d),n.forceX+=i,n.forceY+=g,u.forceX-=i,u.forceY-=g;for(a=i=0;a<e.length;a++)t.isFixed(n=e[a])?t.moveFixedVertex(n):i=Math.max(i,t.moveVertex(n)||0);return i>t.epsilonDistance*t.epsilonDistance}function qv(){this.qw=this.pw=this.lt=this.nt=this.mt=0}function du(t){te.call(this,t)}function fu(t){Be.call(this,t),this.Ha=!1,this.Wa=this.C=NaN,this.Gh=this.Gd=this.Ga=this.M=0,this.Je=this.bk=null,this.Uv=0}function pu(t){Yn.call(this,t),this.j=this.o=NaN}function Vf(){var t=0;void 0===t&&(t=42),this.seed=t,this.Iy=48271,this.Ky=2147483647,this.Q=44488.07041494893,this.Ly=3399,this.Jy=1/2147483647,this.random()}function Gt(t){Rt.call(this),this.Yb=this.Zd=25,this.K=0,this.Uk=mm,this.sl=ym,this.il=vm,this.Cj=4,this.Fk=Gf,this.Wf=15,this.df=!0,this.vo=4,this.Ca=this.ji=this.ra=-1,this.pc=this.Qg=0,this.Ka=this.ud=this.vd=this.Yd=this.zb=null,this.Xg=0,this.Ko=this.Jj=null,this.Bc=0,this.Lo=null,this.Qc=new N,this.ve=[],this.ve.length=100,t&&Object.assign(this,t)}function dm(t){var e=t.fromVertex.node||t.fromVertex.data;return t=t.toVertex.node||t.toVertex.data,null===e&&null===t?8:null===e||null===t?4:1}function xi(t){null===t.Jj&&(t.Jj=[]);for(var e=0,n=t.network.vertexes.iterator;n.next();){var i=n.value;t.Jj[e]=i.layer,e++,t.Jj[e]=i.column,e++,t.Jj[e]=i.index,e++}return t.Jj}function Yr(t,e){var n=0;for(t=t.network.vertexes.iterator;t.next();){var i=t.value;i.layer=e[n],n++,i.column=e[n],n++,i.index=e[n],n++}}function Hw(t,e,n){var i=La(t,e),a=t.zb[e];(null===t.Ko||t.Ko.length<a*a)&&(t.Ko=[]);for(var u=t.Ko,h=0;h<a;h++){var x,d=0,f=i[h],g=f.near;if(null!==g&&g.layer===f.layer)if((f=g.index)>h)for(var m=h+1;m<f;m++){var y=i[m];y.near===g&&y.qf===g.qf||d++}else for(m=h-1;m>f;m--)(y=i[m]).near===g&&y.qf===g.qf||d++;if(0<=n)for(f=i[h].sourceEdgesArrayAccess,g=0;g<f.length;g++){var _=f[g];if(_.valid&&_.fromVertex.layer!==e)for(y=_.fromVertex.index,m=_.portToPos,_=_.portFromPos,x=g+1;x<f.length;x++){var M=f[x];if(M.valid&&M.fromVertex.layer!==e){var S=M.fromVertex.index,T=M.portToPos;M=M.portFromPos,m<T&&(y>S||y===S&&_>M)&&d++,T<m&&(S>y||S===y&&M>_)&&d++}}}if(0>=n)for(f=i[h].destinationEdgesArrayAccess,g=0;g<f.length;g++)if((_=f[g]).valid&&_.toVertex.layer!==e)for(y=_.toVertex.index,m=_.portToPos,_=_.portFromPos,x=g+1;x<f.length;x++)(M=f[x]).valid&&M.toVertex.layer!==e&&(S=M.toVertex.index,T=M.portToPos,_<(M=M.portFromPos)&&(y>S||y===S&&m>T)&&d++,M<_&&(S>y||S===y&&T>m)&&d++);for(u[h*a+h]=d,f=h+1;f<a;f++){var k=0,b=0;if(0<=n){d=i[h].sourceEdgesArrayAccess;var I=i[f].sourceEdgesArrayAccess;for(g=0;g<d.length;g++)if((_=d[g]).valid&&_.fromVertex.layer!==e)for(y=_.fromVertex.index,_=_.portFromPos,x=0;x<I.length;x++)(M=I[x]).valid&&M.fromVertex.layer!==e&&(S=M.fromVertex.index,M=M.portFromPos,(y<S||y===S&&_<M)&&b++,(S<y||S===y&&M<_)&&k++)}if(0>=n)for(d=i[h].destinationEdgesArrayAccess,I=i[f].destinationEdgesArrayAccess,g=0;g<d.length;g++)if((_=d[g]).valid&&_.toVertex.layer!==e)for(y=_.toVertex.index,m=_.portToPos,x=0;x<I.length;x++)(M=I[x]).valid&&M.toVertex.layer!==e&&(T=M.portToPos,(y<(S=M.toVertex.index)||y===S&&m<T)&&b++,(S<y||S===y&&T<m)&&k++);u[h*a+f]=k,u[f*a+h]=b}}return Ra(t,e,i),u}function fm(t){for(var e=0,n=0;n<=t.ra;n++){for(var i=t,a=n,u=La(i,a),h=i.zb[a],d=0,f=0;f<h;f++){var g=u[f].destinationEdgesArrayAccess;if(null!==g)for(var m=0;m<g.length;m++){var y=g[m];y.valid&&y.toVertex.layer!==a&&(d+=(Math.abs(y.fromVertex.column+y.portFromColOffset-(y.toVertex.column+y.portToColOffset))+1)*dm(y))}}Ra(i,a,u),e+=d}return e}function pm(t,e,n){for(var i=La(t,e),a=t.zb[e],u=[],h=0;h<a;h++){var d=i[h],f=null;0>=n&&(f=d.sourceEdgesArrayAccess);var g=null;0<=n&&(g=d.destinationEdgesArrayAccess);var m=0,y=0,x=d.near;if(null!==x&&x.layer===d.layer&&(m+=x.column-1,y++),null!==f)for(x=0;x<f.length;x++){var _=(d=f[x]).fromVertex;d.valid&&!d.rev&&_.layer!==e&&(m+=_.column,y++)}if(null!==g)for(f=0;f<g.length;f++)x=(d=g[f]).toVertex,d.valid&&!d.rev&&x.layer!==e&&(m+=x.column,y++);u[h]=0===y?-1:m/y}return Ra(t,e,i),u}function Gw(t,e,n){for(var i=La(t,e),a=t.zb[e],u=[],h=0;h<a;h++){var d=i[h],f=null;0>=n&&(f=d.sourceEdgesArrayAccess);var g=null;0<=n&&(g=d.destinationEdgesArrayAccess);var m=0,y=[],x=d.near;if(null!==x&&x.layer===d.layer&&(y[m]=x.column-1,m++),d=void 0,null!==f)for(x=0;x<f.length;x++){var _=(d=f[x]).fromVertex;d.valid&&!d.rev&&_.layer!==e&&(y[m]=_.column+d.portFromColOffset,m++)}if(null!==g)for(f=0;f<g.length;f++)x=(d=g[f]).toVertex,d.valid&&!d.rev&&x.layer!==e&&(y[m]=x.column+d.portToColOffset,m++);0===m?u[h]=-1:(y.sort(function(M,S){return M-S}),g=m>>1,u[h]=0!=(1&m)?y[g]:y[g-1]+y[g]>>1)}return Ra(t,e,i),u}function hi(t,e,n,i,a,u){if(e.component===i){if(e.component=n,a)for(var h=e.destinationEdges;h.next();){var d=h.value,f=d.toVertex,g=e.layer-f.layer;g===(d=t.linkMinLength(d))&&hi(t,f,n,i,a,u)}if(u)for(h=e.sourceEdges;h.next();)(g=(f=(d=h.value).fromVertex).layer-e.layer)===(d=t.linkMinLength(d))&&hi(t,f,n,i,a,u)}}function gm(t,e,n,i,a,u){if(e.component===i){if(e.component=n,a)for(var h=e.destinationEdges;h.next();)gm(t,h.value.toVertex,n,i,a,u);if(u)for(e=e.sourceEdges;e.next();)gm(t,e.value.fromVertex,n,i,a,u)}}function w_(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid)return e}return null}function zw(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var n=!0,i=e.destinationEdges;i.next();)if(i.value.toVertex.valid){n=!1;break}if(n)return e}}return null}function t0(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var n=!0,i=e.sourceEdges;i.next();)if(i.value.fromVertex.valid){n=!1;break}if(n)return e}}return null}function e0(t,e){e.jg=t.Xg,t.Xg++;for(var n=e.destinationEdges;n.next();){var i=n.value,a=i.toVertex;-1===a.jg&&(i.forest=!0,e0(t,a))}e.finish=t.Xg,t.Xg++}function n0(t){for(var e=t.network.vertexes.iterator;e.next();){var n=r0(t,e.value);t.ra=Math.max(n,t.ra)}}function r0(t,e){var n=0;if(-1===e.layer){for(var i=e.destinationEdges;i.next();){var a=i.value,u=a.toVertex;a=t.linkMinLength(a),n=Math.max(n,r0(t,u)+a)}e.layer=n}else n=e.layer;return n}function wh(t,e){var n=0;if(-1===e.layer){for(var i=e.sourceEdges;i.next();){var a=i.value,u=a.fromVertex;a=t.linkMinLength(a),n=Math.max(n,wh(t,u)+a)}e.layer=n}else n=e.layer;return n}function Yw(t,e){if(!e.valid){e.valid=!0;for(var n=e.destinationEdges;n.next();)Yw(t,n.value.toVertex);for(n=t.network.vertexes.iterator;n.next();)n.value.component=-1;for(var i=e.sourceEdgesArrayAccess,a=i.length,u=0;u<a;u++){var h=i[u],d=h.fromVertex,f=h.toVertex;h=t.linkMinLength(h),d.layer-f.layer>h&&hi(t,d,0,-1,!0,!1)}for(hi(t,e,1,-1,!0,!0);0!==e.component;){for(u=0,i=1/0,d=0,f=null,h=t.network.vertexes.iterator;h.next();){var g=h.value;if(1===g.component){var m=0,y=!1,x=g.sourceEdgesArrayAccess;a=x.length;for(var _=0;_<a;_++){var M=x[_],S=M.fromVertex;m+=1,1!==S.component&&(u+=1,S=S.layer-g.layer,M=t.linkMinLength(M),i=Math.min(i,S-M))}for(a=(x=g.destinationEdgesArrayAccess).length,_=0;_<a;_++)--m,1!==(M=x[_].toVertex).component?--u:y=!0;(null===f||m<d)&&!y&&(f=g,d=m)}}if(0<u){for(n.reset();n.next();)1===(a=n.value).component&&(a.layer+=i);e.component=0}else f.component=0}for(n=t.network.vertexes.iterator;n.next();)n.value.component=-1;for(hi(t,e,1,-1,!0,!1);0!==e.component;){for(i=0,a=1/0,u=0,d=null,f=t.network.vertexes.iterator;f.next();)if(1===(h=f.value).component){for(g=0,m=!1,y=(x=h.sourceEdgesArrayAccess).length,_=0;_<y;_++)g+=1,1!==(M=x[_].fromVertex).component?i+=1:m=!0;for(y=(x=h.destinationEdgesArrayAccess).length,_=0;_<y;_++)--g,1!==(S=(M=x[_]).toVertex).component&&(--i,S=h.layer-S.layer,M=t.linkMinLength(M),a=Math.min(a,S-M));(null===d||g>u)&&!m&&(d=h,u=g)}if(0>i){for(n.reset();n.next();)1===(i=n.value).component&&(i.layer-=a);e.component=0}else d.component=0}}}function Xw(t,e,n){return 90===t.K?n&&!e.rev||!n&&e.rev?270:90:180===t.K?n&&!e.rev||!n&&e.rev?0:180:270===t.K?n&&!e.rev||!n&&e.rev?90:270:n&&!e.rev||!n&&e.rev?180:0}function o0(t,e){var n=e.layer;for(e.index=t.zb[n],t.zb[n]++,e=e.destinationEdgesArrayAccess,n=!0;n;){n=!1;for(var i=0;i<e.length-1;i++){var a=e[i],u=e[i+1];a.portFromColOffset>u.portFromColOffset&&(n=!0,e[i]=u,e[i+1]=a)}}for(n=0;n<e.length;n++)(i=e[n]).valid&&-1===(i=i.toVertex).index&&o0(t,i)}function $w(t,e){var n=e.layer;e.index=t.zb[n],t.zb[n]++,e=e.sourceEdgesArrayAccess;for(var i=!0;i;)for(i=!1,n=0;n<e.length-1;n++){var a=e[n],u=e[n+1];a.portToColOffset>u.portToColOffset&&(i=!0,e[n]=u,e[n+1]=a)}for(n=0;n<e.length;n++)(i=e[n]).valid&&-1===(i=i.fromVertex).index&&$w(t,i)}function Bf(t,e,n){var i=La(t,e),a=t.zb[e],u=Gw(t,e,n),h=pm(t,e,n);for(n=0;n<a;n++)-1===h[n]&&(h[n]=i[n].column),-1===u[n]&&(u[n]=i[n].column);for(var f,d=!0;d;)for(d=!1,n=0;n<a-1;n++)(u[n+1]<u[n]||u[n+1]===u[n]&&h[n+1]<h[n])&&(d=!0,f=u[n],u[n]=u[n+1],u[n+1]=f,f=h[n],h[n]=h[n+1],h[n+1]=f,f=i[n],i[n]=i[n+1],i[n+1]=f);for(n=u=0;n<a;n++)(f=i[n]).index=n,u+=t.nodeMinColumnSpace(f,!0),f.column=u,u+=1,u+=t.nodeMinColumnSpace(f,!1);Ra(t,e,i)}function oo(t,e,n){var i=La(t,e),a=t.zb[e];n=Hw(t,e,n);var u,h=[];for(u=0;u<a;u++)h[u]=-1;var d=[];for(u=0;u<a;u++)d[u]=-1;for(var f=!1,g=!0;g;)for(g=!1,u=0;u<a-1;u++){var m=n[i[u].index*a+i[u+1].index],y=n[i[u+1].index*a+i[u].index],x=0,_=0,M=i[u].column,S=i[u+1].column,T=t.nodeMinColumnSpace(i[u],!0),k=t.nodeMinColumnSpace(i[u],!1),b=t.nodeMinColumnSpace(i[u+1],!0),I=t.nodeMinColumnSpace(i[u+1],!1);T=M-T+b,k=S-k+I;var O=i[u].sourceEdges.iterator;for(O.reset();O.next();)if(I=(b=O.value).fromVertex,b.valid&&I.layer===e){for(b=0;i[b]!==I;)b++;b<u&&(x+=2*(u-b),_+=2*(u+1-b)),b===u+1&&(x+=1),b>u+1&&(x+=4*(b-u),_+=4*(b-(u+1)))}for((O=i[u].destinationEdges.iterator).reset();O.next();)if(I=(b=O.value).toVertex,b.valid&&I.layer===e){for(b=0;i[b]!==I;)b++;b===u+1&&(_+=1)}for((O=i[u+1].sourceEdges.iterator).reset();O.next();)if(I=(b=O.value).fromVertex,b.valid&&I.layer===e){for(b=0;i[b]!==I;)b++;b<u&&(x+=2*(u+1-b),_+=2*(u-b)),b===u&&(_+=1),b>u+1&&(x+=4*(b-(u+1)),_+=4*(b-u))}for((O=i[u+1].destinationEdges.iterator).reset();O.next();)if(I=(b=O.value).toVertex,b.valid&&I.layer===e){for(b=0;i[b]!==I;)b++;b===u&&(x+=1)}b=I=0;var F=d[i[u].index],H=h[i[u+1].index],W=d[i[u+1].index];-1!==(O=h[i[u].index])&&(I+=Math.abs(O-M),b+=Math.abs(O-k)),-1!==F&&(I+=Math.abs(F-M),b+=Math.abs(F-k)),-1!==H&&(I+=Math.abs(H-S),b+=Math.abs(H-T)),-1!==W&&(I+=Math.abs(W-S),b+=Math.abs(W-T)),(_<x-.5||_===x&&y<m-.5||_===x&&y===m&&b<I-.5)&&(g=f=!0,i[u].column=k,i[u+1].column=T,m=i[u],i[u]=i[u+1],i[u+1]=m)}for(u=0;u<a;u++)i[u].index=u;return Ra(t,e,i),f}function Mh(t,e,n){for(var i=!1;gu(t,e,n);)i=!0;return i}function gu(t,e,n){var i,a=La(t,e),u=t.zb[e],h=pm(t,e,-1);if(0<n)for(i=0;i<u;i++)h[i]=-1;var d=pm(t,e,1);if(0>n)for(i=0;i<u;i++)d[i]=-1;for(var f=!1,g=!0;g;)for(g=!1,i=0;i<u;i++){var _,m=a[i].column,y=t.nodeMinColumnSpace(a[i],!0),x=t.nodeMinColumnSpace(a[i],!1);_=0>i-1||m-a[i-1].column-1>y+t.nodeMinColumnSpace(a[i-1],!1)?m-1:m,y=i+1>=u||a[i+1].column-m-1>x+t.nodeMinColumnSpace(a[i+1],!0)?m+1:m;var M=x=0,S=0;if(0>=n)for(var T=a[i].sourceEdges.iterator;T.next();){var k=T.value,b=k.fromVertex;if(k.valid&&b.layer!==e){var I=dm(k),O=k.portFromColOffset;k=k.portToColOffset,b=b.column,x+=(Math.abs(m+k-(b+O))+1)*I,M+=(Math.abs(_+k-(b+O))+1)*I,S+=(Math.abs(y+k-(b+O))+1)*I}}if(0<=n)for(T=a[i].destinationEdges.iterator;T.next();)b=(k=T.value).toVertex,k.valid&&b.layer!==e&&(I=dm(k),O=k.portFromColOffset,k=k.portToColOffset,b=b.column,x+=(Math.abs(m+O-(b+k))+1)*I,M+=(Math.abs(_+O-(b+k))+1)*I,S+=(Math.abs(y+O-(b+k))+1)*I);k=O=I=0,b=d[a[i].index],-1!==(T=h[a[i].index])&&(I+=Math.abs(T-m),O+=Math.abs(T-_),k+=Math.abs(T-y)),-1!==b&&(I+=Math.abs(b-m),O+=Math.abs(b-_),k+=Math.abs(b-y)),M<x||M===x&&O<I?(g=f=!0,a[i].column=_):(S<x||S===x&&k<I)&&(g=f=!0,a[i].column=y)}return Ra(t,e,a),t.normalize(),f}function cs(t,e,n){var i=La(t,e),a=t.zb[e],u=Gw(t,e,n),h=[];for(n=0;n<a;n++)h[n]=u[n];for(u=!0;u;)for(u=!1,n=0;n<a;n++){var d=i[n].column,f=t.nodeMinColumnSpace(i[n],!0),g=t.nodeMinColumnSpace(i[n],!1),m=0;if(-1===h[n])if(0===n&&n===a-1)m=d;else if(0===n){var y=i[n+1].column;m=y-d===g+t.nodeMinColumnSpace(i[n+1],!0)?d-1:d}else m=n===a-1?d-(y=i[n-1].column)===f+t.nodeMinColumnSpace(i[n-1],!1)?d+1:d:((f=(y=i[n-1].column)+t.nodeMinColumnSpace(i[n-1],!1)+f+1)+(g=(y=i[n+1].column)-t.nodeMinColumnSpace(i[n+1],!0)-g-1))/2|0;else 0===n&&n===a-1?m=h[n]:0===n?(g=(y=i[n+1].column)-t.nodeMinColumnSpace(i[n+1],!0)-g-1,m=Math.min(h[n],g)):n===a-1?(f=(y=i[n-1].column)+t.nodeMinColumnSpace(i[n-1],!1)+f+1,m=Math.max(h[n],f)):(f=(y=i[n-1].column)+t.nodeMinColumnSpace(i[n-1],!1)+f+1,g=(y=i[n+1].column)-t.nodeMinColumnSpace(i[n+1],!0)-g-1,f<h[n]&&h[n]<g?m=h[n]:f>=h[n]?m=f:g<=h[n]&&(m=g));m!==d&&(u=!0,i[n].column=m)}Ra(t,e,i),t.normalize()}function M_(t,e){for(var n=!0,i=t.network.vertexes.iterator;i.next();){var a=i.value,u=t.nodeMinColumnSpace(a,!0),h=t.nodeMinColumnSpace(a,!1);if(a.column-u<=e&&a.column+h>=e){n=!1;break}}if(t=!1,n)for(i.reset();i.next();)(n=i.value).column>e&&(--n.column,t=!0);return t}function __(t,e){var i,n=e+1,a=[],u=[];for(i=0;i<=t.ra;i++)a[i]=!1,u[i]=!1;for(var h=t.network.vertexes.iterator;h.next();){var d=(i=h.value).column-t.nodeMinColumnSpace(i,!0),f=i.column+t.nodeMinColumnSpace(i,!1);d<=e&&f>=e&&(a[i.layer]=!0),d<=n&&f>=n&&(u[i.layer]=!0)}for(d=!0,n=!1,i=0;i<=t.ra;i++)d=d&&!(a[i]&&u[i]);if(d)for(h.reset();h.next();)(t=h.value).column>e&&(--t.column,n=!0);return n}function Gs(t,e){for(var n=0;n<=t.Ca;n++)for(;M_(t,n););for(t.normalize(),n=0;n<t.Ca;n++)for(;__(t,n););var i;if(t.normalize(),0<e)for(n=0;n<=t.Ca;n++){var a=xi(t),u=fm(t);for(i=u+1;u<i;){i=u,ds(t,n,1);var h=fm(t);h>u?Yr(t,a):h<u&&(u=h,a=xi(t))}}if(0>e)for(n=t.Ca;0<=n;n--)for(a=xi(t),i=(u=fm(t))+1;u<i;)i=u,ds(t,n,-1),(h=fm(t))>u?Yr(t,a):h<u&&(u=h,a=xi(t));t.normalize()}function ds(t,e,n){t.Bc=0;for(var i=t.network.vertexes.iterator;i.next();)i.value.component=-1;if(0<n)for(i.reset();i.next();){var a=i.value;a.column-t.nodeMinColumnSpace(a,!0)<=e&&(a.component=t.Bc)}if(0>n)for(i.reset();i.next();)(a=i.value).column+t.nodeMinColumnSpace(a,!1)>=e&&(a.component=t.Bc);for(t.Bc++,i.reset();i.next();)-1===(e=i.value).component&&(gm(t,e,t.Bc,-1,!0,!0),t.Bc++);var u;for(e=[],u=0;u<t.Bc*t.Bc;u++)e[u]=!1;for(a=[],u=0;u<(t.ra+1)*(t.Ca+1);u++)a[u]=-1;for(i.reset();i.next();)for(var h=(u=i.value).layer,d=Math.max(0,u.column-t.nodeMinColumnSpace(u,!0)),f=Math.min(t.Ca,u.column+t.nodeMinColumnSpace(u,!1));d<=f;d++)a[h*(t.Ca+1)+d]=u.component;for(u=0;u<=t.ra;u++){if(0<n)for(h=0;h<t.Ca;h++)-1!==a[u*(t.Ca+1)+h]&&-1!==a[u*(t.Ca+1)+h+1]&&a[u*(t.Ca+1)+h]!==a[u*(t.Ca+1)+h+1]&&(e[a[u*(t.Ca+1)+h]*t.Bc+a[u*(t.Ca+1)+h+1]]=!0);if(0>n)for(h=t.Ca;0<h;h--)-1!==a[u*(t.Ca+1)+h]&&-1!==a[u*(t.Ca+1)+h-1]&&a[u*(t.Ca+1)+h]!==a[u*(t.Ca+1)+h-1]&&(e[a[u*(t.Ca+1)+h]*t.Bc+a[u*(t.Ca+1)+h-1]]=!0)}for(a=[],u=0;u<t.Bc;u++)a[u]=!0;for((h=[]).push(0);0!==h.length;)if(f=h[h.length-1],h.pop(),a[f])for(a[f]=!1,u=0;u<t.Bc;u++)e[f*t.Bc+u]&&h.splice(0,0,u);if(0<n)for(i.reset();i.next();)a[(t=i.value).component]&&--t.column;if(0>n)for(i.reset();i.next();)a[(n=i.value).component]&&(n.column+=1)}function So(t,e){return 270===t.K?e?Cr:Dr:90===t.K?e?Dr:Cr:180===t.K?e?jr:Ki:e?Ki:jr}function La(t,e){var n=t.zb[e];if(n>=t.ve.length){for(var i=[],a=0;a<t.ve.length;a++)i[a]=t.ve[a];t.ve=i}for(null==t.ve[n]?i=[]:(i=t.ve[n],t.ve[n]=null),t=t.Lo[e],e=0;e<t.length;e++)i[(n=t[e]).index]=n;return i}function Ra(t,e,n){t.ve[t.zb[e]]=n}Ce.className="CircularLayout",Ce.ConstantSpacing=Do,Ce.ConstantDistance=yt,Ce.ConstantAngle=Fa,Ce.Packed=Ue,Ce.Clockwise=Zn,Ce.Counterclockwise=fl,Ce.BidirectionalLeft=pe,Ce.BidirectionalRight=ie,Ce.Forwards=hs,Ce.Reverse=Wv,Ce.Ascending=um,Ce.Descending=Kc,Ce.Optimized=hu,Ce.Pythagorean=Rf,Ce.Circular=vh,cu.prototype.compare=function(t,e){if(0<t&&0>this.jm||Math.abs(t)<Math.abs(this.jm)&&!(0>t&&0<this.jm))for(this.jm=t,this.Ck=[],this.Pm=[],t=0;t<e.length;t++)this.Ck[t]=e[t].bounds.x,this.Pm[t]=e[t].bounds.y},cu.prototype.commit=function(t){if(null!==this.Ck&&null!==this.Pm)for(var e=0;e<this.Ck.length;e++){var n=t.J(e);n.x=this.Ck[e],n.y=this.Pm[e]}},cu.className="VertexArrangement",Ft(xh,te),xh.prototype.createVertex=function(){return new Zc(this)},xh.prototype.createEdge=function(){return new jf(this)},xh.className="CircularNetwork",Ft(Zc,Be),Dt.Object.defineProperties(Zc.prototype,{diameter:{get:function(){return this.pj},set:function(t){this.pj!==t&&(this.pj=t)}},actualAngle:{get:function(){return this.C},set:function(t){this.C!==t&&(this.C=t)}}}),Zc.className="CircularVertex",Ft(jf,Yn),jf.className="CircularEdge",Ft(gn,Rt),gn.prototype.cloneProtected=function(t){Rt.prototype.cloneProtected.call(this,t),t.Nd.assign(this.Nd),t.bn=this.bn,t.df=this.df,t.gd=this.gd,t.xl=this.xl,t.Gn=this.Gn,t.Pf=this.Pf,t.Jo=this.Jo,t.fp=this.fp,t.Yk=this.Yk,t.Xk=this.Xk,t.Vk=this.Vk,t.Wk=this.Wk,t.yn=this.yn,t.xn=this.xn},gn.prototype.serializeLayoutProperties=function(t,e){Rt.prototype.serializeLayoutProperties.call(this,t,e),t.arrangementSpacing={width:this.arrangementSpacing.width,height:this.arrangementSpacing.height},t.arrangesToOrigin=this.arrangesToOrigin,t.setsPortSpots=this.setsPortSpots,t.comments=this.comments,t.maxIterations=this.maxIterations,t.epsilonDistance=this.epsilonDistance,t.infinityDistance=this.infinityDistance,t.moveLimit=this.moveLimit,t.defaultSpringStiffness=this.defaultSpringStiffness,t.defaultSpringLength=this.defaultSpringLength,t.defaultElectricalCharge=this.defaultElectricalCharge,t.defaultGravitationalMass=this.defaultGravitationalMass,t.defaultCommentSpringLength=this.defaultCommentSpringLength,t.defaultCommentElectricalCharge=this.defaultCommentElectricalCharge},gn.prototype.deserializeLayoutProperties=function(t,e,n,i,a){Rt.prototype.deserializeLayoutProperties.call(this,t,e,n,i,a),this.arrangementSpacing=new mt(t.arrangementSpacing.width,t.arrangementSpacing.height),this.arrangesToOrigin=t.arrangesToOrigin,this.setsPortSpots=t.setsPortSpots,this.comments=t.comments,this.maxIterations=t.maxIterations,this.epsilonDistance=t.epsilonDistance,this.infinityDistance=t.infinityDistance,this.moveLimit=t.moveLimit,this.defaultSpringStiffness=t.defaultSpringStiffness,this.defaultSpringLength=t.defaultSpringLength,this.defaultElectricalCharge=t.defaultElectricalCharge,this.defaultGravitationalMass=t.defaultGravitationalMass,this.defaultCommentSpringLength=t.defaultCommentSpringLength,this.defaultCommentElectricalCharge=t.defaultCommentElectricalCharge},gn.prototype.createNetwork=function(){return new du(this)},gn.prototype.doLayout=function(t){if(null===this.network&&(this.network=this.makeNetwork(t)),!this.jw()){if(t=this.maxIterations,0<this.network.vertexes.count){this.network.fq();for(var e=this.network.vertexes.iterator;e.next();){var n=e.value;n.charge=this.electricalCharge(n),n.mass=this.gravitationalMass(n)}for(e=this.network.edges.iterator;e.next();)(n=e.value).stiffness=this.springStiffness(n),n.length=this.springLength(n);if(this.cv(),this.po=0,this.needsClusterLayout()){for(var i=(n=(e=this.network).Gy()).iterator;i.next();){this.network=i.value;for(var a=this.network.vertexes.iterator;a.next();){var u=a.value;u.Gd=u.vertexes.count,u.Gh=1,u.bk=null,u.Je=null}Kv(this,0,t)}this.network=e;var h=i=n.iterator;i=this.arrangementSpacing;var d=h.count,f=!0;u=a=0;for(var g=ye(),m=0;m<d+e.vertexes.count+2;m++)g[m]=null;d=0,h.reset();for(var y=B.alloc();h.next();)if(this.computeBounds(m=h.value,y),f)f=!1,a=y.x+y.width/2,u=y.y+y.height/2,g[0]=new N(y.x+y.width+i.width,y.y),g[1]=new N(y.x,y.y+y.height+i.height),d=2;else{var x=hm(g,d,a,u,y.width,y.height,i),_=g[x],M=new N(_.x+y.width+i.width,_.y),S=new N(_.x,_.y+y.height+i.height);for(x+1<d&&g.splice(x+1,0,null),g[x]=M,g[x+1]=S,d++,x=_.x-y.x,_=_.y-y.y,m=m.vertexes.iterator;m.next();)(M=m.value).centerX+=x,M.centerY+=_}for(B.free(y),m=e.vertexes.iterator;m.next();)x=(h=m.value).bounds,2>d?(a=x.x+x.width/2,u=x.y+x.height/2,g[0]=new N(x.x+x.width+i.width,x.y),g[1]=new N(x.x,x.y+x.height+i.height),d=2):(_=new N((y=g[f=hm(g,d,a,u,x.width,x.height,i)]).x+x.width+i.width,y.y),x=new N(y.x,y.y+x.height+i.height),f+1<d&&g.splice(f+1,0,null),g[f]=_,g[f+1]=x,d++,h.centerX=y.x+h.width/2,h.centerY=y.y+h.height/2);for(oe(g),i=n.iterator;i.next();){for(a=(n=i.value).vertexes.iterator;a.next();)e.ig(a.value);for(n=n.edges.iterator;n.next();)e.am(n.value)}}Jv(this,t),this.updateParts()}this.xl=t,this.network=null,this.isValidLayout=!0}},gn.prototype.needsClusterLayout=function(){if(3>this.network.vertexes.count)return!1;for(var t=0,e=0,n=this.network.vertexes.first().bounds,i=this.network.vertexes.iterator;i.next();){if(i.value.bounds.Ic(n)&&2<++t)return!0;if(10<e)break;e++}return!1},gn.prototype.computeBounds=function(t,e){var n=!0;for(t=t.vertexes.iterator;t.next();){var i=t.value;n?(n=!1,e.set(i.bounds)):e.Nc(i.bounds)}return e},gn.prototype.cv=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},gn.prototype.addComments=function(t){var e=t.node;if(null!==e)for(e=e.pv();e.next();){var n=e.value;if("Comment"===n.category&&n.isVisible()){var i=this.network.Ki(n);null===i&&(i=this.network.Zj(n)),i.charge=this.defaultCommentElectricalCharge,n=null;for(var a=i.destinationEdges;a.next();){var u=a.value;if(u.toVertex===t){n=u;break}}if(null===n)for(a=i.sourceEdges;a.next();)if((u=a.value).fromVertex===t){n=u;break}null===n&&(n=this.network.rk(t,i,null)),n.length=this.defaultCommentSpringLength}}},gn.prototype.moveVertex=function(t){var e=t.forceX,n=t.forceY,i=this.moveLimit;return e<-i?e=-i:e>i&&(e=i),n<-i?n=-i:n>i&&(n=i),t.centerX+=e,t.centerY+=n,e*e+n*n},gn.prototype.moveFixedVertex=function(){},gn.prototype.commitLayout=function(){this.Yv(),this.commitNodes(),this.isRouting&&this.commitLinks()},gn.prototype.Yv=function(){if(this.setsPortSpots)for(var t=this.network.edges.iterator;t.next();){var e=t.value.link;null!==e&&(e.fromSpot=Fi,e.toSpot=Fi)}},gn.prototype.commitNodes=function(){var t=0,e=0;if(this.arrangesToOrigin){var n=B.alloc();this.computeBounds(this.network,n),t=(e=this.arrangementOrigin).x-n.x,e=e.y-n.y,B.free(n)}n=B.alloc();for(var i=this.network.vertexes.iterator;i.next();){var a=i.value;(0!==t||0!==e)&&(n.assign(a.bounds),n.x+=t,n.y+=e,a.bounds=n),a.commit()}B.free(n)},gn.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},gn.prototype.springStiffness=function(t){return t=t.stiffness,isNaN(t)?this.Yk:t},gn.prototype.springLength=function(t){return t=t.length,isNaN(t)?this.Xk:t},gn.prototype.electricalCharge=function(t){return t=t.charge,isNaN(t)?this.Vk:t},gn.prototype.electricalFieldX=function(){return 0},gn.prototype.electricalFieldY=function(){return 0},gn.prototype.gravitationalMass=function(t){return t=t.mass,isNaN(t)?this.Wk:t},gn.prototype.gravitationalFieldX=function(){return 0},gn.prototype.gravitationalFieldY=function(){return 0},gn.prototype.isFixed=function(t){return t.isFixed},Dt.Object.defineProperties(gn.prototype,{currentIteration:{get:function(){return this.po}},arrangementSpacing:{get:function(){return this.Nd},set:function(t){this.Nd.A(t)||(this.Nd.assign(t),this.B())}},arrangesToOrigin:{get:function(){return this.bn},set:function(t){this.bn!==t&&(this.bn=t,this.B())}},setsPortSpots:{get:function(){return this.df},set:function(t){this.df!==t&&(this.df=t,this.B())}},comments:{get:function(){return this.gd},set:function(t){this.gd!==t&&(this.gd=t,this.B())}},maxIterations:{get:function(){return this.xl},set:function(t){this.xl!==t&&0<=t&&(this.xl=t,this.B())}},epsilonDistance:{get:function(){return this.Gn},set:function(t){this.Gn!==t&&0<t&&(this.Gn=t,this.B())}},infinityDistance:{get:function(){return this.Pf},set:function(t){this.Pf!==t&&1<t&&(this.Pf=t,this.B())}},moveLimit:{get:function(){return this.Jo},set:function(t){this.Jo!==t&&1<t&&(this.Jo=t,this.B())}},randomNumberGenerator:{get:function(){return this.fp},set:function(t){this.fp!==t&&(null!==t&&"function"!=typeof t.random&&z('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+t),this.fp=t)}},defaultSpringStiffness:{get:function(){return this.Yk},set:function(t){this.Yk!==t&&(this.Yk=t,this.B())}},defaultSpringLength:{get:function(){return this.Xk},set:function(t){this.Xk!==t&&(this.Xk=t,this.B())}},defaultElectricalCharge:{get:function(){return this.Vk},set:function(t){this.Vk!==t&&(this.Vk=t,this.B())}},defaultGravitationalMass:{get:function(){return this.Wk},set:function(t){this.Wk!==t&&(this.Wk=t,this.B())}},defaultCommentSpringLength:{get:function(){return this.yn},set:function(t){this.yn!==t&&(this.yn=t,this.B())}},defaultCommentElectricalCharge:{get:function(){return this.xn},set:function(t){this.xn!==t&&(this.xn=t,this.B())}}}),gn.className="ForceDirectedLayout",qv.className="ForceDirectedSubnet",Ft(du,te),du.prototype.createVertex=function(){return new fu(this)},du.prototype.createEdge=function(){return new pu(this)},du.className="ForceDirectedNetwork",Ft(fu,Be),fu.prototype.serializeVertexProperties=function(t,e){Be.prototype.serializeVertexProperties.call(this,t,e),t.isFixed=this.isFixed,t.charge=this.charge,t.mass=this.mass},fu.prototype.deserializeVertexProperties=function(t,e,n,i){Be.prototype.deserializeVertexProperties.call(this,t,e,n,i),this.isFixed=t.isFixed,this.charge=t.charge,this.mass=t.mass},Dt.Object.defineProperties(fu.prototype,{isFixed:{get:function(){return this.Ha},set:function(t){this.Ha!==t&&(this.Ha=t)}},charge:{get:function(){return this.C},set:function(t){this.C!==t&&(this.C=t)}},mass:{get:function(){return this.Wa},set:function(t){this.Wa!==t&&(this.Wa=t)}},forceX:{get:function(){return this.M},set:function(t){this.M!==t&&(this.M=t)}},forceY:{get:function(){return this.Ga},set:function(t){this.Ga!==t&&(this.Ga=t)}}}),fu.className="ForceDirectedVertex",Ft(pu,Yn),pu.prototype.serializeEdgeProperties=function(t,e){Yn.prototype.serializeEdgeProperties.call(this,t,e),t.stiffness=this.stiffness,t.length=this.length},pu.prototype.deserializeEdgeProperties=function(t,e,n,i){Yn.prototype.deserializeEdgeProperties.call(this,t,e,n,i),this.stiffness=t.stiffness,this.length=t.length},Dt.Object.defineProperties(pu.prototype,{stiffness:{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t)}},length:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}}}),pu.className="ForceDirectedEdge",Vf.prototype.random=function(){var t=this.seed%this.Q*this.Iy-this.seed/this.Q*this.Ly;return this.seed=0<t?t:t+this.Ky,this.seed*this.Jy},Vf.className="RandomNumberGenerator",Ft(Gt,Rt),Gt.prototype.cloneProtected=function(t){Rt.prototype.cloneProtected.call(this,t),t.Zd=this.Zd,t.Yb=this.Yb,t.K=this.K,t.Uk=this.Uk,t.sl=this.sl,t.il=this.il,t.Cj=this.Cj,t.Fk=this.Fk,t.Wf=this.Wf,t.df=this.df,t.vo=this.vo},Gt.prototype.serializeLayoutProperties=function(t,e){Rt.prototype.serializeLayoutProperties.call(this,t,e),t.layerSpacing=this.layerSpacing,t.columnSpacing=this.columnSpacing,t.direction=this.direction,t.cycleRemoveOption=this.cycleRemoveOption.name,t.layeringOption=this.layeringOption.name,t.initializeOption=this.initializeOption.name,t.iterations=this.iterations,t.aggressiveOption=this.aggressiveOption.name,t.packOption=this.packOption,t.setsPortSpots=this.setsPortSpots,t.linkSpacing=this.linkSpacing,t.ra=this.ra,t.ji=this.ji,t.Ca=this.Ca,t.Qg=this.Qg,t.pc=this.pc,t.zb=this.zb,t.Xg=this.Xg,t.Bc=this.Bc,t.Qc={x:this.Qc.x,y:this.Qc.y}},Gt.prototype.deserializeLayoutProperties=function(t,e,n,i,a){Rt.prototype.deserializeLayoutProperties.call(this,t,e,n,i,a),this.layerSpacing=t.layerSpacing,this.columnSpacing=t.columnSpacing,this.direction=t.direction,this.cycleRemoveOption=ua(Gt,t.cycleRemoveOption),this.layeringOption=ua(Gt,t.layeringOption),this.initializeOption=ua(Gt,t.initializeOption),this.iterations=t.iterations,this.aggressiveOption=ua(Gt,t.aggressiveOption),this.packOption=t.packOption,this.setsPortSpots=t.setsPortSpots,this.linkSpacing=t.linkSpacing,this.ra=t.ra,this.ji=t.ji,this.Ca=t.Ca,this.Qg=t.Qg,this.pc=t.pc,this.zb=t.zb,this.Xg=t.Xg,this.Bc=t.Bc,this.Qc=new N(this.Qc.x,this.Qc.y),a&&!i&&a.edges.each(function(u){if(!u.link&&u.fromVertex&&u.toVertex&&(null===u.fromVertex.node||null===u.toVertex.node)){for(var h=u.fromVertex;null!==h&&null===h.node&&0<h.qd.count;){var d=h.qd.J(0);if(d.link){u.link=d.link;break}h=d.fromVertex}if(!u.link){for(d=u.toVertex;null!==d&&null===d.node&&0<d.Cd.count;){var f=d.Cd.J(0);if(f.link){u.link=f.link;break}d=f.toVertex}if(!u.link)for(d=d.qd.iterator;d.next();)if((f=d.value).link&&f.fromVertex===h){u.link=f.link;break}}}})},Gt.prototype.gb=function(t){t.classType===Gt?0===t.name.indexOf("Aggressive")?this.aggressiveOption=t:0===t.name.indexOf("Cycle")?this.cycleRemoveOption=t:0===t.name.indexOf("Init")?this.initializeOption=t:0===t.name.indexOf("Layer")?this.layeringOption=t:z("Unknown enum value: "+t):Rt.prototype.gb.call(this,t)},Gt.prototype.createNetwork=function(){return new Le(this)},Gt.prototype.doLayout=function(t){for(null===this.network&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),this.ji=-1,this.pc=this.Qg=0,this.Lo=this.Ko=this.Jj=null,t=0;t<this.ve.length;t++)this.ve[t]=null;if(0<this.network.vertexes.count){if(this.network.fq(),this.jw())return;for(this.cycleRemoveOption!==Uf&&this.removeCycles(),t=this.network.vertexes.iterator;t.next();)t.value.layer=-1;for(this.ra=-1,this.assignLayers(),t.reset();t.next();)this.ra=Math.max(this.ra,t.value.layer);this.cycleRemoveOption===Uf&&this.removeCycles();for(var e=[],n=(t=this.network).edges.iterator;n.next();){var i=n.value;i.valid=!1,e.push(i)}for(n=0;n<e.length;n++){var a=(i=e[n]).fromVertex,u=i.toVertex;if(!(i.valid||(null===a.node&&null===a.data||null===u.node&&null===u.data)&&a.layer===u.layer)){var h=0,d=0,f=0,g=0;if(null!==i.link){if(null===(d=i.link))continue;var m=a.node;if(h=u.node,null===m||null===h)continue;var y=d.fromNode;f=d.toNode;var x=d.fromPort;if(d=d.toPort,i.rev){g=y;var _=x;y=f,x=d,f=g,d=_}var M=a.focus;g=u.focus;var S=i.rev?u.bounds:a.bounds;_=N.alloc(),m!==y?S.u()&&y.isVisible()?y.actualBounds.u()?(Sa(y,x,Wt,_),_.x+=y.actualBounds.x-S.x,_.y+=y.actualBounds.y-S.y):(Sa(y,x,Wt,_),_.u()||_.assign(M)):_.assign(M):S.u()?(Sa(y,x,Wt,_),_.u()||_.assign(M)):_.assign(M),y=i.rev?a.bounds:u.bounds,m=N.alloc(),h!==f?y.u()&&f.isVisible()?f.actualBounds.u()?(Sa(f,d,Wt,m),m.x+=f.actualBounds.x-y.x,m.y+=f.actualBounds.y-y.y):(Sa(f,d,Wt,m),m.u()||m.assign(g)):m.assign(g):y.u()?(Sa(f,d,Wt,m),m.u()||m.assign(g)):m.assign(g),90===this.K||270===this.K?(h=Math.round((_.x-M.x)/this.Yb),f=_.x,d=Math.round((m.x-g.x)/this.Yb),g=m.x):(h=Math.round((_.y-M.y)/this.Yb),f=_.y,d=Math.round((m.y-g.y)/this.Yb),g=m.y),N.free(_),N.free(m),i.portFromColOffset=h,i.portFromPos=f,i.portToColOffset=d,i.portToPos=g}else i.portFromColOffset=0,i.portFromPos=0,i.portToColOffset=0,i.portToPos=0;if(_=a.layer,m=u.layer,y=0,null!==(S=i.link)){var T=S.fromPort,k=S.toPort;if(null!==T&&null!==k){var b=S.fromNode;if(x=S.toNode,null!==b&&null!==x){var I=So(this,!0),O=So(this,!1),F=this.setsPortSpots?I:S.computeSpot(!0,T);M=this.setsPortSpots?O:S.computeSpot(!1,k);var H=S.isOrthogonal;F.Kc()&&F.zf(O)&&M.Kc()&&M.zf(I)?y=0:(I=S.getLinkPoint(b,T,F,!0,H,x,k,N.alloc()),O=S.getLinkDirection(b,T,I,F,!0,H,x,k),N.free(I),F.Qs()||O!==Xw(this,i,!0)?this.setsPortSpots&&null!==b&&1===b.ports.count&&i.rev&&(y+=1):y+=1,F=S.getLinkPoint(x,k,M,!1,H,b,T,N.alloc()),S=S.getLinkDirection(x,k,F,M,!1,H,b,T),N.free(F),M.Qs()||S!==Xw(this,i,!1)?this.setsPortSpots&&null!==x&&1===x.ports.count&&i.rev&&(y+=2):y+=2)}}}if(y=1===(x=y)||3===x,(x=2===x||3===x)&&((M=t.createVertex()).node=null,M.qf=1,M.layer=_,M.near=a,t.ig(M),(a=t.rk(a,M,i.link)).valid=!1,a.rev=i.rev,a.portFromColOffset=h,a.portToColOffset=0,a.portFromPos=f,a.portToPos=0,a=M),S=1,y&&S--,_-m>S&&0<_){for(i.valid=!1,(M=t.createVertex()).node=null,M.qf=2,M.layer=_-1,t.ig(M),(a=t.rk(a,M,i.link)).valid=!0,a.rev=i.rev,a.portFromColOffset=x?0:h,a.portToColOffset=0,a.portFromPos=x?0:f,a.portToPos=0,a=M,_--;_-m>S&&0<_;)(M=t.createVertex()).node=null,M.qf=3,M.layer=_-1,t.ig(M),(a=t.rk(a,M,i.link)).valid=!0,a.rev=i.rev,a.portFromColOffset=0,a.portToColOffset=0,a.portFromPos=0,a.portToPos=0,a=M,_--;(a=t.rk(M,u,i.link)).valid=!y,y&&(M.near=u),a.rev=i.rev,a.portFromColOffset=0,a.portToColOffset=d,a.portFromPos=0,a.portToPos=g}else i.valid=!0}}for(t=this.zb=[],e=0;e<=this.ra;e++)t[e]=0;for(e=this.network.vertexes.iterator;e.next();)e.value.index=-1;for(this.initializeIndices(),this.ji=-1,n=this.pc=this.Qg=0;n<=this.ra;n++)t[n]>t[this.pc]&&(this.ji=t[n]-1,this.pc=n),t[n]<t[this.Qg]&&(this.Qg=n);for(this.Lo=[],n=0;n<t.length;n++)this.Lo[n]=[];for(e.reset();e.next();)this.Lo[(t=e.value).layer][t.index]=t;for(this.Ca=-1,t=0;t<=this.ra;t++){for(e=La(this,t),n=0,i=this.zb[t],u=0;u<i;u++)n+=this.nodeMinColumnSpace(a=e[u],!0),a.column=n,n+=1,n+=this.nodeMinColumnSpace(a,!1);this.Ca=Math.max(this.Ca,n-1),Ra(this,t,e)}this.reduceCrossings(),this.straightenAndPack(),this.updateParts()}this.network=null,this.isValidLayout=!0},Gt.prototype.linkMinLength=function(){return 1},Gt.prototype.nodeMinLayerSpace=function(t,e){return null===t.node&&null===t.data?0:90===this.K||270===this.K?e?t.focus.y+10:t.bounds.height-t.focus.y+10:e?t.focus.x+10:t.bounds.width-t.focus.x+10},Gt.prototype.nodeMinColumnSpace=function(t,e){if(null===t.node&&null===t.data)return 0;var n=e?t.vk:t.uk;return null!==n?n:90===(n=this.K)||270===n?e?t.vk=t.focus.x/this.Yb+1|0:t.uk=(t.bounds.width-t.focus.x)/this.Yb+1|0:e?t.vk=t.focus.y/this.Yb+1|0:t.uk=(t.bounds.height-t.focus.y)/this.Yb+1|0},Gt.prototype.countCrossings=function(){for(var t=0,e=0;e<=this.ra;e++)for(var n=Hw(this,e,1),i=this.zb[e],a=0;a<i;a++)for(var u=a;u<i;u++)t+=n[a*i+u];return t},Gt.prototype.normalize=function(){var t=1/0;this.Ca=-1;for(var e=this.network.vertexes.iterator;e.next();){var n=e.value;t=Math.min(t,n.column-this.nodeMinColumnSpace(n,!0)),this.Ca=Math.max(this.Ca,n.column+this.nodeMinColumnSpace(n,!1))}for(e.reset();e.next();)e.value.column-=t;this.Ca-=t},Gt.prototype.removeCycles=function(){for(var t=this.network.edges.iterator;t.next();)t.value.rev=!1;switch(this.Uk){default:case s0:var e=0,n=(t=this.network).vertexes.count-1,i=[];i.length=n+1;for(var a=t.vertexes.iterator;a.next();)a.value.valid=!0;for(;null!==w_(t);){for(a=zw(t);null!==a;)i[n]=a,n--,a.valid=!1,a=zw(t);for(a=t0(t);null!==a;)i[e]=a,e++,a.valid=!1,a=t0(t);a=null;for(var u=0,h=this.network.vertexes.iterator;h.next();){var d=h.value;if(d.valid){for(var f=0,g=d.destinationEdges;g.next();)g.value.toVertex.valid&&f++;g=0;for(var m=d.sourceEdges;m.next();)m.value.fromVertex.valid&&g++;(null===a||u<f-g)&&(a=d,u=f-g)}}null!==a&&(i[e]=a,e++,a.valid=!1)}for(e=0;e<t.vertexes.count;e++)i[e].index=e;for(i=t.edges.iterator;i.next();)(e=i.value).fromVertex.index>e.toVertex.index&&(t.Am(e),e.rev=!0);break;case mm:for(i=this.network.vertexes.iterator;i.next();)(t=i.value).jg=-1,t.finish=-1;for(t=this.network.edges.iterator;t.next();)t.value.forest=!1;for(this.Xg=0,i.reset();i.next();)0===(e=i.value).sourceEdges.count&&e0(this,e);for(i.reset();i.next();)-1===(e=i.value).jg&&e0(this,e);for(t.reset();t.next();)(i=t.value).forest||(n=(e=i.fromVertex).finish,u=(a=i.toVertex).finish,a.jg<e.jg&&n<u&&(this.network.Am(i),i.rev=!0));break;case Uf:for(e=(t=this.network).vertexes.iterator,i=1/0;e.next();)i=Math.min(i,e.value.layer);if(1/0>i){if(0>i)for(e.reset();e.next();)e.value.layer-=i;for(i=[],e.reset();e.next();)void 0===(a=i[(n=e.value).layer])?i[n.layer]=[n]:a.push(n);for(n=e=0;n<i.length;n++)if((a=i[n])&&0!==a.length){if(0<n)for(u=0;u<a.length;u++)a[u].layer-=e}else e++;for(i=t.edges.iterator;i.next();)(e=i.value).fromVertex.layer<e.toVertex.layer&&(t.Am(e),e.rev=!0)}}},Gt.prototype.assignLayers=function(){switch(this.sl){case Hf:n0(this);break;case _h:for(var t,e=this.network.vertexes.iterator;e.next();)t=wh(this,e.value),this.ra=Math.max(t,this.ra);for(e.reset();e.next();)(t=e.value).layer=this.ra-t.layer;break;default:for(n0(this),e=this.network.vertexes.iterator;e.next();)e.value.valid=!1;for(e.reset();e.next();)0===(t=e.value).sourceEdges.count&&Yw(this,t);for(t=1/0,e.reset();e.next();)t=Math.min(t,e.value.layer);for(this.ra=-1,e.reset();e.next();){var n=e.value;n.layer-=t,this.ra=Math.max(this.ra,n.layer)}}},Gt.prototype.initializeIndices=function(){switch(this.il){default:case a0:for(var t=this.network.vertexes.iterator;t.next();){var e=t.value,n=e.layer;e.index=this.zb[n],this.zb[n]++}break;case vm:for(t=this.network.vertexes.iterator,e=this.ra;0<=e;e--)for(t.reset();t.next();)(n=t.value).layer===e&&-1===n.index&&o0(this,n);break;case xm:for(t=this.network.vertexes.iterator,e=0;e<=this.ra;e++)for(t.reset();t.next();)(n=t.value).layer===e&&-1===n.index&&$w(this,n)}},Gt.prototype.reduceCrossings=function(){var n,i,u,h,d,t=this.countCrossings(),e=xi(this);for(n=0;n<this.Cj;n++){for(i=0;i<=this.ra;i++)Bf(this,i,1),oo(this,i,1);var a=this.countCrossings();for(a<t&&(t=a,e=xi(this)),i=this.ra;0<=i;i--)Bf(this,i,-1),oo(this,i,-1);(a=this.countCrossings())<t&&(t=a,e=xi(this))}for(Yr(this,e),n=0;n<this.Cj;n++){for(i=0;i<=this.ra;i++)Bf(this,i,0),oo(this,i,0);for((a=this.countCrossings())<t&&(t=a,e=xi(this)),i=this.ra;0<=i;i--)Bf(this,i,0),oo(this,i,0);(a=this.countCrossings())<t&&(t=a,e=xi(this))}switch(Yr(this,e),this.Fk){case wm:break;case Jc:for(d=t+1;(i=this.countCrossings())<d;)for(d=i,n=this.ra;0<=n;n--)for(h=0;h<=n;h++){for(u=!0;u;)for(u=!1,i=n;i>=h;i--)u=oo(this,i,-1)||u;for((a=this.countCrossings())>=t?Yr(this,e):(t=a,e=xi(this)),u=!0;u;)for(u=!1,i=n;i>=h;i--)u=oo(this,i,1)||u;for((a=this.countCrossings())>=t?Yr(this,e):(t=a,e=xi(this)),u=!0;u;)for(u=!1,i=h;i<=n;i++)u=oo(this,i,1)||u;for(a>=t?Yr(this,e):(t=a,e=xi(this)),u=!0;u;)for(u=!1,i=h;i<=n;i++)u=oo(this,i,-1)||u;for(a>=t?Yr(this,e):(t=a,e=xi(this)),u=!0;u;)for(u=!1,i=n;i>=h;i--)u=oo(this,i,0)||u;for(a>=t?Yr(this,e):(t=a,e=xi(this)),u=!0;u;)for(u=!1,i=h;i<=n;i++)u=oo(this,i,0)||u;a>=t?Yr(this,e):(t=a,e=xi(this))}break;default:for(n=this.ra,h=0,d=t+1;(i=this.countCrossings())<d;){for(d=i,u=!0;u;)for(u=!1,i=n;i>=h;i--)u=oo(this,i,-1)||u;for((a=this.countCrossings())>=t?Yr(this,e):(t=a,e=xi(this)),u=!0;u;)for(u=!1,i=n;i>=h;i--)u=oo(this,i,1)||u;for((a=this.countCrossings())>=t?Yr(this,e):(t=a,e=xi(this)),u=!0;u;)for(u=!1,i=h;i<=n;i++)u=oo(this,i,1)||u;for(a>=t?Yr(this,e):(t=a,e=xi(this)),u=!0;u;)for(u=!1,i=h;i<=n;i++)u=oo(this,i,-1)||u;for(a>=t?Yr(this,e):(t=a,e=xi(this)),u=!0;u;)for(u=!1,i=n;i>=h;i--)u=oo(this,i,0)||u;for(a>=t?Yr(this,e):(t=a,e=xi(this)),u=!0;u;)for(u=!1,i=h;i<=n;i++)u=oo(this,i,0)||u;a>=t?Yr(this,e):(t=a,e=xi(this))}}Yr(this,e)},Gt.prototype.straightenAndPack=function(){var t=0!=(1&this.Wf),e=0!=(this.Wf&C_);if(1e3<this.network.edges.count&&e&&(t=!1),t){var n=[];for(e=0;e<=this.ra;e++)n[e]=0;for(var i,a=this.network.vertexes.iterator;a.next();){var u=a.value;e=u.layer,i=u.column,u=this.nodeMinColumnSpace(u,!1),n[e]=Math.max(n[e],i+u)}for(a.reset();a.next();)(u=a.value).column=(8*(this.Ca-n[e=u.layer])>>1)+8*(i=u.column);this.Ca*=8}if(0!=(2&this.Wf))for(n=!0;n;){for(n=!1,e=this.pc+1;e<=this.ra;e++)n=Mh(this,e,1)||n;for(e=this.pc-1;0<=e;e--)n=Mh(this,e,-1)||n;n=Mh(this,this.pc,0)||n}if(0!=(4&this.Wf)){for(e=this.pc+1;e<=this.ra;e++)cs(this,e,1);for(e=this.pc-1;0<=e;e--)cs(this,e,-1);cs(this,this.pc,0)}if(t&&(Gs(this,-1),Gs(this,1)),0!=(2&this.Wf))for(n=!0;n;){for(n=!1,n=Mh(this,this.pc,0)||n,e=this.pc+1;e<=this.ra;e++)n=Mh(this,e,0)||n;for(e=this.pc-1;0<=e;e--)n=Mh(this,e,0)||n}},Gt.prototype.commitLayout=function(){if(this.setsPortSpots)for(var t=So(this,!0),e=So(this,!1),n=this.network.edges.iterator;n.next();){var i=n.value.link;null!==i&&(i.fromSpot=t,i.toSpot=e)}this.commitNodes(),this.gv(),this.isRouting&&this.commitLinks()},Gt.prototype.commitNodes=function(){this.Yd=[],this.vd=[],this.ud=[],this.Ka=[];for(var t=0;t<=this.ra;t++)this.Yd[t]=0,this.vd[t]=0,this.ud[t]=0,this.Ka[t]=0;for(t=this.network.vertexes.iterator;t.next();){var e=t.value,n=e.layer;this.Yd[n]=Math.max(this.Yd[n],this.nodeMinLayerSpace(e,!0)),this.vd[n]=Math.max(this.vd[n],this.nodeMinLayerSpace(e,!1))}e=0,n=this.Zd;for(var i=0;i<=this.ra;i++){var a=n;0>=this.Yd[i]+this.vd[i]&&(a=0),0<i&&(e+=a/2),90===this.K||0===this.K?(this.ud[i]=e+=this.vd[i],e+=this.Yd[i]):(this.ud[i]=e+=this.Yd[i],e+=this.vd[i]),i<this.ra&&(e+=a/2),this.Ka[i]=e}for(n=e,e=this.arrangementOrigin,i=0;i<=this.ra;i++)270===this.K?this.ud[i]=e.y+this.ud[i]:90===this.K?(this.ud[i]=e.y+n-this.ud[i],this.Ka[i]=n-this.Ka[i]):180===this.K?this.ud[i]=e.x+this.ud[i]:(this.ud[i]=e.x+n-this.ud[i],this.Ka[i]=n-this.Ka[i]);for(t.reset(),n=i=1/0;t.next();){var u=(a=t.value).layer,h=0|a.column;if(270===this.K||90===this.K){var d=e.x+this.Yb*h;u=this.ud[u]}else d=this.ud[u],u=e.y+this.Yb*h;a.centerX=d,a.centerY=u,i=Math.min(a.x,i),n=Math.min(a.y,n)}for(this.Qc=new N(i=e.x-i,e=e.y-n),t.reset();t.next();)(n=t.value).x+=i,n.y+=e,n.commit()},Gt.prototype.gv=function(){for(var t=0,e=this.Zd,n=0;n<=this.ra;n++)t+=this.Yd[n],t+=this.vd[n];t+=this.ra*e,e=[],n=this.Yb*this.Ca;for(var i=this.maxLayer;0<=i;i--)e.push(270===this.K?0===i?new B(0,0,n,Math.abs(this.Ka[0])):new B(0,this.Ka[i-1],n,Math.abs(this.Ka[i-1]-this.Ka[i])):90===this.K?0===i?new B(0,this.Ka[0],n,Math.abs(this.Ka[0]-t)):new B(0,this.Ka[i],n,Math.abs(this.Ka[i-1]-this.Ka[i])):180===this.K?0===i?new B(0,0,Math.abs(this.Ka[0]),n):new B(this.Ka[i-1],0,Math.abs(this.Ka[i-1]-this.Ka[i]),n):0===i?new B(this.Ka[0],0,Math.abs(this.Ka[0]-t),n):new B(this.Ka[i],0,Math.abs(this.Ka[i-1]-this.Ka[i]),n));this.commitLayers(e,this.Qc)},Gt.prototype.commitLayers=function(){},Gt.prototype.commitLinks=function(){for(var e,t=this.network.edges.iterator;t.next();)null!==(e=t.value.link)&&(e.Hh(),e.ak(),e.rf());for(t.reset();t.next();)null!==(e=t.value.link)&&e.pg();for(t.reset();t.next();){var n=t.value;if(null!==(e=n.link)){e.Hh();var i=e,a=i.fromNode,u=i.toNode,h=i.fromPort,d=i.toPort;if(null!==a){var f=a.findVisibleNode();null!==f&&f!==a&&(a=f,h=f.port)}null!==u&&null!==(f=u.findVisibleNode())&&f!==u&&(u=f,d=f.port);var g=e.computeSpot(!0,h);f=e.computeSpot(!1,d);var m=n.fromVertex,y=n.toVertex;if(n.valid){if(e.curve===Ei&&4===e.pointsCount)if(m.column===y.column)n=e.getLinkPoint(a,h,g,!0,!1,u,d),h=e.getLinkPoint(u,d,f,!1,!1,a,h),n.u()||n.set(a.actualBounds.center),h.u()||h.set(u.actualBounds.center),e.ak(),e.pf(n.x,n.y),e.pf((2*n.x+h.x)/3,(2*n.y+h.y)/3),e.pf((n.x+2*h.x)/3,(n.y+2*h.y)/3),e.pf(h.x,h.y);else{var x=!1,_=!1;if(null!==h&&g===An&&(x=!0),null!==d&&f===An&&(_=!0),x||_){var M=e.i(0).x;if(n=e.i(0).y,m=e.i(3).x,i=e.i(3).y,x){if(90===this.K||270===this.K){x=M;var S=(n+i)/2}else x=(M+m)/2,S=n;e.L(1,x,S),(g=e.getLinkPoint(a,h,g,!0,!1,u,d)).u()||g.set(a.actualBounds.center),e.L(0,g.x,g.y)}_&&(90===this.K||270===this.K?(g=m,n=(n+i)/2):(g=(M+m)/2,n=i),e.L(2,g,n),(a=e.getLinkPoint(u,d,f,!1,!1,a,h)).u()||a.set(u.actualBounds.center),e.L(3,a.x,a.y))}}e.rf()}else if(m.layer===y.layer)e.rf();else{if(x=_=!1,S=this.Zd,M=e.firstPickIndex+1,e.isOrthogonal){x=!0;var T=e.pointsCount;4<T&&e.points.removeRange(2,T-3)}else if(e.curve===Ei)_=!0,4<(T=e.pointsCount)&&e.points.removeRange(2,T-3),4===T&&(M=2);else{var k=g===An,b=f===An;2<(T=e.pointsCount)&&k&&b?e.points.removeRange(1,T-2):3<T&&k&&!b?e.points.removeRange(1,T-3):3<T&&!k&&b?e.points.removeRange(2,T-2):4<T&&!k&&!b&&e.points.removeRange(2,T-3)}if(n.rev){for(;null!==y&&m!==y;){var I=T=null;for(k=y.sourceEdges.iterator;k.next()&&((b=k.value).link!==n.link||(I=b.toVertex,null!==(T=b.fromVertex).node)););if(null===T)break;if(T!==m){k=e.i(M-1).x,b=e.i(M-1).y;var O=T.centerX,F=T.centerY;if(x)180===this.K||0===this.K?M===e.firstPickIndex+1?(e.l(M++,k,b),e.l(M++,k,F)):(null!==I?I.centerY:b)!==F&&(e.l(M++,I=this.Ka[T.layer-1]+this.Qc.x,b),e.l(M++,I,F)):M===e.firstPickIndex+1?(e.l(M++,k,b),e.l(M++,O,b)):(null!==I?I.centerX:k)!==O&&(e.l(M++,k,I=this.Ka[T.layer-1]+this.Qc.y),e.l(M++,O,I));else if(M===e.firstPickIndex+1){I=Math.max(10,this.Yd[y.layer]);var H=Math.max(10,this.vd[y.layer]);if(_)180===this.K?O<=y.bounds.x?(e.l(M++,(y=y.bounds.x)-I,F),e.l(M++,y,F),e.l(M++,y+H,F)):(e.l(M++,O-I,F),e.l(M++,O,F),e.l(M++,O+H,F)):90===this.K?F>=y.bounds.bottom?(e.l(M++,O,(y=y.bounds.y+y.bounds.height)+H),e.l(M++,O,y),e.l(M++,O,y-I)):(e.l(M++,O,F+H),e.l(M++,O,F),e.l(M++,O,F-I)):270===this.K?F<=y.bounds.y?(e.l(M++,O,(y=y.bounds.y)-I),e.l(M++,O,y),e.l(M++,O,y+H)):(e.l(M++,O,F-I),e.l(M++,O,F),e.l(M++,O,F+H)):0===this.K&&(O>=y.bounds.right?(e.l(M++,(y=y.bounds.x+y.bounds.width)+H,F),e.l(M++,y,F),e.l(M++,y-I,F)):(e.l(M++,O+H,F),e.l(M++,O,F),e.l(M++,O-I,F)));else{e.l(M++,k,b);var W=0;180===this.K||0===this.K?((180===this.K?O>=y.bounds.right:O<=y.bounds.x)&&(W=(0===this.K?-I:H)/2),e.l(M++,k+W,F)):((270===this.K?F>=y.bounds.bottom:F<=y.bounds.y)&&(W=(90===this.K?-I:H)/2),e.l(M++,O,b+W)),e.l(M++,O,F)}}else I=Math.max(10,this.Yd[T.layer]),H=Math.max(10,this.vd[T.layer]),_?180===this.K?(e.l(M++,O-I-S,F),e.l(M++,Math.min(O-I+S/2,O),F),e.l(M++,O,F),e.l(M++,O,F),e.l(M++,Math.max(O+H-S/2,O),F),e.l(M++,O+H+S,F)):90===this.K?(e.l(M++,O,F+H+S),e.l(M++,O,Math.max(F+H-S/2,F)),e.l(M++,O,F),e.l(M++,O,F),e.l(M++,O,Math.min(F-I+S/2,F)),e.l(M++,O,F-I-S)):270===this.K?(e.l(M++,O,F-I-S),e.l(M++,O,Math.min(F-I+S/2,F)),e.l(M++,O,F),e.l(M++,O,F),e.l(M++,O,Math.max(F+H-S/2,F)),e.l(M++,O,F+H+S)):(e.l(M++,O+H+S,F),e.l(M++,Math.max(O+H-S/2,O),F),e.l(M++,O,F),e.l(M++,O,F),e.l(M++,Math.min(O-I+S/2,O),F),e.l(M++,O-I-S,F)):e.l(M++,O,F)}y=T}(null===d||g!==An||x)&&(k=e.i(M-1).x,b=e.i(M-1).y,O=e.i(M).x,F=e.i(M).y,x?(S=this.vd[m.layer],180===this.K||0===this.K?((x=b)>=m.bounds.y&&x<=m.bounds.bottom&&(180===this.K?O>=m.bounds.x:O<=m.bounds.right)&&(x=x<m.bounds.y+m.bounds.height/2?m.bounds.y-this.Yb/2:m.bounds.bottom+this.Yb/2,e.l(M++,y=m.centerX+(180===this.K?-S:S),b),e.l(M++,y,x)),e.l(M++,O,x)):((x=k)>=m.bounds.x&&x<=m.bounds.right&&(270===this.K?F>=m.bounds.y:F<=m.bounds.bottom)&&(x=x<m.bounds.x+m.bounds.width/2?m.bounds.x-this.Yb/2:m.bounds.right+this.Yb/2,e.l(M++,k,y=m.centerY+(270===this.K?-S:S)),e.l(M++,x,y)),e.l(M++,x,F)),e.l(M++,O,F)):_?(I=Math.max(10,this.Yd[m.layer]),H=Math.max(10,this.vd[m.layer]),180===this.K&&O>=m.bounds.x?(e.L(M-2,y=m.bounds.x+m.bounds.width,b),e.L(M-1,y+H,b)):90===this.K&&F<=m.bounds.bottom?(e.L(M-2,k,y=m.bounds.y),e.L(M-1,k,y-I)):270===this.K&&F>=m.bounds.y?(e.L(M-2,k,y=m.bounds.y+m.bounds.height),e.L(M-1,k,y+H)):0===this.K&&O<=m.bounds.right&&(e.L(M-2,y=m.bounds.x,b),e.L(M-1,y-I,b))):(I=Math.max(10,this.Yd[m.layer]),H=Math.max(10,this.vd[m.layer]),x=0,180===this.K||0===this.K?((180===this.K?O<=m.bounds.x:O>=m.bounds.right)&&(x=(0===this.K?H:-I)/2),e.l(M++,O+x,b)):((270===this.K?F<=m.bounds.y:F>=m.bounds.bottom)&&(x=(90===this.K?H:-I)/2),e.l(M++,k,F+x)),e.l(M++,O,F)))}else{for(;null!==m&&m!==y;){for(I=T=null,m=m.destinationEdges.iterator;m.next()&&((k=m.value).link!==n.link||(null!==(I=k.fromVertex).node&&(I=null),null!==(T=k.toVertex).node)););if(null===T)break;T!==y&&(k=e.i(M-1).x,b=e.i(M-1).y,O=T.centerX,F=T.centerY,x?180===this.K||0===this.K?(null!==I?I.centerY:b)!==F&&(I=this.Ka[T.layer]+this.Qc.x,M===e.firstPickIndex+1&&(I=0===this.K?Math.max(I,k):Math.min(I,k)),e.l(M++,I,b),e.l(M++,I,F)):(null!==I?I.centerX:k)!==O&&(I=this.Ka[T.layer]+this.Qc.y,M===e.firstPickIndex+1&&(I=90===this.K?Math.max(I,b):Math.min(I,b)),e.l(M++,k,I),e.l(M++,O,I)):(I=Math.max(10,this.Yd[T.layer]),H=Math.max(10,this.vd[T.layer]),_?180===this.K?(e.l(M++,O+H+S,F),e.l(M++,Math.max(O+H-S/2,O),F),e.l(M++,O,F),e.l(M++,O,F),e.l(M++,Math.min(O-I+S/2,O),F),e.l(M++,O-I-S,F)):90===this.K?(e.l(M++,O,F-I-S),e.l(M++,O,Math.min(F-I+S/2,F)),e.l(M++,O,F),e.l(M++,O,F),e.l(M++,O,Math.max(F+H-S/2,F)),e.l(M++,O,F+H+S)):270===this.K?(e.l(M++,O,F+H+S),e.l(M++,O,Math.max(F+H-S/2,F)),e.l(M++,O,F),e.l(M++,O,F),e.l(M++,O,Math.min(F-I+S/2,F)),e.l(M++,O,F-I-S)):(e.l(M++,O-I-S,F),e.l(M++,Math.min(O-I+S/2,O),F),e.l(M++,O,F),e.l(M++,O,F),e.l(M++,Math.max(O+H-S/2,O),F),e.l(M++,O+H+S,F)):180===this.K?(e.l(M++,O+H,F),e.l(M++,O-I,F)):90===this.K?(e.l(M++,O,F-I),e.l(M++,O,F+H)):270===this.K?(e.l(M++,O,F+H),e.l(M++,O,F-I)):(e.l(M++,O-I,F),e.l(M++,O+H,F)))),m=T}x&&(k=e.i(M-1).x,b=e.i(M-1).y,O=e.i(M).x,F=e.i(M).y,180===this.K||0===this.K?b!==F&&(I=0===this.K?Math.min(Math.max((O+k)/2,this.Ka[y.layer]+this.Qc.x),O):Math.max(Math.min((O+k)/2,this.Ka[y.layer]+this.Qc.x),O),e.l(M++,I,b),e.l(M++,I,F)):k!==O&&(I=90===this.K?Math.min(Math.max((F+b)/2,this.Ka[y.layer]+this.Qc.y),F):Math.max(Math.min((F+b)/2,this.Ka[y.layer]+this.Qc.y),F),e.l(M++,k,I),e.l(M++,O,I)))}null!==i&&_&&(null!==h&&(g===An&&(g=e.i(0),i=e.i(2),g.A(i)||e.L(1,(g.x+i.x)/2,(g.y+i.y)/2)),(g=e.getLinkPoint(a,h,An,!0,!1,u,d)).u()||g.set(a.actualBounds.center),e.L(0,g.x,g.y)),null!==d&&(f===An&&(f=e.i(e.pointsCount-1),g=e.i(e.pointsCount-3),f.A(g)||e.L(e.pointsCount-2,(f.x+g.x)/2,(f.y+g.y)/2)),(a=e.getLinkPoint(u,d,An,!1,!1,a,h)).u()||a.set(u.actualBounds.center),e.L(e.pointsCount-1,a.x,a.y))),e.rf(),n.commit()}}}this.avoidOrthogonalOverlaps()},Gt.prototype.avoidOrthogonalOverlaps=function(){if(!(0>=this.linkSpacing)){for(var t=new et,e=this.network.edges.iterator;e.next();){var n=e.value.link;null!==n&&n.isOrthogonal&&!t.contains(n)&&t.add(n)}if(0<t.count)if(90===this.K||270===this.K){for(e=0,n=[],t=t.iterator;t.next();){var i=t.value;if(null!==i&&i.isOrthogonal)for(var a=2;a<i.pointsCount-3;a++){var u=i.i(a),h=i.i(a+1);if(this.w(u.y,h.y)&&!this.w(u.x,h.x)){var d=new ja;d.layer=Math.floor(u.y/2);var f=i.i(0),g=i.i(i.pointsCount-1);if(d.first=f.x*f.x+f.y,d.Xb=g.x*g.x+g.y,d.cd=Math.min(u.x,h.x),d.sc=Math.max(u.x,h.x),d.index=a,d.link=i,a+2<i.pointsCount){f=i.i(a-1),g=i.i(a+2);var m=0;f.y<u.y?m=g.y<u.y?3:u.x<h.x?2:1:f.y>u.y&&(m=g.y>u.y?0:h.x<u.x?2:1),d.j=m}n.push(d)}}}if(1<n.length)for(n.sort(this.By),t=0;t<n.length;){for(u=n[t].layer,i=t+1;i<n.length&&n[i].layer===u;)i++;if(1<i-t)for(u=t;u<i;){for(h=n[u].sc,a=t+1;a<i&&n[a].cd<h;)h=Math.max(h,n[a].sc),a++;if(1<(h=a-u)){for(this.Wi(n,this.ct,u,u+h),m=1,d=n[u].Xb,f=u;f<a;f++)(g=n[f]).Xb!==d&&(m++,d=g.Xb);this.Wi(n,this.Ay,u,u+h);var y=1;for(d=n[u].first,f=u;f<a;f++)(g=n[f]).first!==d&&(y++,d=g.first);for(f=!0,g=y,m<y?(f=!1,g=m,d=n[u].Xb,this.Wi(n,this.ct,u,u+h)):d=n[u].first,m=0,y=u;y<a;y++){var x=n[y];(f?x.first:x.Xb)!==d&&(m++,d=f?x.first:x.Xb);var _=x.link;u=_.i(x.index),h=_.i(x.index+1);var M=this.linkSpacing*(m-(g-1)/2);e++,_.Hh(),_.L(x.index,u.x,u.y+M),_.L(x.index+1,h.x,h.y+M),_.rf()}}u=a}t=i}}else{for(e=0,n=[],t=t.iterator;t.next();)if(null!==(i=t.value)&&i.isOrthogonal)for(a=2;a<i.pointsCount-3;a++)u=i.i(a),h=i.i(a+1),this.w(u.x,h.x)&&!this.w(u.y,h.y)&&((d=new ja).layer=Math.floor(u.x/2),f=i.i(0),g=i.i(i.pointsCount-1),d.first=f.x+f.y*f.y,d.Xb=g.x+g.y*g.y,d.cd=Math.min(u.y,h.y),d.sc=Math.max(u.y,h.y),d.index=a,d.link=i,a+2<i.pointsCount&&(f=i.i(a-1),g=i.i(a+2),m=0,f.x<u.x?m=g.x<u.x?3:u.y<h.y?2:1:f.x>u.x&&(m=g.x>u.x?0:h.y<u.y?2:1),d.j=m),n.push(d));if(1<n.length)for(n.sort(this.By),t=0;t<n.length;){for(u=n[t].layer,i=t+1;i<n.length&&n[i].layer===u;)i++;if(1<i-t)for(u=t;u<i;){for(h=n[u].sc,a=t+1;a<i&&n[a].cd<h;)h=Math.max(h,n[a].sc),a++;if(1<(h=a-u)){for(this.Wi(n,this.ct,u,u+h),m=1,d=n[u].Xb,f=u;f<a;f++)(g=n[f]).Xb!==d&&(m++,d=g.Xb);for(this.Wi(n,this.Ay,u,u+h),y=1,d=n[u].first,f=u;f<a;f++)(g=n[f]).first!==d&&(y++,d=g.first);for(f=!0,g=y,m<y?(f=!1,g=m,d=n[u].Xb,this.Wi(n,this.ct,u,u+h)):d=n[u].first,m=0,y=u;y<a;y++)x=n[y],(f?x.first:x.Xb)!==d&&(m++,d=f?x.first:x.Xb),u=(_=x.link).i(x.index),h=_.i(x.index+1),M=this.linkSpacing*(m-(g-1)/2),e++,_.Hh(),_.L(x.index,u.x+M,u.y),_.L(x.index+1,h.x+M,h.y),_.rf()}u=a}t=i}}}},(D=Gt.prototype).By=function(t,e){return t instanceof ja&&e instanceof ja&&t!==e?t.layer<e.layer?-1:t.layer>e.layer?1:t.cd<e.cd?-1:t.cd>e.cd?1:t.sc<e.sc?-1:t.sc>e.sc?1:0:0},D.Ay=function(t,e){return t instanceof ja&&e instanceof ja&&t!==e?t.first<e.first?-1:t.first>e.first||t.j<e.j?1:t.j>e.j||t.cd<e.cd?-1:t.cd>e.cd?1:t.sc<e.sc?-1:t.sc>e.sc?1:0:0},D.ct=function(t,e){return t instanceof ja&&e instanceof ja&&t!==e?t.Xb<e.Xb?-1:t.Xb>e.Xb||t.j<e.j?1:t.j>e.j||t.cd<e.cd?-1:t.cd>e.cd?1:t.sc<e.sc?-1:t.sc>e.sc?1:0:0},D.w=function(t,e){return-1<(t-=e)&&1>t},D.Wi=function(t,e,n,i){var a=t.length,u=i-n;if(!(1>=u))if((0>n||n>=a-1)&&z("not in range 0 <= from < length: "+n),2===u)0<e(i=t[n],a=t[n+1])&&(t[n]=a,t[n+1]=i);else if(0===n)if(i>=a)t.sort(e);else for((n=t.slice(0,i)).sort(e),e=0;e<i;e++)t[e]=n[e];else if(i>=a)for((i=t.slice(n)).sort(e),e=n;e<a;e++)t[e]=i[e-n];else for((a=t.slice(n,i)).sort(e),e=n;e<i;e++)t[e]=a[e-n]},Dt.Object.defineProperties(Gt.prototype,{layerSpacing:{get:function(){return this.Zd},set:function(t){this.Zd!==t&&0<=t&&(this.Zd=t,this.B())}},columnSpacing:{get:function(){return this.Yb},set:function(t){this.Yb!==t&&0<t&&(this.Yb=t,this.B())}},direction:{get:function(){return this.K},set:function(t){this.K!==t&&(0===t||90===t||180===t||270===t?(this.K=t,this.B()):z("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))}},cycleRemoveOption:{get:function(){return this.Uk},set:function(t){this.Uk===t||t!==s0&&t!==mm&&t!==Uf||(this.Uk=t,this.B())}},layeringOption:{get:function(){return this.sl},set:function(t){this.sl===t||t!==ym&&t!==Hf&&t!==_h||(this.sl=t,this.B())}},initializeOption:{get:function(){return this.il},set:function(t){this.il===t||t!==vm&&t!==xm&&t!==a0||(this.il=t,this.B())}},iterations:{get:function(){return this.Cj},set:function(t){this.Cj!==t&&0<=t&&(this.Cj=t,this.B())}},aggressiveOption:{get:function(){return this.Fk},set:function(t){this.Fk===t||t!==wm&&t!==Gf&&t!==Jc||(this.Fk=t,this.B())}},packOption:{get:function(){return this.Wf},set:function(t){this.Wf!==t&&0<=t&&8>t&&(this.Wf=t,this.B())}},setsPortSpots:{get:function(){return this.df},set:function(t){this.df!==t&&(this.df=t,this.B())}},linkSpacing:{get:function(){return this.vo},set:function(t){this.vo!==t&&0<=t&&(this.vo=t,this.B())}},maxLayer:{get:function(){return this.ra}},maxIndex:{get:function(){return this.ji}},maxColumn:{get:function(){return this.Ca}},minIndexLayer:{get:function(){return this.Qg}},maxIndexLayer:{get:function(){return this.pc}}});var mm=new J(Gt,"CycleDepthFirst",0),s0=new J(Gt,"CycleGreedy",1),Uf=new J(Gt,"CycleFromLayers",2),ym=new J(Gt,"LayerOptimalLinkLength",0),Hf=new J(Gt,"LayerLongestPathSink",1),_h=new J(Gt,"LayerLongestPathSource",2),vm=new J(Gt,"InitDepthFirstOut",0),xm=new J(Gt,"InitDepthFirstIn",1),a0=new J(Gt,"InitNaive",2),wm=new J(Gt,"AggressiveNone",0),Gf=new J(Gt,"AggressiveLess",1),Jc=new J(Gt,"AggressiveMore",2),C_=8;function ja(){this.index=this.sc=this.cd=this.Xb=this.first=this.layer=0,this.link=null,this.j=0}function Le(t){te.call(this,t)}function pl(t){Be.call(this,t),this.Qa=this.wg=this.ei=-1,this.C=NaN,this.M=null,this.valid=!1,this.finish=this.jg=NaN,this.qf=0,this.uk=this.vk=null}function gl(t){Yn.call(this,t),this.j=this.Ha=this.Wa=!1,this.Ga=this.C=NaN,this.M=this.o=0}function Tt(t){Rt.call(this),this.Jb=new K,this.Yo=Yf,this.jd=Uo,this.Qp=Em,this.Gr=e1,this.Aw=[],this.gd=!0,this.Gb=Sh,this.Nd=new mt(10,10).freeze();var e=new Eh(this);this.V=new Ar(e),this.W=new Ar(e),this.Qu=[],t&&Object.assign(this,t)}function Ww(t){var e=new K;for(t=t.iterator;t.next();){var n=t.value;n.initialized||e.add(n)}return e}function l0(t,e){var n=999999,i=null;for(e=e.iterator;e.next();){var a=e.value;switch(t.jd){case Uo:a.sourceEdges.count<n&&(n=a.sourceEdges.count,i=a);break;case yu:a.destinationEdges.count<n&&(n=a.destinationEdges.count,i=a);break;default:z("Unhandled path value "+t.jd.toString())}}return i}function Mm(t,e){if(null!==e){switch(t.jd){case Uo:if(0<e.destinationEdges.count){for(var n=new et,i=e.destinationVertexes;i.next();){var a=i.value;u0(t,e,a)&&n.add(a)}0<n.count&&(e.children=n.xa())}break;case yu:if(0<e.sourceEdges.count){for(n=new et,i=e.sourceVertexes;i.next();)u0(t,e,a=i.value)&&n.add(a);0<n.count&&(e.children=n.xa())}break;default:z("Unhandled path value"+t.jd.toString())}for(i=(n=e.children).length,a=0;a<i;a++){var u=n[a];u.initialized=!0,u.level=e.level+1,u.parent=e,t.Jb.remove(u)}for(e=0;e<i;e++)Mm(t,n[e])}}function u0(t,e,n){if(n.initialized){if(null===e)var i=!1;else{for(i=e.parent;null!==i&&i!==n;)i=i.parent;i=i===n}if(i||n.level>e.level)return!1;t.removeChild(n.parent,n)}return!0}function h0(t,e){if(null!==e){t.initializeTreeVertexValues(e),e.alignment===Ho&&t.sortTreeVertexChildren(e);for(var n=0,i=e.childrenCount,a=0,u=e.children,h=u.length,d=0;d<h;d++){var f=u[d];h0(t,f),n+=f.descendantCount+1,i=Math.max(i,f.maxChildrenCount),a=Math.max(a,f.maxGenerationCount)}e.descendantCount=n,e.maxChildrenCount=i,e.maxGenerationCount=0<i?a+1:0}}function c0(t,e){if(null!==e){t.assignTreeVertexValues(e);for(var n=(e=e.children).length,i=0;i<n;i++)c0(t,e[i])}}function Zw(t,e){if(null!==e){e.alignment!==Ho&&t.sortTreeVertexChildren(e);for(var n=(e=e.children).length,i=0;i<n;i++)Zw(t,e[i])}}function ml(t){return t===vl||t===Ho||t===$s||t===Va}function zf(t){return t===vl||t===Ho}function d0(t){var e=t.parent;if(null!==e){var n=e.alignment;if(ml(n)){if(zf(n)){for(e=e.children,n=0;n<e.length&&t!==e[n];)n++;return n%2==0}if(n===$s)return!0}}return!1}function Jw(t,e){if(0===e.childrenCount){var n=!1,i=0;null!==e.parent&&(i=e.parent.angle,n=ml(n=e.parent.alignment));var a=d0(e);e.U.h(0,0),e.va.h(e.width,e.height),null===e.parent||null===e.comments||(180!==i&&270!==i||n)&&!a?e.fa.h(0,0):180===i&&!n||(90===i||270===i)&&a?e.fa.h(e.width-2*e.focus.x,0):e.fa.h(0,e.height-2*e.focus.y)}else{n=90===(i=Xr(e))||270===i;for(var u=0,h=(a=e.children).length,d=0;d<h;d++){var f=a[d];u=Math.max(u,n?f.va.width:f.va.height)}var g=e.alignment,m=g===Xs,y=g===jn;d=ml(g);var x=Math.max(0,e.breadthLimit);f=Dh(e);var _=e.nodeSpacing,M=zs(e),S=m||y?0:M/2,T=e.rowSpacing,k=0;(m||y||e.Bm||e.Cm&&1===e.maxGenerationCount)&&(k=Math.max(0,e.rowIndent)),m=e.width;var b=e.height,I=0,O=0,F=0,H=0,W=0,it=0,nt=0,tt=0,G=0;if(d&&!zf(g)&&135<i&&a.reverse(),zf(g))if(1<h)for(var Mt=0;Mt<h;Mt++){var gt=a[Mt],zt=gt.va;Mt%2==0&&Mt!==h-1&&(G=Math.max(G,(n?zt.width:zt.height)+yl(gt)-_))}else 1===h&&(G=n?a[0].va.width:a[0].va.height);if(d)switch(g){case vl:case Ho:G=(O=135>i?Qw(e,a,G,I,O):qw(e,a,G,I,O)).x,I=O.width,O=O.height;break;case $s:for(t=0;t<h;t++)S=(x=a[t]).va,F=0===nt?0:T,n?(x.U.h(u-S.width,W+F),I=Math.max(I,S.width),O=Math.max(O,W+F+S.height),W+=F+S.height):(x.U.h(H+F,u-S.height),I=Math.max(I,H+F+S.width),O=Math.max(O,S.height),H+=F+S.width),nt++;break;case Va:for(u=0;u<h;u++)x=(t=a[u]).va,S=0===nt?0:T,n?(t.U.h(_/2+e.focus.x,W+S),I=Math.max(I,x.width),O=Math.max(O,W+S+x.height),W+=S+x.height):(t.U.h(H+S,_/2+e.focus.y),I=Math.max(I,H+S+x.width),O=Math.max(O,x.height),H+=S+x.width),nt++}else for(Mt=0;Mt<h;Mt++){if(zt=(gt=a[Mt]).va,n){0<x&&0<nt&&H+_+zt.width>x&&(H<u&&mu(e,g,u-H,0,tt,Mt-1),it++,nt=0,tt=Mt,F=O,H=0,W=135<i?-O-T:O+T);var de=0===nt?S:_;Cm(t,gt,0,W),gt.U.h(H+de,W),I=Math.max(I,H+de+zt.width),O=Math.max(O,F+(0===it?0:T)+zt.height),H+=de+zt.width}else 0<x&&0<nt&&W+_+zt.height>x&&(W<u&&mu(e,g,0,u-W,tt,Mt-1),it++,nt=0,tt=Mt,F=I,W=0,H=135<i?-I-T:I+T),de=0===nt?S:_,Cm(t,gt,H,0),gt.U.h(H,W+de),O=Math.max(O,W+de+zt.height),I=Math.max(I,F+(0===it?0:T)+zt.width),W+=de+zt.height;nt++}switch(0<it&&(n?(O+=Math.max(0,f),H<I&&mu(e,g,I-H,0,tt,h-1),0<k&&(y||Ch(e,k,0,0,h-1),I+=k)):(I+=Math.max(0,f),W<O&&mu(e,g,0,O-W,tt,h-1),0<k&&(y||Ch(e,0,k,0,h-1),O+=k))),k=y=0,g){case qc:n?y+=I/2-e.focus.x-M/2:k+=O/2-e.focus.y-M/2;break;case fs:0<it?n?y+=I/2-e.focus.x-M/2:k+=O/2-e.focus.y-M/2:n?y+=(g=a[0].U.x+a[0].fa.x)+(a[h-1].U.x+a[h-1].fa.x+2*a[h-1].focus.x-g)/2-e.focus.x-M/2:k+=(g=a[0].U.y+a[0].fa.y)+(a[h-1].U.y+a[h-1].fa.y+2*a[h-1].focus.y-g)/2-e.focus.y-M/2;break;case Xs:n?(y-=M,I+=M):(k-=M,O+=M);break;case jn:n?(y+=I-e.width+M,I+=M):(k+=O-e.height+M,O+=M);break;case vl:case Ho:n?y+=1<h?G+_/2-e.focus.x:a[0].focus.x-e.focus.x+a[0].fa.x:k+=1<h?G+_/2-e.focus.y:a[0].focus.y-e.focus.y+a[0].fa.y;break;case $s:n?y+=I+_/2-e.focus.x:k+=O+_/2-e.focus.y;break;case Va:break;default:z("Unhandled alignment value "+g.toString())}for(M=0;M<h;M++)g=a[M],n?g.U.h(g.U.x+g.fa.x-y,g.U.y+(135<i?(d?-O:-g.va.height)+g.fa.y-f:b+f+g.fa.y)):g.U.h(g.U.x+(135<i?(d?-I:-g.va.width)+g.fa.x-f:m+f+g.fa.x),g.U.y+g.fa.y-k);n?(I=f0(e,I,y),0>y&&(y=0),135<i&&(k+=O+f),O=Math.max(Math.max(O,b),O+b+f)):(135<i&&(y+=I+f),I=Math.max(Math.max(I,m),I+m+f),O=p0(e,O,k),0>k&&(k=0)),e.fa.h(y,k),e.va.h(I,O)}}function Qw(t,e,n,i,a){var u=e.length;if(0===u)return new B(n,0,i,a);if(1===u)return new B(n,0,i=(t=e[0]).va.width,a=t.va.height);for(var h=t.nodeSpacing,d=t.rowSpacing,f=90===Xr(t),g=0,m=0,y=0,x=0;x<u;x++)if(!(x%2!=0||1<u&&x===u-1)){var _=e[x],M=_.va,S=0===g?0:d;if(f){var T=yl(_)-h;_.U.h(n-(M.width+T),y+S),i=Math.max(i,M.width+T),a=Math.max(a,y+S+M.height),y+=S+M.height}else T=yl(_)-h,_.U.h(m+S,n-(M.height+T)),a=Math.max(a,M.height+T),i=Math.max(i,m+S+M.width),m+=S+M.width;g++}for(g=0,_=m,x=y,f?(m=n+h,y=0):(m=0,y=n+h),M=0;M<u;M++)if(M%2!=0){T=(S=e[M]).va;var k=0===g?0:d;if(f){var b=yl(S)-h;S.U.h(m+b,y+k),i=Math.max(i,m+T.width+b),a=Math.max(a,y+k+T.height),y+=k+T.height}else b=yl(S)-h,S.U.h(m+k,y+b),i=Math.max(i,m+k+T.width),a=Math.max(a,y+T.height+b),m+=k+T.width;g++}return 1<u&&u%2==1&&(u=(e=e[u-1]).va,d=null===e.parent?0:e.parent.rowSpacing,f?(e.U.h(n+h/2-e.focus.x-e.fa.x,a+d),f=n+h/2-e.focus.x-e.fa.x,i=Math.max(i,f+u.width),0>f&&(i-=f),a=Math.max(a,Math.max(x,y)+d+u.height),0>e.U.x&&(n=_m(t,e.U.x,!1,n,h))):(e.U.h(i+d,n+h/2-e.focus.y-e.fa.y),i=Math.max(i,Math.max(_,m)+d+u.width),y=n+h/2-e.focus.y-e.fa.y,a=Math.max(a,y+u.height),0>y&&(a-=y),0>e.U.y&&(n=_m(t,e.U.y,!0,n,h)))),new B(n,0,i,a)}function qw(t,e,n,i,a){var u=e.length;if(0===u)return new B(n,0,i,a);if(1===u)return new B(n,0,i=(e=e[0]).va.width,a=e.va.height);for(var h=t.nodeSpacing,d=t.rowSpacing,f=270===Xr(t),g=0,m=0,y=0,x=0;x<u;x++)if(!(x%2!=0||1<u&&x===u-1)){var _=e[x],M=_.va,S=0===g?0:d;if(f){var T=yl(_)-h;_.U.h(n-(M.width+T),y-=S+M.height),i=Math.max(i,M.width+T),a=Math.max(a,Math.abs(y))}else T=yl(_)-h,_.U.h(m-=S+M.width,n-(M.height+T)),a=Math.max(a,M.height+T),i=Math.max(i,Math.abs(m));g++}for(g=0,_=m,x=y,f?(m=n+h,y=0):(m=0,y=n+h),M=0;M<u;M++)if(M%2!=0){T=(S=e[M]).va;var k=0===g?0:d;if(f){var b=yl(S)-h;S.U.h(m+b,y-=k+T.height),i=Math.max(i,m+T.width+b),a=Math.max(a,Math.abs(y))}else b=yl(S)-h,S.U.h(m-=k+T.width,y+b),a=Math.max(a,y+T.height+b),i=Math.max(i,Math.abs(m));g++}for(1<u&&u%2==1&&(g=(d=e[u-1]).va,M=null===d.parent?0:d.parent.rowSpacing,f?(d.U.h(n+h/2-d.focus.x-d.fa.x,-a-g.height-M),m=n+h/2-d.focus.x-d.fa.x,i=Math.max(i,m+g.width),0>m&&(i-=m),a=Math.max(a,Math.abs(Math.min(x,y))+M+g.height),0>d.U.x&&(n=_m(t,d.U.x,!1,n,h))):(d.U.h(-i-g.width-M,n+h/2-d.focus.y-d.fa.y),i=Math.max(i,Math.abs(Math.min(_,m))+M+g.width),y=n+h/2-d.focus.y-d.fa.y,a=Math.max(a,y+g.height),0>y&&(a-=y),0>d.U.y&&(n=_m(t,d.U.y,!0,n,h)))),t=0;t<u;t++)h=e[t],f?h.U.h(h.U.x,h.U.y+a):h.U.h(h.U.x+i,h.U.y);return new B(n,0,i,a)}function yl(t){return null===t.parent?0:t.parent.nodeSpacing}function _m(t,e,n,i,a){for(var u=(t=t.children).length,h=0;h<u;h++)n?t[h].U.h(t[h].U.x,t[h].U.y-e):t[h].U.h(t[h].U.x-e,t[h].U.y);return e=t[u-1],Math.max(i,n?e.fa.y+e.focus.y-a/2:e.fa.x+e.focus.x-a/2)}function f0(t,e,n){switch(t.alignment){case fs:case qc:return n+t.width>e&&(e=n+t.width),0>n&&(e-=n),e;case Xs:return t.width>e?t.width:e;case jn:return 2*t.focus.x>e?t.width:e+t.width-2*t.focus.x;case vl:case Ho:return Math.max(t.width,Math.max(e,n+t.width)-Math.min(0,n));case $s:return t.width-t.focus.x+t.nodeSpacing/2+e;case Va:return Math.max(t.width,t.focus.x+t.nodeSpacing/2+e);default:return e}}function p0(t,e,n){switch(t.alignment){case fs:case qc:return n+t.height>e&&(e=n+t.height),0>n&&(e-=n),e;case Xs:return t.height>e?t.height:e;case jn:return 2*t.focus.y>e?t.height:e+t.height-2*t.focus.y;case vl:case Ho:return Math.max(t.height,Math.max(e,n+t.height)-Math.min(0,n));case $s:return t.height-t.focus.y+t.nodeSpacing/2+e;case Va:return Math.max(t.height,t.focus.y+t.nodeSpacing/2+e);default:return e}}function g0(t,e,n){switch(t){case qc:case fs:e/=2,n/=2;break;case Xs:n=e=0;break;case jn:break;default:z("Unhandled alignment value "+t.toString())}return new N(e,n)}function mu(t,e,n,i,a,u){Ch(t,(e=g0(e,n,i)).x,e.y,a,u)}function Ch(t,e,n,i,a){if(0!==e||0!==n)for(t=t.children;i<=a;i++){var u=t[i].U;u.x+=e,u.y+=n}}function Cm(t,e,n,i){var a=e.parent;switch(t.jd){case Uo:for(t=e.sourceEdges;t.next();)(e=t.value).fromVertex===a&&e.relativePoint.h(n,i);break;case yu:for(t=e.destinationEdges;t.next();)(e=t.value).toVertex===a&&e.relativePoint.h(n,i);break;default:z("Unhandled path value "+t.jd.toString())}}function Dm(t,e,n){for(var i=0;i<t.length;i++){var a=t[i];a.x+=e,a.y+=n}}function t1(t,e,n,i,a,u,h,d){var f=Xr(e),g=90===f||270===f,m=e.nodeSpacing;e=i;var y=a;i=u;var x=h,_=n.sq,M=n.Eq;h=n.va;var S=g?Math.max(x,h.height):Math.max(i,h.width);if((null===_||f!==Xr(n))&&(_=Bi(t,2),M=Bi(t,2),g?(_[0].h(0,0),_[1].h(0,h.height),M[0].h(h.width,0),M[1].h(M[0].x,_[1].y)):(_[0].h(0,0),_[1].h(h.width,0),M[0].h(0,h.height),M[1].h(_[1].x,M[0].y))),g){if(x=9999999,!(null===y||2>y.length||null===_||2>_.length))for(a=n=0;n<y.length&&a<_.length;){var T=_[a];f=T.x,g=T.y,f+=i;var k=u=y[n];n+1<y.length&&(k=y[n+1]);var b=T;T=b.x,b=b.y,a+1<_.length&&(T=(b=_[a+1]).x,b=b.y,T+=i);var I=x;u.y===g?I=f-u.x:u.y>g&&u.y<b?I=f+(u.y-g)/(b-g)*(T-f)-u.x:g>u.y&&g<k.y&&(I=f-(u.x+(g-u.y)/(k.y-u.y)*(k.x-u.x))),I<x&&(x=I),k.y<=u.y?n++:b<=g?a++:(k.y<=b&&n++,b<=k.y&&a++)}if(x=i-x,n=_,a=x+=m,null===e||2>e.length||null===n||2>n.length)i=null;else{for(m=Bi(t,e.length+n.length),i=u=f=0;u<n.length&&n[u].y<e[0].y;)g=n[u++],m[i++].h(g.x+a,g.y);for(;f<e.length;)g=e[f++],m[i++].h(g.x,g.y);for(f=e[e.length-1].y;u<n.length&&n[u].y<=f;)u++;for(;u<n.length&&n[u].y>f;)g=n[u++],m[i++].h(g.x+a,g.y);for(n=Bi(t,i),f=0;f<i;f++)n[f].assign(m[f]);so(t,m),i=n}if(u=M,f=x,null===y||2>y.length||null===u||2>u.length)a=null;else{for(m=Bi(t,y.length+u.length),a=g=n=0;n<y.length&&y[n].y<u[0].y;)k=y[n++],m[a++].h(k.x,k.y);for(;g<u.length;)k=u[g++],m[a++].h(k.x+f,k.y);for(u=u[u.length-1].y;n<y.length&&y[n].y<=u;)n++;for(;n<y.length&&y[n].y>u;)f=y[n++],m[a++].h(f.x,f.y);for(u=Bi(t,a),n=0;n<a;n++)u[n].assign(m[n]);so(t,m),a=u}return u=Math.max(0,x)+h.width,h=S,so(t,e),so(t,_),so(t,y),so(t,M),d[0]=i,d[1]=a,new B(x,0,u,h)}if(i=9999999,!(null===y||2>y.length||null===_||2>_.length))for(a=n=0;n<y.length&&a<_.length;)f=(T=_[a]).x,g=T.y,g+=x,k=u=y[n],n+1<y.length&&(k=y[n+1]),T=(b=T).x,b=b.y,a+1<_.length&&(T=(b=_[a+1]).x,b=b.y,b+=x),I=i,u.x===f?I=g-u.y:u.x>f&&u.x<T?I=g+(u.x-f)/(T-f)*(b-g)-u.y:f>u.x&&f<k.x&&(I=g-(u.y+(f-u.x)/(k.x-u.x)*(k.y-u.y))),I<i&&(i=I),k.x<=u.x?n++:T<=f?a++:(k.x<=T&&n++,T<=k.x&&a++);if(x-=i,n=_,a=x+=m,null===e||2>e.length||null===n||2>n.length)i=null;else{for(m=Bi(t,e.length+n.length),i=u=f=0;u<n.length&&n[u].x<e[0].x;)g=n[u++],m[i++].h(g.x,g.y+a);for(;f<e.length;)g=e[f++],m[i++].h(g.x,g.y);for(f=e[e.length-1].x;u<n.length&&n[u].x<=f;)u++;for(;u<n.length&&n[u].x>f;)g=n[u++],m[i++].h(g.x,g.y+a);for(n=Bi(t,i),f=0;f<i;f++)n[f].assign(m[f]);so(t,m),i=n}if(u=M,f=x,null===y||2>y.length||null===u||2>u.length)a=null;else{for(m=Bi(t,y.length+u.length),a=g=n=0;n<y.length&&y[n].x<u[0].x;)k=y[n++],m[a++].h(k.x,k.y);for(;g<u.length;)k=u[g++],m[a++].h(k.x,k.y+f);for(u=u[u.length-1].x;n<y.length&&y[n].x<=u;)n++;for(;n<y.length&&y[n].x>u;)f=y[n++],m[a++].h(f.x,f.y);for(u=Bi(t,a),n=0;n<a;n++)u[n].assign(m[n]);so(t,m),a=u}return u=S,h=Math.max(0,x)+h.height,so(t,e),so(t,_),so(t,y),so(t,M),d[0]=i,d[1]=a,new B(x,0,u,h)}function Bi(t,e){if(void 0!==(t=t.Qu[e])&&void 0!==(t=t.pop()))return t;t=[];for(var n=0;n<e;n++)t[n]=new N;return t}function so(t,e){var n=e.length,i=t.Qu[n];void 0===i&&(t.Qu[n]=i=[]),i.push(e)}function Sm(t,e,n,i){if(null!==e){e.x=n,e.y=i;for(var a=(e=e.children).length,u=0;u<a;u++){var h=e[u];Sm(t,h,n+h.U.x,i+h.U.y)}}}function m0(t,e){if(null!==e){t.setPortSpots(e);for(var n=(e=e.children).length,i=0;i<n;i++)m0(t,e[i])}}function Xr(t){return 45>=(t=t.angle)?0:135>=t?90:225>=t?180:315>=t?270:0}function Dh(t){var e=Xr(t);e=90===e||270===e;var n=t.layerSpacing;if(0<t.layerSpacingParentOverlap){var i=Math.min(1,t.layerSpacingParentOverlap);n-=e?t.height*i:t.width*i}return n<(e?-t.height:-t.width)&&(n=e?-t.height:-t.width),n}function zs(t){var e=Xr(t),n=t.nodeIndent;if(0<t.nodeIndentPastParent){var i=Math.min(1,t.nodeIndentPastParent);n+=90===e||270===e?t.width*i:t.height*i}return Math.max(0,n)}Gt.className="LayeredDigraphLayout",Gt.CycleDepthFirst=mm,Gt.CycleGreedy=s0,Gt.CycleFromLayers=Uf,Gt.LayerOptimalLinkLength=ym,Gt.LayerLongestPathSink=Hf,Gt.LayerLongestPathSource=_h,Gt.InitDepthFirstOut=vm,Gt.InitDepthFirstIn=xm,Gt.InitNaive=a0,Gt.AggressiveNone=wm,Gt.AggressiveLess=Gf,Gt.AggressiveMore=Jc,Gt.PackNone=0,Gt.PackExpand=1,Gt.PackStraighten=2,Gt.PackMedian=4,Gt.PackAll=15,ja.className="SegInfo",Ft(Le,te),Le.prototype.createVertex=function(){return new pl(this)},Le.prototype.createEdge=function(){return new gl(this)},Le.className="LayeredDigraphNetwork",Ft(pl,Be),pl.prototype.serializeVertexProperties=function(t,e){Be.prototype.serializeVertexProperties.call(this,t,e),t.layer=this.layer,t.column=this.column,t.index=this.index,t.component=this.component,t.near=this.near?Jt(this.near):null,t.valid=this.valid,t.jg=this.jg,t.finish=this.finish,t.qf=this.qf,t.vk=this.vk,t.uk=this.uk},pl.prototype.deserializeVertexProperties=function(t,e,n,i){Be.prototype.deserializeVertexProperties.call(this,t,e,n,i),this.layer=t.layer,this.column=t.column,this.index=t.index,this.component=t.component,(e=e.get(t.near))&&(this.near=e),this.valid=t.valid,this.jg=t.jg,this.finish=t.finish,this.qf=t.qf,this.vk=t.vk,this.uk=t.uk},Dt.Object.defineProperties(pl.prototype,{layer:{get:function(){return this.ei},set:function(t){this.ei!==t&&(this.ei=t)}},column:{get:function(){return this.wg},set:function(t){this.wg!==t&&(this.wg=t)}},index:{get:function(){return this.Qa},set:function(t){this.Qa!==t&&(this.Qa=t)}},component:{get:function(){return this.C},set:function(t){this.C!==t&&(this.C=t)}},near:{get:function(){return this.M},set:function(t){this.M!==t&&(this.M=t)}}}),pl.className="LayeredDigraphVertex",Ft(gl,Yn),gl.prototype.serializeEdgeProperties=function(t,e){Yn.prototype.serializeEdgeProperties.call(this,t,e),t.valid=this.valid,t.rev=this.rev,t.forest=this.forest,t.portFromPos=this.portFromPos,t.portToPos=this.portToPos,t.portFromColOffset=this.portFromColOffset,t.portToColOffset=this.portToColOffset},gl.prototype.deserializeEdgeProperties=function(t,e,n,i){Yn.prototype.deserializeEdgeProperties.call(this,t,e,n,i),this.valid=t.valid,this.rev=t.rev,this.forest=t.forest,this.portFromPos=t.portFromPos,this.portToPos=t.portToPos,this.portFromColOffset=t.portFromColOffset,this.portToColOffset=t.portToColOffset},Dt.Object.defineProperties(gl.prototype,{fromVertex:{get:function(){return this.Tc},set:function(t){this.Tc!==t&&(this.Tc=t)}},toVertex:{get:function(){return this.ad},set:function(t){this.ad!==t&&(this.ad=t)}},valid:{get:function(){return this.Wa},set:function(t){this.Wa!==t&&(this.Wa=t)}},rev:{get:function(){return this.Ha},set:function(t){this.Ha!==t&&(this.Ha=t)}},forest:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}},portFromPos:{get:function(){return this.C},set:function(t){this.C!==t&&(this.C=t)}},portToPos:{get:function(){return this.Ga},set:function(t){this.Ga!==t&&(this.Ga=t)}},portFromColOffset:{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t)}},portToColOffset:{get:function(){return this.M},set:function(t){this.M!==t&&(this.M=t)}}}),gl.className="LayeredDigraphEdge",Ft(Tt,Rt),Tt.prototype.cloneProtected=function(t){Rt.prototype.cloneProtected.call(this,t),t.Yo=this.Yo,t.Qp=this.Qp,t.Gr=this.Gr,t.gd=this.gd,t.Gb=this.Gb,t.Nd.assign(this.Nd),t.V.copyInheritedPropertiesFrom(this.V),t.W.copyInheritedPropertiesFrom(this.W)},Tt.prototype.gb=function(t){t.classType===Tt?0===t.name.indexOf("Alignment")?this.alignment=t:0===t.name.indexOf("Arrangement")?this.arrangement=t:0===t.name.indexOf("Compaction")?this.compaction=t:0===t.name.indexOf("Path")?this.path=t:0===t.name.indexOf("Sorting")?this.sorting=t:0===t.name.indexOf("Style")?this.treeStyle=t:z("Unknown enum value: "+t):Rt.prototype.gb.call(this,t)},Tt.prototype.createNetwork=function(){return new Eh(this)},Tt.prototype.makeNetwork=function(t){function e(i){if(i instanceof Q)return!i.isLinkLabel&&"Comment"!==i.category;if(i instanceof X){var a=i.fromNode;return null!==a&&!a.isLinkLabel&&"Comment"!==a.category&&!(null===(i=i.toNode)||i.isLinkLabel||"Comment"===i.category)}return!1}var n=this.createNetwork();return t instanceof j?(n.hg(t.nodes,!0,e),n.hg(t.links,!0,e)):n.hg(t instanceof vt?t.memberParts:t.iterator,!1,e),n},Tt.prototype.doLayout=function(t){null===this.network&&(this.network=this.makeNetwork(t)),this.arrangement!==Xn&&(this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin));var e=this.diagram;if(null===e&&t instanceof j&&(e=t),this.jd=this.path===Yf&&null!==e?e.isTreePathToChildren?Uo:yu:this.path===Yf?Uo:this.path,0<this.network.vertexes.count){for(this.network.fq(),t=this.network.vertexes.iterator;t.next();)(e=t.value).initialized=!1,e.level=0,e.parent=null,e.children=[];if(0<this.Jb.count){for(t=new K,e=this.Jb.iterator;e.next();){var n=e.value;n instanceof Q?null!==(n=this.network.Ki(n))&&t.add(n):n instanceof Ar&&t.add(n)}this.Jb=t}for(0===this.Jb.count&&this.findRoots(),t=this.Jb.copy().iterator;t.next();)(e=t.value).initialized||(e.initialized=!0,Mm(this,e));for(e=this.network.vertexes,t=null;0<(t=Ww(e)).count;)null!==(e=l0(this,t))&&this.Jb.add(e),e.initialized=!0,Mm(this,e),e=t;for(t=this.Jb.iterator;t.next();)(e=t.value)instanceof Ar&&h0(this,e);for(t=this.Jb.iterator;t.next();)(e=t.value)instanceof Ar&&c0(this,e);for(t=this.Jb.iterator;t.next();)(e=t.value)instanceof Ar&&Zw(this,e);if(this.cv(),this.layerStyle===km){for(t=[],e=this.network.vertexes.iterator;e.next();){var i=(n=e.value).parent;null===i&&(i=n),i=0===i.angle||180===i.angle;var a=t[n.level];void 0===a&&(a=0),t[n.level]=Math.max(a,i?n.width:n.height)}for(e=0;e<t.length;e++)void 0===t[e]&&(t[e]=0);for(this.Aw=t,e=this.network.vertexes.iterator;e.next();)null===(i=(n=e.value).parent)&&(i=n),0===i.angle||180===i.angle?(180===i.angle&&(n.focusX+=t[n.level]-n.width),n.width=t[n.level]):(270===i.angle&&(n.focusY+=t[n.level]-n.height),n.height=t[n.level])}else if(this.layerStyle===Tm)for(t=this.network.vertexes.iterator;t.next();){for(n=0===(e=t.value).angle||180===e.angle,i=-1,a=0;a<e.children.length;a++){var u=e.children[a];i=Math.max(i,n?u.width:u.height)}if(0<=i)for(a=0;a<e.children.length;a++)u=e.children[a],n?(180===e.angle&&(u.focusX+=i-u.width),u.width=i):(270===e.angle&&(u.focusY+=i-u.height),u.height=i)}for(t=this.Jb.iterator;t.next();)(e=t.value)instanceof Ar&&this.layoutTree(e);this.arrangeTrees(),this.updateParts()}this.network=null,this.Jb=new K,this.isValidLayout=!0},Tt.prototype.findRoots=function(){for(var t=this.network.vertexes,e=t.iterator;e.next();){var n=e.value;switch(this.jd){case Uo:0===n.sourceEdges.count&&this.Jb.add(n);break;case yu:0===n.destinationEdges.count&&this.Jb.add(n);break;default:z("Unhandled path value "+this.jd.toString())}}0===this.Jb.count&&null!==(t=l0(this,t))&&this.Jb.add(t)},Tt.prototype.removeChild=function(t,e){if(null!==t&&null!==e){for(var n=t.children,i=0,a=0;a<n.length;a++)n[a]===e&&i++;if(0<i){i=Array(n.length-i);for(var u=a=0;u<n.length;u++)n[u]!==e&&(i[a++]=n[u]);t.children=i}}},Tt.prototype.initializeTreeVertexValues=function(t){if(t.copyInheritedPropertiesFrom(function Kw(t,e){switch(t.Qp){default:case Em:return null!==e.parent?e.parent:t.V;case v0:return null===e.parent?t.V:null===e.parent.parent?t.W:e.parent;case td:return null!==e.parent?null!==e.parent.parent?e.parent.parent:t.W:t.V;case y0:var n=!0;if(0===e.childrenCount)n=!1;else for(var i=e.children,a=i.length,u=0;u<a;u++)if(0<i[u].childrenCount){n=!1;break}return n&&null!==e.parent?t.W:null!==e.parent?e.parent:t.V}}(this,t)),null!==t.parent&&t.parent.alignment===Ho){for(var e=t.angle,n=t.parent.children,i=0;i<n.length&&t!==n[i];)i++;i%2==0?i!==n.length-1&&(e=90===e?180:180===e?270:270===e?180:270):e=90===e?0:180===e?90:270===e?0:90,t.angle=e}t.initialized=!0},Tt.prototype.assignTreeVertexValues=function(){},Tt.prototype.sortTreeVertexChildren=function(t){switch(t.sorting){case vu:break;case Qc:t.children.reverse();break;case Ys:t.children.sort(t.comparer);break;case Xf:t.children.sort(t.comparer),t.children.reverse();break;default:z("Unhandled sorting value "+t.sorting.toString())}},Tt.prototype.cv=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},Tt.prototype.addComments=function(t){var e=t.angle,n=t.parent,i=0,a=!1;null!==n&&(i=n.angle,a=ml(a=n.alignment)),e=90===e||270===e,i=90===i||270===i,n=0===t.childrenCount;var u=0,h=0,d=0,f=t.commentSpacing;if(null!==t.node)for(var g=t.node.pv();g.next();){var m=g.value;"Comment"===m.category&&m.canLayout()&&(null===t.comments&&(t.comments=[]),t.comments.push(m),m.Sa(),m=m.measuredBounds,e&&!n||!a&&!i&&n||a&&i&&n?(u=Math.max(u,m.width),h+=m.height+Math.abs(d)):(u+=m.width+Math.abs(d),h=Math.max(h,m.height)),d=f)}null!==t.comments&&(e&&!n||!a&&!i&&n||a&&i&&n?(u+=Math.abs(t.commentMargin),h=Math.max(0,h-t.height)):(h+=Math.abs(t.commentMargin),u=Math.max(0,u-t.width)),a=B.allocAt(0,0,t.bounds.width+u,t.bounds.height+h),t.bounds=a,B.free(a))},Tt.prototype.layoutComments=function(t){if(null!==t.comments){var e=t.node.measuredBounds,n=t.parent,i=t.angle,a=0,u=!1;null!==n&&(a=n.angle,u=ml(u=n.alignment)),i=90===i||270===i,n=90===a||270===a;for(var h=0===t.childrenCount,d=d0(t),f=0,g=t.comments,m=g.length,y=N.alloc(),x=0;x<m;x++){var _=g[x],M=_.measuredBounds;if(i&&!h||!u&&!n&&h||u&&n&&h){if(135<a&&!u||n&&d)if(0<=t.commentMargin)for(y.h(t.bounds.x-t.commentMargin-M.width,t.bounds.y+f),_.move(y),_=_.Dd();_.next();){var S=_.value;S.fromSpot=jr,S.toSpot=Ki}else for(y.h(t.bounds.x+2*t.focus.x-t.commentMargin,t.bounds.y+f),_.move(y),_=_.Dd();_.next();)(S=_.value).fromSpot=Ki,S.toSpot=jr;else if(0<=t.commentMargin)for(y.h(t.bounds.x+2*t.focus.x+t.commentMargin,t.bounds.y+f),_.move(y),_=_.Dd();_.next();)(S=_.value).fromSpot=Ki,S.toSpot=jr;else for(y.h(t.bounds.x+t.commentMargin-M.width,t.bounds.y+f),_.move(y),_=_.Dd();_.next();)(S=_.value).fromSpot=jr,S.toSpot=Ki;f=0<=t.commentSpacing?f+(M.height+t.commentSpacing):f+(t.commentSpacing-M.height)}else{if(135<a&&!u||!n&&d)if(0<=t.commentMargin)for(y.h(t.bounds.x+f,t.bounds.y-t.commentMargin-M.height),_.move(y),_=_.Dd();_.next();)(S=_.value).fromSpot=Cr,S.toSpot=Dr;else for(y.h(t.bounds.x+f,t.bounds.y+2*t.focus.y-t.commentMargin),_.move(y),_=_.Dd();_.next();)(S=_.value).fromSpot=Dr,S.toSpot=Cr;else if(0<=t.commentMargin)for(y.h(t.bounds.x+f,t.bounds.y+2*t.focus.y+t.commentMargin),_.move(y),_=_.Dd();_.next();)(S=_.value).fromSpot=Dr,S.toSpot=Cr;else for(y.h(t.bounds.x+f,t.bounds.y+t.commentMargin-M.height),_.move(y),_=_.Dd();_.next();)(S=_.value).fromSpot=Cr,S.toSpot=Dr;f=0<=t.commentSpacing?f+(M.width+t.commentSpacing):f+(t.commentSpacing-M.width)}}if(N.free(y),e=f-t.commentSpacing-(i?e.height:e.width),this.jd===Uo)for(t=t.destinationEdges;t.next();)null===(a=t.value.link)||a.isAvoiding||(a.fromEndSegmentLength=0<e?e:NaN);else for(t=t.sourceEdges;t.next();)null===(a=t.value.link)||a.isAvoiding||(a.toEndSegmentLength=0<e?e:NaN)}},Tt.prototype.layoutTree=function(t){if(null!==t){for(var e=t.children,n=e.length,i=0;i<n;i++)this.layoutTree(e[i]);switch(t.compaction){case It:Jw(this,t);break;case $f:if(t.alignment===Ho)Jw(this,t);else if(0===t.childrenCount)n=!1,e=0,null!==(i=t.parent)&&(e=i.angle,n=ml(n=i.alignment)),i=d0(t),t.U.h(0,0),t.va.h(t.width,t.height),null===t.parent||null===t.comments||(180!==e&&270!==e||n)&&!i?t.fa.h(0,0):180===e&&!n||(90===e||270===e)&&i?t.fa.h(t.width-2*t.focus.x,0):t.fa.h(0,t.height-2*t.focus.y),t.sq=null,t.Eq=null;else{var a=Xr(t);e=90===a||270===a;var u=0,h=t.children,d=h.length;for(n=0;n<d;n++)i=h[n],u=Math.max(u,e?i.va.width:i.va.height);var f=t.alignment,g=f===jn,m=ml(f),y=Math.max(0,t.breadthLimit);n=Dh(t);var x=t.nodeSpacing,_=zs(t),M=t.rowSpacing,S=0;(f===Xs||g||t.Bm||t.Cm&&1===t.maxGenerationCount)&&(S=Math.max(0,t.rowIndent)),i=t.width;var T=t.height,k=0,b=0,I=0,O=null,F=null,H=0,W=0,it=0,nt=0,tt=0,G=0,Mt=0,gt=0;if(m&&!zf(f)&&135<a&&h.reverse(),zf(f))if(1<d)for(var zt=0;zt<d;zt++)zt%2==0&&zt!==d-1&&(gt=Math.max(gt,e?h[zt].va.width:h[zt].va.height));else 1===d&&(gt=e?h[0].va.width:h[0].va.height);if(m){switch(f){case vl:gt=(b=135>a?Qw(t,h,gt,k,b):qw(t,h,gt,k,b)).x,k=b.width,b=b.height;break;case $s:for(O=0;O<d;O++)y=(F=h[O]).va,I=0===G?0:M,e?(F.U.h(u-y.width,nt+I),k=Math.max(k,y.width),b=Math.max(b,nt+I+y.height),nt+=I+y.height):(F.U.h(it+I,u-y.height),k=Math.max(k,it+I+y.width),b=Math.max(b,y.height),it+=I+y.width),G++;break;case Va:for(O=0;O<d;O++)u=(F=h[O]).va,y=0===G?0:M,e?(F.U.h(x/2+t.focus.x,nt+y),k=Math.max(k,u.width),b=Math.max(b,nt+y+u.height),nt+=y+u.height):(F.U.h(it+y,x/2+t.focus.y),k=Math.max(k,it+y+u.width),b=Math.max(b,u.height),it+=y+u.width),G++}O=Bi(this,2),F=Bi(this,2),e?(O[0].h(0,0),O[1].h(0,b),F[0].h(k,0)):(O[0].h(0,0),O[1].h(k,0),F[0].h(0,b)),F[1].h(k,b)}else for(zt=0;zt<d;zt++){var de=h[zt],nn=de.va;if(e){0<y&&0<G&&it+x+nn.width>y&&(it<u&&mu(t,f,u-it,0,Mt,zt-1),tt++,G=0,Mt=zt,I=b,it=0,nt=135<a?-b-M:b+M),Cm(this,de,0,nt);var $e=0;if(0===G)F=de.Eq,H=nn.width,W=nn.height,(null===(O=de.sq)||null===F||a!==Xr(de))&&(O=Bi(this,2),F=Bi(this,2),O[0].h(0,0),O[1].h(0,W),F[0].h(H,0),F[1].h(H,W));else{var Me=ye();$e=(W=t1(this,t,de,O,F,H,W,Me)).x,O=Me[0],F=Me[1],H=W.width,W=W.height,oe(Me),it<nn.width&&0>$e&&(Ch(t,-$e,0,Mt,zt-1),Dm(O,-$e,0),Dm(F,-$e,0),$e=0)}de.U.h($e,nt),k=Math.max(k,H),b=Math.max(b,I+(0===tt?0:M)+nn.height),it=H}else 0<y&&0<G&&nt+x+nn.height>y&&(nt<u&&mu(t,f,0,u-nt,Mt,zt-1),tt++,G=0,Mt=zt,I=k,nt=0,it=135<a?-k-M:k+M),Cm(this,de,it,0),$e=0,0===G?(F=de.Eq,H=nn.width,W=nn.height,(null===(O=de.sq)||null===F||a!==Xr(de))&&(O=Bi(this,2),F=Bi(this,2),O[0].h(0,0),O[1].h(H,0),F[0].h(0,W),F[1].h(H,W))):($e=(W=t1(this,t,de,O,F,H,W,Me=ye())).x,O=Me[0],F=Me[1],H=W.width,W=W.height,oe(Me),nt<nn.height&&0>$e&&(Ch(t,0,-$e,Mt,zt-1),Dm(O,0,-$e),Dm(F,0,-$e),$e=0)),de.U.h(it,$e),b=Math.max(b,W),k=Math.max(k,I+(0===tt?0:M)+nn.width),nt=W;G++}switch(0<tt&&(e?(b+=Math.max(0,n),it<k&&mu(t,f,k-it,0,Mt,d-1),0<S&&(g||Ch(t,S,0,0,d-1),k+=S)):(k+=Math.max(0,n),nt<b&&mu(t,f,0,b-nt,Mt,d-1),0<S&&(g||Ch(t,0,S,0,d-1),b+=S))),S=g=0,f){case qc:e?g+=k/2-t.focus.x-_/2:S+=b/2-t.focus.y-_/2;break;case fs:0<tt?e?g+=k/2-t.focus.x-_/2:S+=b/2-t.focus.y-_/2:e?g+=(gt=h[0].U.x+h[0].fa.x)+(h[d-1].U.x+h[d-1].fa.x+2*h[d-1].focus.x-gt)/2-t.focus.x-_/2:S+=(gt=h[0].U.y+h[0].fa.y)+(h[d-1].U.y+h[d-1].fa.y+2*h[d-1].focus.y-gt)/2-t.focus.y-_/2;break;case Xs:e?(g-=_,k+=_):(S-=_,b+=_);break;case jn:e?(g+=k-t.width+_,k+=_):(S+=b-t.height+_,b+=_);break;case vl:e?g+=1<d?gt+x/2-t.focus.x:h[0].focus.x-t.focus.x+h[0].fa.x:S+=1<d?gt+x/2-t.focus.y:h[0].focus.y-t.focus.y+h[0].fa.y;break;case $s:e?g+=k+x/2-t.focus.x:S+=b+x/2-t.focus.y;break;case Va:break;default:z("Unhandled alignment value "+f.toString())}for(_=0;_<d;_++)gt=h[_],e?gt.U.h(gt.U.x+gt.fa.x-g,gt.U.y+(135<a?(m?-b:-gt.va.height)+gt.fa.y-n:T+n+gt.fa.y)):gt.U.h(gt.U.x+(135<a?(m?-k:-gt.va.width)+gt.fa.x-n:i+n+gt.fa.x),gt.U.y+gt.fa.y-S);if(d=h=0,m?e?(k=f0(t,k,g),0>g&&(g=0),135<a&&(S+=b+n),b+=T+n,f===Va&&(h+=x/2+t.focus.x),d+=T+n):(135<a&&(g+=k+n),k+=i+n,b=p0(t,b,S),0>S&&(S=0),f===Va&&(d+=x/2+t.focus.y),h+=i+n):e?(null===t.comments?i>k&&(h=(k=g0(f,i-k,0)).x,d=k.y,k=i,g=0):k=f0(t,k,g),0>g&&(h-=g,g=0),135<a&&(S+=b+n),b=Math.max(Math.max(b,T),b+T+n),d+=T+n):(135<a&&(g+=k+n),k=Math.max(Math.max(k,i),k+i+n),null===t.comments?T>b&&(h=(b=g0(f,0,T-b)).x,d=b.y,b=T,S=0):b=p0(t,b,S),0>S&&(d-=S,S=0),h+=i+n),0<tt)a=Bi(this,4),tt=Bi(this,4),e?(a[2].h(0,T+n),a[3].h(a[2].x,b),tt[2].h(k,a[2].y),tt[3].h(tt[2].x,a[3].y)):(a[2].h(i+n,0),a[3].h(k,a[2].y),tt[2].h(a[2].x,b),tt[3].h(a[3].x,tt[2].y));else{for(a=Bi(this,O.length+2),tt=Bi(this,F.length+2),f=0;f<O.length;f++)a[f+2].h((m=O[f]).x+h,m.y+d);for(f=0;f<F.length;f++)tt[f+2].h((m=F[f]).x+h,m.y+d)}e?(a[0].h(g,0),a[1].h(a[0].x,T),a[2].y<a[1].y&&(a[2].x>a[0].x?a[2].assign(a[1]):a[1].assign(a[2])),a[3].y<a[2].y&&(a[3].x>a[0].x?a[3].assign(a[2]):a[2].assign(a[3])),tt[0].h(g+i,0),tt[1].h(tt[0].x,T),tt[2].y<tt[1].y&&(tt[2].x<tt[0].x?tt[2].assign(tt[1]):tt[1].assign(tt[2])),tt[3].y<tt[2].y&&(tt[3].x<tt[0].x?tt[3].assign(tt[2]):tt[2].assign(tt[3])),a[2].y-=n/2,tt[2].y-=n/2):(a[0].h(0,S),a[1].h(i,a[0].y),a[2].x<a[1].x&&(a[2].y>a[0].y?a[2].assign(a[1]):a[1].assign(a[2])),a[3].x<a[2].x&&(a[3].y>a[0].y?a[3].assign(a[2]):a[2].assign(a[3])),tt[0].h(0,S+T),tt[1].h(i,tt[0].y),tt[2].x<tt[1].x&&(tt[2].y<tt[0].y?tt[2].assign(tt[1]):tt[1].assign(tt[2])),tt[3].x<tt[2].x&&(tt[3].y<tt[0].y?tt[3].assign(tt[2]):tt[2].assign(tt[3])),a[2].x-=n/2,tt[2].x-=n/2),so(this,O),so(this,F),t.sq=a,t.Eq=tt,t.fa.h(g,S),t.va.h(k,b)}break;default:z("Unhandled compaction value "+t.compaction.toString())}}},Tt.prototype.arrangeTrees=function(){if(this.Gb===Xn)for(var t=this.Jb.iterator;t.next();){var e=t.value;if(e instanceof Ar){var n=e.node;if(null!==n){var i=n.position;n=i.x,i=i.y,isFinite(n)||(n=0),isFinite(i)||(i=0),Sm(this,e,n,i)}}}else{for(t=[],e=this.Jb.iterator;e.next();)(n=e.value)instanceof Ar&&t.push(n);switch(this.sorting){case vu:break;case Qc:t.reverse();break;case Ys:t.sort(this.comparer);break;case Xf:t.sort(this.comparer),t.reverse();break;default:z("Unhandled sorting value "+this.sorting.toString())}for(e=(n=this.arrangementOrigin).x,n=n.y,i=0;i<t.length;i++){var a=t[i];switch(Sm(this,a,e+a.fa.x,n+a.fa.y),this.Gb){case Sh:n+=a.va.height+this.Nd.height;break;case ed:e+=a.va.width+this.Nd.width;break;default:z("Unhandled arrangement value "+this.Gb.toString())}}}},Tt.prototype.commitLayout=function(){this.Yv(),this.commitNodes(),this.gv(),this.isRouting&&this.commitLinks()},Tt.prototype.commitNodes=function(){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();for(t.reset();t.next();)this.layoutComments(t.value)},Tt.prototype.gv=function(){if(this.layerStyle===km){for(var t=this.Aw,e=[],n=null,i=this.network.vertexes.iterator;i.next();){var a=i.value;null===n?n=a.bounds.copy():n.Nc(a.bounds);var u=e[a.level];u=void 0===u?Dh(a):Math.max(u,Dh(a)),e[a.level]=u}for(i=0;i<e.length;i++)void 0===e[i]&&(e[i]=0);if(90===this.angle||270===this.angle?(n.Gc(this.nodeSpacing/2,this.layerSpacing),i=new N(-this.nodeSpacing/2,-this.layerSpacing/2)):(n.Gc(this.layerSpacing,this.nodeSpacing/2),i=new N(-this.layerSpacing/2,-this.nodeSpacing/2)),a=[],n=90===this.angle||270===this.angle?n.width:n.height,u=0,180===this.angle||270===this.angle)for(var h=0;h<t.length;h++)u+=t[h]+e[h];for(h=0;h<t.length;h++){var d=t[h]+e[h];270===this.angle?a.push(new B(0,u-=d,n,d)):90===this.angle?(a.push(new B(0,u,n,d)),u+=d):180===this.angle?a.push(new B(u-=d,0,d,n)):(a.push(new B(u,0,d,n)),u+=d)}this.commitLayers(a,i)}},Tt.prototype.commitLayers=function(){},Tt.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},Tt.prototype.Yv=function(){for(var t=this.Jb.iterator;t.next();){var e=t.value;e instanceof Ar&&m0(this,e)}},Tt.prototype.setPortSpots=function(t){var e=t.alignment;if(ml(e)){var n=this.jd===Uo,i=Xr(t);switch(i){case 0:var a=Ki;break;case 90:a=Dr;break;case 180:a=jr;break;default:a=Cr}var u=t.children,h=u.length;switch(e){case vl:case Ho:for(e=0;e<h;e++){var d=u[e];if(null!==(d=(n?d.sourceEdges:d.destinationEdges).first())&&null!==(d=d.link)){var f=90===i||270===i?jr:Cr;if(1===h||e===h-1&&h%2==1)switch(i){case 0:f=jr;break;case 90:f=Cr;break;case 180:f=Ki;break;default:f=Dr}else e%2==0&&(f=90===i||270===i?Ki:Dr);n?(t.setsPortSpot&&(d.fromSpot=a),t.setsChildPortSpot&&(d.toSpot=f)):(t.setsPortSpot&&(d.fromSpot=f),t.setsChildPortSpot&&(d.toSpot=a))}}break;case $s:for(i=90===i||270===i?Ki:Dr,u=n?t.destinationEdges:t.sourceEdges;u.next();)null!==(h=u.value.link)&&(n?(t.setsPortSpot&&(h.fromSpot=a),t.setsChildPortSpot&&(h.toSpot=i)):(t.setsPortSpot&&(h.fromSpot=i),t.setsChildPortSpot&&(h.toSpot=a)));break;case Va:for(i=90===i||270===i?jr:Cr,u=n?t.destinationEdges:t.sourceEdges;u.next();)null!==(h=u.value.link)&&(n?(t.setsPortSpot&&(h.fromSpot=a),t.setsChildPortSpot&&(h.toSpot=i)):(t.setsPortSpot&&(h.fromSpot=i),t.setsChildPortSpot&&(h.toSpot=a)))}}else if(n=Xr(t),this.jd===Uo){for(a=t.destinationEdges;a.next();)if(null!==(i=a.value.link)){if(t.setsPortSpot)if(t.portSpot.Lb())switch(n){case 0:i.fromSpot=Ki;break;case 90:i.fromSpot=Dr;break;case 180:i.fromSpot=jr;break;default:i.fromSpot=Cr}else i.fromSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Lb())switch(n){case 0:i.toSpot=jr;break;case 90:i.toSpot=Cr;break;case 180:i.toSpot=Ki;break;default:i.toSpot=Dr}else i.toSpot=t.childPortSpot}}else for(a=t.sourceEdges;a.next();)if(null!==(i=a.value.link)){if(t.setsPortSpot)if(t.portSpot.Lb())switch(n){case 0:i.toSpot=Ki;break;case 90:i.toSpot=Dr;break;case 180:i.toSpot=jr;break;default:i.toSpot=Cr}else i.toSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Lb())switch(n){case 0:i.fromSpot=jr;break;case 90:i.fromSpot=Cr;break;case 180:i.fromSpot=Ki;break;default:i.fromSpot=Dr}else i.fromSpot=t.childPortSpot}},Dt.Object.defineProperties(Tt.prototype,{roots:{get:function(){return this.Jb},set:function(t){this.Jb!==t&&(this.Jb=t,this.B())}},path:{get:function(){return this.Yo},set:function(t){this.Yo!==t&&(this.Yo=t,this.B())}},treeStyle:{get:function(){return this.Qp},set:function(t){this.Gb===t||t!==Em&&t!==td&&t!==y0&&t!==v0||(this.Qp=t,this.B())}},layerStyle:{get:function(){return this.Gr},set:function(t){this.Gb===t||t!==e1&&t!==Tm&&t!==km||(this.Gr=t,this.B())}},comments:{get:function(){return this.gd},set:function(t){this.gd!==t&&(this.gd=t,this.B())}},arrangement:{get:function(){return this.Gb},set:function(t){this.Gb===t||t!==Sh&&t!==ed&&t!==Xn||(this.Gb=t,this.B())}},arrangementSpacing:{get:function(){return this.Nd},set:function(t){this.Nd.A(t)||(this.Nd.assign(t),this.B())}},rootDefaults:{get:function(){return this.V},set:function(t){this.V!==t&&(this.V=t,this.B())}},alternateDefaults:{get:function(){return this.W},set:function(t){this.W!==t&&(this.W=t,this.B())}},sorting:{get:function(){return this.V.sorting},set:function(t){this.V.sorting===t||t!==vu&&t!==Qc&&t!==Ys&&!Xf||(this.V.sorting=t,this.B())}},comparer:{get:function(){return this.V.comparer},set:function(t){this.V.comparer!==t&&(this.V.comparer=t,this.B())}},angle:{get:function(){return this.V.angle},set:function(t){this.V.angle!==t&&(0===t||90===t||180===t||270===t?(this.V.angle=t,this.B()):z("TreeLayout.angle must be 0, 90, 180, or 270"))}},alignment:{get:function(){return this.V.alignment},set:function(t){this.V.alignment!==t&&(this.V.alignment=t,this.B())}},nodeIndent:{get:function(){return this.V.nodeIndent},set:function(t){this.V.nodeIndent!==t&&0<=t&&(this.V.nodeIndent=t,this.B())}},nodeIndentPastParent:{get:function(){return this.V.nodeIndentPastParent},set:function(t){this.V.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.V.nodeIndentPastParent=t,this.B())}},nodeSpacing:{get:function(){return this.V.nodeSpacing},set:function(t){this.V.nodeSpacing!==t&&(this.V.nodeSpacing=t,this.B())}},layerSpacing:{get:function(){return this.V.layerSpacing},set:function(t){this.V.layerSpacing!==t&&(this.V.layerSpacing=t,this.B())}},layerSpacingParentOverlap:{get:function(){return this.V.layerSpacingParentOverlap},set:function(t){this.V.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.V.layerSpacingParentOverlap=t,this.B())}},compaction:{get:function(){return this.V.compaction},set:function(t){this.V.compaction===t||t!==It&&t!==$f||(this.V.compaction=t,this.B())}},breadthLimit:{get:function(){return this.V.breadthLimit},set:function(t){this.V.breadthLimit!==t&&0<=t&&(this.V.breadthLimit=t,this.B())}},rowSpacing:{get:function(){return this.V.rowSpacing},set:function(t){this.V.rowSpacing!==t&&(this.V.rowSpacing=t,this.B())}},rowIndent:{get:function(){return this.V.rowIndent},set:function(t){this.V.rowIndent!==t&&0<=t&&(this.V.rowIndent=t,this.B())}},commentSpacing:{get:function(){return this.V.commentSpacing},set:function(t){this.V.commentSpacing!==t&&(this.V.commentSpacing=t,this.B())}},commentMargin:{get:function(){return this.V.commentMargin},set:function(t){this.V.commentMargin!==t&&(this.V.commentMargin=t,this.B())}},setsPortSpot:{get:function(){return this.V.setsPortSpot},set:function(t){this.V.setsPortSpot!==t&&(this.V.setsPortSpot=t,this.B())}},portSpot:{get:function(){return this.V.portSpot},set:function(t){this.V.portSpot.A(t)||(this.V.portSpot=t,this.B())}},setsChildPortSpot:{get:function(){return this.V.setsChildPortSpot},set:function(t){this.V.setsChildPortSpot!==t&&(this.V.setsChildPortSpot=t,this.B())}},childPortSpot:{get:function(){return this.V.childPortSpot},set:function(t){this.V.childPortSpot.A(t)||(this.V.childPortSpot=t,this.B())}},alternateSorting:{get:function(){return this.W.sorting},set:function(t){this.W.sorting===t||t!==vu&&t!==Qc&&t!==Ys&&!Xf||(this.W.sorting=t,this.B())}},alternateComparer:{get:function(){return this.W.comparer},set:function(t){this.W.comparer!==t&&(this.W.comparer=t,this.B())}},alternateAngle:{get:function(){return this.W.angle},set:function(t){this.W.angle===t||0!==t&&90!==t&&180!==t&&270!==t||(this.W.angle=t,this.B())}},alternateAlignment:{get:function(){return this.W.alignment},set:function(t){this.W.alignment!==t&&(this.W.alignment=t,this.B())}},alternateNodeIndent:{get:function(){return this.W.nodeIndent},set:function(t){this.W.nodeIndent!==t&&0<=t&&(this.W.nodeIndent=t,this.B())}},alternateNodeIndentPastParent:{get:function(){return this.W.nodeIndentPastParent},set:function(t){this.W.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.W.nodeIndentPastParent=t,this.B())}},alternateNodeSpacing:{get:function(){return this.W.nodeSpacing},set:function(t){this.W.nodeSpacing!==t&&(this.W.nodeSpacing=t,this.B())}},alternateLayerSpacing:{get:function(){return this.W.layerSpacing},set:function(t){this.W.layerSpacing!==t&&(this.W.layerSpacing=t,this.B())}},alternateLayerSpacingParentOverlap:{get:function(){return this.W.layerSpacingParentOverlap},set:function(t){this.W.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.W.layerSpacingParentOverlap=t,this.B())}},alternateCompaction:{get:function(){return this.W.compaction},set:function(t){this.W.compaction===t||t!==It&&t!==$f||(this.W.compaction=t,this.B())}},alternateBreadthLimit:{get:function(){return this.W.breadthLimit},set:function(t){this.W.breadthLimit!==t&&0<=t&&(this.W.breadthLimit=t,this.B())}},alternateRowSpacing:{get:function(){return this.W.rowSpacing},set:function(t){this.W.rowSpacing!==t&&(this.W.rowSpacing=t,this.B())}},alternateRowIndent:{get:function(){return this.W.rowIndent},set:function(t){this.W.rowIndent!==t&&0<=t&&(this.W.rowIndent=t,this.B())}},alternateCommentSpacing:{get:function(){return this.W.commentSpacing},set:function(t){this.W.commentSpacing!==t&&(this.W.commentSpacing=t,this.B())}},alternateCommentMargin:{get:function(){return this.W.commentMargin},set:function(t){this.W.commentMargin!==t&&(this.W.commentMargin=t,this.B())}},alternateSetsPortSpot:{get:function(){return this.W.setsPortSpot},set:function(t){this.W.setsPortSpot!==t&&(this.W.setsPortSpot=t,this.B())}},alternatePortSpot:{get:function(){return this.W.portSpot},set:function(t){this.W.portSpot.A(t)||(this.W.portSpot=t,this.B())}},alternateSetsChildPortSpot:{get:function(){return this.W.setsChildPortSpot},set:function(t){this.W.setsChildPortSpot!==t&&(this.W.setsChildPortSpot=t,this.B())}},alternateChildPortSpot:{get:function(){return this.W.childPortSpot},set:function(t){this.W.childPortSpot.A(t)||(this.W.childPortSpot=t,this.B())}}});var Yf=new J(Tt,"PathDefault",-1),Uo=new J(Tt,"PathDestination",0),yu=new J(Tt,"PathSource",1),vu=new J(Tt,"SortingForwards",10),Qc=new J(Tt,"SortingReverse",11),Ys=new J(Tt,"SortingAscending",12),Xf=new J(Tt,"SortingDescending",13),qc=new J(Tt,"AlignmentCenterSubtrees",20),fs=new J(Tt,"AlignmentCenterChildren",21),Xs=new J(Tt,"AlignmentStart",22),jn=new J(Tt,"AlignmentEnd",23),vl=new J(Tt,"AlignmentBus",24),Ho=new J(Tt,"AlignmentBusBranching",25),$s=new J(Tt,"AlignmentTopLeftBus",26),Va=new J(Tt,"AlignmentBottomRightBus",27),It=new J(Tt,"CompactionNone",30),$f=new J(Tt,"CompactionBlock",31),Em=new J(Tt,"StyleLayered",40),y0=new J(Tt,"StyleLastParents",41),td=new J(Tt,"StyleAlternating",42),v0=new J(Tt,"StyleRootOnly",43),Sh=new J(Tt,"ArrangementVertical",50),ed=new J(Tt,"ArrangementHorizontal",51),Xn=new J(Tt,"ArrangementFixedRoots",52),e1=new J(Tt,"LayerIndividual",60),Tm=new J(Tt,"LayerSiblings",61),km=new J(Tt,"LayerUniform",62);function Eh(t){te.call(this,t)}function Ar(t){Be.call(this,t),this.Ga=!1,this.yc=null,this.C=[],this.Oc=this.Wa=this.M=this.Ha=0,this.gd=null,this.U=new N(0,0),this.va=new mt(0,0),this.fa=new N(0,0),this.Cm=this.Bm=this.TA=!1,this.Eq=this.sq=null,this.Yc=vu,this.Rc=Ze,this.xb=0,this.wb=fs,this.Pr=this.Or=0,this.Qr=20,this.Zd=50,this.Fr=0,this.Yq=$f,this.Rq=0,this.Zr=25,this.Xq=this.Yr=10,this.Wq=20,this.ds=!0,this.Vr=Fi,this.cs=!0,this.Uq=Fi}function Th(t){Yn.call(this,t),this.yu=new N(0,0)}Tt.className="TreeLayout",Tt.PathDefault=Yf,Tt.PathDestination=Uo,Tt.PathSource=yu,Tt.SortingForwards=vu,Tt.SortingReverse=Qc,Tt.SortingAscending=Ys,Tt.SortingDescending=Xf,Tt.AlignmentCenterSubtrees=qc,Tt.AlignmentCenterChildren=fs,Tt.AlignmentStart=Xs,Tt.AlignmentEnd=jn,Tt.AlignmentBus=vl,Tt.AlignmentBusBranching=Ho,Tt.AlignmentTopLeftBus=$s,Tt.AlignmentBottomRightBus=Va,Tt.CompactionNone=It,Tt.CompactionBlock=$f,Tt.StyleLayered=Em,Tt.StyleLastParents=y0,Tt.StyleAlternating=td,Tt.StyleRootOnly=v0,Tt.ArrangementVertical=Sh,Tt.ArrangementHorizontal=ed,Tt.ArrangementFixedRoots=Xn,Tt.LayerIndividual=e1,Tt.LayerSiblings=Tm,Tt.LayerUniform=km,Ft(Eh,te),Eh.prototype.createVertex=function(){return new Ar(this)},Eh.prototype.createEdge=function(){return new Th(this)},Eh.className="TreeNetwork",Ft(Ar,Be),Ar.prototype.copyInheritedPropertiesFrom=function(t){null!==t&&(this.Yc=t.sorting,this.Rc=t.comparer,this.xb=t.angle,this.wb=t.alignment,this.Or=t.nodeIndent,this.Pr=t.nodeIndentPastParent,this.Qr=t.nodeSpacing,this.Zd=t.layerSpacing,this.Fr=t.layerSpacingParentOverlap,this.Yq=t.compaction,this.Rq=t.breadthLimit,this.Zr=t.rowSpacing,this.Yr=t.rowIndent,this.Xq=t.commentSpacing,this.Wq=t.commentMargin,this.ds=t.setsPortSpot,this.Vr=t.portSpot,this.cs=t.setsChildPortSpot,this.Uq=t.childPortSpot)},Dt.Object.defineProperties(Ar.prototype,{initialized:{get:function(){return this.Ga},set:function(t){this.Ga!==t&&(this.Ga=t)}},parent:{get:function(){return this.yc},set:function(t){this.yc!==t&&(this.yc=t)}},children:{get:function(){return this.C},set:function(t){if(this.C!==t){if(null!==t)for(var e=t.length,n=0;n<e;n++);this.C=t}}},level:{get:function(){return this.Ha},set:function(t){this.Ha!==t&&(this.Ha=t)}},descendantCount:{get:function(){return this.M},set:function(t){this.M!==t&&(this.M=t)}},maxChildrenCount:{get:function(){return this.Wa},set:function(t){this.Wa!==t&&(this.Wa=t)}},maxGenerationCount:{get:function(){return this.Oc},set:function(t){this.Oc!==t&&(this.Oc=t)}},comments:{get:function(){return this.gd},set:function(t){if(this.gd!==t){if(null!==t)for(var e=t.length,n=0;n<e;n++);this.gd=t}}},sorting:{get:function(){return this.Yc},set:function(t){this.Yc!==t&&(this.Yc=t)}},comparer:{get:function(){return this.Rc},set:function(t){this.Rc!==t&&(this.Rc=t)}},angle:{get:function(){return this.xb},set:function(t){this.xb!==t&&(this.xb=t)}},alignment:{get:function(){return this.wb},set:function(t){this.wb!==t&&(this.wb=t)}},nodeIndent:{get:function(){return this.Or},set:function(t){this.Or!==t&&(this.Or=t)}},nodeIndentPastParent:{get:function(){return this.Pr},set:function(t){this.Pr!==t&&(this.Pr=t)}},nodeSpacing:{get:function(){return this.Qr},set:function(t){this.Qr!==t&&(this.Qr=t)}},layerSpacing:{get:function(){return this.Zd},set:function(t){this.Zd!==t&&(this.Zd=t)}},layerSpacingParentOverlap:{get:function(){return this.Fr},set:function(t){this.Fr!==t&&(this.Fr=t)}},compaction:{get:function(){return this.Yq},set:function(t){this.Yq!==t&&(this.Yq=t)}},breadthLimit:{get:function(){return this.Rq},set:function(t){this.Rq!==t&&(this.Rq=t)}},rowSpacing:{get:function(){return this.Zr},set:function(t){this.Zr!==t&&(this.Zr=t)}},rowIndent:{get:function(){return this.Yr},set:function(t){this.Yr!==t&&(this.Yr=t)}},commentSpacing:{get:function(){return this.Xq},set:function(t){this.Xq!==t&&(this.Xq=t)}},commentMargin:{get:function(){return this.Wq},set:function(t){this.Wq!==t&&(this.Wq=t)}},setsPortSpot:{get:function(){return this.ds},set:function(t){this.ds!==t&&(this.ds=t)}},portSpot:{get:function(){return this.Vr},set:function(t){this.Vr.A(t)||(this.Vr=t)}},setsChildPortSpot:{get:function(){return this.cs},set:function(t){this.cs!==t&&(this.cs=t)}},childPortSpot:{get:function(){return this.Uq},set:function(t){this.Uq.A(t)||(this.Uq=t)}},childrenCount:{get:function(){return this.children.length}},relativePosition:{get:function(){return this.U},set:function(t){this.U.set(t)}},subtreeSize:{get:function(){return this.va},set:function(t){this.va.set(t)}},subtreeOffset:{get:function(){return this.fa},set:function(t){this.fa.set(t)}}}),Ar.className="TreeVertex",Ft(Th,Yn),Th.prototype.commit=function(){var t=this.link;if(null!==t&&!t.isAvoiding){var e=this.network.layout,n=null,i=null;switch(e.jd){case Uo:n=this.fromVertex,i=this.toVertex;break;case yu:n=this.toVertex,i=this.fromVertex;break;default:z("Unhandled path value "+e.jd.toString())}if(null!==n&&null!==i)if(0!==(e=this.yu).x||0!==e.y||n.TA){i=n.bounds;var a=Xr(n),u=Dh(n),h=n.rowSpacing;t.pg();var g,d=t.curve===Ei,f=t.isOrthogonal;if(t.Hh(),f||d){for(g=2;4<t.pointsCount;)t.Rv(2);var m=t.i(1),y=t.i(2)}else{for(g=1;3<t.pointsCount;)t.Rv(1);m=t.i(0),y=t.i(t.pointsCount-1)}var x=t.i(t.pointsCount-1);0===a?(n.alignment===jn?(a=i.bottom+e.y,0===e.y&&m.y>x.y+n.rowIndent&&(a=Math.min(a,Math.max(m.y,a-zs(n))))):n.alignment===Xs?(a=i.top+e.y,0===e.y&&m.y<x.y-n.rowIndent&&(a=Math.max(a,Math.min(m.y,a+zs(n))))):a=n.Bm||n.Cm&&1===n.maxGenerationCount?i.top-n.fa.y+e.y:i.y+i.height/2+e.y,d?(t.l(g,m.x,a),g++,t.l(g,i.right+u,a),g++,t.l(g,i.right+u+(e.x-h)/3,a),g++,t.l(g,i.right+u+2*(e.x-h)/3,a),g++,t.l(g,i.right+u+(e.x-h),a),g++,t.l(g,y.x,a)):(f&&(t.l(g,i.right+u/2,m.y),g++),t.l(g,i.right+u/2,a),g++,t.l(g,i.right+u+e.x-(f?h/2:h),a),g++,f&&t.l(g,t.i(g-1).x,y.y))):90===a?(n.alignment===jn?(a=i.right+e.x,0===e.x&&m.x>x.x+n.rowIndent&&(a=Math.min(a,Math.max(m.x,a-zs(n))))):n.alignment===Xs?(a=i.left+e.x,0===e.x&&m.x<x.x-n.rowIndent&&(a=Math.max(a,Math.min(m.x,a+zs(n))))):a=n.Bm||n.Cm&&1===n.maxGenerationCount?i.left-n.fa.x+e.x:i.x+i.width/2+e.x,d?(t.l(g,a,m.y),g++,t.l(g,a,i.bottom+u),g++,t.l(g,a,i.bottom+u+(e.y-h)/3),g++,t.l(g,a,i.bottom+u+2*(e.y-h)/3),g++,t.l(g,a,i.bottom+u+(e.y-h)),g++,t.l(g,a,y.y)):(f&&(t.l(g,m.x,i.bottom+u/2),g++),t.l(g,a,i.bottom+u/2),g++,t.l(g,a,i.bottom+u+e.y-(f?h/2:h)),g++,f&&t.l(g,y.x,t.i(g-1).y))):180===a?(n.alignment===jn?(a=i.bottom+e.y,0===e.y&&m.y>x.y+n.rowIndent&&(a=Math.min(a,Math.max(m.y,a-zs(n))))):n.alignment===Xs?(a=i.top+e.y,0===e.y&&m.y<x.y-n.rowIndent&&(a=Math.max(a,Math.min(m.y,a+zs(n))))):a=n.Bm||n.Cm&&1===n.maxGenerationCount?i.top-n.fa.y+e.y:i.y+i.height/2+e.y,d?(t.l(g,m.x,a),g++,t.l(g,i.left-u,a),g++,t.l(g,i.left-u+(e.x+h)/3,a),g++,t.l(g,i.left-u+2*(e.x+h)/3,a),g++,t.l(g,i.left-u+(e.x+h),a),g++,t.l(g,y.x,a)):(f&&(t.l(g,i.left-u/2,m.y),g++),t.l(g,i.left-u/2,a),g++,t.l(g,i.left-u+e.x+(f?h/2:h),a),g++,f&&t.l(g,t.i(g-1).x,y.y))):270===a?(n.alignment===jn?(a=i.right+e.x,0===e.x&&m.x>x.x+n.rowIndent&&(a=Math.min(a,Math.max(m.x,a-zs(n))))):n.alignment===Xs?(a=i.left+e.x,0===e.x&&m.x<x.x-n.rowIndent&&(a=Math.max(a,Math.min(m.x,a+zs(n))))):a=n.Bm||n.Cm&&1===n.maxGenerationCount?i.left-n.fa.x+e.x:i.x+i.width/2+e.x,d?(t.l(g,a,m.y),g++,t.l(g,a,i.top-u),g++,t.l(g,a,i.top-u+(e.y+h)/3),g++,t.l(g,a,i.top-u+2*(e.y+h)/3),g++,t.l(g,a,i.top-u+(e.y+h)),g++,t.l(g,a,y.y)):(f&&(t.l(g,m.x,i.top-u/2),g++),t.l(g,a,i.top-u/2),g++,t.l(g,a,i.top-u+e.y+(f?h/2:h)),g++,f&&t.l(g,y.x,t.i(g-1).y))):z("Invalid angle "+a),t.rf()}else t=this.link,(u=Xr(n))!==Xr(i)&&(h=Dh(n),d=n.bounds,n=i.bounds,0===u&&n.left-d.right<h+1||90===u&&n.top-d.bottom<h+1||180===u&&d.left-n.right<h+1||270===u&&d.top-n.bottom<h+1||(t.pg(),n=t.curve===Ei,e=t.isOrthogonal,i=ml(this.fromVertex.alignment),t.Hh(),0===u?(u=d.right+h/2,n?4===t.pointsCount&&(n=t.i(3).y,t.L(1,u-20,t.i(1).y),t.l(2,u-20,n),t.l(3,u,n),t.l(4,u+20,n),t.L(5,t.i(5).x,n)):e?i?t.L(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.L(2,u,t.i(2).y),t.L(3,u,t.i(3).y)):4===t.pointsCount?t.l(2,u,t.i(2).y):3===t.pointsCount?t.L(1,u,t.i(2).y):2===t.pointsCount&&t.l(1,u,t.i(1).y)):90===u?(u=d.bottom+h/2,n?4===t.pointsCount&&(n=t.i(3).x,t.L(1,t.i(1).x,u-20),t.l(2,n,u-20),t.l(3,n,u),t.l(4,n,u+20),t.L(5,n,t.i(5).y)):e?i?t.L(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.L(2,t.i(2).x,u),t.L(3,t.i(3).x,u)):4===t.pointsCount?t.l(2,t.i(2).x,u):3===t.pointsCount?t.L(1,t.i(2).x,u):2===t.pointsCount&&t.l(1,t.i(1).x,u)):180===u?(u=d.left-h/2,n?4===t.pointsCount&&(n=t.i(3).y,t.L(1,u+20,t.i(1).y),t.l(2,u+20,n),t.l(3,u,n),t.l(4,u-20,n),t.L(5,t.i(5).x,n)):e?i?t.L(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.L(2,u,t.i(2).y),t.L(3,u,t.i(3).y)):4===t.pointsCount?t.l(2,u,t.i(2).y):3===t.pointsCount?t.L(1,u,t.i(2).y):2===t.pointsCount&&t.l(1,u,t.i(1).y)):270===u&&(u=d.top-h/2,n?4===t.pointsCount&&(n=t.i(3).x,t.L(1,t.i(1).x,u+20),t.l(2,n,u+20),t.l(3,n,u),t.l(4,n,u-20),t.L(5,n,t.i(5).y)):e?i?t.L(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.L(2,t.i(2).x,u),t.L(3,t.i(3).x,u)):4===t.pointsCount?t.l(2,t.i(2).x,u):3===t.pointsCount?t.L(1,t.i(2).x,u):2===t.pointsCount&&t.l(1,t.i(1).x,u)),t.rf()))}},Dt.Object.defineProperties(Th.prototype,{fromVertex:{get:function(){return this.Tc},set:function(t){this.Tc!==t&&(this.Tc=t)}},toVertex:{get:function(){return this.ad},set:function(t){this.ad!==t&&(this.ad=t)}},relativePoint:{get:function(){return this.yu},set:function(t){this.yu.set(t)}}}),Th.className="TreeEdge",Ee.prototype.initializeStandardTools=function(){this.Za("Action",new ts,this.mouseDownTools),this.Za("Relinking",new ii,this.mouseDownTools),this.Za("LinkReshaping",new qe,this.mouseDownTools),this.Za("Rotating",new Ri,this.mouseDownTools),this.Za("Resizing",new Kn,this.mouseDownTools),this.Za("Linking",new ni,this.mouseMoveTools),this.Za("Dragging",new ne,this.mouseMoveTools),this.Za("DragSelecting",new es,this.mouseMoveTools),this.Za("Panning",new qi,this.mouseMoveTools),this.Za("ContextMenu",new ur,this.mouseUpTools),this.Za("TextEditing",new se,this.mouseUpTools),this.Za("ClickCreating",new Ja,this.mouseUpTools),this.Za("ClickSelecting",new Za,this.mouseUpTools)},jo("Horizontal",new og),jo("Spot",new ag),jo("Table",new ug),jo("Viewbox",new rf),jo("TableRow",new nf),jo("TableColumn",new Tc),jo("Graduated",new kc),jo("Grid",new Qu),Yu.add("GraphLinksModel",Xe),Yu.add("TreeModel",vi),bv(gn,null),bv(Gt,null);var Wf=dt.go,Kf={get licenseKey(){return j.licenseKey},set licenseKey(t){j.licenseKey=t},get version(){return j.version},Group:vt,EnumValue:J,List:et,Set:K,Map:xt,Point:N,Size:mt,Rect:B,Margin:Lt,Spot:ct,Geometry:q,PathFigure:De,PathSegment:Yt,InputEvent:Qi,DiagramEvent:bu,ChangedEvent:le,Model:at,GraphLinksModel:kt,TreeModel:ui,Binding:Fe,Transaction:bn,UndoManager:be,CommandHandler:Kt,Tool:Ut,DraggingTool:ne,DraggingInfo:hr,DraggingOptions:Wu,LinkingBaseTool:Sn,LinkingTool:ni,RelinkingTool:ii,LinkReshapingTool:qe,ResizingTool:Kn,RotatingTool:Ri,ClickSelectingTool:Za,ActionTool:ts,ClickCreatingTool:Ja,HTMLInfo:mo,ContextMenuTool:ur,DragSelectingTool:es,PanningTool:qi,TextEditingTool:se,ToolManager:Ee,Animation:wn,AnimationManager:ji,AnimationTrigger:Ps,Layer:pi,Diagram:j,Palette:Jd,Overview:wa,Brush:Bt,GraphObject:ut,Panel:Y,RowColumnDefinition:en,Shape:wt,TextBlock:Zt,Picture:er,Part:ht,Adornment:At,Node:Q,Link:X,Placeholder:yi,Layout:Rt,LayoutNetwork:te,LayoutVertex:Be,LayoutEdge:Yn,GridLayout:dn,PanelLayout:tn,CircularLayout:Ce,CircularNetwork:xh,CircularVertex:Zc,CircularEdge:jf,ForceDirectedLayout:gn,ForceDirectedNetwork:du,ForceDirectedVertex:fu,ForceDirectedEdge:pu,LayeredDigraphLayout:Gt,LayeredDigraphNetwork:Le,LayeredDigraphVertex:pl,LayeredDigraphEdge:gl,TreeLayout:Tt,TreeNetwork:Eh,TreeVertex:Ar,TreeEdge:Th};"object"==typeof Wf&&Wf.version&&z("WARNING: a `go` object on the root object is already defined.  "+("Debug"in Wf?"debug ":"")+"version: "+Wf.version+", replaced with version: "+Kf.version),j.prototype.go=Kf,dt.go=Kf,(void 0===dt||void 0===dt.module||"object"!=typeof dt.module.exports)&&dt.define&&"function"==typeof dt.define&&dt.define.amd&&dt.define(Kf),"object"==typeof Gh.exports&&(Gh.exports="undefined"!=typeof global?global.go:self.go)}(),"undefined"!=typeof global?global:self;const Ct="undefined"!=typeof global?global.go:self.go,Cs=Ct.Group,Km=Ct.Map,_D=Ct.Point,_p=Ct.Size,Cp=Ct.Spot,SD=Ct.GraphLinksModel,bi=Ct.Binding,zh=Ct.CommandHandler,W0=Ct.DraggingTool,xM=Ct.ResizingTool,K0=Ct.RotatingTool,CM=Ct.Diagram,DM=Ct.Palette,SM=Ct.Overview,Jm=Ct.GraphObject,FD=Ct.Panel,LD=Ct.Shape,Qm=Ct.TextBlock,EM=Ct.Part,jD=Ct.Adornment,TM=Ct.Node,tx=Ct.Link,kM=Ct.Placeholder,PM=Ct.GridLayout}},Gh=>{Gh(Gh.s=292)}]);